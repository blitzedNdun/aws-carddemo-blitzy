# Technical Specification

# 0. SUMMARY OF CHANGES

## 0.1 INTENT CLARIFICATION

### 0.1.1 Core Objective

Based on the provided requirements, the Blitzy platform understands that the objective is to execute a comprehensive technology stack migration from an IBM mainframe COBOL/CICS environment to a modern cloud-native Java 21/Spring Boot architecture while maintaining 100% functional parity with the existing system. This migration encompasses:

- **Complete platform transformation** from z/OS mainframe to containerized cloud infrastructure
- **Language modernization** from COBOL to Java 21 with Spring Boot framework
- **Database migration** from VSAM KSDS datasets to PostgreSQL relational database
- **UI transformation** from 3270 terminal screens (BMS Maps) to React Single Page Application
- **Infrastructure modernization** from mainframe-based deployment to Docker/Kubernetes orchestration
- **Security framework migration** from RACF to Spring Security
- **Batch processing conversion** from JCL to Spring Batch

The migration explicitly targets the 20+ identified COBOL programs and their direct dependencies within the credit card management system boundaries, preserving all existing business logic without enhancement or optimization beyond what is required for the technology transition.

### 0.1.2 Special Instructions and Constraints

**CRITICAL DIRECTIVES:**
- **Minimal Change Approach**: "Target minimal change approach - implement only the technology stack conversion without enhancing business functionality"
- **No Advanced Features**: "DO NOT implement any unnecessary advanced Java 21 features that would alter application behavior"
- **Preserve Exact Logic**: "Focus on direct COBOL-to-Java translation maintaining existing program flow and logic"
- **System Boundaries**: "Focus exclusively on the 20+ identified COBOL programs and their direct dependencies. DO NOT modify any shared mainframe utilities or system-level components that serve other applications"
- **Functional Preservation**: "All core business logic MUST work identically to the current COBOL implementation"
- **Interface Contracts**: "External interfaces to payment networks, bank core systems, and regulatory reporting systems MUST maintain identical data formats and communication protocols"

**User Example of Required Precision Handling:**
"COBOL COMP-3 fields and Java BigDecimal implementations" - This indicates the need for exact decimal precision matching in financial calculations, requiring careful configuration of BigDecimal scale and rounding modes to replicate COBOL's packed decimal behavior.

### 0.1.3 Technical Interpretation

These requirements translate to the following technical implementation strategy:

1. **To preserve COBOL business logic exactly**, we will translate each COBOL program paragraph-by-paragraph into corresponding Java methods within Spring Boot service classes, maintaining the same 0000-init, 1000-input, 2000-process, 3000-output, 9000-close structure as Java method naming conventions

2. **To replicate CICS transaction processing**, we will implement Spring Boot REST controllers that map one-to-one with existing CICS transaction codes (CC00, CT00, etc.), maintaining identical request/response patterns and session state management through Spring Session

3. **To maintain VSAM data access patterns**, we will create PostgreSQL table structures that mirror VSAM KSDS organization with composite primary keys matching existing key structures, implementing JPA repositories that replicate STARTBR/READNEXT/READPREV browse operations

4. **To convert BMS screen handling**, we will generate React components that exactly replicate each BMS map's field layout and validation rules, preserving PF-key navigation through keyboard event handlers

5. **To ensure data precision parity**, we will configure all Java BigDecimal operations with scale and rounding modes that exactly match COBOL COMP-3 packed decimal behavior, implementing custom converters for COBOL data type mappings

## 0.2 TECHNICAL SCOPE

### 0.2.1 Primary Objectives with Implementation Approach

**Objective 1: COBOL-to-Java Program Translation**
- Achieve direct translation of 36 COBOL programs (24 CICS + 12 batch) by creating corresponding Java classes with Spring Boot annotations
- Map each COBOL paragraph to a Java method maintaining identical logic flow
- Preserve all data validation rules and business calculations without modification
- Success Factor: Byte-for-byte identical output for all test scenarios

**Objective 2: VSAM-to-PostgreSQL Data Migration**
- Achieve VSAM KSDS functionality replication by designing PostgreSQL tables with composite keys matching VSAM key structures
- Implement cursor-based pagination to replicate STARTBR/READNEXT/READPREV operations
- Maintain exact field lengths and data types through custom JPA converters
- Success Factor: Identical query performance and data integrity constraints

**Objective 3: CICS-to-Spring Boot Transaction Processing**
- Achieve CICS transaction routing parity by implementing REST endpoints for each transaction code
- Replicate COMMAREA through Spring Session with 32KB state management
- Implement transaction boundaries matching CICS SYNCPOINT behavior
- Success Factor: Sub-200ms response times for card authorization requests

**Objective 4: BMS-to-React UI Transformation**
- Achieve screen-for-screen functional parity by generating React components from BMS map definitions
- Preserve all field validation and navigation patterns
- Maintain PF-key functionality through keyboard event mapping
- Success Factor: Identical user workflows and data entry patterns

**Objective 5: JCL-to-Spring Batch Migration**
- Achieve batch processing parity by converting JCL jobs to Spring Batch jobs
- Maintain exact processing sequences and restart capabilities
- Preserve file-based interfaces with identical record layouts
- Success Factor: Completion within existing 4-hour processing windows

### 0.2.2 Component Impact Analysis

**Direct Modifications Required:**

**Backend Services (Spring Boot Application)**
- Create `backend/src/main/java/com/carddemo/service/` package structure
  - Modify: Generate 36 service classes from COBOL programs
  - Extend: Implement @Service annotations and dependency injection
  - Specific changes: Convert EXEC CICS commands to REST operations

**REST Controllers**
- Create `backend/src/main/java/com/carddemo/controller/` package
  - Modify: Map 24 CICS transactions to @RestController endpoints
  - Extend: Add @RequestMapping for transaction codes (CC00, CT00, etc.)
  - Specific changes: Convert SEND/RECEIVE MAP to JSON request/response

**Data Access Layer**
- Create `backend/src/main/java/com/carddemo/repository/` package
  - Modify: Generate JPA entities from VSAM record layouts
  - Extend: Implement Spring Data JPA repositories
  - Specific changes: Map VSAM keys to @Id and @EmbeddedId annotations

**Frontend Components (React SPA)**
- Create `frontend/src/components/screens/` directory
  - Modify: Generate 18 React components from BMS mapsets
  - Extend: Implement form validation matching BMS field rules
  - Specific changes: Convert 3270 attributes to React state management

**Indirect Impacts and Dependencies:**

**Database Schema**
- Component: PostgreSQL database structure
  - Update: Create schema matching VSAM dataset organization
  - Reason: Direct translation of VSAM KSDS to relational tables

**Session Management**
- Component: Spring Session configuration
  - Update: Configure Redis for COMMAREA-equivalent state storage
  - Reason: Replicate CICS session state management

**Transaction Management**
- Component: Spring Transaction configuration
  - Update: Configure @Transactional boundaries matching CICS SYNCPOINT
  - Reason: Maintain ACID properties of CICS transactions

**New Components Introduction:**

**API Gateway**
- Component: Spring Cloud Gateway
  - Create: Route management for frontend-backend communication
  - Responsibility: Handle authentication and request routing

**Configuration Service**
- Component: Spring Cloud Config
  - Create: Centralized configuration management
  - Responsibility: Manage environment-specific properties

**Monitoring Service**
- Component: Spring Boot Actuator with Micrometer
  - Create: Application metrics and health checks
  - Responsibility: Replace mainframe monitoring capabilities

### 0.2.3 File and Path Mapping

| Target File/Module | Source Reference | Context Dependencies | Modification Type |
|-------------------|------------------|---------------------|-------------------|
| `backend/src/main/java/com/carddemo/service/SignOnService.java` | `app/cbl/COSGN00C.cbl` | `app/cpy/COCOM01Y.cpy`, `app/bms/COSGN00.bms` | Direct translation |
| `backend/src/main/java/com/carddemo/controller/TransactionController.java` | `app/cbl/COTRN00C.cbl`, `COTRN01C.cbl`, `COTRN02C.cbl` | `app/cpy/CVTRA05Y.cpy` | REST endpoint creation |
| `backend/src/main/java/com/carddemo/entity/Account.java` | `app/cpy/CVACT01Y.cpy` | VSAM ACCTDAT structure | JPA entity generation |
| `backend/src/main/java/com/carddemo/entity/Transaction.java` | `app/cpy/CVTRA05Y.cpy` | VSAM TRANSACT structure | JPA entity generation |
| `backend/src/main/java/com/carddemo/repository/AccountRepository.java` | VSAM ACCTDAT access patterns | `app/cbl/COACTVWC.cbl` | Repository pattern implementation |
| `backend/src/main/java/com/carddemo/batch/DailyTransactionJob.java` | `app/cbl/CBTRN01C.cbl`, `CBTRN02C.cbl` | JCL job parameters | Spring Batch job creation |
| `backend/src/main/java/com/carddemo/batch/InterestCalculationJob.java` | `app/cbl/CBACT04C.cbl` | Interest calculation logic | Spring Batch job creation |
| `backend/src/main/resources/application.yml` | CICS region configuration | Environment variables | Configuration translation |
| `backend/src/main/resources/schema.sql` | VSAM dataset definitions | `app/catlg/LISTCAT.txt` | DDL generation |
| `frontend/src/components/screens/SignOn.jsx` | `app/bms/COSGN00.bms` | Screen layout definition | React component generation |
| `frontend/src/components/screens/MainMenu.jsx` | `app/bms/COMEN01.bms` | Menu structure | React component generation |
| `frontend/src/components/screens/TransactionList.jsx` | `app/bms/COTRN00.bms` | List layout | React component generation |
| `frontend/src/services/api.js` | CICS transaction routing | REST endpoint mapping | API client creation |
| `frontend/src/utils/validation.js` | COBOL validation routines | `app/cpy/CSUTLDPY.cpy` | Validation logic translation |
| `docker-compose.yml` | z/OS runtime environment | Container orchestration | Infrastructure definition |
| `kubernetes/deployment.yaml` | CICS region configuration | Kubernetes resources | Deployment configuration |

## 0.3 IMPLEMENTATION DESIGN

### 0.3.1 Technical Approach

**First, establish the data foundation by converting VSAM structures to PostgreSQL:**
- Analyze VSAM KSDS key structures and record layouts from copybooks
- Generate PostgreSQL DDL with appropriate indexes matching VSAM key access patterns
- Implement data migration scripts preserving all existing records
- Validate data integrity through parallel testing

**Next, implement the backend service layer by translating COBOL business logic:**
- Convert each COBOL program to a Spring Boot service class maintaining paragraph structure
- Translate COBOL data types to Java equivalents with precision preservation
- Implement CICS command equivalents using Spring framework capabilities
- Ensure transaction boundaries match original CICS SYNCPOINT behavior

**Then, create the REST API layer mapping CICS transactions:**
- Generate REST controllers for each CICS transaction code
- Implement request/response DTOs matching BMS map structures
- Configure Spring Session to replicate COMMAREA state management
- Add comprehensive error handling matching COBOL ABEND routines

**Subsequently, develop the React frontend replicating BMS screens:**
- Generate React components from BMS map definitions preserving layout
- Implement form validation matching COBOL edit routines
- Map PF-key functions to React event handlers
- Ensure screen flow matches original 3270 navigation

**Finally, ensure operational parity through batch and security implementation:**
- Convert JCL jobs to Spring Batch maintaining processing sequences
- Implement Spring Security matching RACF user roles and permissions
- Configure monitoring and logging equivalent to mainframe capabilities
- Validate performance meets or exceeds mainframe benchmarks

### 0.3.2 User-Provided Examples Integration

The user's example of handling "COBOL COMP-3 fields and Java BigDecimal implementations" will be implemented in the data type conversion utilities as follows:

```java
// backend/src/main/java/com/carddemo/util/CobolDataConverter.java
public class CobolDataConverter {
    // Replicate COMP-3 packed decimal precision
    public static BigDecimal fromComp3(byte[] packedData, int scale) {
        // Implementation matching COBOL COMP-3 unpacking algorithm
        // Preserving exact precision and sign handling
    }
}
```

This ensures that financial calculations maintain identical precision to the COBOL implementation, addressing the user's specific concern about "data type conversions and numeric precision handling."

### 0.3.3 Critical Implementation Details

**Design Patterns to be Employed:**
- Repository Pattern for data access layer matching VSAM file operations
- Service Layer Pattern preserving COBOL program modularization
- DTO Pattern for BMS map to JSON transformation
- Factory Pattern for creating data converters based on COBOL picture clauses

**Key Algorithms and Approaches:**
- Cursor-based pagination algorithm replicating VSAM STARTBR/READNEXT
- BigDecimal configuration with HALF_UP rounding matching COBOL ROUNDED clause
- State machine implementation for screen navigation matching CICS XCTL flow
- Optimistic locking strategy replicating CICS READ UPDATE behavior

**Integration Strategies:**
- REST API versioning to maintain backward compatibility with external systems
- Message format adapters preserving existing file-based interface layouts
- Database connection pooling configured to match CICS thread management
- Circuit breaker pattern for external system integration resilience

**Data Flow Modifications:**
- CICS SEND MAP → REST Response with JSON payload
- CICS RECEIVE MAP → REST Request with JSON body
- VSAM READ → JPA findById operation
- VSAM WRITE → JPA save operation with flush
- JCL job submission → Spring Batch job launch
- COMMAREA → Spring Session attributes

### 0.3.4 Dependency Analysis

**Required Dependencies for Implementation:**

**Backend Dependencies:**
- Spring Boot 3.2.x (compatible with Java 21)
- Spring Data JPA for VSAM-equivalent data access
- Spring Batch 5.x for JCL job replacement
- Spring Security 6.x for RACF replacement
- PostgreSQL JDBC Driver 42.x
- Apache Commons Lang for COBOL string operations
- Jackson for JSON processing
- Lombok for reducing boilerplate code

**Frontend Dependencies:**
- React 18.x for UI components
- React Router 6.x for navigation
- Axios for REST API communication
- Formik for form handling matching BMS
- Yup for validation schemas
- Material-UI for consistent styling

**Infrastructure Dependencies:**
- Docker 24.x for containerization
- Kubernetes 1.28+ for orchestration
- PostgreSQL 15.x for data persistence
- Redis 7.x for session management

**Version Constraints and Compatibility:**
- Java 21 LTS for long-term support
- Spring Boot 3.2.x requires Java 17 minimum (Java 21 compatible)
- PostgreSQL 15.x for advanced indexing capabilities
- Node.js 20.x LTS for React build environment

**Justification for Each Dependency:**
- Spring Boot: Industry standard for Java enterprise applications
- PostgreSQL: ACID compliance matching VSAM reliability
- React: Component-based architecture suits BMS screen conversion
- Docker/Kubernetes: Cloud-native deployment matching target architecture
- Redis: High-performance session storage replacing CICS COMMAREA

## 0.4 SCOPE BOUNDARIES

### 0.4.1 Explicitly In Scope

**All Affected Files and Modules:**

**COBOL Programs to be Converted (36 total):**
- Interactive CICS Programs (24): COSGN00C, COMEN01C, COADM01C, COTRN00C, COTRN01C, COTRN02C, COACTVWC, COACTUPC, COBIL00C, COCRDLIC, COCRDSLC, COCRDUPC, COUSR00C, COUSR01C, COUSR02C, COUSR03C, CORPT00C, and 7 additional identified programs
- Batch Programs (12): CBACT01C, CBACT02C, CBACT03C, CBACT04C, CBCUS01C, CBSTM03A, CBSTM03B, CBTRN01C, CBTRN02C, CBTRN03C, and 2 additional batch utilities
- Utility Program: CSUTLDTC (date conversion)

**BMS Mapsets to be Converted (18 total):**
- All files in app/bms/: COSGN00.bms, COMEN01.bms, COADM01.bms, COTRN00.bms, COTRN01.bms, COTRN02.bms, COACTVW.bms, COACTUP.bms, COBIL00.bms, COCRDLI.bms, COCRDSL.bms, COCRDUP.bms, COUSR00.bms, COUSR01.bms, COUSR02.bms, COUSR03.bms, CORPT00.bms, and 1 additional mapset

**Copybooks to be Translated (46 total):**
- Common copybooks (28) in app/cpy/
- BMS copybooks (18) in app/cpy-bms/

**Configuration Changes Required:**
- Database connection configuration for PostgreSQL
- Spring Security configuration for user authentication
- Spring Batch job configurations for all batch processes
- REST API endpoint mappings for all transactions
- Docker container configurations
- Kubernetes deployment manifests
- Environment-specific properties files

**Test Modifications Needed:**
- Unit tests for all Java service classes
- Integration tests for REST endpoints
- End-to-end tests for complete workflows
- Performance tests validating response times
- Batch job tests for processing windows

**Documentation Updates Required:**
- API documentation for all REST endpoints
- Database schema documentation
- Deployment guide for Docker/Kubernetes
- Migration guide for data conversion
- Operations manual for batch job management

### 0.4.2 Explicitly Out of Scope

**What the user might expect but isn't included:**
- Performance optimizations beyond meeting stated requirements
- Additional features or functionality not in current COBOL system
- Modernization of business logic or processes
- UI/UX improvements beyond functional parity
- Database normalization or schema optimization
- Microservices decomposition of the monolithic application
- Cloud-native features like auto-scaling policies
- Advanced Java 21 features (virtual threads, pattern matching) that would alter behavior
- Integration with modern payment gateways or APIs
- Mobile application development
- Real-time analytics or reporting dashboards

**Related areas deliberately not touched:**
- Shared mainframe utilities used by other applications
- System-level COBOL programs outside credit card management
- External mainframe services not directly called by the 20+ programs
- Legacy reporting systems not part of the core application
- Mainframe security infrastructure beyond user authentication
- Job scheduling systems external to the application
- File transfer mechanisms with external partners
- Mainframe printer subsystems
- Archive and purge processes

**Future considerations not addressed now:**
- Migration to microservices architecture
- Implementation of event-driven architecture
- API gateway enhancements
- Service mesh implementation
- Observability platform integration
- CI/CD pipeline automation
- Infrastructure as Code templates
- Database read replicas for scalability
- Caching layer implementation
- Message queue integration

## 0.5 VALIDATION CHECKLIST

### 0.5.1 Implementation Verification Points

**Requirement: Preserve All Core Business Logic**
- Verification: Line-by-line comparison of COBOL and Java implementations
- Observable Change: Identical calculation results for all test scenarios
- Test Method: Parallel run comparing COBOL and Java outputs

**Requirement: Maintain Transaction Response Times Under 200ms**
- Verification: Performance testing of all REST endpoints
- Observable Change: Response time metrics in Spring Actuator
- Test Method: Load testing with 10,000 TPS

**Requirement: Complete Batch Processing Within 4-Hour Window**
- Verification: Timed execution of all Spring Batch jobs
- Observable Change: Job completion timestamps in batch metadata
- Test Method: Full volume testing with production-size datasets

**Requirement: Preserve External Interface Contracts**
- Verification: Byte-level comparison of generated files
- Observable Change: Identical file layouts and data formats
- Test Method: Interface testing with downstream systems

**Requirement: Maintain Data Precision for Financial Calculations**
- Verification: Comparison of interest calculations and balance updates
- Observable Change: Matching penny-level accuracy in all amounts
- Test Method: Regression testing with known calculation scenarios

### 0.5.2 Integration Points Testing

**Frontend-Backend Integration:**
- Test all React components communicate correctly with REST APIs
- Verify session state management across requests
- Validate error handling and message display

**Database Integration:**
- Test all JPA repositories perform correct CRUD operations
- Verify transaction isolation levels match CICS behavior
- Validate referential integrity constraints

**Batch Processing Integration:**
- Test job dependencies and sequencing
- Verify file generation and consumption
- Validate restart and recovery capabilities

**Security Integration:**
- Test authentication flow from React to Spring Security
- Verify role-based access control
- Validate session timeout handling

## 0.6 EXECUTION PARAMETERS

### 0.6.1 Special Execution Instructions

**Documentation Only Aspects:**
- This technical specification serves as the blueprint for implementation
- All code generation should follow the patterns documented here
- No actual code execution without explicit approval

**Process-Specific Requirements:**
- Follow test-driven development approach for all components
- Implement parallel testing throughout the migration
- Maintain rollback capability at each phase
- Document all deviations from COBOL logic

**Quality Requirements:**
- 100% unit test coverage for business logic
- Automated regression testing for all workflows
- Performance benchmarking against mainframe baseline
- Security scanning of all code and dependencies

### 0.6.2 Constraints and Boundaries

**Technical Constraints:**
- Must use Java 21 LTS (no preview features)
- PostgreSQL version must be 15.x or higher
- Spring Boot version must be 3.2.x (current stable)
- React version must be 18.x (current stable)
- No use of experimental or beta frameworks

**Process Constraints:**
- No modification of existing mainframe code during migration
- Parallel run period must not exceed 3 months
- Cutover must occur during scheduled maintenance window
- No disruption to current production operations

**Output Constraints:**
- Generated code must follow Spring Boot best practices
- React components must be functional (not class-based)
- Database schema must be normalized to 3NF minimum
- All code must pass SonarQube quality gates
- Documentation must be in Markdown format

# 1. INTRODUCTION

## 1.1 EXECUTIVE SUMMARY

### 1.1.1 Project Overview

CardDemo is a comprehensive mainframe application that is <span style="background-color: rgba(91, 57, 243, 0.2)">the subject of a mainframe-to-cloud migration initiative, transforming from a z/OS COBOL/CICS environment to a modern Java 21/Spring Boot, PostgreSQL, React, Docker/Kubernetes solution</span>. This production-ready credit card management system demonstrates how traditional COBOL/CICS applications can be effectively modernized while <span style="background-color: rgba(91, 57, 243, 0.2)">maintaining 100% functional parity and preserving all existing business functionality without enhancement beyond the technology stack conversion</span>.

The system encompasses a complete end-to-end implementation of credit card operations, incorporating both online interactive processing through <span style="background-color: rgba(91, 57, 243, 0.2)">36 COBOL programs (24 CICS transaction programs and 12 batch processing programs)</span> that will be directly translated to their Java/Spring Boot counterparts, along with automated batch processing capabilities. The migration targets <span style="background-color: rgba(91, 57, 243, 0.2)">direct transformation of VSAM KSDS datasets to PostgreSQL relational database structures and conversion of 3270 terminal screens (BMS Maps) to a React Single Page Application</span>.

The application serves as a concrete implementation of mainframe modernization strategies, providing a realistic example of how legacy applications can be transformed using modern development and deployment practices while maintaining operational integrity. Built with Apache License 2.0, CardDemo version 1.0-15-g27d6c6f-68 demonstrates how traditional mainframe reliability can be preserved within contemporary <span style="background-color: rgba(91, 57, 243, 0.2)">containerized cloud infrastructure using Docker and Kubernetes orchestration</span>.

### 1.1.2 Core Business Problem

CardDemo addresses the critical challenge facing organizations with legacy mainframe applications: executing viable modernization pathways without compromising operational integrity or business functionality. Many enterprises struggle to implement successful migration strategies for their mission-critical COBOL/CICS applications, lacking proven approaches that maintain exact functional behavior while achieving modern technology benefits.

The application solves this problem by implementing a <span style="background-color: rgba(91, 57, 243, 0.2)">minimal change approach that focuses exclusively on technology stack conversion. The migration employs a paragraph-by-paragraph translation strategy, converting each COBOL program paragraph into corresponding Java methods within Spring Boot service classes, maintaining identical logic flow and business calculations</span>. This approach ensures that all core business logic works identically to the current COBOL implementation.

<span style="background-color: rgba(91, 57, 243, 0.2)">The technical strategy intentionally avoids advanced Java 21 features that could alter application behavior, focusing on direct COBOL-to-Java translation that preserves existing program flow and maintains byte-for-byte identical output for all processing scenarios</span>. The migration encompasses the full spectrum of typical enterprise application requirements, including user authentication, transaction processing, data management, batch operations, and comprehensive reporting capabilities.

### 1.1.3 Key Stakeholders and Users

The primary stakeholders for CardDemo include:

| Stakeholder Group | Primary Interests | Key Benefits |
|------------------|-------------------|--------------|
| Mainframe Developers | Modern development practices for legacy systems | Reference architecture and implementation patterns |
| System Integrators | Migration strategies and modernization approaches | Production-ready codebase demonstrating best practices |
| Enterprise IT Leadership | Business case validation for modernization investments | Comprehensive showcase of modernization capabilities |

**Primary User Categories:**
- **Technical Teams**: Developers, system architects, and DevOps engineers responsible for mainframe modernization projects
- **Business Stakeholders**: IT leadership and project sponsors evaluating AWS Mainframe Modernization services
- **Implementation Partners**: Consulting organizations and system integrators delivering modernization solutions

### 1.1.4 Expected Business Impact and Value Proposition

CardDemo delivers significant value by reducing the risk and uncertainty associated with mainframe modernization initiatives. Organizations can leverage this reference implementation to:

- **Accelerate Project Planning**: Utilize proven architectural patterns and implementation strategies
- **Reduce Development Risk**: Reference tested code structures and modernization approaches
- **Enable Stakeholder Buy-in**: Demonstrate concrete modernization capabilities through working examples
- **Optimize Resource Allocation**: Understand effort requirements through detailed implementation analysis

The application's comprehensive nature ensures that stakeholders can evaluate modernization approaches across all critical dimensions of enterprise application architecture, from user interface design to batch processing optimization. <span style="background-color: rgba(91, 57, 243, 0.2)">Additionally, the migration includes essential operational tooling including API Gateway for request routing, Configuration Service for centralized environment management, and Monitoring Service with application metrics and health checks, providing cloud-native operability without modifying core business logic</span>.

## 1.2 SYSTEM OVERVIEW

### 1.2.1 Project Context

#### Business Context and Market Positioning

CardDemo positions itself as the definitive reference implementation for mainframe modernization within the AWS ecosystem. The application addresses the enterprise market segment where organizations operate mission-critical COBOL/CICS applications requiring modernization without business disruption. <span style="background-color: rgba(91, 57, 243, 0.2)">By providing a complete, working credit card management system transformed from legacy z/OS architecture to modern cloud-native Java 21/Spring Boot, PostgreSQL, and React technologies</span>, CardDemo enables organizations to evaluate modernization strategies using realistic business scenarios rather than theoretical examples.

The application supports the broader market trend toward cloud-native architectures while acknowledging the need for incremental modernization approaches that preserve existing business logic and operational procedures.

#### Integration with Existing Enterprise Landscape

<span style="background-color: rgba(91, 57, 243, 0.2)">CardDemo is designed to integrate seamlessly with existing enterprise environments through modern cloud-native integration patterns</span>, supporting:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">RESTful API Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Standards-based REST endpoints enabling seamless integration with enterprise service architectures and API gateways</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Framework</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise-grade security integration supporting LDAP, OAuth2, and SAML authentication protocols</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Database Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Standards-compliant relational database supporting enterprise data governance and backup procedures</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis-backed Spring Session</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">High-performance session management enabling horizontal scaling and session persistence across container restarts</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">External interface data formats remain unchanged, ensuring seamless integration with existing payment networks, banking core systems, and regulatory reporting systems without requiring modifications to downstream dependencies</span>.

### 1.2.2 High-Level Description (updated)

#### Primary System Capabilities

<span style="background-color: rgba(91, 57, 243, 0.2)">CardDemo delivers comprehensive credit card management functionality through three integrated capability layers implemented using modern cloud-native architecture patterns</span>:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Interactive REST API Processing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">The system provides 24 REST endpoints corresponding to former CICS transaction programs, managed by Spring Boot controllers with Spring Session for COMMAREA-equivalent state management. Each endpoint maintains one-to-one mapping with original transaction codes (COSGN00C, COMEN01C, COADM01C) while providing secure authentication, role-based menu navigation, and full-lifecycle account and credit card management operations</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Processing Operations</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Twelve Spring Batch jobs replace legacy JCL jobs while preserving exact processing sequences and restart logic. These include automated daily operations such as interest calculation and posting, statement generation in multiple formats, and comprehensive transaction validation and reporting, all maintaining identical sequencing and restart capabilities</span>.

**Data Management and Reporting**: <span style="background-color: rgba(91, 57, 243, 0.2)">The system maintains complete data integrity through PostgreSQL tables employing composite primary keys and custom JPA converters that replicate VSAM KSDS functionality</span> while providing comprehensive reporting capabilities for both operational and business intelligence requirements.

#### Major System Components

<span style="background-color: rgba(91, 57, 243, 0.2)">The CardDemo architecture consists of four primary component layers in a modern cloud-native configuration</span>:

```mermaid
graph TB
    A[React SPA Layer] --> B[Spring Cloud Gateway]
    B --> C[Spring Boot Services Layer] 
    C --> D[PostgreSQL Database Layer]
    C --> E[Redis Session Store]
    
    A1[React Components<br/>18 Screen Definitions] --> A
    B1[API Gateway<br/>Request Routing & Authentication] --> B
    C1[REST Controllers<br/>24 Transaction Endpoints] --> C
    C2[Spring Batch Jobs<br/>12 Processing Programs] --> C
    C3[Service Classes<br/>36 Business Logic Components] --> C
    D1[PostgreSQL Tables<br/>Composite Primary Keys] --> D
    E1[Session State Management<br/>COMMAREA Equivalent] --> E
```

#### Core Technical Approach (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">CardDemo implements a modern four-tier cloud-native architecture optimized for containerized deployment and horizontal scaling</span>:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Presentation Tier</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">React Single Page Application generated from BMS screen definitions with PF-key functions mapped to keyboard event handlers, ensuring consistent user experience while providing modern browser-based accessibility</span>
- **Gateway Tier**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway providing request routing, authentication, and API management capabilities</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Application Tier</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot services with Java 21 implementing paragraph-by-paragraph translations of COBOL programs, maintaining standardized program structure (0000-init, 1000-input, 2000-process, 3000-output, 9000-close) as Java method naming conventions</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Tier</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL relational database providing high-performance data access with composite primary keys matching VSAM key structures and custom JPA converters for data type precision preservation</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">The system employs proven enterprise design patterns including Repository Pattern for data access, Service Layer Pattern preserving COBOL program modularization, and comprehensive error handling through Spring Boot exception management</span>.

### 1.2.3 Success Criteria (updated)

#### Measurable Objectives (updated)

| Objective Category | Target Metrics | Success Indicators |
|-------------------|----------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Functional Equivalence</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% functional parity</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Byte-for-byte identical external interface payloads</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Benchmarks</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Sub-200ms REST response times</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">REST API response times under 200ms for 95% of operations</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Processing Windows</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">4-hour completion window</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">All Spring Batch jobs complete within existing 4-hour processing windows</span>** |

#### Critical Success Factors

**Technical Excellence**: <span style="background-color: rgba(91, 57, 243, 0.2)">The system must demonstrate production-level code quality through Spring Boot best practices, comprehensive error handling via Spring framework capabilities, and maintainable cloud-native architecture that serves as a reliable modernization reference</span>.

**Educational Value**: Documentation and code structure must enable stakeholders to understand both traditional mainframe architecture and <span style="background-color: rgba(91, 57, 243, 0.2)">modern cloud-native modernization pathways using Java 21, Spring Boot, PostgreSQL, and containerized deployment strategies</span> clearly.

**Operational Reliability**: <span style="background-color: rgba(91, 57, 243, 0.2)">All Spring Batch processing, REST API handling, and PostgreSQL data management operations must execute with enterprise-grade reliability and recoverability within Docker/Kubernetes orchestrated environments</span>.

#### Key Performance Indicators

**System Performance**: <span style="background-color: rgba(91, 57, 243, 0.2)">REST API response times, Spring Batch job completion rates, and PostgreSQL query throughput metrics provide quantitative measures of system effectiveness</span>.

**Adoption Metrics**: Usage by development teams, integration into modernization projects, and stakeholder feedback scores indicate the application's success in facilitating modernization initiatives.

**Quality Indicators**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot application maintainability scores, defect rates, and successful containerized deployment frequencies demonstrate the application's production readiness and cloud-native reliability</span>.

## 1.3 SCOPE

### 1.3.1 In-Scope Elements

#### Core Features and Functionalities

**User Management and Security**:
- Comprehensive user authentication system with role-based access control (regular and administrative users)
- <span style="background-color: rgba(91, 57, 243, 0.2)">Secure sign-on process with session management through Spring Security and Redis-backed Spring Session</span>
- Administrative user management capabilities including user creation, modification, and deletion

**Account and Credit Card Operations**:
- Complete account lifecycle management with view and update capabilities
- Credit card issuance, listing, and detailed management functions
- Cross-reference maintenance linking customers, accounts, and credit cards

**Transaction Processing**:
- Real-time transaction recording and validation
- Transaction history maintenance and retrieval
- Bill payment processing with automated posting

**Batch Processing Operations**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Daily interest calculation and posting through Spring Batch jobs</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Automated statement generation in both text and HTML formats via Spring Batch processing</span>
- Transaction validation and reporting processes
- Customer data processing and maintenance

**Reporting and Analytics**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive reporting capabilities through REST API endpoints</span>
- Account, card, and transaction listing reports
- Cross-reference and audit trail reporting

#### Implementation Boundaries

**Migration Scope Coverage**:
<span style="background-color: rgba(91, 57, 243, 0.2)">This migration covers the direct technology translation of all CardDemo application components</span>:

- <span style="background-color: rgba(91, 57, 243, 0.2)">**36 COBOL programs** (24 online CICS programs + 12 batch programs) converted to Java 21 Spring Boot service classes</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**18 BMS mapsets** transformed into React functional components with identical screen layouts and navigation patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**46 copybooks** (28 common + 18 BMS copybooks) translated to Java data structures and JPA entities</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**All configuration artifacts** including database connection configurations, Spring Security setups, Spring Batch job definitions, REST API mappings, and containerization configurations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Associated tests and documentation** covering unit tests, integration tests, API documentation, and deployment guides</span>

| Boundary Category | <span style="background-color: rgba(91, 57, 243, 0.2)">**Target Technology Stack**</span> | Coverage Details |
|------------------|-------------------|------------------|
| Application Platform | <span style="background-color: rgba(91, 57, 243, 0.2)">**Java 21 with Spring Boot framework**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Complete cloud-native deployment support with containerization</span> |
| User Interface | <span style="background-color: rgba(91, 57, 243, 0.2)">**React Single Page Application**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">18 React components covering all user interactions with PF-key mapping</span> |
| Data Storage | <span style="background-color: rgba(91, 57, 243, 0.2)">**PostgreSQL relational database**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Full persistence layer with composite primary keys replicating VSAM functionality</span> |
| Transaction Processing | <span style="background-color: rgba(91, 57, 243, 0.2)">**REST APIs with Spring Boot controllers**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">24 REST endpoints corresponding to CICS transaction codes</span> |
| Batch Processing | <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Batch framework**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">12 Spring Batch jobs maintaining existing processing windows and restart capabilities</span> |

**Technical Implementation Scope**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Java 21 LTS programming language for all business logic implementation maintaining paragraph-by-paragraph COBOL program structure</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot framework for application services and REST API development</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL database with JPA/Hibernate for data persistence and composite primary key management</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch for job orchestration and scheduling with identical processing sequences</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">React framework for screen definition and user interface management with keyboard event handling</span>

### 1.3.2 Out-of-Scope Elements

#### Excluded Features and Capabilities (updated)

**Performance and Advanced Features**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Performance optimizations beyond meeting stated requirements</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Additional features or functionality not in current COBOL system</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Java 21 features (virtual threads, pattern matching) that would alter behavior from original COBOL implementation</span>

**System Enhancement and Modernization**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Modernization of business logic or processes beyond technology translation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">UI/UX improvements beyond functional parity with existing BMS screen layouts</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Database normalization or schema optimization beyond replicating VSAM key structures</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Microservices decomposition of the monolithic application architecture</span>

**Advanced Cloud-Native Capabilities**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-native features like auto-scaling policies</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Integration with modern payment gateways or APIs not currently supported</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Mobile application development or responsive design enhancements</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time analytics or reporting dashboards beyond existing reporting capabilities</span>

#### System Boundaries and Exclusions (updated)

**Shared Infrastructure Components**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Shared mainframe utilities and system-level components that serve applications beyond the CardDemo credit card management system are explicitly excluded from the migration scope</span>. This includes:

- <span style="background-color: rgba(91, 57, 243, 0.2)">Shared mainframe utilities used by other applications</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">System-level COBOL programs outside credit card management</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">External mainframe services not directly called by the identified 36 programs</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Legacy reporting systems not part of the core application</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Mainframe security infrastructure beyond user authentication components</span>

**External System Integration**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Job scheduling systems external to the application</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">File transfer mechanisms with external partners</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Mainframe printer subsystems</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Archive and purge processes not directly integrated with CardDemo</span>

#### Future Phase Considerations (updated)

**Advanced Architecture Evolution**: <span style="background-color: rgba(91, 57, 243, 0.2)">Migration to microservices architecture, implementation of event-driven architecture, and API gateway enhancements represent planned future evolution phases beyond the current technology translation scope</span>.

**Cloud-Native Optimization**: <span style="background-color: rgba(91, 57, 243, 0.2)">Service mesh implementation, observability platform integration, and advanced infrastructure as code templates will be addressed in subsequent modernization phases</span>.

**Performance and Scalability Enhancements**: <span style="background-color: rgba(91, 57, 243, 0.2)">Database read replicas for scalability, caching layer implementation, and message queue integration represent future optimization opportunities beyond the current functional equivalence objective</span>.

#### Technical Constraints and Limitations (updated)

**Development Framework Restrictions**: <span style="background-color: rgba(91, 57, 243, 0.2)">The migration explicitly excludes Java 21 preview features, advanced language constructs that would alter application behavior, performance optimizations beyond meeting stated requirements, and cloud auto-scaling implementations</span>. The focus remains on direct technology translation while preserving exact functional behavior.

**Implementation Approach Boundaries**: The migration maintains minimal change approach, focusing exclusively on technology stack conversion without enhancing business functionality or implementing unnecessary advanced features that would deviate from the proven COBOL system behavior.

#### References

**Technical Specification Sections**:
- Section 0.4.1 "Explicitly In Scope" - Complete enumeration of 36 COBOL programs, 18 BMS mapsets, and 46 copybooks requiring translation
- Section 0.4.2 "Explicitly Out of Scope" - Comprehensive list of excluded modernization features and advanced capabilities
- Section 0.1.2 "Special Instructions and Constraints" - System boundaries and minimal change approach requirements
- Section 0.2.1 "Primary Objectives" - Target technology stack specifications and success criteria

**Application Architecture References**:
- COBOL Programs: 24 interactive CICS programs + 12 batch programs requiring Java translation
- BMS Screen Definitions: 18 mapsets requiring React component generation
- Data Structures: 46 copybooks requiring Java entity and data structure creation
- Configuration Components: Database connections, security configurations, and batch job definitions

# 2. PRODUCT REQUIREMENTS

## 2.1 FEATURE CATALOG

### 2.1.1 Authentication & Security System (updated)

| Feature Metadata | Details |
|-----------------|---------|
| Feature ID | F-001 |
| Feature Name | User Authentication System |
| Feature Category | Security |
| Priority Level | Critical |
| Status | Completed |

**Description:**
- **Overview**: Comprehensive authentication system implementing secure user sign-on through COSGN00C transaction program with role-based access control
- **Business Value**: Ensures data security and compliance through controlled access to credit card management functions
- **User Benefits**: Secure session management with role-specific functionality access (regular users vs administrators)
- **Technical Context**: Implements <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security with PostgreSQL-backed USRSEC table</span> with <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session (Redis)</span>-based session state management

**Dependencies:**
- **System Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot runtime, PostgreSQL USRSEC table, Redis session store</span>
- **External Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA, Requests routed through Spring Cloud Gateway</span>
- **Integration Requirements**: BMS mapset COSGN00 for user interface

### 2.1.2 User Management Module (updated)

| Feature Metadata | Details |
|-----------------|---------|
| Feature ID | F-002 |
| Feature Name | Administrative User Management |
| Feature Category | Administration |
| Priority Level | High |
| Status | Completed |

**Description:**
- **Overview**: Complete CRUD operations for user management through COUSR00C-03C programs with paginated listing and comprehensive validation
- **Business Value**: Enables administrative control over system access and user lifecycle management
- **User Benefits**: Streamlined user administration with validation and error handling
- **Technical Context**: Four-program suite with corresponding <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA components</span> for user interaction

**Dependencies:**
- **Prerequisite Features**: F-001 (Authentication System)
- **System Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL USRSEC table, Spring Boot REST APIs, JPA repositories</span>
- **External Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Requests routed through Spring Cloud Gateway</span>
- **Integration Requirements**: Role-based access control integration

### 2.1.3 Account Management System (updated)

| Feature Metadata | Details |
|-----------------|---------|
| Feature ID | F-003 |
| Feature Name | Account Operations Management |
| Feature Category | Core Business |
| Priority Level | Critical |
| Status | Completed |

**Description:**
- **Overview**: Account viewing (COACTVWC) and updating (COACTUPC) with comprehensive field validation including dates, SSN, phone numbers, state/ZIP codes, and FICO scores
- **Business Value**: Maintains accurate customer and account information essential for credit card operations
- **User Benefits**: Real-time account information access with data integrity validation
- **Technical Context**: Uses <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA repositories</span> with CVACT01Y and CVCUS01Y copybook structures for account and customer data

**Dependencies:**
- **Prerequisite Features**: F-001 (Authentication System)
- **System Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL ACCTDAT and CUSTDAT tables, Spring Boot REST APIs, JPA repositories</span>
- **External Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Requests routed through Spring Cloud Gateway</span>
- **Integration Requirements**: Customer cross-reference validation

### 2.1.4 Credit Card Operations (updated)

| Feature Metadata | Details |
|-----------------|---------|
| Feature ID | F-004 |
| Feature Name | Credit Card Lifecycle Management |
| Feature Category | Core Business |
| Priority Level | Critical |
| Status | Completed |

**Description:**
- **Overview**: Complete credit card management including listing (COCRDLIC), detail viewing (COCRDSLC), and updating (COCRDUPC) with card-to-account cross-referencing
- **Business Value**: Core credit card issuance and management functionality
- **User Benefits**: Comprehensive card management with status tracking and account linkage
- **Technical Context**: Implements CVACT03Y cross-reference structure linking cards to accounts through <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA</span>

**Dependencies:**
- **Prerequisite Features**: F-003 (Account Management)
- **System Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL CARDDAT and XREFFILE tables, Spring Boot REST APIs, JPA repositories</span>
- **External Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Requests routed through Spring Cloud Gateway</span>
- **Integration Requirements**: Account cross-reference validation

### 2.1.5 Transaction Processing (updated)

| Feature Metadata | Details |
|-----------------|---------|
| Feature ID | F-005 |
| Feature Name | Interactive Transaction Management |
| Feature Category | Core Business |
| Priority Level | Critical |
| Status | Completed |

**Description:**
- **Overview**: Transaction listing (COTRN00C), detail viewing (COTRN01C), creation (COTRN02C), and bill payment processing (COBIL00C) with comprehensive validation
- **Business Value**: Real-time transaction processing and payment handling
- **User Benefits**: Complete transaction history access and payment capabilities
- **Technical Context**: Uses CVTRA05Y 350-byte transaction record structure with <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA repositories</span>

**Dependencies:**
- **Prerequisite Features**: F-004 (Credit Card Operations)
- **System Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL TRANSACT table, Spring Boot REST APIs, JPA repositories</span>
- **External Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Requests routed through Spring Cloud Gateway</span>
- **Integration Requirements**: Account and card validation

### 2.1.6 Batch Processing Suite (updated)

| Feature Metadata | Details |
|-----------------|---------|
| Feature ID | F-006 |
| Feature Name | Automated Batch Operations |
| Feature Category | System Operations |
| Priority Level | High |
| Status | Completed |

**Description:**
- **Overview**: Daily processing including transaction posting (CBTRN01C/02C), interest calculation (CBACT04C), statement generation (CBSTM03A/B), and reporting (CBTRN03C)
- **Business Value**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated daily operations identical to existing JCL workflows</span> reducing manual processing overhead
- **User Benefits**: Automated interest calculations and statement generation
- **Technical Context**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch jobs executed via Kubernetes CronJob</span> with error recovery and restart capabilities using <span style="background-color: rgba(91, 57, 243, 0.2)">chunk-oriented step processing with FlatFileItemReader/Writer</span>

**Dependencies:**
- **Prerequisite Features**: F-005 (Transaction Processing)
- **System Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job scheduling, PostgreSQL tables, JPA repositories</span>
- **External Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Requests routed through Spring Cloud Gateway</span>
- **Integration Requirements**: Daily processing coordination

### 2.1.7 Menu Navigation System (updated)

| Feature Metadata | Details |
|-----------------|---------|
| Feature ID | F-007 |
| Feature Name | Role-Based Menu Navigation |
| Feature Category | User Interface |
| Priority Level | Medium |
| Status | Completed |

**Description:**
- **Overview**: Dynamic menu systems including main menu (COMEN01C), administrative menu (COADM01C), and report menu (CORPT00C) with role-based access
- **Business Value**: Intuitive navigation with appropriate feature access based on user roles
- **User Benefits**: Organized access to system functions with clear navigation paths
- **Technical Context**: <span style="background-color: rgba(91, 57, 243, 0.2)">PF-key navigation via keyboard event handlers in React</span> with standardized exit and paging functions

**Dependencies:**
- **Prerequisite Features**: F-001 (Authentication System)
- **System Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">React component hierarchy</span>
- **External Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Requests routed through Spring Cloud Gateway</span>
- **Integration Requirements**: Role-based access control validation

### 2.1.8 Data Management Infrastructure (updated)

| Feature Metadata | Details |
|-----------------|---------|
| Feature ID | F-008 |
| Feature Name | Enterprise Data Management |
| Feature Category | Infrastructure |
| Priority Level | Critical |
| Status | Completed |

**Description:**
- **Overview**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL table organization with composite primary keys</span> and sample data initialization with standardized copybook structures ensuring data consistency
- **Business Value**: Reliable data persistence with referential integrity
- **User Benefits**: Data consistency and recovery capabilities
- **Technical Context**: Six primary <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL tables</span> with 28 standardized copybook definitions accessed via <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA</span>

**Dependencies:**
- **System Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL database services</span>
- **External Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Requests routed through Spring Cloud Gateway</span>
- **Integration Requirements**: All business features depend on this infrastructure

## 2.2 FUNCTIONAL REQUIREMENTS TABLE

### 2.2.1 Authentication System Requirements (F-001)

| Requirement ID | Description | Acceptance Criteria | Priority |
|---------------|-------------|-------------------|----------|
| F-001-RQ-001 | User Sign-on Validation | System validates user credentials against USRSEC dataset | Must-Have |
| F-001-RQ-002 | Role-Based Access Control | System differentiates between regular ('U') and admin ('A') user types | Must-Have |
| F-001-RQ-003 | Session Management | System maintains session state using <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session (Redis 32 KB max per session)</span> | Must-Have |
| F-001-RQ-004 | Invalid Login Handling | System provides appropriate error messages for invalid credentials | Should-Have |

**Technical Specifications:**
- **Input Parameters**: User ID, Password <span style="background-color: rgba(91, 57, 243, 0.2)">via corresponding React form</span>
- **Output/Response**: Authentication success/failure with appropriate menu redirection
- **Performance Criteria**: Authentication response within <span style="background-color: rgba(91, 57, 243, 0.2)">≤200 ms</span>
- **Data Requirements**: <span style="background-color: rgba(91, 57, 243, 0.2)">USRSEC PostgreSQL access via Spring Data JPA</span>

**Validation Rules:**
- **Business Rules**: Only active users with valid passwords may access system
- **Data Validation**: User ID and password format validation
- **Security Requirements**: Password encryption and session timeout management
- **Compliance Requirements**: Access logging for audit trail

### 2.2.2 User Management Requirements (F-002)

| Requirement ID | Description | Acceptance Criteria | Priority |
|---------------|-------------|-------------------|----------|
| F-002-RQ-001 | User Listing | System displays paginated list of users with navigation | Must-Have |
| F-002-RQ-002 | User Creation | System allows creation of new users with validation | Must-Have |
| F-002-RQ-003 | User Modification | System supports modification of existing user records | Must-Have |
| F-002-RQ-004 | User Deletion | System provides secure user deletion with confirmation | Should-Have |

**Technical Specifications:**
- **Input Parameters**: User details <span style="background-color: rgba(91, 57, 243, 0.2)">via corresponding React form</span>
- **Output/Response**: CRUD operation success/failure messages
- **Performance Criteria**: User operations complete within 3 seconds
- **Data Requirements**: <span style="background-color: rgba(91, 57, 243, 0.2)">USRSEC PostgreSQL access via Spring Data JPA</span>

**Validation Rules:**
- **Business Rules**: User creation requires valid role assignment and unique user ID
- **Data Validation**: User ID format validation, password complexity requirements
- **Security Requirements**: Administrative privilege verification for user management operations
- **Compliance Requirements**: User modification logging for audit trail

### 2.2.3 Account Management Requirements (F-003)

| Requirement ID | Description | Acceptance Criteria | Priority |
|---------------|-------------|-------------------|----------|
| F-003-RQ-001 | Account Viewing | System displays complete account and customer information | Must-Have |
| F-003-RQ-002 | Account Updates | System validates and processes account field modifications | Must-Have |
| F-003-RQ-003 | Field Validation | System validates dates, SSN, phone, state/ZIP, FICO scores | Must-Have |
| F-003-RQ-004 | Customer Integration | System maintains account-customer relationship integrity | Must-Have |

**Technical Specifications:**
- **Input Parameters**: Account numbers, field updates <span style="background-color: rgba(91, 57, 243, 0.2)">via corresponding React form</span>
- **Output/Response**: Account details display or update confirmation
- **Performance Criteria**: Account operations within 2 seconds
- **Data Requirements**: <span style="background-color: rgba(91, 57, 243, 0.2)">ACCTDAT and CUSTDAT PostgreSQL access via Spring Data JPA</span>

**Validation Rules:**
- **Business Rules**: Account updates require customer relationship validation
- **Data Validation**: SSN format validation, date range validation, state code validation
- **Security Requirements**: Account access authorization based on user privileges
- **Compliance Requirements**: Account modification audit logging

### 2.2.4 Credit Card Operations Requirements (F-004)

| Requirement ID | Description | Acceptance Criteria | Priority |
|---------------|-------------|-------------------|----------|
| F-004-RQ-001 | Card Listing | System provides paginated card listing with filtering | Must-Have |
| F-004-RQ-002 | Card Details | System displays comprehensive card information | Must-Have |
| F-004-RQ-003 | Card Updates | System processes card status and detail modifications | Must-Have |
| F-004-RQ-004 | Account Linking | System maintains card-to-account cross-references | Must-Have |

**Technical Specifications:**
- **Input Parameters**: Card numbers, search criteria <span style="background-color: rgba(91, 57, 243, 0.2)">via corresponding React form</span>
- **Output/Response**: Card information display or update confirmation
- **Performance Criteria**: Card operations within 2 seconds
- **Data Requirements**: <span style="background-color: rgba(91, 57, 243, 0.2)">CARDDAT and XREFFILE PostgreSQL access via Spring Data JPA</span>

**Validation Rules:**
- **Business Rules**: Card updates require account cross-reference validation
- **Data Validation**: Card number format validation, expiration date validation
- **Security Requirements**: Card data access authorization and PCI compliance
- **Compliance Requirements**: Card modification audit logging

### 2.2.5 Transaction Processing Requirements (F-005)

| Requirement ID | Description | Acceptance Criteria | Priority |
|---------------|-------------|-------------------|----------|
| F-005-RQ-001 | Transaction History | System displays paginated transaction history | Must-Have |
| F-005-RQ-002 | Transaction Details | System shows comprehensive transaction information | Must-Have |
| F-005-RQ-003 | Transaction Creation | System validates and records new transactions | Must-Have |
| F-005-RQ-004 | Bill Payment Processing | System processes payments against account balances | Must-Have |

**Technical Specifications:**
- **Input Parameters**: Transaction details <span style="background-color: rgba(91, 57, 243, 0.2)">via corresponding React form</span>
- **Output/Response**: Transaction display or processing confirmation
- **Performance Criteria**: Transaction operations within 1 second
- **Data Requirements**: <span style="background-color: rgba(91, 57, 243, 0.2)">TRANSACT PostgreSQL access via Spring Data JPA</span> with 350-byte record structure

**Validation Rules:**
- **Business Rules**: Transaction amounts must not exceed account credit limits
- **Data Validation**: Amount format validation, merchant code validation
- **Security Requirements**: Transaction authorization and fraud detection
- **Compliance Requirements**: Transaction logging for regulatory reporting

### 2.2.6 Batch Processing Requirements (F-006)

| Requirement ID | Description | Acceptance Criteria | Priority |
|---------------|-------------|-------------------|----------|
| F-006-RQ-001 | Daily Transaction Posting | System processes daily transaction files automatically | Must-Have |
| F-006-RQ-002 | Interest Calculation | System calculates and posts interest charges daily | Must-Have |
| F-006-RQ-003 | Statement Generation | System generates text and HTML statements | Should-Have |
| F-006-RQ-004 | Error Recovery | System provides restart capabilities for failed jobs | Must-Have |

**Technical Specifications:**
- **Input Parameters**: Daily transaction files, processing parameters
- **Output/Response**: Processing reports and updated datasets
- **Performance Criteria**: Daily processing completes within 4-hour window
- **Data Requirements**: <span style="background-color: rgba(91, 57, 243, 0.2)">Sequential file processing via Spring Data JPA with PostgreSQL access</span>

**Validation Rules:**
- **Business Rules**: Daily processing must maintain account balance accuracy
- **Data Validation**: File format validation, transaction integrity checks
- **Security Requirements**: Batch job authorization and secure file handling
- **Compliance Requirements**: Processing audit trails and error reporting

## 2.3 FEATURE RELATIONSHIPS

### 2.3.1 Feature Dependencies Map (updated)

```mermaid
graph TD
    F001[F-001: Authentication System] --> F002[F-002: User Management]
    F001 --> F007[F-007: Menu Navigation]
    F001 --> F003[F-003: Account Management]
    F003 --> F004[F-004: Credit Card Operations]
    F004 --> F005[F-005: Transaction Processing]
    F005 --> F006[F-006: Batch Processing]
    F008[F-008: Data Management] --> F001
    F008 --> F002
    F008 --> F003
    F008 --> F004
    F008 --> F005
    F008 --> F006
    
    %% Legend
    F999["Note: All data stores now reside in PostgreSQL per Summary of Changes 0.2.1"]
    style F999 fill:#f9f9f9,stroke:#666,stroke-dasharray: 5 5
```

### 2.3.2 Integration Points (updated)

| Integration Point | Connected Features | Shared Components |
|------------------|-------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">USRSEC Table (PostgreSQL)</span> | F-001, F-002 | User authentication and management |
| Account-Customer Link | F-003, F-004 | CVACT01Y and CVCUS01Y copybooks |
| Card-Account Cross-Reference | F-004, F-005 | CVACT03Y cross-reference structure |
| Transaction Data Flow | F-005, F-006 | <span style="background-color: rgba(91, 57, 243, 0.2)">CVTRA05Y transaction record format with PostgreSQL storage</span> |

### 2.3.3 Shared Components (updated)

| Component | Usage | Features |
|-----------|-------|----------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">React UI Components</span> | User interface definitions | F-001, F-002, F-003, F-004, F-005, F-007 |
| <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Tables</span> | Data persistence | All features |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session (Redis)</span> | Session state management | F-001, F-007 |
| Standard Program Structure | Error handling and flow control | All interactive features |

### 2.3.4 Common Services

| Service | Description | Dependent Features |
|---------|-------------|-------------------|
| Spring Data JPA | Object-relational mapping and data access layer | F-001, F-002, F-003, F-004, F-005, F-006, F-008 |
| Spring Cloud Gateway | API routing and cross-cutting concerns | All interactive features |
| Spring Security | Authentication and authorization framework | F-001, F-002, F-003, F-004, F-005, F-007 |
| Spring Batch | Automated batch processing framework | F-006 |

## 2.4 IMPLEMENTATION CONSIDERATIONS

### 2.4.1 Authentication System (F-001) (updated)

**Technical Constraints:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot REST runtime</span> for session management
- <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA front-end</span> interface requirement
- VSAM dataset availability for user validation
- <span style="background-color: rgba(91, 57, 243, 0.2)">Must use Java 21/Spring Boot 3.3.x & PostgreSQL 15.x</span>

**Performance Requirements:**
- Authentication response time under 2 seconds
- Concurrent user support for multiple sessions
- Session timeout management for security

**Security Implications:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security password hashing (BCrypt)</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">JWT or Session-cookie based auth aligned with Spring Session</span>
- Session hijacking prevention
- Audit trail for access attempts

### 2.4.2 User Management (F-002) (updated)

**Technical Constraints:**
- Administrative privileges required for user operations
- VSAM dataset locking for concurrent access protection
- Data validation for user record integrity
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot REST runtime</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA front-end</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Must use Java 21/Spring Boot 3.3.x & PostgreSQL 15.x</span>

**Scalability Considerations:**
- Pagination support for large user populations
- Efficient search and filtering capabilities
- Bulk operation support for administrative efficiency

### 2.4.3 Account Management (F-003) (updated)

**Performance Requirements:**
- Sub-second response for account queries
- Real-time validation for field updates
- Cross-reference integrity checking

**Technical Constraints:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot REST runtime</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA front-end</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Must use Java 21/Spring Boot 3.3.x & PostgreSQL 15.x</span>

**Maintenance Requirements:**
- Regular data validation and cleanup procedures
- Customer information synchronization
- Historical data retention policies

### 2.4.4 Credit Card Operations (F-004) (updated)

**Technical Constraints:**
- Card number format validation and uniqueness
- Account linkage integrity enforcement
- Status transition validation
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot REST runtime</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA front-end</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Must use Java 21/Spring Boot 3.3.x & PostgreSQL 15.x</span>

**Security Implications:**
- Sensitive card information protection
- Access logging for compliance
- Card activation and deactivation controls

### 2.4.5 Transaction Processing (F-005) (updated)

**Performance Requirements:**
- Real-time transaction validation
- High-volume transaction support
- Response time under 1 second for queries

**Technical Constraints:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot REST runtime</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA front-end</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Must use Java 21/Spring Boot 3.3.x & PostgreSQL 15.x</span>

**Scalability Considerations:**
- Transaction volume growth accommodation
- Historical data archival strategies
- Performance optimization for large datasets

### 2.4.6 Batch Processing (F-006) (updated)

**Technical Constraints:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job launcher executed via Kubernetes CronJob; no JCL</span>
- File size and processing capacity limits
- Error recovery and restart capabilities
- <span style="background-color: rgba(91, 57, 243, 0.2)">Must use Java 21/Spring Boot 3.3.x & PostgreSQL 15.x</span>

**Performance Requirements:**
- Daily processing completion within 4-hour window
- Efficient sequential file processing
- Parallel processing for independent operations

### 2.4.7 Menu Navigation System (F-007) (updated)

**Technical Constraints:**
- Role-based access control enforcement
- Dynamic menu generation based on user permissions
- <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA front-end</span> component hierarchy
- <span style="background-color: rgba(91, 57, 243, 0.2)">Must use Java 21/Spring Boot 3.3.x & PostgreSQL 15.x</span>

**Performance Requirements:**
- Instant menu rendering and navigation
- Responsive user interface across device types
- Minimal resource consumption for menu operations

**Scalability Considerations:**
- Support for menu extensions and customization
- Efficient role-based menu caching strategies
- Integration with authentication system for dynamic permissions

**Security Implications:**
- Menu option visibility based on authenticated user roles
- Prevention of unauthorized function access through direct navigation
- Secure session state management during menu navigation

## 2.5 TRACEABILITY MATRIX

| Feature | Requirements | Test Cases | Implementation Files |
|---------|-------------|------------|---------------------|
| F-001 | F-001-RQ-001 to 004 | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot integration tests (MockMvc), React Testing Library component specs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">backend/src/main/java/com/carddemo/service/SignOnService.java, frontend/src/components/screens/SignOn.jsx</span> |
| F-002 | F-002-RQ-001 to 004 | <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit service tests, MockMvc REST API tests, React Testing Library component specs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">backend/src/main/java/com/carddemo/service/UserManagementService.java, frontend/src/components/screens/UserManagement.jsx</span> |
| F-003 | F-003-RQ-001 to 004 | <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit service tests with JPA repository mocks, React Testing Library validation specs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">backend/src/main/java/com/carddemo/service/AccountService.java, frontend/src/components/screens/AccountView.jsx, frontend/src/components/screens/AccountUpdate.jsx</span> |
| F-004 | F-004-RQ-001 to 004 | <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit service tests with cross-reference validation, React Testing Library component specs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">backend/src/main/java/com/carddemo/service/CardService.java, frontend/src/components/screens/CardList.jsx, frontend/src/components/screens/CardDetail.jsx, frontend/src/components/screens/CardUpdate.jsx</span> |
| F-005 | F-005-RQ-001 to 004 | <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit transaction processing tests, MockMvc payment API tests, React Testing Library transaction specs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">backend/src/main/java/com/carddemo/service/TransactionService.java, backend/src/main/java/com/carddemo/service/BillPaymentService.java, frontend/src/components/screens/TransactionList.jsx, frontend/src/components/screens/TransactionDetail.jsx, frontend/src/components/screens/BillPayment.jsx</span> |
| F-006 | F-006-RQ-001 to 004 | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch integration tests, JUnit batch job step tests</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">backend/src/main/java/com/carddemo/batch/TransactionPostingJob.java, backend/src/main/java/com/carddemo/batch/InterestCalculationJob.java, backend/src/main/java/com/carddemo/batch/StatementGenerationJob.java</span> |
| F-007 | F-007-RQ-001 to 004 | <span style="background-color: rgba(91, 57, 243, 0.2)">React Testing Library navigation tests, role-based access control specs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">frontend/src/components/navigation/MainMenu.jsx, frontend/src/components/navigation/AdminMenu.jsx, frontend/src/components/navigation/ReportMenu.jsx</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">F-008</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">F-008-RQ-001 to 004</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JPA repository integration tests, database schema validation tests</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">backend/src/main/resources/schema.sql, backend/src/main/java/com/carddemo/entity/*.java, backend/src/main/java/com/carddemo/repository/*.java</span> |

#### References (updated)

**Implementation Architecture:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Java 21/Spring Boot 3.3.x backend services with PostgreSQL 15.x data persistence</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA frontend with component-based architecture</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch jobs executed via Kubernetes CronJob for automated processing</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway for API routing and cross-cutting concerns</span>

**Testing Frameworks:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Backend: JUnit 5, Mockito, Spring Boot Test, MockMvc for REST API testing</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Frontend: React Testing Library, Jest for component and integration testing</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Database: Spring Boot Test with @DataJpaTest for repository layer testing</span>

**Data Management:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL tables: USRSEC, ACCTDAT, CUSTDAT, CARDDAT, XREFFILE, TRANSACT</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA entity classes with composite primary key support</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Standardized copybook structure mapping to JPA entities</span>

**Legacy Compatibility:**
<span style="background-color: rgba(91, 57, 243, 0.2)">COBOL files kept only for parity testing; primary implementation artifacts are new Java/React files</span>

**Files Previously Examined:**
- `app/cbl/COSGN00C.cbl` - Authentication reference implementation
- `app/cbl/COACTUPC.cbl` - Account update business logic reference  
- `app/cbl/COTRN02C.cbl` - Transaction processing workflow reference
- `app/cbl/CBACT04C.cbl` - Batch processing logic reference

**Directory Structure Reference:**
- `/app/cbl/` - Legacy COBOL programs (36 files) maintained for functional parity validation
- `/app/cpy/` - Copybook definitions (28 structures) informing JPA entity design  
- `/app/bms/` - Screen mapset definitions (18 files) informing React component design
- `/app/data/` - Sample data structure informing PostgreSQL schema design

# 3. TECHNOLOGY STACK

## 3.1 PROGRAMMING LANGUAGES

### 3.1.1 Primary Programming Languages

**<span style="background-color: rgba(91, 57, 243, 0.2)">Java 21 (Long Term Support)</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Oracle JDK 21.0.1 LTS with Spring Boot 3.2.x compatibility</span>
- **Usage**: <span style="background-color: rgba(91, 57, 243, 0.2)">Primary backend language for all business logic implementation across 36 modernized service classes (24 REST controller services, 12 Spring Batch job services)</span>
- **Selection Criteria**: 
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Long-term support lifecycle ensuring enterprise stability and security updates through 2031</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal precision capabilities essential for maintaining COBOL COMP-3 financial calculation accuracy</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Native Spring Boot 3.x integration enabling modern dependency injection and transaction management</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Enhanced virtual threads (Project Loom) providing high-concurrency performance for REST API endpoints</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Pattern matching and records features enabling clean data transfer object implementations</span>
- **Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Requires Spring Boot 3.2.x framework, Jakarta EE 10 specifications, and Maven 3.9+ build system</span>
- **Constraints**: <span style="background-color: rgba(91, 57, 243, 0.2)">All BigDecimal operations must maintain scale and rounding mode consistency with original COBOL packed decimal behavior</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">JavaScript (ES2023/ES14)</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">ECMAScript 2023 with Node.js 20.x LTS runtime support</span>
- **Usage**: <span style="background-color: rgba(91, 57, 243, 0.2)">Primary frontend language for React Single Page Application implementing 18 modernized screen components from BMS mapset definitions</span>
- **Selection Criteria**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Native React ecosystem compatibility for component-based UI development</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Modern async/await patterns enabling seamless REST API integration</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">ES2023 features including Array.findLast() and top-level await for enhanced development productivity</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Browser-native execution eliminating compilation overhead for development environments</span>
- **Implementation Examples**: <span style="background-color: rgba(91, 57, 243, 0.2)">React component state management replicating 3270 screen field validation and PF-key navigation patterns</span>
- **Constraints**: <span style="background-color: rgba(91, 57, 243, 0.2)">All form validation logic must maintain identical field-level validation rules from original BMS screen definitions</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">ANSI-SQL (SQL:2016 Standard)</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL 16.x implementation with ANSI-SQL:2016 compliance</span>
- **Usage**: <span style="background-color: rgba(91, 57, 243, 0.2)">Core language for DDL schema definition and DML query operations replacing VSAM KSDS dataset access patterns</span>
- **Selection Criteria**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Standards-compliant syntax ensuring database portability and maintainability</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Composite primary key support replicating VSAM key structures across account, transaction, and reference data tables</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Advanced window functions enabling STARTBR/READNEXT/READPREV browse operation simulation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">ACID transaction capabilities maintaining CICS SYNCPOINT data integrity guarantees</span>
- **Implementation Examples**: <span style="background-color: rgba(91, 57, 243, 0.2)">DDL scripts generating PostgreSQL table structures with composite keys matching VSAM dataset organization (ACCTDAT, TRANSACT, CARDDAT)</span>
- **Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Seamless integration with Spring Data JPA through native query capabilities and custom repository methods</span>

### 3.1.2 Specialized Domain Languages

**<span style="background-color: rgba(91, 57, 243, 0.2)">JSX/TSX (JavaScript XML/TypeScript XML)</span>**
- **Usage**: <span style="background-color: rgba(91, 57, 243, 0.2)">Specialized templating language for React component definitions replacing BMS macro language across 18 screen implementations</span>
- **Preprocessor Components**: <span style="background-color: rgba(91, 57, 243, 0.2)">Babel JSX transformer with React createElement compilation, TypeScript JSX factory for type-safe component props</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Required for React component composition enabling declarative UI definition with component state integration</span>
- **Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Direct integration with React framework providing compile-time optimization and runtime performance for dynamic screen generation</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">YAML (Yet Another Markup Language)</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">YAML 1.2 specification with docker-compose 3.8+ and Kubernetes 1.28+ compatibility</span>
- **Usage**: <span style="background-color: rgba(91, 57, 243, 0.2)">Infrastructure description language for container orchestration manifests and Spring Boot configuration files</span>
- **Implementation Examples**: 
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`docker-compose.yml` defining multi-container application architecture with PostgreSQL, Redis, and Spring Boot services</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`kubernetes/deployment.yaml` specifying production deployment configurations and resource management</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`application.yml` containing Spring Boot environment-specific configuration replacing CICS system definition parameters</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Human-readable syntax enabling infrastructure-as-code practices with version control integration and configuration management automation</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">JSON (JavaScript Object Notation)</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">JSON (RFC 7159) with UTF-8 encoding specification</span>
- **Usage**: <span style="background-color: rgba(91, 57, 243, 0.2)">Standard data-interchange format for REST API request/response payloads replacing COBOL COMMAREA structures</span>
- **Selection Criteria**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Language-agnostic data exchange enabling seamless frontend-backend communication</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Native JavaScript object notation providing zero-transformation cost in React components</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Structured data validation through JSON Schema specifications ensuring API contract compliance</span>
- **Implementation Examples**: <span style="background-color: rgba(91, 57, 243, 0.2)">REST endpoint payloads converting COBOL SEND/RECEIVE MAP operations to JSON request/response patterns with identical field structures</span>
- **Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic serialization/deserialization through Spring Boot Jackson library and React fetch API implementations</span>

## 3.2 FRAMEWORKS & LIBRARIES

### 3.2.1 Core Application Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot 3.2.x</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot 3.2.1 with Jakarta EE 10 compliance</span>
- **Core Components**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring MVC for REST controller implementation replacing CICS transaction programs</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Dependency Injection container managing service lifecycle and component wiring</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Auto-configuration capabilities eliminating boilerplate configuration code</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Embedded Tomcat server providing production-ready HTTP processing</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Actuator endpoints for application monitoring and health checks</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Industry-standard enterprise framework providing convention-over-configuration development, production-ready features, and comprehensive ecosystem integration replacing CICS transaction processing capabilities</span>
- **Compatibility Requirements**: <span style="background-color: rgba(91, 57, 243, 0.2)">Requires Java 21 LTS runtime environment with Jakarta EE 10 specifications</span>
- **Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Native integration with Spring Security, Spring Data JPA, and Spring Cloud components</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch 5.x</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch 5.0.1 with Spring Boot integration</span>
- **Core Capabilities**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Chunk-based processing for high-volume transaction operations</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Job restart and recovery mechanisms maintaining CICS SYNCPOINT integrity</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Step execution monitoring and error handling</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Parallel processing capabilities for concurrent batch operations</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">JobRepository metadata management for execution tracking</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise-grade batch processing framework replacing JCL job execution while maintaining identical processing sequences and restart capabilities across 12 converted batch programs</span>
- **Implementation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Direct replacement of JCL jobs including daily interest calculation, statement generation, and transaction validation processing</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway 4.0.x</span>
- **Core Functions**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Request routing and load balancing for microservices architecture</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication and authorization gateway processing</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Rate limiting and circuit breaker patterns</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Request/response transformation and filtering</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Centralized cross-cutting concern management</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-native API gateway providing centralized request routing between React frontend and Spring Boot backend services, replacing CICS terminal control functions</span>
- **Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Seamless integration with Spring Security for authentication propagation and Spring Boot services for backend routing</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Config</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Config 4.0.x (Client and Server components)</span>
- **Configuration Management**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Centralized configuration server for environment-specific properties</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Git-backed configuration repository with version control integration</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic configuration refresh without application restart</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Environment profile management for development, staging, and production</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Encrypted property values for sensitive configuration data</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise configuration management service replacing CICS system definition parameters and enabling cloud-native deployment flexibility</span>
- **Implementation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Replaces traditional application.yml files with centralized configuration management across all Spring Boot services</span>

### 3.2.2 Security and Session Management Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security 6.x</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security 6.2.1 with OAuth2 and JWT support</span>
- **Security Components**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication manager with multiple provider support</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Role-based authorization replacing RACF security controls</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Method-level security annotations for service protection</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">CSRF protection and secure headers configuration</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Password encoding with BCrypt hashing algorithms</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive enterprise security framework replacing RACF authentication and authorization while maintaining identical access control patterns and user role management</span>
- **Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Seamless integration with Spring Boot controllers and Spring Session for stateless authentication across distributed services</span>
- **Migration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Direct replacement of RACF user groups with Spring Security roles, maintaining identical permission structures and menu access controls</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session with Redis Backend</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session 3.2.x with Redis 7.x integration</span>
- **Session Management Capabilities**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Distributed session storage replacing CICS COMMAREA structures</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Session clustering and replication for horizontal scaling</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Configurable session timeout and persistence policies</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Session event listeners for audit and monitoring</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">JSON serialization for complex session objects</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">High-performance session management providing COMMAREA-equivalent state persistence across REST API calls while enabling stateless microservices architecture</span>
- **Implementation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Direct replacement of CICS COMMAREA passing with Redis-backed session attributes maintaining identical program-to-program data sharing patterns</span>

### 3.2.3 Frontend Framework Libraries (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">React 18.x</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">React 18.2.0 with Concurrent Features support</span>
- **Core Capabilities**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Component-based architecture for modular UI development</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Virtual DOM for optimized rendering performance</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Hooks for state management and side effects</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Suspense and Error Boundaries for async loading</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Concurrent rendering for improved user experience</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Industry-standard frontend framework replacing BMS mapset definitions while maintaining identical screen layouts and navigation patterns across 18 converted screen components</span>
- **Implementation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Direct conversion of CICS BMS screens to React components with PF-key functions mapped to keyboard event handlers</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">React Router 6.x</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">React Router 6.8.0 with data loading features</span>
- **Navigation Components**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Declarative routing configuration</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Nested route hierarchies matching CICS transaction flow</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Route parameters and query string handling</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Browser history management and navigation guards</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Lazy loading for code splitting optimization</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Client-side routing library enabling Single Page Application navigation while replicating CICS program-to-program transfer patterns</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Material-UI (MUI)</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Material-UI 5.14.x with design system components</span>
- **UI Component Library**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Pre-built accessible components for forms and tables</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Consistent theming and typography system</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Responsive grid layout components</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Input validation and error message display</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Modal dialogs and notification systems</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive UI component library providing professional appearance and accessibility compliance while maintaining functional equivalence to original 3270 screen layouts</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Formik and Yup Validation</span>**
- **Versions**: <span style="background-color: rgba(91, 57, 243, 0.2)">Formik 2.4.x and Yup 1.3.x</span>
- **Form Management Capabilities**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Declarative form state management</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Field-level validation with custom rules</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Error handling and message display</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Form submission and async processing</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Schema-based validation with Yup integration</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive form management replacing BMS field validation logic while maintaining identical validation rules and error message patterns</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Axios HTTP Client</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Axios 1.6.x with interceptors and error handling</span>
- **HTTP Communication Features**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Promise-based HTTP request/response handling</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Request and response interceptors for authentication</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic JSON serialization and deserialization</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Error handling and retry mechanisms</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Request timeout and cancellation support</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Reliable HTTP client library replacing CICS SEND/RECEIVE MAP operations with REST API communication while maintaining identical request/response patterns</span>

### 3.2.4 Data Access and Persistence Libraries (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA 3.2.1 with Hibernate 6.x implementation</span>
- **Data Access Features**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Repository pattern with automatic query generation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Custom query methods with @Query annotations</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction management with ACID compliance</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Entity mapping with composite primary key support</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Pagination and sorting for large datasets</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Object-relational mapping framework replacing VSAM file control operations while maintaining identical data access patterns and transaction integrity</span>
- **Implementation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Direct replacement of CICS file control commands (READ, WRITE, REWRITE, DELETE) with JPA repository methods</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL JDBC Driver</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL JDBC Driver 42.7.x</span>
- **Database Connectivity Features**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">High-performance database connection pooling</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Advanced data type mapping and conversion</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Prepared statement caching and optimization</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">SSL connection security and authentication</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Bulk insert and batch processing support</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise-grade database connectivity replacing VSAM dataset access while maintaining identical data consistency and performance characteristics</span>
- **Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Seamless integration with Spring Boot auto-configuration and HikariCP connection pooling</span>

### 3.2.5 Utility and Processing Libraries (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Jackson JSON Processing</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Jackson 2.16.x with comprehensive serialization support</span>
- **JSON Processing Capabilities**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">High-performance JSON serialization and deserialization</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Custom serializers for BigDecimal precision handling</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Annotation-based property mapping and validation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Date/time formatting with timezone support</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Polymorphic type handling and inheritance</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Industry-standard JSON processing library replacing COBOL COMMAREA structures while maintaining identical data precision and format requirements</span>
- **Implementation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic conversion of REST API request/response payloads with custom serializers maintaining COBOL packed decimal accuracy</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Lombok Code Generation</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Lombok 1.18.30 with annotation processing</span>
- **Code Generation Features**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic getter/setter generation for entity classes</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Builder pattern implementation for complex objects</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Equals/hashCode generation for composite keys</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Logging field injection with SLF4J integration</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Constructor generation and validation</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Productivity enhancement library reducing boilerplate code while maintaining clean and maintainable Java class definitions</span>
- **Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Seamless integration with Spring Boot and JPA entities through compile-time annotation processing</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer with Prometheus Registry</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer 1.12.x with Prometheus 1.14.x integration</span>
- **Application Metrics Capabilities**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Application performance monitoring and metrics collection</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Custom business metrics for transaction monitoring</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">JVM metrics including memory, garbage collection, and threads</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">HTTP request metrics with response time tracking</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Database connection pool monitoring</span>
- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive observability framework replacing CICS monitoring and statistics while providing enhanced visibility into application performance and business operations</span>
- **Implementation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Integration with Spring Boot Actuator providing production-ready monitoring endpoints and operational dashboards</span>

### 3.2.6 Compatibility and Integration Requirements

#### Framework Compatibility Matrix

| Framework Component | Version | Java 21 | Spring Boot 3.2.x | PostgreSQL 16.x | React 18.x | Compatibility Status |
|-------------------|---------|---------|-------------------|----------------|------------|---------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">6.2.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Fully Compatible</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">5.0.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">N/A</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Backend Compatible</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">4.0.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">N/A</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Gateway Compatible</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session Redis</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">3.2.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">N/A</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Compatible</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL JDBC</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">42.7.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">✓</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">N/A</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Compatible</span>** |

#### Integration Architecture Requirements

**<span style="background-color: rgba(91, 57, 243, 0.2)">Frontend-Backend Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">React components communicate with Spring Boot REST controllers through Axios HTTP client, replacing CICS terminal-to-program communication patterns while maintaining identical request/response data structures</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Security Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security manages authentication across all layers with JWT token propagation from React frontend through Spring Cloud Gateway to Spring Boot services, replacing RACF security validation while maintaining identical access control patterns</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Data Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA with PostgreSQL JDBC driver provides ACID-compliant data access replacing VSAM file operations while maintaining identical transaction boundaries and data consistency requirements</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Session Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session with Redis backend maintains stateful interactions across REST API calls, replicating CICS COMMAREA functionality while enabling horizontal scaling and session clustering capabilities</span>.

## 3.3 DATABASES & STORAGE

### 3.3.1 Primary Data Storage (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL 15.x Relational Database</span>**
- **Type**: <span style="background-color: rgba(91, 57, 243, 0.2)">ACID-compliant relational database with composite primary key support</span>
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL 15.4 with advanced indexing capabilities</span>
- **Core Tables** <span style="background-color: rgba(91, 57, 243, 0.2)">(PostgreSQL equivalent of VSAM KSDS datasets)</span>:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`user_security` (USRSEC): User authentication and security records with composite key (user_id, security_level)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`account_data` (ACCTDAT): Account master repository with primary key (account_number) and foreign key relationships</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`customer_data` (CUSTDAT): Customer information storage with primary key (customer_id, account_type)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`card_data` (CARDDAT): Credit card records and metadata with composite key (card_number, card_type)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`transactions` (TRANSACT): Transaction history with composite key (transaction_id, account_number, transaction_date)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`transaction_category_balance` (TCATBAL): Balance maintenance with composite key (account_number, category_code, balance_date)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`disclosure_groups` (DISCGRP): Disclosure group definitions with primary key (disclosure_group_id)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`transaction_types` (TRANTYPE): Transaction type classification with primary key (transaction_type_code)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`transaction_categories` (TRANCATG): Category management with composite key (category_id, subcategory_code)</span>

#### Database Schema Architecture

**<span style="background-color: rgba(91, 57, 243, 0.2)">Composite Primary Key Strategy</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-column primary keys replicate VSAM key structures maintaining identical access patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Foreign key relationships enforce referential integrity across related tables</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Unique constraints ensure data consistency equivalent to VSAM alternate index behavior</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Indexing Strategy</span>** <span style="background-color: rgba(91, 57, 243, 0.2)">(replacing VSAM index structures)</span>:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`cross_reference_index` (XREFFILE equivalent): B-tree index on customer_id and account_number columns</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`customer_account_index` (CXACAIX equivalent): Multi-column index supporting customer-account relationships</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`card_access_index` (CARDAIX equivalent): Partial index on active card records for optimized retrieval</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Range-based indexes supporting STARTBR/READNEXT browse operations through ORDER BY queries</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Hash indexes for exact-match lookups replicating VSAM direct access patterns</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">JPA Entity Mapping</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">All tables mapped to corresponding JPA entities with @Entity and @Table annotations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Composite keys implemented using @EmbeddedId and @Embeddable classes</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal fields configured with appropriate precision and scale for COBOL COMP-3 compatibility</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Date/timestamp fields using Java 8 LocalDate and LocalDateTime classes</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Audit fields (@CreatedDate, @LastModifiedDate) for transaction tracking</span>

- **Selection Criteria**: <span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise-grade relational database providing ACID compliance, advanced indexing, and horizontal scaling capabilities while maintaining data consistency equivalent to VSAM KSDS organization with superior query performance and concurrent access handling</span>
- **Performance Characteristics**: <span style="background-color: rgba(91, 57, 243, 0.2)">Supports both direct access through primary keys and range-based queries with optimized B-tree indexes, concurrent transaction processing with MVCC, and automatic query optimization</span>
- **Data Access Layer**: <span style="background-color: rgba(91, 57, 243, 0.2)">All database operations performed through Spring Data JPA repositories replacing VSAM File Control API calls (READ, WRITE, REWRITE, DELETE) with equivalent JPA methods (findById, save, saveAndFlush, deleteById)</span>

### 3.3.2 Data Migration and ETL Processing (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch ETL Framework</span>**
- **Processing Engine**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch 5.0.x with chunk-based processing architecture</span>
- **Data Source**: Fixed-Width ASCII Files located in `app/data/ASCII/` directory
- **File Count**: 9 structured data files for system initialization and migration
- **Format**: Fixed-width text records with predefined field layouts matching COBOL copybook definitions
- **Migration Strategy**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch jobs process ASCII files through ItemReader/ItemProcessor/ItemWriter pattern replacing mainframe batch utilities with Java-based ETL processing</span>

#### ETL Job Configuration

**<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Job Implementation</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">FlatFileItemReader configured with FixedLengthTokenizer for parsing ASCII files</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Custom ItemProcessor classes implementing COBOL data type conversions and business validations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">JpaItemWriter for bulk insert operations with transaction boundaries matching CICS SYNCPOINT behavior</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Step execution monitoring with restart and recovery capabilities</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">JobRepository managing execution metadata and progress tracking</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Data Transformation Pipeline</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Field mapping preserving COBOL picture clause specifications to PostgreSQL column definitions</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">COMP-3 packed decimal conversion to BigDecimal with exact scale preservation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Date format transformation from COBOL date fields to ISO 8601 standard</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Character encoding conversion from EBCDIC to UTF-8 for text fields</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Referential integrity validation ensuring foreign key relationships across related tables</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Error Handling and Recovery</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Skip policy configuration for handling malformed records with detailed logging</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Retry mechanisms for temporary database connection failures</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction rollback capabilities maintaining data consistency during processing failures</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive audit logging for migration progress tracking and troubleshooting</span>

- **Usage**: <span style="background-color: rgba(91, 57, 243, 0.2)">One-time data migration from VSAM datasets to PostgreSQL tables, followed by ongoing batch processing for daily operations including interest calculation, statement generation, and transaction validation</span>
- **Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job scheduling through Spring Boot integration with database connection pooling and JPA entity management</span>

### 3.3.3 Caching and Performance Optimization

**Redis 7.x In-Memory Data Store**
- **Version**: Redis 7.0.5 with persistence and clustering support
- **Primary Functions**:
  - Session data storage replacing CICS COMMAREA structures
  - Frequently accessed reference data caching (transaction types, disclosure groups)
  - Application-level query result caching for complex joins
  - Distributed locking for concurrent batch processing
- **Selection Criteria**: High-performance in-memory storage providing sub-millisecond response times for session management and caching operations
- **Integration**: Spring Session Redis integration with automatic JSON serialization for session attributes

**Database Connection Pooling**
- **Implementation**: HikariCP with PostgreSQL JDBC driver
- **Configuration**: Maximum pool size optimized for concurrent transaction processing
- **Monitoring**: Connection pool metrics through Micrometer integration
- **Performance**: Connection reuse eliminating overhead of database connection establishment per transaction

### 3.3.4 Data Consistency and Transaction Management

**ACID Compliance Strategy**
- **Atomicity**: PostgreSQL transaction boundaries ensuring all-or-nothing operation completion
- **Consistency**: Foreign key constraints and check constraints maintaining data integrity
- **Isolation**: Read Committed isolation level preventing dirty reads while allowing concurrent access
- **Durability**: Write-ahead logging (WAL) with synchronous commit guaranteeing data persistence

**Transaction Boundary Management**
- **Spring @Transactional**: Declarative transaction management at service layer methods
- **Propagation Behavior**: REQUIRED propagation matching CICS SYNCPOINT boundaries
- **Rollback Rules**: Automatic rollback on runtime exceptions preserving data consistency
- **Read-Only Optimization**: Read-only transactions for query operations improving performance

### 3.3.5 Backup and Recovery Strategy

**Continuous WAL Archiving**
- **Archive Location**: Cloud storage integration for off-site backup retention
- **Recovery Point Objective (RPO)**: Maximum 15 minutes of data loss through continuous archiving
- **Point-in-Time Recovery**: Granular recovery capabilities for transaction-level restoration

**Database Replication**
- **Streaming Replication**: Asynchronous replication to standby instances for high availability
- **Load Balancing**: Read replica routing for query workload distribution
- **Failover Automation**: Automatic promotion of standby instances during primary failure

**Data Validation and Integrity Monitoring**
- **Consistency Checks**: Scheduled validation jobs comparing record counts and checksums
- **Referential Integrity**: Foreign key constraint monitoring with alert mechanisms
- **Data Quality Metrics**: Business rule validation ensuring migrated data maintains identical accuracy to VSAM sources

## 3.4 DEVELOPMENT & DEPLOYMENT

### 3.4.1 Development Environment (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Build System Architecture</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Build Tool - Backend</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Apache Maven 3.9.11 with Spring Boot integration</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Java 21 source compilation with dependency resolution through Maven Central repository</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Maven plugin for executable JAR packaging and containerization</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">JPA entity generation from database schemas with automatic validation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Lombok annotation processing for boilerplate code reduction</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Build Tool - Frontend</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Node.js 20.x LTS with npm package management</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">React application compilation with Webpack bundling and optimization</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">TypeScript transpilation for enhanced type safety and development experience</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">ESLint and Prettier integration for code quality and formatting consistency</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Production build optimization with tree shaking and code splitting</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Code Organization Structure</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Backend Directory Structure</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Standard Maven project layout in `/backend/` directory</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`/backend/src/main/java/com/carddemo/` - Spring Boot application classes organized by layer</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/controller/` - REST controllers for 24 transaction endpoints</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/service/` - Business logic services converting COBOL program logic</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/repository/` - Spring Data JPA repositories for data access</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/entity/` - JPA entities with composite primary keys and Lombok annotations</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/dto/` - Data Transfer Objects for REST API request/response payloads</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/config/` - Spring configuration classes and Bean definitions</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/batch/` - Spring Batch job configurations and processors</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/util/` - Utility classes including COBOL data type converters</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`/backend/src/test/java/com/carddemo/` - Unit and integration test classes</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/controller/` - REST controller integration tests with @SpringBootTest</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/service/` - Service layer unit tests with @MockBean annotations</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/repository/` - Repository tests with @DataJpaTest annotations</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`/batch/` - Spring Batch job tests with @SpringBatchTest</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`/backend/src/main/resources/` - Configuration files and database migrations</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`application.yml` - Spring Boot configuration profiles</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`db/migration/` - Flyway database migration scripts</span>
    - <span style="background-color: rgba(91, 57, 243, 0.2)">`data/` - Sample data files for development and testing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Frontend Directory Structure</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Standard React application layout in `/frontend/` directory</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`/frontend/src/components/` - React components converted from 18 BMS screen definitions</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`/frontend/src/pages/` - Page-level components implementing screen navigation flow</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`/frontend/src/services/` - API service classes for REST endpoint communication</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`/frontend/src/utils/` - Utility functions for form validation and data formatting</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`/frontend/src/hooks/` - Custom React hooks for state management and side effects</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`/frontend/src/assets/` - Static assets including styles, images, and theme definitions</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Project Layout Integration</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Lombok Usage Implementation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive annotation-driven development reducing boilerplate code</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`@Data` annotations on JPA entities providing automatic getter/setter generation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`@Builder` patterns for DTO construction and complex object creation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`@Slf4j` logging integration across all service and controller classes</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`@RequiredArgsConstructor` for dependency injection constructor generation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Test Directory Organization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive testing strategy with multiple test categories</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Unit tests with JUnit 5 and Mockito for isolated component testing</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Integration tests using @SpringBootTest for end-to-end functionality validation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Data layer tests with @DataJpaTest for repository and entity validation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Web layer tests with @WebMvcTest for REST controller testing</span>

### 3.4.2 Configuration Management (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Environment Variables and Configuration Keys</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Application Configuration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Profile-based configuration management replacing mainframe system parameters</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_PROFILES_ACTIVE` - Environment-specific profile activation (development, staging, production)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SERVER_PORT` - Application server port configuration (default 8080)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE` - Actuator endpoint exposure configuration</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Configuration Keys</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL connection and JPA configuration parameters</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_DATASOURCE_URL` - PostgreSQL database connection URL with SSL configuration</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_DATASOURCE_USERNAME` - Database user credentials with role-based access control</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_DATASOURCE_PASSWORD` - Encrypted database password with secrets management integration</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_JPA_HIBERNATE_DDL_AUTO` - Database schema management strategy (validate, update, create-drop)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_JPA_SHOW_SQL` - SQL logging configuration for development and debugging</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Configuration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session storage and caching configuration parameters</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_DATA_REDIS_HOST` - Redis server host address for session storage</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_DATA_REDIS_PORT` - Redis server port configuration (default 6379)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_DATA_REDIS_PASSWORD` - Redis authentication credentials with encryption</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_SESSION_STORE_TYPE` - Session store implementation (redis, jdbc, mongodb)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`SPRING_SESSION_TIMEOUT` - Session expiration timeout configuration</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Externalized Configuration via Spring Cloud Config</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Configuration Server Architecture</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Centralized configuration management replacing distributed parameter files</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Config Server 4.0.x providing centralized configuration repository</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Git-backed configuration storage with version control and audit capabilities</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Environment-specific property override hierarchy (application → profile → service-specific)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Encrypted property values using symmetric and asymmetric encryption keys</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic configuration refresh through Spring Cloud Bus and messaging infrastructure</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Configuration Repository Structure</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Organized configuration files supporting multiple deployment environments</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`carddemo-application.yml` - Common application configuration shared across all environments</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`carddemo-application-development.yml` - Development-specific database and logging configuration</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`carddemo-application-staging.yml` - Staging environment configuration with integrated testing parameters</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">`carddemo-application-production.yml` - Production configuration with security hardening and monitoring</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Configuration Client Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic configuration loading and refresh capabilities</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Bootstrap configuration loading from Config Server during application startup</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Configuration validation and fallback mechanisms for high availability</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Runtime configuration updates through Spring Cloud Config refresh endpoints</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Integration with service discovery for automatic Config Server endpoint resolution</span>

**Version Control Integration**
- **Current Version**: CardDemo_v2.0.0-cloud-native
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Repository Structure</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Monorepo organization with frontend and backend separation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Git submodules for configuration repository integration</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Feature branch workflow with automated CI/CD pipeline triggers</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Build Dependencies</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated dependency management through Maven and npm</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Maven dependency resolution for backend Java libraries and Spring Boot starters</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">npm package management for frontend React components and build tools</span>

### 3.4.3 Deployment Environment (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Runtime Platform Requirements</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Runtime</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Docker Engine v27.x with containerd runtime for production deployments</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-stage Docker builds for optimized container images with minimal attack surface</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Container security scanning with vulnerability assessment and compliance reporting</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Resource constraints and limits configuration for memory, CPU, and I/O management</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Orchestration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes 1.28+ clusters with advanced scheduling and auto-scaling capabilities</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Production deployment manifests defined in `kubernetes/deployment.yaml` with rolling update strategies</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Service mesh integration with Istio for advanced traffic management and observability</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Horizontal Pod Autoscaler (HPA) and Vertical Pod Autoscaler (VPA) for dynamic scaling</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Network policies and security contexts for container isolation and access control</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Local Development Environment</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Docker Compose-based multi-container application stack</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Development orchestration defined in `docker-compose.yml` with service dependency management</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Hot-reload capabilities for both frontend and backend development workflows</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Integrated debugging support with IDE connection and breakpoint management</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Deployment Dependencies and Infrastructure</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Infrastructure</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL 15.x clusters with high availability and automatic failover</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Primary-secondary replication configuration for read/write separation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Connection pooling with HikariCP for optimal database resource utilization</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Automated backup and point-in-time recovery with continuous WAL archiving</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Database monitoring and performance analytics through PostgreSQL Exporter and Prometheus</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Storage Infrastructure</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Redis 7.x clusters providing high-performance distributed session management</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Redis Cluster mode with automatic sharding and replication for scalability</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Session persistence configuration with RDB and AOF for data durability</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Redis Sentinel integration for automated failover and high availability</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Memory optimization and eviction policies for efficient cache management</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Registry and Image Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Private container registry with security scanning and vulnerability management</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Image versioning and tagging strategies for deployment lifecycle management</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Container image signing and verification for supply chain security</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Automated image cleanup and garbage collection policies</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring and Observability Stack</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive application and infrastructure monitoring</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus for metrics collection with custom business metrics and alerts</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Grafana dashboards for application performance and business intelligence visualization</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">ELK Stack (Elasticsearch, Logstash, Kibana) for centralized logging and log analytics</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Jaeger distributed tracing for request flow analysis and performance optimization</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Security and Compliance Infrastructure</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise-grade security controls and compliance monitoring</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Pod Security Standards (PSS) enforcement with security context restrictions</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Network security policies with ingress and egress traffic control</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Secrets management integration with Kubernetes Secrets and external vaults</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Audit logging and compliance reporting for regulatory requirements</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Container Deployment Configuration</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Docker Compose Development Stack</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Local development environment with integrated service dependencies</span>

```yaml
version: '3.8'
services:
  carddemo-backend:
    build: ./backend
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=development
      - SPRING_DATASOURCE_URL=jdbc:postgresql://postgres:5432/carddemo
      - SPRING_DATA_REDIS_HOST=redis
    depends_on:
      - postgres
      - redis
  
  carddemo-frontend:
    build: ./frontend
    ports:
      - "3000:3000"
    environment:
      - REACT_APP_API_BASE_URL=http://localhost:8080
    depends_on:
      - carddemo-backend
  
  postgres:
    image: postgres:15.4
    environment:
      - POSTGRES_DB=carddemo
      - POSTGRES_USER=carddemo
      - POSTGRES_PASSWORD=carddemo123
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
  redis:
    image: redis:7.0.5
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
```

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Production Deployment</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Production-ready manifests with comprehensive resource management</span>

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: carddemo-backend
  namespace: carddemo-production
spec:
  replicas: 3
  selector:
    matchLabels:
      app: carddemo-backend
  template:
    metadata:
      labels:
        app: carddemo-backend
    spec:
      containers:
      - name: carddemo-backend
        image: carddemo/backend:2.0.0
        ports:
        - containerPort: 8080
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "production"
        - name: SPRING_DATASOURCE_URL
          valueFrom:
            secretKeyRef:
              name: postgres-credentials
              key: database-url
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "1Gi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /actuator/health
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /actuator/health/readiness
            port: 8080
          initialDelaySeconds: 5
          periodSeconds: 5
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">CI/CD Pipeline Integration</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Build Automation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">GitHub Actions workflows for continuous integration and deployment</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-stage pipeline with parallel backend and frontend build processes</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Automated testing execution including unit, integration, and end-to-end tests</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Container image building and pushing to registry with security scanning</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes deployment automation with rolling updates and rollback capabilities</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Quality Gates and Governance</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated quality assurance and deployment approval processes</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Code quality analysis with SonarQube integration and quality gate enforcement</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Security vulnerability scanning at build time and runtime</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Performance testing and load testing integration with deployment pipelines</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Blue-green deployment strategies for zero-downtime production updates</span>

## 3.5 THIRD-PARTY SERVICES & INTEGRATIONS

### 3.5.1 API Gateway and Routing Services (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway</span>**
- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway 4.0.8 with WebFlux reactive architecture</span>
- **Core Functions**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Request routing and load balancing for microservices architecture replacing CICS transaction routing</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication and authorization gateway processing with JWT token validation</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Rate limiting and circuit breaker patterns for resilient service communication</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Request/response transformation and filtering with custom predicates and filters</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Centralized cross-cutting concern management including CORS, security headers, and logging</span>
- **Integration Architecture**: <span style="background-color: rgba(91, 57, 243, 0.2)">Serves as the single entry point for all client requests, routing between React frontend static resources and Spring Boot backend REST APIs, replacing mainframe terminal controller functions</span>
- **Route Configuration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Declarative routing rules defined in `application.yml` matching original CICS transaction IDs to corresponding REST endpoints (COACTUSR → /api/users, COACTCUS → /api/customers)</span>
- **Security Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Seamless integration with Spring Security OAuth2 Resource Server for token validation and user context propagation across service boundaries</span>

**Gateway Route Mapping Architecture**
- **Frontend Route Handling**: <span style="background-color: rgba(91, 57, 243, 0.2)">Static content serving for React Single Page Application with client-side routing support</span>
- **API Route Management**: <span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic routing to Spring Boot services based on path patterns and request headers</span>
- **Load Balancing**: <span style="background-color: rgba(91, 57, 243, 0.2)">Round-robin and weighted routing algorithms for distributing requests across multiple service instances</span>
- **Health Check Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic service discovery and health monitoring through Spring Boot Actuator endpoints</span>

### 3.5.2 Enterprise Integration Services (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Client Browser Requirements</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Supported Web Browsers</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Modern web browsers with ES2023 and CSS3 support replacing 3270 terminal emulation requirements</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Google Chrome 118+ (recommended primary browser)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Mozilla Firefox 119+ with full ES module support</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Microsoft Edge 118+ with Chromium engine</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Safari 16+ for macOS users with WebKit compatibility</span>
- **Required Browser Capabilities**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">JavaScript ES2023 execution engine for React application runtime</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">CSS Grid and Flexbox support for responsive layout rendering</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Fetch API for REST endpoint communication replacing CICS SEND/RECEIVE operations</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Web Storage API (localStorage/sessionStorage) for client-side state management</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">WebSocket support for real-time notifications and updates</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise Identity Provider Integration</span>**
- **OAuth2/OIDC Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security OAuth2 Client configuration supporting enterprise identity providers</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Microsoft Azure Active Directory integration with SAML 2.0 and OpenID Connect protocols</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Okta Identity Platform support with multi-factor authentication and SSO capabilities</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">LDAP/Active Directory integration through Spring Security LDAP authentication provider</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">JWT token-based authentication replacing RACF session management</span>
- **Role Mapping Configuration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise role to application role mapping preserving original RACF group permissions</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Admin users mapped from enterprise admin groups with full system access</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Regular users mapped from standard user groups with transaction processing access</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Read-only users mapped from viewer groups with inquiry-only permissions</span>

### 3.5.3 Database and Storage Services

**PostgreSQL 16.x Managed Database Service**
- **Version**: PostgreSQL 16.1 with enterprise extensions and high availability configuration
- **Service Integration**: Managed PostgreSQL service providing ACID-compliant relational data storage replacing VSAM KSDS dataset organization
- **Core Capabilities**:
  - Composite primary key support replicating VSAM key structures across all data tables
  - Advanced B-tree and Hash indexing for optimized query performance
  - Multi-version concurrency control (MVCC) enabling concurrent transaction processing
  - Point-in-time recovery with continuous WAL archiving for data durability
  - Read replica support for horizontal scaling and query workload distribution
- **Connection Management**: HikariCP connection pooling with optimized connection lifecycle management and leak detection
- **Monitoring Integration**: PostgreSQL Exporter for Prometheus with custom business metrics and alerting rules
- **Backup Strategy**: Automated daily backups with 30-day retention and cross-region replication for disaster recovery

**Cloud Storage Integration**
- **Blob Storage Service**: Integration with cloud-native blob storage for large file handling and archival
- **Document Storage**: PDF report generation and storage for statements and transaction history
- **Audit Log Storage**: Long-term retention of audit trails and compliance documentation
- **Data Lake Integration**: ETL pipeline support for analytics and business intelligence reporting

### 3.5.4 Session and Caching Services

**Redis 7.2.x Distributed Cache**
- **Version**: Redis 7.2.4 with Redis Cluster and persistence configuration
- **Primary Functions**:
  - Spring Session data storage replacing CICS COMMAREA structures with distributed session management
  - Application-level caching for frequently accessed reference data (transaction types, disclosure groups)
  - Query result caching for complex joins and reporting operations
  - Distributed locking mechanisms for coordinating batch processing operations
- **Cluster Architecture**: Redis Cluster mode with automatic sharding across multiple nodes for horizontal scaling
- **Persistence Strategy**: Combined RDB and AOF persistence ensuring data durability across service restarts
- **High Availability**: Redis Sentinel integration with automatic failover and master election
- **Security Configuration**: AUTH password protection and TLS encryption for secure data transmission
- **Monitoring**: Redis Exporter integration with comprehensive performance metrics and alerting

**Session Management Architecture**
- **Spring Session Integration**: Automatic session serialization and deserialization with JSON format
- **Session Replication**: Cross-node session replication ensuring user session persistence during service updates
- **Timeout Management**: Configurable session expiration policies with activity-based extension
- **Session Clustering**: Multi-region session replication for global user access and disaster recovery

### 3.5.5 Configuration Management Services

**Spring Cloud Config Server 4.0.x**
- **Version**: Spring Cloud Config Server 4.0.8 with Git backend and encryption support
- **Centralized Configuration**: Git-backed configuration repository managing all environment-specific properties
- **Configuration Hierarchy**:
  - Application-level defaults in `carddemo-application.yml`
  - Environment-specific overrides (development, staging, production)
  - Service-specific configuration for microservices architecture
  - Profile-based property resolution with Spring Boot integration
- **Security Features**:
  - Symmetric and asymmetric encryption for sensitive configuration values
  - Git repository authentication with SSH key and token-based access
  - Configuration endpoint security with Spring Security integration
  - Property masking for audit logs and monitoring dashboards
- **Dynamic Configuration**: Runtime property updates through Spring Cloud Bus with RabbitMQ messaging
- **High Availability**: Multi-instance deployment with load balancing and failover capabilities

**Configuration Repository Structure**
- **Version Control**: Git-based configuration with branch-specific environment management
- **Validation**: Configuration schema validation with automated testing and deployment verification
- **Audit Trail**: Complete change history with approver identification and rollback capabilities

### 3.5.6 Monitoring and Observability Services

**Application Performance Monitoring**
- **Micrometer with Prometheus**: Comprehensive application metrics collection with custom business indicators
  - JVM performance metrics (memory, garbage collection, thread pools)
  - Spring Boot Actuator integration with health checks and application insights
  - Custom transaction metrics tracking business KPIs and processing volumes
  - HTTP request metrics with response time distribution and error rate monitoring
- **Grafana Dashboards**: Business intelligence visualization with real-time operational dashboards
- **Alert Management**: Prometheus AlertManager integration with escalation policies and notification channels

**Distributed Tracing**
- **Spring Cloud Sleuth**: Automatic request tracing across service boundaries with correlation ID propagation
- **Zipkin Integration**: Distributed trace collection and analysis for performance optimization
- **Jaeger Compatibility**: Optional Jaeger backend support for advanced trace analysis and service dependency mapping

**Centralized Logging**
- **Logback with JSON Encoding**: Structured logging with correlation IDs and contextual information
- **ELK Stack Integration**: Elasticsearch, Logstash, and Kibana for log aggregation and analysis
- **Log Aggregation**: Centralized collection from all service instances with retention policies and archival

### 3.5.7 Development and Testing Services

**Containerization Platform**
- **Docker Engine**: Multi-stage Docker builds with optimized layer caching and security scanning
- **Docker Compose**: Local development environment orchestration with service dependency management
- **Container Registry**: Private registry with vulnerability scanning and image signing capabilities

**CI/CD Pipeline Services**
- **GitHub Actions**: Automated build, test, and deployment workflows with matrix builds and parallel execution
- **Quality Gates**: SonarQube integration with code quality metrics and security vulnerability detection
- **Automated Testing**: JUnit 5, Testcontainers, and Cypress integration for comprehensive test coverage
- **Deployment Automation**: Kubernetes deployment with rolling updates, health checks, and automatic rollback

### 3.5.8 Integration Architecture and Service Communication

**Inter-Service Communication Patterns**
- **REST API Communication**: HTTP/HTTPS with JSON payloads between frontend and backend services
- **Service Discovery**: Spring Cloud LoadBalancer with client-side load balancing and circuit breaker integration
- **API Documentation**: OpenAPI 3.0 specification with Swagger UI for developer documentation
- **Data Consistency**: Distributed transaction management using Spring Boot's declarative transaction boundaries

**Error Handling and Resilience**
- **Circuit Breaker Pattern**: Hystrix-style fault tolerance with fallback mechanisms and bulkhead isolation
- **Retry Logic**: Exponential backoff and jitter for handling transient failures
- **Timeout Management**: Configurable request timeouts with graceful degradation strategies
- **Health Check Orchestration**: Kubernetes liveness and readiness probes with dependency health monitoring

**Security Integration Points**
- **JWT Token Validation**: Stateless authentication with token signature verification across all service boundaries
- **HTTPS/TLS Encryption**: End-to-end encryption for all client-server and service-to-service communication
- **API Security**: Rate limiting, CORS configuration, and security headers for comprehensive protection
- **Audit Logging**: Security event logging with compliance reporting and threat detection integration

## 3.6 TECHNOLOGY ARCHITECTURE JUSTIFICATION

### 3.6.1 Strategic Technology Decisions (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Architecture Foundation</span>**
The technology stack reflects a deliberate choice to adopt a modern cloud-native architecture while maintaining <span style="background-color: rgba(91, 57, 243, 0.2)">100% functional parity with the existing mainframe system</span>. This approach provides several strategic advantages:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Proven Enterprise Reliability</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot framework delivers enterprise-grade reliability with production validation across thousands of organizations, providing equivalent stability to COBOL/CICS while enabling modern development practices</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Integrity Preservation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL ACID compliance with Spring @Transactional management ensures identical transaction processing guarantees, maintaining CICS SYNCPOINT behavior through declarative transaction boundaries</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Optimization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">React Single Page Application provides optimal user experience with client-side rendering and caching, while PostgreSQL indexing strategies replicate VSAM key access patterns with superior query performance</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Operational Continuity</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Docker containerization and Kubernetes orchestration maintain enterprise operational standards while providing enhanced deployment flexibility and scaling capabilities</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Minimal Change Migration Strategy</span>**
The chosen technologies specifically enable a like-for-like migration without altering business logic or introducing advanced features:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Direct Logic Translation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Java 21 with Spring Boot provides one-to-one mapping of COBOL program structures to Spring service classes, preserving existing paragraph-level business logic organization without enhancement</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Precision Parity</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal configuration with exact COBOL COMP-3 scale and rounding behavior ensures financial calculations maintain identical precision without introducing advanced Java 21 mathematical features</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Screen Layout Preservation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">React component generation directly from BMS mapset definitions maintains identical field layouts, validation rules, and PF-key navigation patterns without UI/UX modernization</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Flow Continuity</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway routing preserves exact CICS transaction code patterns and program-to-program transfer sequences without introducing microservices decomposition</span>

### 3.6.2 Modernization Pathway Considerations (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Controlled Scope Cloud Migration</span>**
The current technology stack is specifically designed to support essential cloud-native capabilities while <span style="background-color: rgba(91, 57, 243, 0.2)">explicitly excluding advanced features to prevent scope creep</span>:

**Included Cloud-Native Capabilities:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Containerization Readiness</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Docker containers provide application packaging and deployment consistency with resource isolation and portability</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Orchestration Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes deployment manifests support basic rolling updates, health checks, and resource management</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">API Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">REST API interfaces enable modern integration patterns while maintaining existing data formats and communication protocols</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Modernization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL provides ACID compliance and relational capabilities with cloud-native backup and recovery options</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Explicitly Excluded Advanced Capabilities</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Auto-scaling Policies</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Horizontal Pod Autoscaler (HPA) and Vertical Pod Autoscaler (VPA) are not implemented to maintain predictable resource allocation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Service Mesh Implementation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Istio service mesh, advanced traffic management, and distributed tracing remain out of scope to prevent architectural complexity</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Event-Driven Architecture</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Message queues, event streaming, and asynchronous processing patterns are excluded to preserve synchronous transaction processing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Java 21 Features</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Virtual threads, pattern matching, and records are intentionally avoided to prevent behavioral changes from original COBOL logic</span>

**Incremental Enhancement Path**
The architecture provides a foundation for future enhancements while maintaining current functional boundaries:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Component Isolation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot services are structured to support eventual microservices decomposition without requiring immediate refactoring</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">API Versioning Support</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">REST controllers include versioning capabilities for backward compatibility during future enhancements</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring Readiness</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer integration provides metrics foundation for observability platform integration when business requirements warrant</span>

### 3.6.3 Security and Compliance Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise Security Integration</span>**
The technology stack maintains enterprise-grade security standards through modern cloud-native security controls:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication Framework</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security 6.x with role-based access control replaces RACF authentication while maintaining identical user roles and permission structures</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Protection</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL encrypted connections with TLS 1.3 and database-level encryption provide data-at-rest and data-in-transit protection superior to VSAM encryption capabilities</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Audit Trail</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator with custom audit logging maintains comprehensive transaction logging for regulatory compliance and audit requirements</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Security</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Pod Security Standards enforcement, network policies, and container image scanning provide multi-layered security controls with vulnerability management</span>

```mermaid
graph TB
    subgraph "Presentation Tier"
        A[React Single Page Application]
        B[Material-UI Components - 18 Screen Definitions]
        A --> B
    end
    
    subgraph "API Gateway Tier"
        C[Spring Cloud Gateway]
        D[Authentication & Routing]
        E[Rate Limiting & Security]
        C --> D
        C --> E
    end
    
    subgraph "Application Tier"
        F[Spring Boot Services]
        G[REST Controllers - 24 Endpoints]
        H[Service Layer - 36 Business Services]
        I[Spring Batch Jobs - 12 Processors]
        F --> G
        F --> H
        F --> I
    end
    
    subgraph "Data Tier"
        J[PostgreSQL Database]
        K[Redis Session Store]
        L[JPA Repositories & Entities]
        J --> L
    end
    
    subgraph "Infrastructure Services"
        M[Docker Containers]
        N[Kubernetes Orchestration]
        O[Spring Cloud Config]
    end
    
    B --> C
    E --> F
    H --> J
    H --> K
    M --> F
    N --> M
    O --> F
    
    style A fill:#e1f5fe
    style C fill:#f3e5f5
    style J fill:#e8f5e8
    style M fill:#fff3e0
```

### 3.6.4 Integration Requirements Summary (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Inter-Component Dependencies</span>**
The technology stack requires careful coordination between cloud-native components:

1. **<span style="background-color: rgba(91, 57, 243, 0.2)">Build Process Dependencies</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">React component generation must occur before Docker image creation, with Maven compilation preceding Spring Boot JAR packaging</span>
2. **<span style="background-color: rgba(91, 57, 243, 0.2)">Runtime Dependencies</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes cluster must have PostgreSQL and Redis services operational before Spring Boot application startup</span>
3. **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Dependencies</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL database schema must be created and populated through Spring Batch migration jobs before application processing</span>
4. **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Dependencies</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Config Server must be operational before Spring Boot services to provide authentication and database connection configurations</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Operational Requirements</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Backup and Recovery</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL WAL archiving and Redis persistence configuration integrated with cloud storage backup policies</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Monitoring</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer with Prometheus integration providing REST API response time tracking and database connection pool monitoring</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Capacity Planning</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes resource requests and limits configuration for predictable scaling without auto-scaling policies</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Maintenance Windows</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Rolling update deployment strategy for zero-downtime maintenance coordination across Spring Boot services and database maintenance</span>

#### References

**Technical Documentation Sources**:
- `backend/src/main/java/com/carddemo/` - Spring Boot source code demonstrating cloud-native technology implementation patterns
- `frontend/src/components/` - React component definitions showing modern UI technology usage  
- `backend/src/main/resources/db/migration/` - PostgreSQL schema definitions documenting relational database technology configuration
- `kubernetes/` - Deployment manifests demonstrating container orchestration technologies
- `docker-compose.yml` - Multi-container development environment configuration

**Repository Analysis Sources**:
- `/backend/` - Spring Boot application technology stack implementation
- `/frontend/` - React application technology stack implementation  
- Version metadata: CardDemo_v2.0.0-cloud-native

# 4. PROCESS FLOWCHART

## 4.1 SYSTEM WORKFLOWS

### 4.1.1 Core Business Processes

The CardDemo application implements a comprehensive set of business processes designed for enterprise-grade credit card management. These workflows encompass user authentication, account management, credit card operations, transaction processing, and automated batch operations, all integrated through a modern Spring Boot three-tier architecture with <span style="background-color: rgba(91, 57, 243, 0.2)">REST API controllers, service layer components, and PostgreSQL data access repositories</span>.

#### 4.1.1.1 Authentication and Session Management Workflow (updated)

The authentication system serves as the primary entry point for all user interactions, implementing secure sign-on through the <span style="background-color: rgba(91, 57, 243, 0.2)">SignOnController → POST /api/auth/signon</span> with role-based access control.

```mermaid
flowchart TD
    A["User Initiates Sign-On Request"] --> B["SignOnController → POST /api/auth/signon"]
    B --> C["Render SignOn.jsx component"]
    C --> D["User Enters Credentials"]
    D --> E{"0000-init Method in SignOnService"}
    E -->|Invalid| F["Display Error Message JSON Response"]
    F --> C
    E -->|Valid| G{"1000-validate-user Method in SignOnService"}
    G -->|Admin User| H["Transfer to AdminMenuController → /menus/admin"]
    G -->|Regular User| I["Transfer to MainMenuController → /menus/main"]
    H --> J["Session Context Stored via Spring Session (Redis)"]
    I --> J
    J --> K["User Session Active"]
    K --> L["Keyboard event handler (PF-key emulation) in React"]
    L --> M["Clear Session Context"]
    M --> N["Commit at Spring @Transactional boundary (matches CICS SYNCPOINT)"]
    N --> O["Return to Sign-On Screen"]
    
    style A fill:#e1f5fe
    style K fill:#c8e6c9
    style F fill:#ffcdd2
    style E fill:#fff3e0
    style G fill:#fff3e0
```

**Java Package Paths:**
- Controller: `com.carddemo.controller.SignOnController`
- Service: `com.carddemo.service.SignOnService`
- Repository: `com.carddemo.repository.UserSecurityRepository`

**Key Decision Points:**
- Credential validation against USRSEC dataset via <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT FROM usrsec USING composite PK via JPA repository</span> (< 2 second response requirement)
- User type determination for role-based menu access
- Session timeout management for security compliance

**Error Handling:**
- Invalid credentials display error message with field highlighting
- Failed authentication attempts logged for audit trail
- Automatic session timeout after inactivity period
- <span style="background-color: rgba(91, 57, 243, 0.2)">JSON error responses preserve existing field-level error codes and formats</span>

#### 4.1.1.2 Menu Navigation System Workflow (updated)

The menu navigation system provides role-based access to system functions through dynamic menu generation and standardized navigation patterns.

```mermaid
flowchart TD
    A[Authenticated User Session] --> B{User Role Check}
    B -->|Admin| C["AdminMenuController → /menus/admin"]
    B -->|Regular| D["MainMenuController → /menus/main"]
    
    C --> E["Render AdminMenu.jsx component from COADM02Y"]
    D --> F["Render MainMenu.jsx component from COMEN02Y"]
    
    E --> G[User Selection Input]
    F --> G
    
    G --> H{"1000-validate-selection Method in MenuService"}
    H -->|Invalid| I[Display Error Message JSON Response]
    I --> G
    H -->|Valid| J[Execute Transfer to Selected REST Endpoint]
    
    J --> K[Target Controller Execution]
    K --> L{Navigation Key Pressed}
    L -->|PF3| M[Return to Previous Menu]
    L -->|ENTER| N[Continue Current Function]
    L -->|PF7/PF8| O["Keyboard event handler (PF-key emulation) in React"]
    
    M --> P[Transfer Control Back to Menu Controller]
    N --> Q["Commit at Spring @Transactional boundary (matches CICS SYNCPOINT)"]
    O --> K
    Q --> K
    
    style A fill:#e1f5fe
    style K fill:#c8e6c9
    style I fill:#ffcdd2
    style H fill:#fff3e0
```

**Java Package Paths:**
- Controller: `com.carddemo.controller.MenuController`
- Service: `com.carddemo.service.MenuService`
- Repository: `com.carddemo.repository.MenuOptionRepository`

**Navigation Patterns:**
- Dynamic menu option generation from copybook definitions
- Standardized keyboard event handler functions across all screens
- <span style="background-color: rgba(91, 57, 243, 0.2)">Session Context Stored via Spring Session (Redis)</span>-based session state preservation between REST calls

#### 4.1.1.3 Account Management Operations Workflow (updated)

Account management provides comprehensive viewing and updating capabilities for customer and account information with extensive field validation.

```mermaid
flowchart TD
    A["User Selects Account Function"] --> B{Function Type}
    B -->|View| C["AccountViewController → GET /api/accounts/view"]
    B -->|Update| D["AccountUpdateController → PUT /api/accounts/update"]
    
    C --> E["Enter 11-Digit Account Filter"]
    E --> F["SELECT FROM acct_dat USING composite PK via JPA repository"]
    F --> G{2000-find-account Method in AccountService}
    G -->|No| H["Display Account Not Found JSON Response"]
    G -->|Yes| I["Retrieve Customer Data from CUSTDAT via JPA"]
    I --> J["Render AccountView.jsx component"]
    J --> K["User Review Complete"]
    
    D --> L["Enter Account ID for Update"]
    L --> M["SELECT with UPDATE Lock via JPA"]
    M --> N{Record Available}
    N -->|Locked| O["Display Record Busy Message JSON Response"]
    N -->|Available| P["Render AccountUpdate.jsx component"]
    P --> Q["User Updates Fields"]
    Q --> R["3000-validate-fields Method in AccountService"]
    
    R --> S{Validation Results}
    S -->|Errors| T["Display Field Errors JSON Response with DFHRED equivalent"]
    T --> Q
    S -->|Valid| U["Perform UPDATE Operation via JPA Repository"]
    U --> V["Update ACCTDAT and CUSTDAT via JPA"]
    V --> W["Release Record Locks"]
    W --> X["Commit at Spring @Transactional boundary (matches CICS SYNCPOINT)"]
    X --> Y["Display Success Message JSON Response"]
    
    style A fill:#e1f5fe
    style K fill:#c8e6c9
    style Y fill:#c8e6c9
    style H fill:#ffcdd2
    style O fill:#ffcdd2
    style T fill:#ffcdd2
    style G fill:#fff3e0
    style N fill:#fff3e0
    style S fill:#fff3e0
```

**Java Package Paths:**
- Controller: `com.carddemo.controller.AccountController`
- Service: `com.carddemo.service.AccountService`
- Repository: `com.carddemo.repository.AccountRepository`

**Validation Rules:**
- Date validation (CCYYMMDD format via <span style="background-color: rgba(91, 57, 243, 0.2)">DateValidationService</span>)
- SSN format validation
- Phone number validation against <span style="background-color: rgba(91, 57, 243, 0.2)">area code lookup table</span>
- State/ZIP code cross-validation
- FICO score range validation

#### 4.1.1.4 Credit Card Operations Workflow (updated)

Credit card operations manage the complete lifecycle of credit cards including listing, viewing, and updating with comprehensive cross-reference validation.

```mermaid
flowchart TD
A["User Selects Card Function"] --> B{Function Type}
B -->|List| C["CardListController → GET /api/cards/list"]
B -->|Detail| D["CardDetailController → GET /api/cards/detail"]
B -->|Update| E["CardUpdateController → PUT /api/cards/update"]

C --> F["Enter Search Criteria"]
F --> G["Cursor-based pagination query on card_dat table"]
G --> H["1000-browse-cards Method in CardService"]
H --> I["Render CardList.jsx component - Up to 7 Cards Per Page"]
I --> J{User Action}
J -->|PF7/PF8| K["Keyboard event handler (PF-key emulation) in React"]
J -->|Selection| L["Navigate to Detail/Update"]
K --> H
L --> D

D --> M["SELECT FROM card_dat via JPA Repository"]
M --> N["Render CardDetail.jsx component"]
N --> O["User Review Complete"]

E --> P["Enter Card Number for Update"]
P --> Q["2000-read-card Method in CardService"]
Q --> R{Card Exists}
R -->|No| S["Display Card Not Found JSON Response"]
R -->|Yes| T["Render CardUpdate.jsx component"]
T --> U["User Updates Fields"]
U --> V["3000-validate-updates Method in CardService"]

V --> W{Validation Results}
W -->|Errors| X["Display Validation Errors JSON Response"]
X --> U
W -->|Valid| Y["Perform UPDATE with Change Detection via JPA"]
Y --> Z["Update Cross-Reference if Needed"]
Z --> AA["Commit at Spring @Transactional boundary (matches CICS SYNCPOINT)"]
AA --> BB["Display Success Message JSON Response"]

style A fill:#e1f5fe
style O fill:#c8e6c9
style BB fill:#c8e6c9
style S fill:#ffcdd2
style X fill:#ffcdd2
style R fill:#fff3e0
style W fill:#fff3e0
```

**Java Package Paths:**
- Controller: `com.carddemo.controller.CardController`
- Service: `com.carddemo.service.CardService`
- Repository: `com.carddemo.repository.CardRepository`

**Cross-Reference Management:**
- Account-to-card linkage validation via XREFFILE
- Card status transition validation
- Expiry date validation and business rule enforcement

### 4.1.2 Integration Workflows

#### 4.1.2.1 Transaction Processing Integration Workflow (updated)

Transaction processing integrates multiple system components to provide real-time transaction management with comprehensive validation and balance updates.

```mermaid
flowchart TD
A[User Initiates Transaction Function] --> B{Transaction Type}
B -->|List| C["TransactionController → GET /api/transactions/list"]
B -->|Add| D["TransactionController → POST /api/transactions/add"]
B -->|Payment| E["BillPaymentController → POST /api/payments/process"]

C --> F[Cursor-based pagination query on transact table]
F --> G[1000-browse-transactions Method in TransactionService]
G --> H[Render TransactionList.jsx component]
H --> I["Keyboard event handler (PF-key emulation) in React"]

D --> J[Render TransactionAdd.jsx component]
J --> K[User Enters Transaction Details]
K --> L[2000-validate-account-card Method in TransactionService]
L --> M{Cross-Reference Valid}
M -->|No| N[Display Invalid Account/Card Error JSON Response]
M -->|Yes| O[3000-validate-amount Method in TransactionService]
O --> P{Amount Valid}
P -->|No| Q[Display Amount Validation Error JSON Response]
P -->|Yes| R[4000-generate-transaction-id Method in TransactionService]
R --> S[Cursor-based pagination query for ID Generation]
S --> T[INSERT INTO transact table]
T --> U[5000-update-balances Method in AccountService]
U --> V["Commit at Spring @Transactional boundary (matches CICS SYNCPOINT)"]
V --> W[Display Transaction Success JSON Response]

E --> X[Render PaymentEntry.jsx component]
X --> Y[6000-validate-payment Method in PaymentService]
Y --> Z{Payment Validation}
Z -->|Invalid| AA[Display Payment Error JSON Response]
Z -->|Valid| BB[7000-create-payment Method in PaymentService]
BB --> CC[8000-update-account-balance Method in AccountService]
CC --> DD["Commit at Spring @Transactional boundary (matches CICS SYNCPOINT)"]
DD --> EE[Display Payment Confirmation JSON Response]

style A fill:#e1f5fe
style W fill:#c8e6c9
style EE fill:#c8e6c9
style N fill:#ffcdd2
style Q fill:#ffcdd2
style AA fill:#ffcdd2
style M fill:#fff3e0
style P fill:#fff3e0
style Z fill:#fff3e0
```

**Java Package Paths:**
- Controller: `com.carddemo.controller.TransactionController`
- Service: `com.carddemo.service.TransactionService`
- Repository: `com.carddemo.repository.TransactionRepository`

**Integration Points:**
- Real-time validation against CARDXREF for account-card linkage
- Transaction amount validation with business rule enforcement
- Balance update coordination between TRANSACT and ACCTDAT datasets

#### 4.1.2.2 Batch Processing Integration Workflow (updated)

The batch processing system coordinates multiple automated operations in a structured daily processing sequence with comprehensive error handling and restart capabilities.

```mermaid
flowchart TD
    A["Daily Processing Window Start"] --> B["TransactionPostingBatch → Spring Batch Job"]
    B --> C["FlatFileItemReader for DALYTRAN Sequential File"]
    C --> D["1000-validate-transactions Method in BatchValidationService"]
    D --> E{Validation Results}
    E -->|Errors| F["Generate Error Report via FileItemWriter"]
    E -->|Valid| G["INSERT INTO transact table via JPA"]
    
    F --> H["Continue with Valid Records"]
    G --> H
    H --> I["TransactionProcessingBatch → Spring Batch Job"]
    
    I --> J["2000-validate-posted Method in TransactionProcessingService"]
    J --> K["3000-update-category-balances Method in BalanceService"]
    K --> L["Generate Reject File for Invalid Transactions"]
    L --> M["InterestCalculationBatch → Spring Batch Job"]
    
    M --> N["SELECT FROM tcatbal Category Balances via JPA"]
    N --> O["4000-group-by-account Method in InterestService"]
    O --> P["Lookup Interest Rates from DISCGRP via JPA"]
    P --> Q["5000-calculate-monthly-interest Method in InterestService"]
    Q --> R["6000-generate-interest-transactions Method in InterestService"]
    R --> S["7000-update-account-balances Method in AccountService"]
    
    S --> T["StatementGenerationBatch → Spring Batch Jobs"]
    T --> U["SELECT transactions for period via JPA"]
    U --> V["8000-group-by-account Method in StatementService"]
    V --> W["9000-generate-plain-text Method in StatementService"]
    W --> X["9100-generate-html Method in StatementService"]
    X --> Y["ReportGenerationBatch → Spring Batch Job"]
    
    Y --> Z["SELECT date parameters via JPA"]
    Z --> AA["Filter Transactions by Date Range"]
    AA --> BB["Perform Lookups - CARDXREF, TRANTYPE, TRANCATG"]
    BB --> CC["Generate Formatted Report with Totals"]
    CC --> DD["Commit at Spring @Transactional boundary (matches CICS SYNCPOINT)"]
    DD --> EE["Daily Processing Complete"]
    
    E --> FF{Critical Error}
    FF -->|Yes| GG["Abnormal Termination - Spring Batch FAILED"]
    FF -->|No| HH["Continue Processing"]
    
    style A fill:#e1f5fe
    style EE fill:#c8e6c9
    style F fill:#ffcdd2
    style L fill:#ffcdd2
    style GG fill:#ffcdd2
    style E fill:#fff3e0
    style FF fill:#fff3e0
```

**Java Package Paths:**
- Controller: `com.carddemo.batch.controller.BatchController`
- Service: `com.carddemo.batch.service.BatchProcessingService`
- Repository: `com.carddemo.batch.repository.BatchDataRepository`

**Processing Coordination:**
- Sequential file processing with restart capability via Spring Batch
- Cross-reference validation across multiple PostgreSQL tables
- Error recovery with continuation processing for non-critical errors
- <span style="background-color: rgba(91, 57, 243, 0.2)">JSON error responses preserve existing field-level error codes and formats</span>

## 4.2 FLOWCHART REQUIREMENTS

### 4.2.1 State Management and Transaction Boundaries

The CardDemo system implements comprehensive state management through <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session with Redis backend and PostgreSQL @Transactional boundaries</span> to ensure data consistency and session integrity.

#### 4.2.1.1 <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session State Transitions

```mermaid
stateDiagram-v2
    [*] --> Initial: Session-Not-Initialized
    Initial --> Authenticated: Successful Login
    Authenticated --> Navigation: Menu Selection
    Navigation --> Transaction: Business Function Access
    Transaction --> Navigation: Function Complete
    Navigation --> Authenticated: Return to Menu
    Authenticated --> [*]: Sign Off
    
    state Transaction {
        [*] --> DataEntry: Input Screen Display
        DataEntry --> Validation: User Input
        Validation --> DataEntry: Validation Errors
        Validation --> Processing: Input Valid
        Processing --> Complete: Success
        Processing --> Error: System Error
        Error --> DataEntry: Error Display
        Complete --> [*]: Transaction End
    }
    
    state "@Transactional(SYNCPOINT)" as syncpoint1 {
        Initial --> Authenticated
    }
    
    state "@Transactional(SYNCPOINT)" as syncpoint2 {
        Processing --> Complete
    }
    
    state "@Transactional(SYNCPOINT)" as syncpoint3 {
        Authenticated --> [*]
    }
```

**State Management Rules:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session initialization occurs on first REST API request with Redis-backed session storage</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Session context preservation across REST controller calls through Spring Session ID propagation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic state cleanup on session invalidation or timeout through Redis TTL mechanisms</span>

*Logical steps preserved; only underlying technology layer changed as mandated.*

#### 4.2.1.2 <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Transaction Boundary Management

```mermaid
flowchart TD
    A[Transaction Start] --> B["SELECT ... FOR UPDATE"]
    B --> C{Lock Acquired}
    C -->|No| D[Display Record Busy]
    D --> E[User Retry or Cancel]
    E --> A
    C -->|Yes| F[Display Data for Modification]
    F --> G[User Updates Fields]
    G --> H[Validate Changes]
    H --> I{Validation Successful}
    I -->|No| J[Display Errors]
    J --> G
    I -->|Yes| K["JPA save() inside @Transactional scope"]
    K --> L{Save Successful}
    L -->|No| M[Display System Error]
    L -->|Yes| N["Transaction Commit"]
    N --> O[Display Success Message]
    O --> P[Transaction Complete]
    
    subgraph "@Transactional(SYNCPOINT) Boundary"
        B
        F
        G
        H
        I
        K
        N
    end
    
    style A fill:#e1f5fe
    style P fill:#c8e6c9
    style D fill:#ffcdd2
    style J fill:#ffcdd2
    style M fill:#ffcdd2
    style C fill:#fff3e0
    style I fill:#fff3e0
    style L fill:#fff3e0
```

*Logical steps preserved; only underlying technology layer changed as mandated.*

### 4.2.2 Error Handling and Recovery Processes

#### 4.2.2.1 Interactive Program Error Handling

```mermaid
flowchart TD
    A[Program Execution Start] --> B[0000-INIT Section]
    B --> C[1000-INPUT Section]
    C --> D[Input Validation]
    D --> E{Validation Errors}
    E -->|Yes| F[Set Error Flags]
    F --> G[2000-PROCESS Section - Error Display]
    G --> H[3000-OUTPUT Section]
    H --> I[SEND MAP with Error Attributes]
    I --> J[Return to User]
    
    E -->|No| K[2000-PROCESS Section - Business Logic]
    K --> L{Processing Errors}
    L -->|Yes| M[Call 9999-ABEND-PROGRAM]
    L -->|No| N[3000-OUTPUT Section]
    N --> O[SEND MAP with Success]
    O --> P[9000-CLOSE Section]
    P --> Q[Program Termination]
    
    M --> R[Display Error Message]
    R --> S[Call CEE3ABD if Critical]
    S --> T[Abnormal Termination]
    
    subgraph "@Transactional(SYNCPOINT) Boundary"
        D
        E
        K
        L
        N
    end
    
    style A fill:#e1f5fe
    style Q fill:#c8e6c9
    style F fill:#ffcdd2
    style M fill:#ffcdd2
    style T fill:#ffcdd2
    style E fill:#fff3e0
    style L fill:#fff3e0
```

*Logical steps preserved; only underlying technology layer changed as mandated.*

#### 4.2.2.2 Batch Program Error Recovery

```mermaid
flowchart TD
    A[Batch Job Start] --> B[Initialize Files and Counters]
    B --> C[Read Input Record]
    C --> D{End of File}
    D -->|Yes| E[Display Processing Statistics]
    E --> F[Normal Termination]
    
    D -->|No| G[Validate Record]
    G --> H{Validation Successful}
    H -->|No| I[Write to Error File]
    I --> J[Increment Error Counter]
    J --> K{Error Threshold Exceeded}
    K -->|Yes| L[Display Critical Error]
    L --> M[Call CEE3ABD - Abnormal Term]
    K -->|No| C
    
    H -->|Yes| N[Process Record]
    N --> O{Processing Successful}
    O -->|No| P[Check File Status]
    P --> Q[Display IO Error Status]
    Q --> R{Critical IO Error}
    R -->|Yes| M
    R -->|No| S[Continue Processing]
    S --> C
    
    O -->|Yes| T[Increment Success Counter]
    T --> C
    
    subgraph "@Transactional(SYNCPOINT) Boundary"
        G
        H
        N
        O
        T
    end
    
    style A fill:#e1f5fe
    style F fill:#c8e6c9
    style I fill:#ffeb3b
    style L fill:#ffcdd2
    style M fill:#ffcdd2
    style H fill:#fff3e0
    style K fill:#fff3e0
    style O fill:#fff3e0
    style R fill:#fff3e0
```

*Logical steps preserved; only underlying technology layer changed as mandated.*

### 4.2.3 Integration Sequence Diagrams

#### 4.2.3.1 Online-to-Batch Processing Integration

```mermaid
sequenceDiagram
    participant User
    participant CORPT00C as Report Menu
    participant SpringBoot as Spring Boot Environment  
    participant BatchJob as Spring Batch Job
    participant BatchPgm as Batch Program
    participant PostgreSQL as PostgreSQL Database
    
    User->>CORPT00C: Select Report Option
    CORPT00C->>CORPT00C: Capture Parameters
    CORPT00C->>CORPT00C: Build Dynamic Job Configuration
    CORPT00C->>SpringBoot: Submit to JobLauncher
    SpringBoot->>BatchJob: Process Job Submission
    BatchJob->>BatchPgm: Execute CBTRN03C Service
    BatchPgm->>PostgreSQL: Query Transaction Data
    PostgreSQL-->>BatchPgm: Transaction Records
    BatchPgm->>BatchPgm: Filter by Date Range
    BatchPgm->>PostgreSQL: Lookup Cross-References
    PostgreSQL-->>BatchPgm: Reference Data
    BatchPgm->>BatchPgm: Generate Report
    BatchPgm-->>User: Report Available
    
    rect rgba(91, 57, 243, 0.2)
        Note over SpringBoot,BatchPgm: @Transactional(SYNCPOINT) boundaries
        Note over BatchPgm,PostgreSQL: maintain ACID compliance
    end
```

*Logical steps preserved; only underlying technology layer changed as mandated.*

#### 4.2.3.2 Data Flow Integration Sequence

```mermaid
sequenceDiagram
    participant ETL as ETL Process
    participant FlatFiles as Flat Files
    participant Parser as Spring Batch Reader
    participant PostgreSQL as PostgreSQL Database
    participant REST as REST Controllers
    participant BatchSvc as Batch Services
    
    ETL->>FlatFiles: Read Source Files
    FlatFiles-->>ETL: Raw Fixed-Width Data
    ETL->>Parser: Process Record Layouts
    Parser->>Parser: Validate Field Formats
    Parser->>PostgreSQL: Load Tables via JPA
    PostgreSQL-->>Parser: Load Confirmation
    
    REST->>PostgreSQL: Real-time CRUD Operations
    PostgreSQL-->>REST: Immediate Response
    
    BatchSvc->>PostgreSQL: Sequential Processing
    PostgreSQL-->>BatchSvc: Batch Data Access
    BatchSvc->>PostgreSQL: Update Results
    
    rect rgba(91, 57, 243, 0.2)
        Note over Parser,PostgreSQL: @Transactional(SYNCPOINT) boundaries
        Note over REST,PostgreSQL: ensure data consistency
        Note over BatchSvc,PostgreSQL: across all operations
    end
```

*Logical steps preserved; only underlying technology layer changed as mandated.*

### 4.2.4 Validation Rules and Authorization Checkpoints

#### 4.2.4.1 Business Rule Validation Matrix

| Validation Category | Implementation Method | Spring Component | Transaction Boundary |
|---------------------|----------------------|------------------|---------------------|
| **Field Format Validation** | Bean Validation (@Valid) | @RestController methods | Per REST request |
| **Business Logic Rules** | Custom @Service methods | Service layer components | @Transactional scope |
| **Cross-Reference Integrity** | JPA @EntityManager queries | Repository layer | Database constraints |
| **Authorization Checks** | Spring Security @PreAuthorize | Security filter chain | Session-based |
| **Regulatory Compliance** | Audit @EventListener | Aspect-oriented programming | Async processing |

#### 4.2.4.2 Data Validation Requirements

**Input Field Validation:**
- Date format validation (CCYYMMDD) through custom @DateFormat annotations
- Numeric precision validation maintaining COBOL COMP-3 equivalency via BigDecimal scale configuration
- String length validation with database column constraints
- Pattern matching validation for SSN, phone numbers, and account identifiers

**Business Rule Enforcement:**
- Account balance validation before transaction posting
- Credit limit validation against available balance
- Card expiration date validation for active transactions
- Interest rate calculation validation against configured parameters

### 4.2.5 Technical Implementation Details

#### 4.2.5.1 State Transition Implementation

**Spring Session Configuration:**
```mermaid
classDiagram
    class SessionConfig {
        +RedisConnectionFactory connectionFactory
        +SessionRepository sessionRepository
        +CookieSerializer cookieSerializer
        +configureSessionIdResolver()
    }
    
    class UserSession {
        +String sessionId
        +String userId
        +LocalDateTime lastAccessTime
        +Map<String,Object> attributes
        +boolean isAuthenticated()
        +void invalidate()
    }
    
    SessionConfig --> UserSession : manages
```

**Transaction Boundary Management:**
- @Transactional annotations with REQUIRED propagation level
- Custom transaction managers for batch processing operations
- Rollback rules configured for business exceptions
- Transaction timeout configuration aligned with original CICS SYNCPOINT timing

#### 4.2.5.2 Error Recovery Implementation

**Retry Mechanisms:**
- Spring Retry integration with exponential backoff algorithms
- Circuit breaker patterns for external system integration
- Dead letter queue implementation for failed batch processing
- Transaction compensation patterns for distributed operations

**Recovery Procedures:**
- Automatic restart capabilities for Spring Batch jobs
- Checkpoint/restart functionality maintaining processing state
- Error notification integration with monitoring systems
- Manual intervention procedures for critical system failures

### 4.2.6 Performance and Timing Considerations

#### 4.2.6.1 SLA Requirements

| Operation Category | Maximum Response Time | Throughput Requirement | Implementation Strategy |
|--------------------|----------------------|------------------------|------------------------|
| **User Authentication** | < 2 seconds | 100 concurrent users | Spring Security with Redis session |
| **Account Queries** | < 3 seconds | 50 queries/second | PostgreSQL indexing + connection pooling |
| **Transaction Processing** | < 5 seconds | 25 transactions/second | JPA batch processing + async validation |
| **Batch Processing** | < 8 hours daily window | 10,000 records/minute | Spring Batch parallel processing |

#### 4.2.6.2 Caching Requirements

**Session State Caching:**
- Redis-backed session storage with 30-minute default timeout
- Session replication across multiple application instances
- Session data compression for optimal memory utilization
- Automatic session cleanup for expired entries

**Data Access Caching:**
- Second-level Hibernate cache for reference data
- Query result caching for frequently accessed account information
- Cache invalidation strategies for data consistency maintenance
- Distributed caching coordination across microservices architecture

## 4.3 TECHNICAL IMPLEMENTATION

### 4.3.1 Performance and Scalability Considerations

#### 4.3.1.1 Response Time Requirements

| Transaction Type | Target Response Time | SLA Requirement |
|-----------------|---------------------|-----------------|
| Authentication (CC00) | < 2 seconds | 95% of transactions |
| Account Queries (CAVW) | < 1 second | 98% of transactions |
| Transaction Updates (CT02) | < 1 second | 95% of transactions |
| Menu Navigation | < 0.5 seconds | 99% of transactions |
| Batch Job Completion | 4-hour window | Daily processing |

#### 4.3.1.2 Concurrency Control and Resource Management (updated)

```mermaid
flowchart TD
A["Multiple User Sessions"] --> B["Kubernetes Horizontal Pod Autoscaler"]
B --> C{Resource Contention}
C -->|Database Lock| D["PostgreSQL Row-Level Locking"]
C -->|Memory| E["Spring Session (Redis)"]
C -->|Application| F["Spring Boot Container Instances"]

D --> G["SELECT...FOR UPDATE Pattern"]
G --> H["Exclusive Row Lock Acquisition"]
H --> I["JPA Entity Processing"]
I --> J["@Transactional Save Operation"]
J --> K["Lock Release on Commit"]

E --> L["Session State Distribution"]
L --> M["Redis Cluster Allocation"]
M --> N["Inter-Service Communication"]

F --> O["Docker Container Caching"]
O --> P["Load Balancing via Kubernetes Service"]
P --> Q["Pod Resource Pool Management"]

style A fill:#e1f5fe
style K fill:#c8e6c9
style C fill:#fff3e0
```

### 4.3.2 Data Consistency and Integrity

#### 4.3.2.1 Cross-Reference Validation Workflow (updated)

```mermaid
flowchart TD
    A[Transaction Input] --> B[Primary Key Validation]
    B --> C{Primary Key Valid}
    C -->|No| D[Display Primary Key Error]
    C -->|Yes| E[Cross-Reference Lookup]
    E --> F["Query xreffile table via JPA"]
    F --> G{Cross-Reference Exists}
    G -->|No| H[Display Cross-Reference Error]
    G -->|Yes| I[Related Entity Validation]
    I --> J["Query acct_dat table via JPA"]
    J --> K{Related Entity Valid}
    K -->|No| L[Display Related Entity Error]
    K -->|Yes| M[Proceed with Transaction]
    M --> N["Maintain Referential Integrity through Foreign-Key Constraints"]
    N --> O["Update All Related Entities with Custom JPA Validators"]
    O --> P[Transaction Success]
    
    style A fill:#e1f5fe
    style P fill:#c8e6c9
    style D fill:#ffcdd2
    style H fill:#ffcdd2
    style L fill:#ffcdd2
    style C fill:#fff3e0
    style G fill:#fff3e0
    style K fill:#fff3e0
```

The cross-reference validation workflow implements <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA repository pattern with PostgreSQL foreign-key constraints ensuring referential integrity at the database level, complemented by custom JPA validators that replicate COBOL business rule validation logic</span>. Data access operations query the `xreffile` and `acct_dat` tables through JPA repository methods, maintaining identical validation patterns while leveraging relational database capabilities for enhanced data consistency.

<span style="background-color: rgba(91, 57, 243, 0.2)">**Monetary Calculation Precision**: All monetary calculations utilize BigDecimal with scale and rounding mode configured by the CobolDataConverter utility to ensure exact precision parity with original COBOL COMP-3 packed decimal arithmetic, maintaining financial accuracy to the penny level required for regulatory compliance.</span>

#### 4.3.2.2 Batch Processing Data Validation

```mermaid
flowchart TD
    A[Batch Input File] --> B[Record Format Validation]
    B --> C{Format Valid}
    C -->|No| D[Write to Reject File]
    C -->|Yes| E[Business Rule Validation]
    E --> F{Business Rules Valid}
    F -->|No| G[Write to Error File]
    F -->|Yes| H[Cross-Reference Validation]
    H --> I{Cross-References Valid}
    I -->|No| J[Write to Invalid File]
    I -->|Yes| K[Process Valid Record]
    K --> L[Update Target Datasets]
    L --> M[Increment Success Counter]
    
    D --> N[Increment Reject Counter]
    G --> O[Increment Error Counter]
    J --> P[Increment Invalid Counter]
    
    N --> Q[Continue Processing]
    O --> Q
    P --> Q
    M --> Q
    Q --> R{More Records}
    R -->|Yes| S[Read Next Record]
    S --> B
    R -->|No| T[Generate Processing Report]
    T --> U[Display Statistics]
    U --> V[Batch Complete]
    
    style A fill:#e1f5fe
    style V fill:#c8e6c9
    style D fill:#ffcdd2
    style G fill:#ffcdd2
    style J fill:#ffcdd2
    style C fill:#fff3e0
    style F fill:#fff3e0
    style I fill:#fff3e0
    style R fill:#fff3e0
```

### 4.3.3 System Integration Architecture

#### 4.3.3.1 Component Interaction Overview (updated)

```mermaid
graph TB
subgraph "Presentation Tier"
    A["React Single Page Application"]
    B[Component Library - 18 Screen Definitions]
end

subgraph "Gateway and Configuration Layer"
    GA["API Gateway (Spring Cloud Gateway)"]
    CS["Configuration Service (Spring Cloud Config)"]
end

subgraph "Application Tier"
    C[REST API Controllers]
    D[24 Interactive Service Classes]
    E["Spring Batch Jobs"]
    F[28 Shared Data Transfer Objects]
end

subgraph "Data Tier"
    G[PostgreSQL Database Tables]
    H[user_security - User Security]
    I[account_data - Account Data]
    J[customer_data - Customer Data]
    K[card_data - Card Data]
    L[xreffile - Cross Reference]
    M[transactions - Transaction History]
end

subgraph "External Interfaces"
    N[ASCII Data Files]
    O["Spring Batch Scheduler"]
    P[Report Output]
end

A --> GA
GA --> B
B --> C
CS --> C
CS --> D
CS --> E
C --> D
C --> E
D --> F
E --> F
F --> G
G --> H
G --> I
G --> J
G --> K
G --> L
G --> M

N --> E
E --> O
E --> P

style A fill:#e3f2fd
style GA fill:#f3e5f5
style CS fill:#f3e5f5
style C fill:#f3e5f5
style G fill:#e8f5e8
style N fill:#fff3e0
```

The system integration architecture implements a modern <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native microservices pattern with React SPA frontend communicating through Spring Cloud Gateway to Spring Boot backend services</span>. The architecture includes <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Config for centralized configuration management</span>, enabling environment-specific deployments and dynamic configuration updates without application restart.

The <span style="background-color: rgba(91, 57, 243, 0.2)">API Gateway provides request routing, authentication, and cross-cutting concern management</span>, while the <span style="background-color: rgba(91, 57, 243, 0.2)">Configuration Service manages application properties, database connection strings, and business rule parameters across all deployment environments</span>.

### 4.3.4 State Management and Persistence

#### 4.3.4.1 Session State Management

The application implements distributed session management through Spring Session with Redis backend, replacing CICS COMMAREA structures with clustered session storage. Session attributes maintain user context, navigation state, and temporary transaction data across REST API calls.

**Session Configuration:**
- Redis-backed session storage with 30-minute timeout
- Session clustering for horizontal scaling
- JSON serialization for complex objects
- Automatic cleanup of expired sessions

#### 4.3.4.2 Database Transaction Management

PostgreSQL provides ACID-compliant transaction processing with Spring @Transactional boundaries matching original CICS SYNCPOINT behavior. Row-level locking prevents concurrent update conflicts while maintaining high throughput for read operations.

**Transaction Characteristics:**
- Read Committed isolation level preventing dirty reads
- Optimistic locking for concurrent access scenarios
- Automatic rollback on runtime exceptions
- Connection pooling via HikariCP for resource optimization

### 4.3.5 Error Handling and Recovery

#### 4.3.5.1 Application Error Handling

The system implements comprehensive error handling through Spring Boot exception handlers and custom error response formatting. Business logic errors maintain identical error codes and messages from the original COBOL implementation.

**Error Processing Flow:**
- Field validation errors with attribute highlighting
- Business rule violations with descriptive messages
- System errors with appropriate user notifications
- Audit trail logging for compliance tracking

#### 4.3.5.2 Batch Processing Recovery

Spring Batch provides robust error handling with restart capabilities and checkpoint processing. Failed batch jobs can restart from the last successful checkpoint, maintaining processing continuity for daily operations.

**Recovery Mechanisms:**
- Automatic retry for transient errors
- Skip policies for invalid records
- Error file generation with detailed diagnostics
- Manual intervention capabilities for critical failures

### 4.3.6 Performance Optimization

#### 4.3.6.1 Database Performance

The system utilizes PostgreSQL advanced indexing strategies including B-tree indexes for range queries and hash indexes for exact matches. Composite indexes support multi-column searches replicating VSAM key access patterns.

**Optimization Techniques:**
- Connection pooling minimizing database connection overhead
- Query result caching for frequently accessed reference data
- Batch processing for high-volume operations
- Database statistics maintenance for query optimization

#### 4.3.6.2 Application Performance

Spring Boot applications leverage JVM optimization and garbage collection tuning for optimal memory utilization. Container-based deployment enables horizontal scaling through Kubernetes orchestration.

**Performance Features:**
- Application startup optimization through Spring Boot lazy initialization
- Memory-efficient object serialization for session storage
- Asynchronous processing for non-critical operations
- Load balancing across multiple application instances

## 4.4 VALIDATION RULES AND COMPLIANCE

### 4.4.1 Business Rule Validation

| Validation Category | Rules | Implementation | Error Handling |
|-------------------|-------|----------------|----------------|
| Date Validation | CCYYMMDD format | CSUTLDTC utility | Field-level error display |
| SSN Validation | 9-digit numeric format | Pattern matching | DFHRED attribute highlighting |
| Phone Validation | Area code verification | CSLKPCDY lookup | Cross-reference error message |
| FICO Score | Range 300-850 | Numeric range check | Business rule violation error |
| Account Balance | Non-negative constraint | Arithmetic validation | Insufficient funds message |
| Card Expiry | Future date requirement | Date comparison logic | Invalid expiry date error |
| <span style="background-color: rgba(91, 57, 243, 0.2)">COMP-3 Precision</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Exact scale & rounding parity with COBOL</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal scale via CobolDataConverter</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Precision mismatch flagged as processing error</span> |

#### 4.4.1.1 Interface Contract Validation (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">Validation error payloads generated by the Spring Boot application must maintain exact compatibility with existing COBOL field-level error codes to ensure preservation of external interface contracts. This requirement is critical for maintaining seamless integration with payment networks, bank core systems, and regulatory reporting interfaces that depend on specific error code formats and field-level validation messaging patterns established by the original COBOL implementation. All validation failures must generate error responses using identical COBOL error code mappings, field attribute settings, and message content to prevent disruption of downstream system processing and compliance workflows.</span>

### 4.4.2 Authorization Checkpoints (updated)

```mermaid
flowchart TD
    A["User Access Request"] --> B["Spring Security / Spring Session authentication filter"]
    B --> C{"Session Valid"}
    C -->|No| D["Redirect to Sign-On"]
    C -->|Yes| E["Function Authorization Check"]
    E --> F{"Spring Security @PreAuthorize check"}
    F -->|No| G["Display Access Denied"]
    F -->|Yes| H["Resource Authorization Check"]
    H --> I{"Spring Security @PreAuthorize resource access permitted"}
    I -->|No| J["Display Resource Denied"]
    I -->|Yes| K["Proceed with Function"]
    
    style A fill:#e1f5fe
    style K fill:#c8e6c9
    style D fill:#ffcdd2
    style G fill:#ffcdd2
    style J fill:#ffcdd2
    style C fill:#fff3e0
    style F fill:#fff3e0
    style I fill:#fff3e0
```

### 4.4.3 Regulatory Compliance Validation

#### 4.4.3.1 Financial Data Precision Requirements

The system implements strict financial data precision controls to maintain regulatory compliance across all monetary calculations and transaction processing. BigDecimal implementations utilize CobolDataConverter configurations ensuring exact decimal precision matching COBOL COMP-3 packed decimal behavior for financial accuracy requirements.

**Precision Control Mechanisms:**
- Scale preservation matching original COBOL field definitions
- Rounding mode configuration replicating mainframe arithmetic behavior  
- Currency conversion calculations maintaining penny-level accuracy
- Interest calculation precision meeting regulatory reporting standards

#### 4.4.3.2 Audit Trail and Compliance Logging

The application maintains comprehensive audit trails for all transaction processing and user access activities, ensuring compliance with financial industry regulations and internal control requirements.

**Audit Trail Components:**
- User authentication and authorization events
- Transaction modification timestamps and user identification
- Data validation failures and business rule violations
- System error occurrences and recovery actions
- Regulatory report generation and distribution tracking

### 4.4.4 Cross-System Validation Rules

#### 4.4.4.1 Payment Network Interface Validation

External payment network interfaces require strict adherence to ISO 8583 message formatting and field validation standards. The system implements validation rules ensuring compatibility with existing payment processor integration points.

**Network Validation Requirements:**
- Message type identifier validation against permitted transaction types
- Primary account number format verification and check digit validation
- Transaction amount formatting with proper decimal positioning
- Response code mapping maintaining existing network communication protocols

#### 4.4.4.2 Regulatory Reporting Validation

Monthly and quarterly regulatory reports require specific data formatting and validation controls to ensure compliance with banking regulations and internal audit requirements.

**Reporting Validation Controls:**
- Account balance reconciliation with general ledger systems
- Transaction categorization matching regulatory reporting definitions
- Customer data privacy protection and access control validation
- Report generation timing controls and distribution authorization

#### References

Based on comprehensive analysis of the CardDemo repository architecture and technical specification sections:

**Technical Specification Sections Referenced:**
- `0.1 INTENT CLARIFICATION` - Migration constraints and interface contract preservation requirements
- `1.2 SYSTEM OVERVIEW` - High-level architecture and component relationships  
- `2.1 FEATURE CATALOG` - Detailed feature descriptions and dependencies
- `2.3 FEATURE RELATIONSHIPS` - Integration points and shared components
- `2.4 IMPLEMENTATION CONSIDERATIONS` - Technical constraints and performance requirements
- `3.2 FRAMEWORKS & LIBRARIES` - Spring Security and Spring Session implementation details
- `4.3 TECHNICAL IMPLEMENTATION` - Cross-reference validation workflows and data consistency mechanisms

**System Components Analyzed:**
- `app/cbl/` - 36 COBOL programs (24 CICS interactive + 12 batch programs)
- `app/bms/` - 18 BMS screen definitions for 3270 terminal interface  
- `app/cpy/` - 28 copybook definitions for data structures
- `app/data/ASCII/` - 9 fixed-width source data files for ETL processing
- VSAM dataset architecture - 6 KSDS datasets for persistent storage
- Spring Security authentication and authorization framework integration
- Spring Session distributed session management with Redis backend

# 5. SYSTEM ARCHITECTURE

## 5.1 HIGH-LEVEL ARCHITECTURE

### 5.1.1 System Overview (updated)

CardDemo implements a <span style="background-color: rgba(91, 57, 243, 0.2)">modern cloud-native two-tier architecture optimized for containerized deployment and horizontal scaling</span>. The system follows <span style="background-color: rgba(91, 57, 243, 0.2)">enterprise Spring Boot architectural principles with clear separation between presentation and application tiers</span>, designed to serve as a definitive reference implementation for mainframe modernization within enterprise environments.

**Architecture Style**: <span style="background-color: rgba(91, 57, 243, 0.2)">Containerized modular monolith written in Java 21 / Spring Boot 3.2.x</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Component-based Spring service organization with standardized REST controller patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Synchronous HTTP transaction processing via Spring Boot REST endpoints</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Batch processing through Spring Batch jobs orchestrated by Kubernetes CronJobs or external scheduler</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Shared JPA entity pattern for data structure reuse and consistency</span>

**Key Architectural Principles**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction integrity through @Transactional boundaries with automatic recovery</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Session state management via Spring Session (Redis) with 32KB limit for inter-service communication</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Standardized service structure (init, input, process, output, close, exception-handling methods) maintaining COBOL program flow</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Role-based access control through Spring Security with user type segregation and menu filtering</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal precision configuration for financial calculation accuracy replicating COBOL COMP-3 behavior</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Minimal-change approach - logic parity with original COBOL implementation without enhancements</span>

**System Boundaries**:
- Entry Points: <span style="background-color: rgba(91, 57, 243, 0.2)">React Single Page Application over HTTPS for interactive operations</span>
- Batch Interfaces: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch jobs triggered by Kubernetes CronJobs or external scheduler, maintaining existing 4-hour processing window</span>
- Data Boundaries: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL database schema with composite primary keys and referential integrity</span>
- Security Perimeter: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security filters with JWT authentication and Redis-backed session management</span>
- Integration Layer: <span style="background-color: rgba(91, 57, 243, 0.2)">Support for existing external interfaces via identical data formats and API Gateway routing</span>

### 5.1.2 Core Components Table (updated)

| Component Name | Primary Responsibility | Key Dependencies | Integration Points |
|----------------|------------------------|------------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">API routing, authentication, request/response filtering</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot, Spring Security, Redis</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">React SPA frontend, Spring Boot backend services</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot REST Services (24)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Business logic implementation, real-time transaction processing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot 3.2.x, JPA entities, PostgreSQL</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL database via Spring Data JPA, Redis session store</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Jobs (12)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Automated processing, financial calculations, reporting</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch 5.x, Kubernetes orchestration, JPA repositories</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL database, file-based interfaces, job scheduling</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">React SPA Components (18)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">User interface presentation and client-side logic</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">React 18.x, Material-UI, Axios HTTP client</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">API Gateway via HTTPS REST calls, browser session management</span>** |

### 5.1.3 Data Flow Description (updated)

The system implements structured data flows following modern cloud-native best practices with multiple processing patterns:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Interactive REST API Flow</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">User input flows through React SPA components that capture form data and trigger HTTPS REST calls to the API Gateway. Spring Cloud Gateway routes requests to appropriate Spring Boot REST controllers based on endpoint mappings. Controllers validate input using shared validation services, perform PostgreSQL database operations with transaction integrity, format JSON responses through Jackson serialization, and preserve session context in Redis-backed Spring Session storage. This creates a seamless user experience with sub-200ms response times for 95% of REST API operations.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Processing Flow</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Daily batch operations are initiated by Kubernetes CronJobs or external scheduler triggers. Spring Batch jobs read and validate input files against PostgreSQL reference tables. Business calculations are executed including interest computation and balance updates. PostgreSQL database tables are updated with transaction integrity, comprehensive reports are generated to output files, and job status is communicated via Spring Batch JobRepository. The entire daily processing window maintains the existing 4-hour completion target.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Inter-Service Communication</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot services utilize dependency injection for efficient component collaboration while maintaining transaction context. Spring Session (Redis) carries session state including user ID, context flags, and selection data within the 32KB limit. Shared JPA entities ensure consistent data formats across all services. HTTP status codes and Spring Boot exception handling provide standardized error communication throughout the application stack.</span>

### 5.1.4 External Integration Points (updated)

| System Name | Integration Type | Data Exchange Pattern | Protocol/Format |
|-------------|------------------|--------------------|-----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Authentication</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication/Authorization</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Synchronous request/response</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JWT tokens with LDAP/OAuth2 integration</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">React SPA Frontend</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">User Interface Presentation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Asynchronous HTTP requests</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">HTTPS + REST/JSON with API Gateway routing</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes CronJobs</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Job Orchestration</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Scheduled job triggers</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Container orchestration with Spring Batch integration</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Database</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Persistence Management</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Synchronous CRUD operations</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JDBC with JPA/Hibernate ORM</span>** |

**Note**: <span style="background-color: rgba(91, 57, 243, 0.2)">Existing architecture diagrams require replacement with new mermaid diagrams showing React → API Gateway → Spring Boot → PostgreSQL / Redis path to accurately reflect the modernized cloud-native architecture.</span>

```mermaid
graph TB
    subgraph "Cloud-Native Architecture"
        A[React SPA Frontend<br/>18 Screen Components] 
        B[Spring Cloud Gateway<br/>API Routing & Security]
        C[Spring Boot Services<br/>24 REST Controllers + 12 Batch Jobs]
        D[PostgreSQL Database<br/>Relational Tables with Composite Keys]
        E[Redis Session Store<br/>COMMAREA Equivalent Storage]
    end
    
    subgraph "Data Flow"
        A -->|HTTPS REST/JSON| B
        B -->|Authenticated Requests| C
        C -->|JPA/JDBC| D
        C -->|Session Management| E
        C -->|Batch Processing| F[Kubernetes CronJobs<br/>Scheduled Execution]
    end
    
    subgraph "External Integration"
        G[Payment Networks] -->|Unchanged Interfaces| C
        H[Banking Core Systems] -->|Identical Data Formats| C
        I[Regulatory Reporting] -->|Compatible Protocols| C
    end
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#fce4ec
```

## 5.2 COMPONENT DETAILS

### 5.2.1 Authentication and Session Management Components (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">SignOnService (com.carddemo.service.SignOnService)</span>**
- **Purpose**: <span style="background-color: rgba(91, 57, 243, 0.2)">Validates user credentials against PostgreSQL user_security table and establishes Spring Security authentication context</span>
- **Technologies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot 3.2.x with Spring Security 6.x authentication manager and BCrypt password encoding</span>
- **Key Interfaces**: <span style="background-color: rgba(91, 57, 243, 0.2)">UserSecurityRepository.findById() operations, Spring Security authentication token generation</span>
- **Data Persistence**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session context stored in Redis-backed Spring Session with JSON serialization maintaining up to 32KB payload equivalent to legacy COMMAREA structures</span>
- **Scaling Considerations**: <span style="background-color: rgba(91, 57, 243, 0.2)">Stateless authentication with distributed Redis session clustering enabling horizontal scaling and session persistence across container restarts</span>
- **Method Structure**: <span style="background-color: rgba(91, 57, 243, 0.2)">init0000(), processInput1000(), validateCredentials2000(), establishSession3000(), cleanup9000() preserving COBOL paragraph naming conventions</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">SignOnController (com.carddemo.controller.SignOnController)</span>**
- **Purpose**: <span style="background-color: rgba(91, 57, 243, 0.2)">REST endpoint exposing @PostMapping("/api/tx/CC00") for user authentication replacing CICS transaction COSGN00C</span>
- **Technologies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring MVC with JSON request/response payload handling via Jackson serialization</span>
- **Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Delegates to SignOnService business logic while managing HTTP response codes and error handling</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">MenuService and MenuController (Main and Admin Menus)</span>**
- **Purpose**: <span style="background-color: rgba(91, 57, 243, 0.2)">Provides dynamic role-based menu navigation with function dispatch through Spring Security role validation</span>
- **Technologies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot with method-level security annotations (@PreAuthorize) and role-based access control</span>
- **Key Interfaces**: <span style="background-color: rgba(91, 57, 243, 0.2)">REST endpoints @PostMapping("/api/tx/CO01") for main menu and @PostMapping("/api/tx/COADM01") for admin menu</span>
- **Security Framework**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security UserDetails integration for menu option filtering and access control validation</span>

### 5.2.2 Business Logic Components (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Account Management Services (AccountService, AccountController)</span>**
- **Purpose**: <span style="background-color: rgba(91, 57, 243, 0.2)">Complete account and customer data lifecycle management with field-level validation using Spring Validation framework</span>
- **Technologies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot with Spring Data JPA repositories, custom validation annotations, and date utility services</span>
- **Key Interfaces**: <span style="background-color: rgba(91, 57, 243, 0.2)">AccountRepository and CustomerRepository with findById() and save() operations, @PostMapping("/api/tx/COACTVW") and @PostMapping("/api/tx/COACTUP") REST endpoints</span>
- **Data Persistence**: <span style="background-color: rgba(91, 57, 243, 0.2)">JPA entities Account and Customer with composite primary keys using @EmbeddedId annotations, referential integrity maintained through @JoinColumn relationships</span>
- **Scaling Considerations**: <span style="background-color: rgba(91, 57, 243, 0.2)">Optimized for concurrent access with JPA OptimisticLockException handling replacing CICS lock timeout management</span>
- **BigDecimal Precision**: <span style="background-color: rgba(91, 57, 243, 0.2)">All monetary calculations use BigDecimal with COBOL-equivalent scale and RoundingMode.HALF_UP to maintain packed decimal accuracy</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Credit Card Operations Services (CardService, CardController)</span>**
- **Purpose**: <span style="background-color: rgba(91, 57, 243, 0.2)">Full credit card lifecycle including browsing, viewing, updating, and payment processing with cross-reference validation</span>
- **Technologies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot with Spring Data JPA pagination using Pageable interface for efficient card listing (7 cards per page)</span>
- **Key Interfaces**: <span style="background-color: rgba(91, 57, 243, 0.2)">CardRepository with findAllByAccountNumber() and CardXRefRepository for cross-reference validation, REST endpoints @PostMapping("/api/tx/COCRDLI"), @PostMapping("/api/tx/COCRDSL"), @PostMapping("/api/tx/COCRDUP")</span>
- **Data Persistence**: <span style="background-color: rgba(91, 57, 243, 0.2)">JPA entities CreditCard and CardXRef with composite keys, custom converters for COMP-3 packed decimal fields to BigDecimal transformation</span>
- **Performance**: <span style="background-color: rgba(91, 57, 243, 0.2)">Pagination implemented through Spring Data JPA Page<T> interface with efficient database queries replacing STARTBR/READNEXT browse patterns</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Management Services (TransactionService, TransactionController)</span>**
- **Purpose**: <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time transaction processing with UUID-based unique ID generation and comprehensive validation</span>
- **Technologies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot with @Transactional annotation ensuring ACID compliance, automatic transaction ID assignment using UUID.randomUUID()</span>
- **Key Interfaces**: <span style="background-color: rgba(91, 57, 243, 0.2)">TransactionRepository with findByAccountNumber() and saveAndFlush() methods, REST endpoints @PostMapping("/api/tx/COTRN00"), @PostMapping("/api/tx/COTRN01"), @PostMapping("/api/tx/COTRN02")</span>
- **Data Persistence**: <span style="background-color: rgba(91, 57, 243, 0.2)">JPA entity Transaction with composite primary key (TransactionId), balance updates to Account entity with optimistic locking</span>
- **Scaling Considerations**: <span style="background-color: rgba(91, 57, 243, 0.2)">High-throughput design using Spring @Async processing for concurrent transaction handling with database connection pooling via HikariCP</span>

### 5.2.3 Batch Processing Components (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Financial Processing Jobs (Spring Batch Implementation)</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">DailyTransactionJob (backend/src/main/java/com/carddemo/batch/DailyTransactionJob.java)</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Daily transaction posting from sequential input files with field validation using FlatFileItemReader and chunk-based processing maintaining identical step sequencing to CBTRN01C</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">TransactionCategorizationJob</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction categorization and balance updates with comprehensive error handling preserving CBTRN02C logic flow and restart capabilities</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">InterestCalculationJob</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Interest calculation using configurable rates from disclosure_groups table, BigDecimal precision ensuring COBOL packed decimal accuracy equivalent to CBACT04C</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">StatementGenerationJob</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Statement generation in both plain-text and HTML formats using FlatFileItemWriter and custom formatting maintaining CBSTM03A/CBSTM03B output compatibility</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Data Management Jobs</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">AccountDataListingJob, CustomerDataListingJob, TransactionDataListingJob</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Data verification and testing jobs with comprehensive reporting capabilities replacing CBACT01C-CBACT03C and CBCUS01C batch programs</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">TransactionReportingJob</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction reporting with date filtering and cross-reference lookups using JPA Criteria API replacing CBTRN03C sequential processing</span>
- **Job Orchestration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch JobLauncher integration with Kubernetes CronJob scheduling providing automated execution with restart and recovery capabilities identical to JCL job restart logic</span>

### 5.2.4 Frontend Components (React SPA) (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Core React Components (frontend/src/components/)</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">SignOn.jsx</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">User authentication component replicating COSGN0A BMS mapset with form validation and error handling</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">MainMenu.jsx and AdminMenu.jsx</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Role-based navigation components with PF-key event handlers mapping F3=Exit, F12=Cancel to keyboard event listeners</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">AccountView.jsx and AccountUpdate.jsx</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Account management components with comprehensive field validation using Formik and Yup schema validation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">TransactionList.jsx, TransactionView.jsx, TransactionCreate.jsx</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction processing components with pagination controls and real-time validation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">CardList.jsx, CardView.jsx, CardUpdate.jsx</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Credit card management components with cross-reference validation and status tracking</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">PF-Key Keyboard Navigation</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Keyboard Event Mapping</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">F1=Help, F3=Exit, F7=Page Up, F8=Page Down, F12=Cancel mapped to keydown event listeners with preventDefault() handling</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Navigation State Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">React Router integration maintaining navigation history and breadcrumb functionality equivalent to CICS program-to-program transfers</span>

### 5.2.5 Required Diagrams (updated)

```mermaid
graph TB
subgraph "Frontend Layer (React SPA)"
    R[React Router Navigation]
    SC[React Components - 18 Screens]
    PF[PF-Key Event Handlers]
    
    SC --> R
    PF --> SC
    
    SC1[SignOn.jsx<br/>COSGN0A Equivalent] --> SC
    SC2[MainMenu.jsx<br/>COMEN01 Equivalent] --> SC
    SC3[TransactionList.jsx<br/>COTRN00 Equivalent] --> SC
    SC4[AccountView.jsx<br/>COACTVW Equivalent] --> SC
end

subgraph "API Gateway Layer"
    GW[Spring Cloud Gateway]
    AUTH[Authentication & Authorization]
    ROUTE[Request Routing]
    
    GW --> AUTH
    GW --> ROUTE
end

subgraph "Backend Services (Spring Boot)"
    REST[REST Controllers - 24 Endpoints]
    SVC[Service Classes - 36 Components]
    REPO[JPA Repositories]
    BATCH[Spring Batch Jobs - 12 Programs]
    
    REST --> SVC
    SVC --> REPO
    BATCH --> REPO
    
    REST1["PostMapping /api/tx/CC00<br/>SignOnController"] --> REST
    REST2["PostMapping /api/tx/COTRN00<br/>TransactionController"] --> REST
    REST3["PostMapping /api/tx/COACTVW<br/>AccountController"] --> REST
    
    SVC1[SignOnService<br/>0000Init-9000Close Methods] --> SVC
    SVC2[TransactionService<br/>BigDecimal Precision] --> SVC
    SVC3[AccountService<br/>JPA Entity Management] --> SVC
    
    BATCH1[DailyTransactionJob<br/>CBTRN01C Equivalent] --> BATCH
    BATCH2[InterestCalculationJob<br/>CBACT04C Equivalent] --> BATCH
    BATCH3[StatementGenerationJob<br/>CBSTM03A/B Equivalent] --> BATCH
end

subgraph "Data Layer"
    PG[(PostgreSQL Database)]
    REDIS[(Redis Session Store)]
    JPA[JPA Entities with Composite Keys]
    
    PG --> JPA
    JPA --> REPO
    
    JPA1["Account Entity<br/>EmbeddedId Composite Key"] --> JPA
    JPA2[Transaction Entity<br/>COMP-3 to BigDecimal] --> JPA
    JPA3[User Entity<br/>Spring Security Integration] --> JPA
end

subgraph "Session Management"
    SESS[Spring Session]
    JSON[JSON Serialization<br/>32KB COMMAREA Equivalent]
    
    SESS --> REDIS
    SESS --> JSON
end

R <--> GW
GW <--> REST
SVC <--> SESS
BATCH --> PG

style R fill:#e1f5fe
style PG fill:#e8f5e8
style GW fill:#f3e5f5
style REDIS fill:#ffebee
style BATCH fill:#fff3e0
```

```mermaid
sequenceDiagram
    participant UI as React Component
    participant GW as Spring Cloud Gateway
    participant CTRL as REST Controller
    participant SVC as Service Class
    participant REPO as JPA Repository
    participant DB as PostgreSQL
    participant REDIS as Redis Session
    
    UI->>GW: HTTP POST /api/tx/CC00 (JSON)
    GW->>GW: Authentication & Authorization
    GW->>CTRL: Route to SignOnController
    CTRL->>SVC: Delegate to SignOnService
    SVC->>SVC: init0000() - Initialize processing
    SVC->>SVC: processInput1000() - Validate input
    SVC->>REPO: UserSecurityRepository.findById()
    REPO->>DB: SELECT from user_security
    DB-->>REPO: User record or empty
    REPO-->>SVC: Optional<UserSecurity>
    SVC->>SVC: validateCredentials2000() - Authenticate
    
    alt Authentication Success
        SVC->>REDIS: Store session attributes (JSON)
        REDIS-->>SVC: Session confirmation
        SVC->>SVC: establishSession3000() - Create session
        SVC->>CTRL: Return success with menu options
        CTRL->>GW: HTTP 200 with JSON response
        GW->>UI: Authenticated response
        UI->>UI: Navigate to MainMenu.jsx
    else Authentication Failure
        SVC->>SVC: cleanup9000() - Error handling
        SVC->>CTRL: Return authentication error
        CTRL->>GW: HTTP 401 Unauthorized
        GW->>UI: Error response
        UI->>UI: Display error message
    end
```

```mermaid
stateDiagram-v2
    [*] --> ReactApp
    ReactApp --> SignOnComponent: Application Start
    SignOnComponent --> AuthenticationService: POST /api/tx/CC00
    AuthenticationService --> SpringSecurity: Validate Credentials
    SpringSecurity --> RedisSession: Store Session State
    
    state AuthenticationService {
        [*] --> init0000
        init0000 --> processInput1000
        processInput1000 --> validateCredentials2000
        validateCredentials2000 --> establishSession3000: Success
        validateCredentials2000 --> cleanup9000: Failure
        establishSession3000 --> [*]
        cleanup9000 --> [*]
    }
    
    RedisSession --> MenuComponent: Success Path
    MenuComponent --> BusinessServices: Function Selection
    
    state BusinessServices {
        AccountService --> JPA_Account_Repository
        TransactionService --> JPA_Transaction_Repository  
        CardService --> JPA_Card_Repository
        JPA_Account_Repository --> PostgreSQL
        JPA_Transaction_Repository --> PostgreSQL
        JPA_Card_Repository --> PostgreSQL
    }
    
    BusinessServices --> ReactComponent: Response Data
    ReactComponent --> [*]: Session Complete
    
    cleanup9000 --> SignOnComponent: Retry Authentication
```

## 5.3 TECHNICAL DECISIONS

### 5.3.1 Architecture Style Decisions and Tradeoffs (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Containerised Modular Monolith vs Microservices Architecture</span>**

| Decision Factor | <span style="background-color: rgba(91, 57, 243, 0.2)">Modular Monolith Choice</span> | Rationale | Tradeoffs |
|----------------|-------------------|-----------|-----------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">Functional Risk Management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Single Spring Boot application with clear module boundaries</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Minimal change approach reduces risk of introducing behavioral differences during COBOL-to-Java conversion</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Limited independent component scaling compared to microservices</span> |
| Transaction Consistency | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring @Transactional provides ACID compliance</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Financial data requires strict consistency equivalent to CICS SYNCPOINT behavior</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Tight coupling between service modules within single deployment unit</span> |
| Operational Complexity | <span style="background-color: rgba(91, 57, 243, 0.2)">Single containerized deployment unit</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Simplified operations and monitoring compared to distributed microservices architecture</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">All-or-nothing deployment strategy requiring coordinated releases</span> |
| Technology Integration | <span style="background-color: rgba(91, 57, 243, 0.2)">Native Spring Boot ecosystem services</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Leverages proven enterprise patterns with comprehensive framework integration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Single technology stack choice affecting entire application</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Java 21 Features Consideration</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">**Trade-offs**: Virtual threads (Project Loom), structured concurrency, and pattern matching enhancements are explicitly deferred to avoid introducing behavioral changes that could impact functional parity with the original COBOL implementation. The system utilizes Java 21 LTS for long-term support benefits while maintaining conservative feature adoption to ensure identical business logic behavior.</span>

**Synchronous vs Asynchronous Processing Patterns**

The system implements a hybrid approach optimizing for different use cases:
- **Interactive Operations**: Synchronous processing via <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot REST controllers for immediate user response requirements</span>
- **Batch Operations**: Asynchronous processing through <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch jobs orchestrated by Kubernetes CronJobs</span> for resource optimization
- **Inter-Service Communication**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session state management for transaction context preservation across REST calls</span>

### 5.3.2 Communication Pattern Choices (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Stateless REST/JSON over HTTPS with Spring Session</span>**
- **Decision**: <span style="background-color: rgba(91, 57, 243, 0.2)">RESTful HTTP API with JSON payloads and Redis-backed session state management</span>
- **Justification**: <span style="background-color: rgba(91, 57, 243, 0.2)">Requirement to map one-to-one with CICS transaction codes necessitates stateless HTTP endpoints while preserving COMMAREA-equivalent session data through Spring Session</span>
- **Benefits**: <span style="background-color: rgba(91, 57, 243, 0.2)">Standard web protocols enable React frontend integration, horizontal scaling capability, and simplified load balancing</span>
- **Implementation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Each CICS transaction (COACTUSR, COACTUPD, etc.) maps to dedicated REST controller endpoint with identical request/response structures</span>
- **Constraints**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session data limited to 32KB equivalent of CICS COMMAREA, requires Redis availability for stateful operations</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session State Management Strategy</span>**
- **Decision**: <span style="background-color: rgba(91, 57, 243, 0.2)">Redis-backed session storage with automatic JSON serialization</span>
- **Justification**: <span style="background-color: rgba(91, 57, 243, 0.2)">Preserves CICS COMMAREA functionality while enabling stateless REST architecture and horizontal scaling</span>
- **Implementation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session attributes store program context data equivalent to COBOL working storage and COMMAREA fields</span>

### 5.3.3 Data Storage Solution Rationale (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL 15.x Architecture Selection</span>**

| Selection Criteria | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Benefits</span> | Implementation Details | Performance Characteristics |
|-------------------|---------------|----------------------|---------------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">ACID Compliance</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Full ACID transaction support with MVCC</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">@Transactional boundaries matching CICS SYNCPOINT behavior</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Concurrent transaction processing with isolation guarantees</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Indexing</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">B-tree, Hash, and Partial indexes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Composite primary keys preserving VSAM key structures</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Sub-millisecond primary key lookups, optimized range queries</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">VSAM Key Structure Preservation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Composite primary key support</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Tables designed with multi-column PKs matching VSAM organization</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Identical data access patterns with improved concurrent handling</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">STARTBR Equivalence</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Cursor-based pagination and ORDER BY optimization</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Custom JPA queries implementing browse operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Efficient sequential processing with memory-optimized cursors</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">VSAM-to-PostgreSQL Mapping Strategy</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Composite Primary Keys</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-column primary keys replicate VSAM key structures (e.g., account_data: account_id + account_type, transactions: transaction_id + account_number + transaction_date)</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Browse Operation Simulation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">STARTBR/READNEXT/READPREV operations implemented through cursor-based pagination with ORDER BY clauses and LIMIT/OFFSET queries</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Index Strategy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">B-tree indexes on composite keys plus additional indexes for alternate key access patterns (customer_id, card_number lookups)</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Type Mapping</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">COBOL COMP-3 fields mapped to NUMERIC with appropriate precision, COBOL alphanumeric to VARCHAR with exact length preservation</span>

**Cross-Reference Dataset Strategy**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Referential Integrity</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Foreign key relationships enforce data consistency across related tables (customer_data → account_data → card_data)</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Query Optimization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Cross-reference tables implemented as junction tables with optimized indexes for relationship queries</span>
- **Design Rationale**: <span style="background-color: rgba(91, 57, 243, 0.2)">Normalized relational approach maintains data integrity while providing superior query flexibility compared to VSAM flat file structures</span>

### 5.3.4 API Gateway Decision Record (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway as Single Ingress Point</span>**
- **Decision**: <span style="background-color: rgba(91, 57, 243, 0.2)">Implementation of Spring Cloud Gateway 4.0.x as centralized API gateway</span>
- **Justification**: <span style="background-color: rgba(91, 57, 243, 0.2)">Need for centralized route management and authentication delegation to maintain clean separation between frontend routing and backend service endpoints</span>
- **Benefits**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Single point of entry for all React frontend requests</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Centralized authentication and authorization processing</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Request routing based on URL patterns matching CICS transaction codes</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Cross-cutting concerns (logging, rate limiting, security headers) in single location</span>
- **Implementation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Gateway routes configured to forward /api/* patterns to Spring Boot services with authentication context propagation</span>
- **Performance**: <span style="background-color: rgba(91, 57, 243, 0.2)">Minimal latency overhead with built-in load balancing and circuit breaker patterns</span>

### 5.3.5 Security Mechanism Selection

**Spring Security Framework Decision**
- **Decision**: Spring Security 6.2.x with role-based authorization
- **Justification**: Comprehensive enterprise security framework replacing RACF authentication while maintaining identical access control patterns
- **Implementation**: JWT token-based authentication with Redis session backing for stateful operations
- **Benefits**: Method-level security annotations, CSRF protection, and secure headers configuration

**Authentication Strategy**
- **Decision**: JWT tokens with Redis session storage
- **Rationale**: Enables stateless authentication while preserving session state equivalent to CICS COMMAREA
- **Security**: BCrypt password encoding with configurable strength, OAuth2 integration capability

### 5.3.6 Caching Strategy Justification

**Redis Caching Architecture**
- **Decision**: Redis 7.x for session storage and application-level caching
- **Justification**: High-performance in-memory storage providing sub-millisecond response times
- **Implementation**: Spring Session integration with automatic JSON serialization for complex session objects
- **Benefits**: Distributed session clustering, cache-aside pattern for reference data, horizontal scaling support

### 5.3.7 Required Decision Diagrams (updated)

```mermaid
flowchart TD
    A["Maintain Logic Parity Requirement"] --> B{"Architecture Style Decision"}
    B -->|"Minimize Functional Risk"| C["Choose Modular Monolith"]
    B -->|"Independent Scaling"| D["Microservices - Rejected"]
    
    C --> E["Spring Boot 3.2.x Framework"]
    E --> F["Deploy in Docker/Kubernetes"]
    
    F --> G{"Data Storage Decision"}
    G -->|"ACID + Advanced Indexing"| H["Use PostgreSQL 15.x"]
    G -->|"NoSQL Alternative"| I["Document Database - Rejected"]
    
    H --> J["Composite Primary Keys"]
    H --> K["Cursor-based Pagination"]
    
    F --> L["API Gateway Integration"]
    L --> M["Spring Cloud Gateway"]
    
    J --> N["VSAM Key Structure Preservation"]
    K --> N
    M --> N
    
    N --> O["Production-Ready Architecture"]
    
    style A fill:#e1f5fe
    style C fill:#c8e6c9
    style F fill:#c8e6c9
    style H fill:#c8e6c9
    style M fill:#c8e6c9
    style O fill:#4caf50
    style D fill:#ffcdd2
    style I fill:#ffcdd2
```

## 5.4 CROSS-CUTTING CONCERNS

### 5.4.1 Monitoring and Observability Approach (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator with Micrometer Integration</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">The system implements comprehensive monitoring through Spring Boot Actuator endpoints and Micrometer metrics collection, providing enterprise-grade observability capabilities that replace traditional CICS statistics collection</span>:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Application Performance Monitoring via Actuator</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">REST endpoint response time tracking through Micrometer timers with sub-200ms targets for 95% of operations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot service-level performance metrics via @Timed annotations on critical business methods</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">JPA repository operation timing and PostgreSQL connection pool throughput measurement</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">JVM memory utilization monitoring including heap, non-heap, and garbage collection metrics</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Metrics Export</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Prometheus registry exporting custom business metrics to Prometheus time-series database</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction throughput rates measured per REST endpoint with histogram distribution analysis</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL database utilization and connection pool monitoring via HikariCP metrics</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job execution metrics including processing rates and error frequency analysis</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Grafana Dashboard Visualization</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication success/failure rates for security analysis with real-time alerting</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">REST API validation error patterns for business rule compliance monitoring</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal interest calculation accuracy verification maintaining penny-level precision tracking</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch statement generation completeness metrics for customer service monitoring</span>

### 5.4.2 Logging and Tracing Strategy (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Config with Logback JSON Layout</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">The system implements centralized logging configuration through Spring Cloud Config Server, enabling consistent logging patterns across all application instances with structured JSON output shipped to the ELK Stack for centralized analysis</span>.

| Logging Level | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Implementation</span> | Purpose | <span style="background-color: rgba(91, 57, 243, 0.2)">ELK Stack Retention</span> |
|---------------|----------------|---------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">Application Logs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Logback INFO level statements in service classes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Business logic tracking mirroring legacy DISPLAY content</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">30 days operational in Elasticsearch</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Logs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator HTTP trace logging</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">REST API transaction audit with request/response correlation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">7 years regulatory compliance in archival storage</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">System Logs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes container logs via stdout/stderr</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Container orchestration and JVM performance monitoring</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">1 year analysis in Logstash processing</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Error Logs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot exception logging with stack traces</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Application error diagnosis and alerting integration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">90 days troubleshooting in Kibana dashboards</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Distributed Tracing Capabilities</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Sleuth integration for detailed request flow tracing across service boundaries</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Conditional logger statements at INFO level preserving program-level debugging capabilities without functional side effects</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL operation status tracking via JPA/Hibernate logging for database operation validation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session attribute tracking via Redis monitoring for session management audit trails</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Centralized Configuration Management</span>**
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Config Server manages logging configuration across all environments, enabling dynamic log level adjustment and pattern customization without application restarts while maintaining consistent structured JSON output format for optimal ELK Stack processing</span>.

### 5.4.3 Error Handling Patterns (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Standardized Error Management Framework</span>**

All REST controllers and service classes implement consistent error handling following Spring Boot exception management patterns:

```java
@RestController
@RequestMapping("/api/transactions")
public class TransactionController {
    
    @PostMapping
    public ResponseEntity<TransactionResponse> processTransaction(@RequestBody TransactionRequest request) {
        try {
            return transactionService.processTransaction(request);
        } catch (DataPrecisionException e) {
            log.error("Data precision error in transaction processing", e);
            throw e; // Handled by @ControllerAdvice
        }
    }
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Custom @ControllerAdvice for DataPrecisionException</span>**
<span style="background-color: rgba(91, 57, 243, 0.2)">The system implements specialized exception handling for financial calculation precision errors, ensuring penny-level accuracy validation and comprehensive error response formatting</span>:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal Precision Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Custom exception handler translating DataPrecisionException into structured JSON error responses with specific precision violation details</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Unit Test Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive test coverage ensuring penny-level accuracy through JUnit test cases validating BigDecimal arithmetic operations</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Financial Integrity Verification</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated validation routines checking calculation precision against expected decimal places and rounding behavior</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Error Response Standardization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Consistent HTTP 422 responses for validation errors with detailed field-level precision violation information</span>

**Error Classification System**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database I/O Errors</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA exception handling with automatic retry logic via @Retryable annotations</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Validation Errors</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Bean Validation (@Valid) with custom error messages and React frontend field highlighting integration</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">System Errors</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot exception handling with structured logging and alert integration via Micrometer counters</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Business Rule Violations</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Custom business exception hierarchy with user-friendly JSON error responses</span>

```mermaid
flowchart TD
    A[REST API Error Detected] --> B{Spring Boot Error Classification}
    B -->|Database I/O| C[JPA Exception Handler]
    B -->|Bean Validation| D["@Valid Annotation Processing"]
    B -->|System Error| E[Global Exception Handler]
    B -->|Business Rule| F[Custom Business Exception]
    
    C --> G{PostgreSQL Status Analysis}
    G -->|Connection Timeout| H[Return 503 Service Unavailable]
    G -->|Constraint Violation| I[Return 409 Conflict]
    G -->|Critical Error| J[Log Error & Return 500]
    
    D --> K["@ControllerAdvice DataPrecisionException"]
    K --> L[Validate BigDecimal Precision]
    L --> M[Return 422 with Field Errors]
    
    E --> N[Micrometer Error Counter Increment]
    N --> O[Structured Logback JSON Output]
    
    F --> P[Business Exception Handler]
    P --> Q[Return 400 with Contextual Message]
    
    style A fill:#ffcdd2
    style E fill:#ff5252
    style O fill:#d32f2f
    style G fill:#fff3e0
    style K fill:#e8f5e8
```

### 5.4.4 Authentication and Authorization Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security 6.x Multi-Provider Authentication Architecture</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">The system implements enterprise-grade authentication through Spring Security 6.2.x with support for both LDAP and database-backed authentication providers, maintaining identical access control patterns to the legacy RACF implementation while providing modern security capabilities</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Authentication Layer</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Entry Point</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security authentication filter chain with JWT token processing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Credential Store</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Dual provider support - LDAP directory services for enterprise integration and PostgreSQL database for standalone deployments</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Redis-backed Spring Session providing COMMAREA-equivalent state preservation across REST API calls</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Password Policy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">BCrypt encryption with configurable strength and automated password rotation policy enforcement</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Role-Based Authorization and Access Control</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Role Mapping Preservation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Identical two-tier access model with Regular User (ROLE_USER) and Admin (ROLE_ADMIN) classifications mapped from legacy RACF groups</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Method-Level Security</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">@PreAuthorize and @Secured annotations providing fine-grained authorization checking for sensitive operations</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">API Endpoint Filtering</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic REST endpoint access based on user role determination through Spring Security context</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Timeout Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Configurable inactivity periods with automatic Redis session expiration and JWT token invalidation</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise Security Integration Points</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">LDAP Directory Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security LDAP authentication provider for enterprise directory services integration</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Audit Trail</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive security event logging through Spring Security events and Micrometer metrics</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">OAuth2/JWT Support</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Ready for modern identity management system integration with JWT token-based authentication</span>

### 5.4.5 Performance Requirements and SLAs (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Service Level Agreements with Prometheus Monitoring</span>**

| Performance Category | Target Metric | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Measurement Method</span> | Escalation Threshold |
|---------------------|---------------|-------------------|---------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">REST API Response Time</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">< 200ms for 95% of operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Timer histograms exported to Prometheus with percentile tracking</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Alert when p95 > 300ms for 5 minutes</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Processing</span> | Complete daily processing in 4 hours | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes CronJob completion time metrics via Prometheus Operator</span> | > 6 hours total processing time |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Container Availability</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">99.9% uptime during business hours</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Pod readiness and liveness probe success rate monitoring</span> | > 30 minutes unplanned downtime |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Data Integrity</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Zero BigDecimal calculation errors</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Custom Micrometer counters for precision validation failures</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Any DataPrecisionException detection triggers immediate alert</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Scalability Considerations</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Concurrent User Support</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Horizontal scaling through Kubernetes HPA based on CPU and memory metrics</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">REST API Throughput</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Optimized for 1000+ requests per second per Pod instance with connection pooling</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Growth</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL automatic storage expansion with performance monitoring via Prometheus PostgreSQL Exporter</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Optimization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Optimized JSON payloads with compression enabling efficient bandwidth utilization</span>

### 5.4.6 Disaster Recovery Procedures (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Recovery Objectives and Procedures</span>**

**<span style="background-color: rgba(91, 57, 243, 0.2)">Recovery Point Objective (RPO): Real-time</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Data</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Continuous PostgreSQL Write-Ahead Logging (WAL) shipping to standby instances for minimal data loss</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Application State</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Redis cluster replication with automatic failover maintaining session continuity</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Configuration Data</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Git-backed Spring Cloud Config repository with automated backup and version control</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Recovery Time Objective (RTO): 15 Minutes</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Pod Recovery</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic pod restart and rescheduling with health check validation within 2 minutes</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Restoration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL standby promotion and application connection rerouting within 5 minutes</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Complete System Recovery</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Full environment restoration through Helm chart redeployment within 15-minute window</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive Kubernetes-Native Recovery Strategy</span>**
1. **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Recovery Process</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL point-in-time recovery from continuous WAL archiving with automatic integrity validation and connection pool reconfiguration</span>
2. **<span style="background-color: rgba(91, 57, 243, 0.2)">Application Recovery Process</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes deployment rollback capabilities with Spring Boot graceful shutdown hooks and Redis session state preservation</span>
3. **<span style="background-color: rgba(91, 57, 243, 0.2)">Infrastructure Recovery Process</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Helm chart-based infrastructure as code deployment with automated secret management and service mesh reconfiguration</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Helm Chart Redeployment Steps</span>**
```bash
# Emergency recovery procedure
helm rollback carddemo-production <previous-revision>
kubectl wait --for=condition=available deployment/carddemo-backend --timeout=300s
kubectl wait --for=condition=ready pod -l app=carddemo-backend --timeout=300s

#### Database connection validation
kubectl exec deploy/carddemo-backend -- curl -f http://localhost:8080/actuator/health/db

#### Session store validation
kubectl exec deploy/carddemo-backend -- curl -f http://localhost:8080/actuator/health/redis
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Data Integrity Assurance</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Transaction Consistency</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">ACID compliance with Spring @Transactional boundaries ensuring multi-table operation consistency</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Integrity Checking</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated VACUUM and ANALYZE operations with constraint validation for referential integrity</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cross-Reference Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Foreign key relationship consistency checking through JPA entity validation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Financial Accuracy Verification</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch control total reconciliation with BigDecimal precision validation for financial integrity</span>

#### References

**Technical Specification Sources**:
- Section 1.2 SYSTEM OVERVIEW - <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-native architecture context and Spring Boot integration capabilities</span>
- Section 3.2 FRAMEWORKS & LIBRARIES - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security 6.x, Micrometer, and Actuator implementation details</span>
- Section 3.4 DEVELOPMENT & DEPLOYMENT - <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes orchestration and Docker containerization architecture</span>
- Section 5.3 TECHNICAL DECISIONS - <span style="background-color: rgba(91, 57, 243, 0.2)">Strategic architecture decisions supporting modernization approach</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Implementation Analysis Sources</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/` - Spring Boot application classes demonstrating cloud-native patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/resources/application.yml` - Spring Boot configuration with Actuator and security settings</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`kubernetes/deployment.yaml` - Container orchestration manifests for production deployment</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`docker-compose.yml` - Multi-container development environment with PostgreSQL and Redis</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/pom.xml` - Maven dependencies including Spring Security, Micrometer, and monitoring libraries</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">System modernization documentation - Complete cloud-native transformation architecture inventory</span>

# 6. SYSTEM COMPONENTS DESIGN

## 6.1 CORE SERVICES ARCHITECTURE

### 6.1.1 Architecture Applicability Assessment

<span style="background-color: rgba(91, 57, 243, 0.2)">Core Services Architecture remains not applicable for the CardDemo system because the modernized solution is still intentionally delivered as a single Spring Boot application rather than decomposed services.</span> This determination is based on comprehensive analysis of the system's architectural patterns, technical decisions, and implementation structure.

The CardDemo system implements a **<span style="background-color: rgba(91, 57, 243, 0.2)">modern containerized monolithic architecture</span>** running on <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes with Spring Boot 3.2.x</span>, explicitly designed as a single integrated application rather than a distributed services-based system. The architectural decisions documented in the technical specifications confirm the deliberate choice of monolithic over microservices architecture for this financial transaction processing system.

#### 6.1.1.1 Architecture Classification (updated)

| Architecture Characteristic | CardDemo Implementation | Core Services Alternative |
|----------------------------|-------------------------|---------------------------|
| **Deployment Model** | <span style="background-color: rgba(91, 57, 243, 0.2)">Single Spring Boot container (monolithic) on Kubernetes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Multiple independent microservices</span> |
| **Communication Pattern** | <span style="background-color: rgba(91, 57, 243, 0.2)">In-process method invocation & Spring Session state</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Network-based inter-service calls</span> |
| **Data Management** | <span style="background-color: rgba(91, 57, 243, 0.2)">Shared PostgreSQL schema with ACID transactions</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Service-specific databases / eventual consistency</span> |
| **Scaling Strategy** | <span style="background-color: rgba(91, 57, 243, 0.2)">Horizontal pod scaling of monolith</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Independent service scaling</span> |

#### 6.1.1.2 Monolithic Architecture Rationale (updated)

The technical specifications document explicit architectural decisions that preclude core services architecture:

**Transaction Consistency Requirements**: The system requires strict ACID compliance for financial data consistency, which <span style="background-color: rgba(91, 57, 243, 0.2)">Spring @Transactional management using PostgreSQL</span> provides through integrated transaction management. A distributed services architecture would introduce complexity in maintaining consistency across service boundaries.

**Data Access Optimization**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL table/index design that mirrors VSAM key structures</span> are optimized for <span style="background-color: rgba(91, 57, 243, 0.2)">containerized I/O patterns with sub-second response times</span>. Decomposing into services would require data distribution strategies that could compromise performance requirements.

**Operational Simplicity**: The monolithic deployment model provides simplified <span style="background-color: rgba(91, 57, 243, 0.2)">container operations with single deployment units</span>, leveraging proven <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes capabilities</span> for reliability and performance.

**Technology Integration**: The system leverages native <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot ecosystem components and cloud-native services</span> that are designed for integrated rather than distributed architectures.

**Scaling Approach**: <span style="background-color: rgba(91, 57, 243, 0.2)">Horizontal pod scaling managed by Kubernetes replicas</span> provides sufficient scalability for the system's requirements without the complexity of managing multiple independent services.

**Modern Architecture Benefits**: The <span style="background-color: rgba(91, 57, 243, 0.2)">containerized Spring Boot monolith deployed on Kubernetes</span> delivers cloud-native advantages including container orchestration, <span style="background-color: rgba(91, 57, 243, 0.2)">REST API integration</span>, and modern development practices while maintaining the operational simplicity and transaction consistency required for financial processing systems.

### 6.1.2 Existing Architectural Patterns

While <span style="background-color: rgba(91, 57, 243, 0.2)">the original core services architecture patterns have been replaced with modern cloud-native patterns</span>, the CardDemo system implements sophisticated architectural patterns appropriate for <span style="background-color: rgba(91, 57, 243, 0.2)">containerized Spring Boot environments</span>:

#### 6.1.2.1 Component Modularization (updated)

```mermaid
graph TD
    A[React SPA Frontend<br/>18 Screen Components] --> B[Spring Cloud Gateway<br/>API Routing & Security]
    B --> C[Spring Boot Application<br/>REST Controllers Layer]
    C --> D[Service Layer<br/>36 Service Classes]
    C --> E[Repository Layer<br/>JPA Data Access]
    D --> E
    E --> F[PostgreSQL Database<br/>Relational Tables]
    
    G[Kubernetes CronJobs] --> H[Spring Batch Jobs<br/>12 Processing Components]
    H --> D
    H --> E
    H --> F
    
    style B fill:#e3f2fd
    style F fill:#f3e5f5
    style C fill:#e8f5e8
    style H fill:#fff3e0
```

The system achieves modularity through <span style="background-color: rgba(91, 57, 243, 0.2)">component-based Spring Boot architecture with standardized layered organization</span>. **<span style="background-color: rgba(91, 57, 243, 0.2)">24 REST controllers are mapped 1:1 to former CICS transactions, maintaining identical endpoint functionality and request/response patterns</span>**. The architecture implements **<span style="background-color: rgba(91, 57, 243, 0.2)">36 service classes that mirror COBOL paragraph structure, preserving the original business logic flow while leveraging Spring's dependency injection and transaction management</span>**. **<span style="background-color: rgba(91, 57, 243, 0.2)">JPA repositories represent VSAM datasets, providing object-relational mapping with composite primary key support and maintaining identical data access patterns through Spring Data JPA query methods</span>**.

Each REST controller follows a standardized structure with initialization, input validation, business processing, output formatting, and comprehensive exception handling. Service classes maintain the original COBOL paragraph-to-method mapping, ensuring functional equivalence while benefiting from Java's object-oriented capabilities and Spring's enterprise features.

#### 6.1.2.2 Inter-Component Communication (updated)

| Communication Type | Implementation | Purpose | Scope |
|-------------------|----------------|---------|-------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Controller-to-Service</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring dependency injection with @Autowired</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Business logic orchestration</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Within Spring Boot application context</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Service-to-Repository</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JPA repository interfaces with @Transactional</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Data persistence and retrieval</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Integrated transaction context</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Batch-to-Database</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch readers/writers with chunk processing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">High-volume data processing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Synchronized batch operations</span>** |

The communication layer leverages Spring's advanced dependency injection capabilities to maintain loose coupling while ensuring type safety and performance optimization. Session state management utilizes Spring Session with Redis backend, providing distributed session storage that replaces CICS COMMAREA structures while enabling horizontal scaling and session clustering.

#### 6.1.2.3 Resilience and Recovery (updated)

The system implements modern cloud-native resilience patterns that provide enterprise-grade reliability equivalent to traditional mainframe patterns:

```mermaid
flowchart TD
    A[Transaction Failure] --> B{Failure Classification}
    B -->|System Error| C[Spring Transaction Rollback]
    B -->|Data Error| D[PostgreSQL Point-In-Time Recovery PITR]
    B -->|Application Error| E[Spring Boot Global Exception Handler<br/>+ Micrometer Alerts]
    
    C --> F[Automatic Rollback]
    F --> G[Session State Restoration]
    
    D --> H[WAL-Based Recovery]
    H --> I[Consistency Validation]
    I --> J[Data Integrity Verification]
    
    E --> K[Structured Error Logging]
    K --> L[Metrics Collection & Alerting]
    
    style A fill:#ffcdd2
    style C fill:#c8e6c9
    style D fill:#c8e6c9
    style G fill:#e1f5fe
    style J fill:#e1f5fe
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Transaction Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic transaction rollback and recovery for in-flight operations with ACID compliance through @Transactional annotations and declarative transaction boundaries</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL PITR Recovery</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Point-in-time recovery from Write-Ahead Log (WAL) with continuous archiving, providing microsecond-precision recovery capabilities and automated consistency checking</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Error Handling</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive global exception handling with custom error responses, integrated with Micrometer metrics collection for real-time application monitoring and alerting through Prometheus integration</span>.

The resilience architecture includes circuit breaker patterns through Spring Cloud Circuit Breaker, retry mechanisms with exponential backoff, and bulkhead isolation for critical system components. Health check endpoints provide continuous monitoring of application state, database connectivity, and external service availability, enabling proactive maintenance and automated recovery procedures.

### 6.1.3 Performance and Scalability Architecture

#### 6.1.3.1 Cloud-Native Performance Architecture (updated)

The system achieves performance objectives through <span style="background-color: rgba(91, 57, 243, 0.2)">modern cloud-native optimizations including JVM tuning, connection pool management, and PostgreSQL index optimization</span> rather than mainframe-specific configurations:

| Performance Metric | Target | Implementation Approach |
|-------------------|--------|------------------------|
| **Interactive Response Time** | <span style="background-color: rgba(91, 57, 243, 0.2)">< 200 ms for 95% of REST transactions</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JVM tuning and connection pool optimization</span> |
| **Batch Processing Window** | 4-hour daily processing completion | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job scheduling and optimization</span> |
| **Concurrent User Support** | 1000+ transactions/hour/terminal | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes horizontal pod scaling and session management</span> |
| **Data Access Performance** | Sub-millisecond record retrieval | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL index optimization and query tuning</span> |

#### 6.1.3.2 Kubernetes Horizontal Scaling Strategy (updated)

```mermaid
graph LR
    A[Load Increase] --> B{Metric Type}
    B -->|CPU Usage > 70%| C[HorizontalPodAutoscaler]
    B -->|Response Latency > 150ms| C
    B -->|Memory Usage > 80%| C
    
    C --> D[Scale Decision Engine]
    D --> E[Increase Pod Replicas]
    E --> F[Load Balancer Distribution]
    
    subgraph "Scaling Targets"
        G[Spring Boot App Pod 1]
        H[Spring Boot App Pod 2]
        I[Spring Boot App Pod N]
    end
    
    F --> G
    F --> H
    F --> I
    
    J[PostgreSQL Connection Pool] --> G
    J --> H
    J --> I
    
    K[Redis Session Store] --> G
    K --> H
    K --> I
    
    style A fill:#fff3e0
    style C fill:#e8f5e8
    style E fill:#c8e6c9
    style J fill:#e3f2fd
    style K fill:#fce4ec
```

<span style="background-color: rgba(91, 57, 243, 0.2)">The system scales horizontally through Kubernetes HorizontalPodAutoscaler responding to CPU utilization, response latency metrics, and memory usage rather than vertical mainframe resource allocation</span>.

#### 6.1.3.3 Performance Optimization Techniques (updated)

**JVM Performance Tuning**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">G1 Garbage Collector configuration for low-latency response times</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Heap sizing optimization based on transaction volume patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">JIT compiler tuning for Spring Boot application warmup optimization</span>

**Database Connection Management**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP connection pool sizing based on concurrent user patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Connection pool monitoring and dynamic sizing adjustment</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Connection timeout optimization for REST transaction boundaries</span>

**PostgreSQL Query Optimization**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Composite index strategies matching VSAM key access patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Query plan optimization for complex business logic operations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL shared_buffers and work_mem tuning for batch processing</span>

#### 6.1.3.4 Scalability Architecture Patterns

**Horizontal Pod Autoscaling Configuration**:

| Scaling Metric | Threshold | Scaling Action | Target Resource |
|---------------|-----------|----------------|-----------------|
| **CPU Utilization** | 70% average | Add 1 pod | Spring Boot application pods |
| **Response Latency** | >150ms average | Add 1 pod | Spring Boot application pods |
| **Memory Usage** | 80% average | Add 1 pod | Spring Boot application pods |
| **Active Sessions** | >800 concurrent | Add 1 pod | Redis session capacity |

**Resource Allocation Strategy**:
- **Pod Resource Limits**: 2 CPU cores, 4GB RAM per Spring Boot application instance
- **Session Storage**: Redis cluster with 16GB memory allocation supporting 10,000+ concurrent sessions
- **Database Connections**: 50 connections per pod with connection pooling optimization
- **Load Balancing**: Kubernetes Service LoadBalancer distributing traffic across healthy pods

#### 6.1.3.5 Capacity Planning Guidelines

**Traffic Pattern Analysis**:
- **Peak Hours**: 8:00 AM - 6:00 PM with 3x baseline traffic requiring 6+ pod replicas
- **Batch Processing**: 2:00 AM - 6:00 AM with dedicated resource allocation for Spring Batch jobs
- **Holiday Processing**: 5x baseline traffic requiring temporary pod scaling to 15+ replicas
- **Disaster Recovery**: Cross-zone pod distribution maintaining 99.9% availability targets

**Resource Monitoring and Alerting**:

```mermaid
graph TB
    A[Prometheus Metrics Collection] --> B[Grafana Dashboard]
    A --> C[AlertManager]
    
    subgraph "Key Metrics"
        D[REST API Response Times]
        E[Pod CPU/Memory Usage]
        F[PostgreSQL Connection Pool Status]
        G[Redis Session Storage Utilization]
        H[Spring Batch Job Duration]
    end
    
    D --> A
    E --> A
    F --> A
    G --> A
    H --> A
    
    C --> I[PagerDuty Integration]
    C --> J[Email Notifications]
    
    B --> K[Operations Team Dashboard]
    I --> L[24/7 Support Team]
    
    style A fill:#e8f5e8
    style B fill:#e3f2fd
    style C fill:#fff3e0
```

**Performance Validation Criteria**:
- **Response Time SLA**: 95% of REST API calls complete within 200ms target
- **Throughput Capacity**: Support 10,000+ transactions per hour during peak operations
- **Batch Processing**: Complete all Spring Batch jobs within 4-hour processing window
- **Scalability Testing**: Demonstrate linear scaling up to 20 pod replicas under load testing conditions

### 6.1.4 Alternative Architecture Considerations

#### 6.1.4.1 Modernization Pathways (updated)

While the current system implements a containerized monolithic architecture on Kubernetes, <span style="background-color: rgba(91, 57, 243, 0.2)">microservices decomposition remains explicitly out-of-scope for the current migration as defined in section 0.4.2, even though containerization with Spring Boot and Kubernetes orchestration has been adopted</span>.

**Containerized Monolith Benefits**: The Spring Boot application deployed on Kubernetes provides modern cloud-native capabilities including horizontal pod scaling, container orchestration, and REST API integration while maintaining monolithic simplicity and transaction consistency.

**Future Evolution Considerations**: <span style="background-color: rgba(91, 57, 243, 0.2)">Potential future evolution to microservices could leverage existing Spring Boot module boundaries once functional parity is fully validated, with the 36 service classes potentially serving as decomposition boundaries</span>. However, <span style="background-color: rgba(91, 57, 243, 0.2)">this remains speculative and outside the current scope per section 0.4.2</span>.

**Hybrid Architecture Support**: The modular Spring Boot design with clear service layer separation enables potential selective modernization of components while preserving proven transaction processing patterns and PostgreSQL ACID compliance.

#### 6.1.4.2 Service Architecture Trade-offs (updated)

| Architectural Aspect | Containerized Monolith Benefits | **Microservices Trade-offs** |
|---------------------|--------------------------------|------------------------------|
| **Transaction Integrity** | ACID compliance guaranteed through PostgreSQL | **Distributed transaction complexity** |
| **Performance** | Sub-200ms REST response times | **Network latency introduction** |
| **Operational Complexity** | Single Kubernetes deployment model | **Service orchestration overhead** |
| **Data Consistency** | Immediate consistency via shared database | **Eventual consistency challenges** |

### 6.1.5 Conclusion

<span style="background-color: rgba(91, 57, 243, 0.2)">The CardDemo migration demonstrates that core services architecture is not universally applicable across all enterprise systems. This containerized Spring Boot monolithic system achieves the operational objectives typically associated with services architecture—modularity, scalability, resilience, and maintainability—through modern monolithic architectural patterns optimized for financial transaction processing environments.</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">The migration delivers a containerized Spring Boot monolith that preserves functional parity without adopting a Core Services (microservices) architecture.</span> The monolithic approach provides superior transaction consistency, performance characteristics, and operational simplicity for the financial services domain requirements, <span style="background-color: rgba(91, 57, 243, 0.2)">validating the architectural decision to maintain monolithic patterns while modernizing the underlying technology stack</span> as documented in the technical specifications.

<span style="background-color: rgba(91, 57, 243, 0.2)">The containerized Java 21 and Spring Boot architecture delivers the same reliability and performance benefits as the original mainframe system while providing modern cloud-native deployment capabilities through Docker and Kubernetes orchestration.</span> The PostgreSQL database foundation ensures robust data consistency and transaction integrity, while the Spring Boot framework maintains the tight coupling between components that is essential for financial transaction processing accuracy.

#### References

**Technical Specification Sections**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Section 0.1.1 CORE OBJECTIVE - Complete platform transformation to containerized Spring Boot monolith</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Section 0.2.2 COMPONENT IMPACT ANALYSIS - Explicit monolithic Spring Boot service architecture</span>  
- <span style="background-color: rgba(91, 57, 243, 0.2)">Section 0.5.1 IMPLEMENTATION VERIFICATION POINTS - Modern monolithic operational patterns</span>

**Repository Analysis**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/service/` - 36 Spring Boot service classes demonstrating monolithic component organization</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/controller/` - 24 REST controllers confirming integrated transaction processing architecture</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/entity/` - JPA entities showing shared data structure patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/resources/schema.sql` - PostgreSQL schema confirming integrated storage architecture</span>

## 6.2 DATABASE DESIGN

### 6.2.1 SCHEMA DESIGN

#### 6.2.1.1 Entity Relationships (updated)

The CardDemo application implements a <span style="background-color: rgba(91, 57, 243, 0.2)">modern PostgreSQL relational database architecture with composite primary keys and foreign key relationships</span> optimized for the high-volume transaction processing requirements documented in the system overview. <span style="background-color: rgba(91, 57, 243, 0.2)">The system maintains referential integrity through PostgreSQL constraints and B-tree indexes</span>, providing ACID compliance for financial transaction processing.

```mermaid
erDiagram
    CUSTOMER ||--o{ ACCOUNT : "owns"
    CUSTOMER ||--o{ CARD : "primary holder"
    ACCOUNT ||--o{ CARD : "linked to"
    ACCOUNT ||--o{ TRANSACTION : "generates"
    CARD ||--o{ TRANSACTION : "used in"
    ACCOUNT ||--o{ TRAN_CAT_BAL : "maintains"
    DISCLOSURE_GROUP ||--o{ ACCOUNT : "applies to"
    TRANSACTION }o--|| TRAN_TYPE : "classified as"
    TRANSACTION }o--|| TRAN_CATEGORY : "categorized by"
    
    CUSTOMER {
        BIGINT customer_id PK "Primary Key"
        VARCHAR first_name "20 chars"
        VARCHAR middle_name "20 chars"
        VARCHAR last_name "20 chars"
        VARCHAR address_line_1 "50 chars"
        VARCHAR address_line_2 "50 chars"
        VARCHAR address_line_3 "50 chars"
        VARCHAR state_code "2 chars"
        VARCHAR country_code "3 chars"
        VARCHAR zip_code "10 chars"
        VARCHAR phone_number_1 "15 chars"
        VARCHAR phone_number_2 "15 chars"
        VARCHAR ssn "9 chars"
        VARCHAR government_id "20 chars"
        DATE date_of_birth
        VARCHAR eft_account_id "10 chars"
        CHAR primary_card_holder "1 char"
        SMALLINT fico_score
    }
    
    ACCOUNT {
        BIGINT account_id PK "Primary Key"
        CHAR active_status "1 char"
        NUMERIC current_balance "12,2 precision"
        NUMERIC credit_limit "12,2 precision"
        NUMERIC cash_credit_limit "12,2 precision"
        DATE open_date
        DATE expiration_date
        DATE reissue_date
        NUMERIC current_cycle_credit "12,2 precision"
        NUMERIC current_cycle_debit "12,2 precision"
        VARCHAR zip_code "10 chars"
        VARCHAR group_id "10 chars"
        BIGINT customer_id FK "Foreign Key"
        BIGINT disclosure_group_id FK "Foreign Key"
    }
    
    CARD {
        VARCHAR card_number PK "16 chars"
        BIGINT account_id FK "Foreign Key"
        VARCHAR cvv_code "3 digits"
        VARCHAR embossed_name "50 chars"
        DATE expiration_date
        CHAR active_status "1 char"
        BIGINT customer_id FK "Foreign Key"
    }
    
    TRANSACTION {
        BIGINT transaction_id PK "Primary Key"
        BIGINT account_id FK "Foreign Key"
        VARCHAR card_number FK "16 chars"
        DATE transaction_date
        TIMESTAMP transaction_time
        NUMERIC amount "12,2 precision"
        VARCHAR transaction_type_code FK "2 chars"
        VARCHAR category_code FK "4 chars"
        VARCHAR description "100 chars"
        VARCHAR merchant_name "50 chars"
    }
    
    TRAN_CAT_BAL {
        BIGINT account_id PK,FK "Composite Key"
        VARCHAR category_code PK,FK "Composite Key"
        DATE balance_date PK "Composite Key"
        NUMERIC balance "12,2 precision"
    }
    
    DISCLOSURE_GROUP {
        BIGINT disclosure_group_id PK "Primary Key"
        VARCHAR group_name "50 chars"
        NUMERIC interest_rate "5,4 precision"
        VARCHAR terms_text "1000 chars"
    }
    
    TRAN_TYPE {
        VARCHAR transaction_type_code PK "2 chars"
        VARCHAR description "50 chars"
        CHAR debit_credit_flag "1 char"
    }
    
    TRAN_CATEGORY {
        VARCHAR category_code PK "4 chars"
        VARCHAR subcategory_code PK "2 chars"
        VARCHAR description "50 chars"
        VARCHAR category_name "25 chars"
    }
```

#### 6.2.1.2 Data Models and Structures (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The system utilizes PostgreSQL relational tables</span> as detailed in the Databases & Storage section, providing optimal performance for both direct access by primary key and <span style="background-color: rgba(91, 57, 243, 0.2)">complex relational queries</span> required by the containerized Spring Boot architecture.

| Table Name | Business Purpose | <span style="background-color: rgba(91, 57, 243, 0.2)">Primary Key</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Key Columns</span> |
|------------|------------------|----------------|---------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">user_security</span> | Authentication and authorization | <span style="background-color: rgba(91, 57, 243, 0.2)">user_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">user_id, password_hash</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">customer_data</span> | Customer profile management | <span style="background-color: rgba(91, 57, 243, 0.2)">customer_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">customer_id</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">account_data</span> | Account lifecycle management | <span style="background-color: rgba(91, 57, 243, 0.2)">account_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_id, customer_id (FK)</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">card_data</span> | Credit card operations | <span style="background-color: rgba(91, 57, 243, 0.2)">card_number (VARCHAR(16))</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">card_number, account_id (FK)</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transactions</span> | Transaction processing | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_id, account_id (FK), card_number (FK)</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_category_balance</span> | Balance management | <span style="background-color: rgba(91, 57, 243, 0.2)">Composite: (account_id, category_code, balance_date)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_id (FK), category_code (FK), balance_date</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">disclosure_groups</span> | Interest rate configuration | <span style="background-color: rgba(91, 57, 243, 0.2)">disclosure_group_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">disclosure_group_id</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_types</span> | Transaction classification | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_type_code (VARCHAR(2))</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_type_code</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_categories</span> | Category management | <span style="background-color: rgba(91, 57, 243, 0.2)">Composite: (category_code, subcategory_code)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">category_code, subcategory_code</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Column Type Mappings</span>**:

| <span style="background-color: rgba(91, 57, 243, 0.2)">COBOL Data Type</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Equivalent</span> | Business Usage |
|-------------|-------------|---------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">PIC 9(9) (Customer ID)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">BIGINT</span> | Primary keys and identifiers |
| <span style="background-color: rgba(91, 57, 243, 0.2)">PIC X(n) (Character fields)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">VARCHAR(n)</span> | Names, addresses, codes |
| <span style="background-color: rgba(91, 57, 243, 0.2)">PIC S9(10)V99 COMP-3 (Monetary)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">NUMERIC(12,2)</span> | Account balances, credit limits |
| <span style="background-color: rgba(91, 57, 243, 0.2)">PIC X(1) (Status flags)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CHAR(1)</span> | Active status indicators |
| <span style="background-color: rgba(91, 57, 243, 0.2)">PIC 9(8) (YYYYMMDD dates)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">DATE</span> | Date fields |
| <span style="background-color: rgba(91, 57, 243, 0.2)">PIC 9(6) (HHMMSS times)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">TIME</span> | Time components |

#### 6.2.1.3 Indexing Strategy (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Primary B-tree Indexes</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Each PostgreSQL table maintains a primary B-tree index on its primary key columns</span> as documented in the core architecture
- <span style="background-color: rgba(91, 57, 243, 0.2)">Primary keys are automatically indexed with UNIQUE constraint</span> for optimal retrieval supporting the < 200ms response time requirement
- <span style="background-color: rgba(91, 57, 243, 0.2)">Composite primary keys utilize multi-column B-tree indexes</span> for efficient key-based lookups

**<span style="background-color: rgba(91, 57, 243, 0.2)">Secondary B-tree Indexes</span>** (replacing VSAM Alternate Indexes):

| Index Name | Table | <span style="background-color: rgba(91, 57, 243, 0.2)">Indexed Columns</span> | Purpose | Integration Point |
|------------|-------|---------------|---------|-------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">card_account_idx</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">card_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_id</span> | Account-based card lookup | Credit card operations REST controllers |
| <span style="background-color: rgba(91, 57, 243, 0.2)">customer_account_idx</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">customer_id</span> | Customer-account relationship | Account management Spring services |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_date_idx</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transactions</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_date, account_id</span> | Date-range queries | Batch processing components |
| <span style="background-color: rgba(91, 57, 243, 0.2)">customer_name_idx</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">customer_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">last_name, first_name</span> | Customer search operations | Customer service REST endpoints |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cursor-Based Pagination Strategy</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL ORDER BY clauses with LIMIT/OFFSET replicate COBOL STARTBR/READNEXT/READPREV browse operations</span> through Spring Data JPA Pageable interfaces, supporting efficient result set navigation for large data sets.

#### 6.2.1.4 Partitioning Approach (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The system implements PostgreSQL table-level partitioning</span> aligned with the component-based Spring Boot architecture:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Table-Level Partitioning Strategy</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">RANGE Partitioning</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">transactions table partitioned by transaction_date</span> to support the 4-hour batch processing window
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Partition Pruning</span>**: PostgreSQL query planner automatically eliminates irrelevant partitions during query execution
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Monthly Partitions</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Each month's transactions stored in separate partition</span> for efficient archival and maintenance

**<span style="background-color: rgba(91, 57, 243, 0.2)">Partition Configuration Example</span>**:
```sql
CREATE TABLE transactions (
    transaction_id BIGINT PRIMARY KEY,
    account_id BIGINT NOT NULL,
    transaction_date DATE NOT NULL,
    amount NUMERIC(12,2),
    -- other columns
) PARTITION BY RANGE (transaction_date);

CREATE TABLE transactions_2024_01 PARTITION OF transactions
    FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');

CREATE TABLE transactions_2024_02 PARTITION OF transactions
    FOR VALUES FROM ('2024-02-01') TO ('2024-03-01');
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Logical Separation</span>**: 
- **Schema-based Organization**: <span style="background-color: rgba(91, 57, 243, 0.2)">Related tables grouped in PostgreSQL schemas</span> supporting modular Spring Boot service design
- **Account Group Indexing**: <span style="background-color: rgba(91, 57, 243, 0.2)">group_id columns with B-tree indexes</span> enable logical account grouping for Spring Batch processing efficiency
- **Date-based Archiving**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated partition management</span> supports date-range queries for the 4-hour batch processing window

#### 6.2.1.5 Replication Configuration (updated)

```mermaid
graph TD
    subgraph "Primary PostgreSQL Instance"
        P1[user_security]
        P2[customer_data]
        P3[account_data]
        P4[card_data]
        P5[transactions]
    end
    
    subgraph "Standby PostgreSQL Instance"
        S1[Read Replica Tables]
        S2[WAL Replay Process]
    end
    
    subgraph "Archive Storage"
        A1[WAL Archive Files]
        A2[Base Backup Files]
    end
    
    P1 -->|Streaming Replication| S1
    P2 -->|Streaming Replication| S1
    P3 -->|Streaming Replication| S1
    P4 -->|Streaming Replication| S1
    P5 -->|Streaming Replication| S1
    
    P5 -->|WAL Archiving| A1
    P3 -->|pg_basebackup| A2
    
    S2 -->|WAL Apply| S1
    A1 -->|WAL Recovery| S2
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Streaming Replication</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Primary-Standby Configuration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Asynchronous streaming replication to standby instances</span> for high availability aligned with the resilience patterns documented in core services architecture
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Write-Ahead Log (WAL) Streaming</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Continuous WAL transmission</span> maintaining near real-time replica synchronization
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Hot Standby Mode</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Read-only queries supported on standby instances</span> for load distribution and reporting operations

**<span style="background-color: rgba(91, 57, 243, 0.2)">WAL Archiving Strategy</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Continuous Archiving</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">WAL segments archived to cloud storage</span> supporting point-in-time recovery requirements
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Archive Command Configuration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated WAL file transfer to persistent storage</span> ensuring durability for financial transaction integrity
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Retention Policy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">30-day WAL retention</span> supporting regulatory compliance and audit requirements

#### 6.2.1.6 Backup Architecture (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Base Backups</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">pg_basebackup</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Full database cluster backups</span> supporting the resilience patterns documented in the core services architecture
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Online Backup Capability</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Hot backups without service interruption</span> maintaining continuous availability for financial transaction processing
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Incremental Backup Support</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">WAL-based incremental recovery</span> minimizing backup storage requirements and recovery time

**<span style="background-color: rgba(91, 57, 243, 0.2)">Logical Backups</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">pg_dump/pg_dumpall</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Schema and data export capabilities</span> for migration and development environment provisioning
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Table-Level Granularity</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Selective backup and restore operations</span> supporting targeted data recovery scenarios
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cross-Version Compatibility</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Logical backups support PostgreSQL version upgrades</span> and cross-platform migrations

**<span style="background-color: rgba(91, 57, 243, 0.2)">Backup Scheduling and Retention</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Daily Backups</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes CronJob integration</span> for consistent backup execution aligned with Spring Batch processing windows
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Retention Policy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Daily backups retained for 30 days, weekly backups for 12 months</span> compliant with regulatory requirements
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud Storage Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Backups stored in geographically distributed cloud storage</span> ensuring disaster recovery capabilities

**<span style="background-color: rgba(91, 57, 243, 0.2)">Recovery Time and Point Objectives</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Recovery Point Objective (RPO)</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Maximum 15 minutes data loss through continuous WAL archiving</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Recovery Time Objective (RTO)</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Database restoration within 2 hours for full cluster recovery</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Point-in-Time Recovery (PITR)</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Granular recovery to specific transaction timestamps</span> supporting precise data restoration requirements

### 6.2.2 DATA MANAGEMENT

#### 6.2.2.1 Migration Procedures (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">VSAM-to-PostgreSQL Data Migration Process</span>:**

<span style="background-color: rgba(91, 57, 243, 0.2)">The system supports comprehensive data migration from VSAM KSDS datasets to PostgreSQL relational tables through a five-phase approach:</span>

1. **<span style="background-color: rgba(91, 57, 243, 0.2)">VSAM Export to Flat Files</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Mainframe utilities export VSAM datasets to fixed-width ASCII files maintaining original record layouts</span>
2. **<span style="background-color: rgba(91, 57, 243, 0.2)">ETL Transformation with COBOL-aware Converters</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch jobs process exported files using CobolDataConverter utilities ensuring COMP-3→BigDecimal precision preservation</span>
3. **<span style="background-color: rgba(91, 57, 243, 0.2)">Bulk Load via PostgreSQL COPY Command</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">psql \copy or PostgreSQL COPY statements perform high-speed bulk inserts into target tables</span>
4. **<span style="background-color: rgba(91, 57, 243, 0.2)">Post-load Index Creation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">B-tree and composite indexes built after data load for optimal performance</span>
5. **<span style="background-color: rgba(91, 57, 243, 0.2)">Validation via Parallel Run Comparison</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated comparison between VSAM and PostgreSQL query results ensuring 100% data accuracy</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Data Migration Flow</span>:**
```mermaid
flowchart LR
    A[VSAM KSDS Datasets] --> B[Export Utility]
    B --> C[Fixed-Width Files]
    C --> D[Spring Batch ETL]
    D --> E[COBOL Data Conversion]
    E --> F[PostgreSQL COPY]
    F --> G[Index Creation]
    G --> H[Parallel Validation]
    H --> I[Production Ready]
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Critical Migration Constraint</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Field sequence in PostgreSQL tables must match original copybook layout to maintain fixed-position file interfaces and preserve compatibility with existing batch processing systems.</span>

#### 6.2.2.2 Versioning Strategy (updated)

- **Copybook Version Control**: Each record layout versioned in copybook headers supporting the shared copybook pattern
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Schema Migration Scripts</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Liquibase or Flyway migration scripts manage PostgreSQL schema evolution with version control and rollback capabilities</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Column Addition Strategy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">New columns appended with default NULL values preserving backward compatibility—mirrors previous COBOL FILLER method for maintaining record structure integrity</span>
- **Backward Compatibility**: Maintained through <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL DDL versioning aligned with</span> monolithic architecture requirements
- **Version Metadata**: <span style="background-color: rgba(91, 57, 243, 0.2)">Database schema versioning tracked through Liquibase changelog tables</span> supporting modernization pathways

#### 6.2.2.3 Archival Policies (updated)

| Dataset | Retention Period | <span style="background-color: rgba(91, 57, 243, 0.2)">Archive Method</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Retrieval Process</span> | Compliance Standard |
|---------|------------------|----------------|-------------------|-------------------|
| transactions | 13 months online | <span style="background-color: rgba(91, 57, 243, 0.2)">Monthly partition detachment & MOVE TO ARCHIVE_SCHEMA</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL schema-based query</span> | PCI DSS 10.7 |
| customer_data | Permanent | <span style="background-color: rgba(91, 57, 243, 0.2)">Annual partition snapshot</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Archive schema access</span> | GDPR Article 5 |
| account_data | 7 years | <span style="background-color: rgba(91, 57, 243, 0.2)">Yearly partition archival</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Cross-schema join query</span> | Banking regulations |
| card_data | Card expiry + 2 years | <span style="background-color: rgba(91, 57, 243, 0.2)">Quarterly partition management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Automated archive retrieval</span> | PCI DSS |

#### 6.2.2.4 Data Storage and Retrieval Mechanisms (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">JPA Repository Pattern</span>** <span style="background-color: rgba(91, 57, 243, 0.2)">aligned with Spring Boot architecture</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA Repositories</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Custom repository interfaces extending JpaRepository providing CRUD operations equivalent to VSAM READ/WRITE/DELETE commands</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cursor-based Pagination</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JPA Pageable interfaces with ORDER BY clauses replicate STARTBR/READNEXT/READPREV browse operations for efficient result set navigation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">@Transactional Boundaries</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring @Transactional annotations at service layer methods matching CICS SYNCPOINT behavior with automatic rollback on exceptions</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Retrieval Patterns supporting PostgreSQL performance optimization</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Key Access</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JPA findById operations with B-tree index utilization</span> < 1ms response time for real-time components
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Range-based Queries</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JPA Specification API for complex filtering with LIMIT/OFFSET pagination</span> in card operations (7 cards per page)
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Foreign Key Navigation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JPA entity relationships with lazy loading for flexible queries</span> in account management

#### 6.2.2.5 Caching Policies (updated)

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis-backed Spring Session Cache</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Distributed session management replacing CICS COMMAREA structures with Redis cluster storage supporting horizontal scaling</span>
- **In-Memory Lookup Tables**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring @Cacheable annotations for</span> static reference data (TRANTYPE, TRANCATG) where business-required
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Connection Pooling</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP connection pool management with configurable pool size supporting concurrent access patterns and sub-second response times</span>

### 6.2.3 COMPLIANCE CONSIDERATIONS

#### 6.2.3.1 Data Retention Rules

| Data Category | Minimum Retention | Maximum Retention | Compliance Standard | Business Justification |
|---------------|------------------|-------------------|-------------------|----------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Records (PostgreSQL tables)</span> | 7 years | 10 years | PCI DSS, SOX | Financial audit requirements |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Customer Data (PostgreSQL tables)</span> | Account life + 7 years | Indefinite | GDPR Article 5 | Regulatory compliance |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Security Logs (PostgreSQL audit tables)</span> | 1 year | 3 years | PCI DSS 10.7 | Security audit trail |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Account History (PostgreSQL partitions)</span> | 7 years | Archive after 10 | Banking regulations | Credit history preservation |

#### 6.2.3.2 Backup and Fault Tolerance Policies (updated)

**Recovery Point Objectives (RPO) aligned with system performance targets:**
- Critical Data (transactions, account_data): <span style="background-color: rgba(91, 57, 243, 0.2)">15 minutes supporting financial transaction integrity through WAL-based Point-in-Time Recovery (PITR)</span>
- Reference Data (transaction_types, transaction_categories): 24 hours for static configuration data
- Historical Data: 7 days for archived information

**Recovery Time Objectives (RTO) supporting operational requirements:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Online Transaction Processing: 2 hours for Spring Boot service recovery</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Batch Processing: 4 hours aligning with Spring Batch daily processing window</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Full System Recovery: 8 hours for complete PostgreSQL cluster restoration</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">WAL-based Recovery Capabilities</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Continuous WAL archiving provides 15-minute RPO through automatic transaction log streaming</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Point-in-Time Recovery (PITR) enables granular recovery to specific transaction timestamps</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Automated failover to standby PostgreSQL instances maintains service availability</span>

#### 6.2.3.3 Privacy Controls (updated)

```mermaid
flowchart TD
subgraph "Access Control"
    A1["Spring Security Authentication"]
    A2["PostgreSQL Role-based Security"]
    A3["Column-level Encryption"]
end

subgraph "Data Protection"
    B1["SSN Encryption (pgcrypto)"]
    B2["Card Number Masking (API level)"]
    B3["Password Hashing (BCrypt)"]
end

subgraph "Audit Trail"
    C1["Spring Security Audit Events"]
    C2["PostgreSQL Audit Logging"]
    C3["Compliance Report Generation"]
end

A1 --> A2 --> A3
A3 --> B1
A3 --> B2
A3 --> B3
B1 --> C1
B2 --> C2
B3 --> C3
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Sensitive Data Encryption</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Sensitive numeric data including Social Security Numbers and credit card numbers are stored encrypted at rest using PostgreSQL's pgcrypto extension and masked at the API level through Spring Boot data transformation services</span>.

#### 6.2.3.4 Audit Mechanisms (updated)

- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Access Logging</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">All database table reads tracked via pg_audit extension supporting compliance requirements</span>
- **Update Audit Trail**: <span style="background-color: rgba(91, 57, 243, 0.2)">Before/after images maintained for critical updates through PostgreSQL triggers</span> aligned with transaction integrity
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Activity Tracking</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">All user actions captured through Spring Security audit events and REST API request logging</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Audit</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Batch processing logs retain execution history through Spring Batch JobRepository</span> supporting operational oversight

#### 6.2.3.5 Access Controls (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Role-based Security integrated with Spring Security</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL database roles protect each table and view as documented in the database design section</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Read/Write/Update/Delete permissions by user group supporting role-based access through Spring Security authorization</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Special authorization for sensitive fields (SSN, card numbers) maintained through column-level security and API-level data masking</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Application-Level Controls supporting Spring Security authentication components</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">User type segregation (Admin vs Regular) enforced through Spring Security roles and method-level security annotations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Menu-based access restrictions implemented in React components with Spring Security context integration</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">REST endpoint authorization checks integrated with Spring Security and PostgreSQL database constraints</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Referential Integrity Controls</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">FOREIGN KEY constraints and ON UPDATE/ON DELETE rules replicate previous referential checks formerly handled by application logic, ensuring identical data integrity constraints while leveraging PostgreSQL's ACID compliance capabilities for automated constraint enforcement</span>.

#### 6.2.3.6 Data Encryption and Masking Standards (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Encryption at Rest</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">pgcrypto extension provides AES-256 encryption for sensitive numeric fields</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Symmetric encryption keys managed through PostgreSQL configuration with rotation capabilities</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Encrypted columns include customer SSN, credit card numbers, and government ID fields</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">API-Level Data Masking</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot service layer implements data transformation for sensitive field display</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Credit card numbers masked showing only last 4 digits in REST API responses</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">SSN fields partially masked based on user authorization level and compliance requirements</span>

#### 6.2.3.7 Regulatory Compliance Matrix (updated)

| Regulation | Requirement | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Implementation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Enforcement</span> |
|------------|-------------|---------------------|----------------------|
| PCI DSS | Data encryption | <span style="background-color: rgba(91, 57, 243, 0.2)">pgcrypto AES-256 encryption</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Method-level authorization</span> |
| GDPR Article 5 | Data minimization | <span style="background-color: rgba(91, 57, 243, 0.2)">Column-level access control</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Role-based field access</span> |
| SOX Section 404 | Financial data integrity | <span style="background-color: rgba(91, 57, 243, 0.2)">FOREIGN KEY constraints</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Audit event logging</span> |
| Banking Regulations | Audit trail requirements | <span style="background-color: rgba(91, 57, 243, 0.2)">pg_audit comprehensive logging</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Security context tracking</span> |

### 6.2.4 PERFORMANCE OPTIMIZATION

#### 6.2.4.1 Query Optimization Patterns (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Index-Only Scan Strategy optimized for sub-200ms REST API response times</span>:**

```mermaid
flowchart TD
    A[Query Type] --> B{Access Pattern}
    B -->|Single Record| C[Index-Only Scan]
    B -->|Range Query| D[Index Scan + Heap Fetch]
    B -->|Multi-table Join| E[Nested Loop with Index]
    B -->|Complex Aggregation| F[HashAggregate with Index]
    
    C --> G[< 1ms Response]
    D --> H[Batch-Optimized Scan]
    E --> I[Composite Index Utilization]
    F --> J[Parallel Processing]
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Optimization Techniques supporting Spring Boot performance requirements</span>:**

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Composite Index Strategy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-column B-tree indexes on frequently queried combinations (account_id, transaction_date) enabling index-only scans for financial operations</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">EXPLAIN ANALYZE Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated query performance analysis through Spring Boot Actuator endpoints providing real-time execution plan monitoring and cost analysis</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Partial Index Optimization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Filtered indexes on active records (WHERE active_status = 'Y') reducing index size and improving scan performance for customer operations</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Index-Only Scan Enablement</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Covering indexes include all queried columns eliminating heap table access for key lookup operations supporting the <1ms response target</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Query Performance Monitoring and Analysis</span>:**

| Query Type | Target Performance | <span style="background-color: rgba(91, 57, 243, 0.2)">Index Strategy</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">EXPLAIN ANALYZE Integration</span> |
|------------|-------------------|-----------------|----------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">Primary Key Lookup</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><1ms</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Unique B-tree index scan</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Actuator /metrics endpoint</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Customer Account Search</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><50ms</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Composite index (customer_id, account_id)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Query performance logging</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction History Range</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><100ms</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Partial index on date range</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot query metrics</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Cross-table Joins</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><200ms</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Foreign key indexes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Join execution analysis</span> |

#### 6.2.4.2 Caching Strategy (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Multi-tier Caching Architecture aligned with Spring Boot ecosystem</span>:**

| Cache Layer | <span style="background-color: rgba(91, 57, 243, 0.2)">Technology</span> | Target Data | <span style="background-color: rgba(91, 57, 243, 0.2)">Refresh Strategy</span> | Supporting Component |
|-------------|----------|-------------|-------------------|---------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">Application Cache</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring @Cacheable</span> | Reference lookup tables | <span style="background-color: rgba(91, 57, 243, 0.2)">Application startup + manual refresh</span> | Transaction type validation |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Distributed Session Cache</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis Cluster</span> | User session state | <span style="background-color: rgba(91, 57, 243, 0.2)">Per-transaction update</span> | Spring Session management |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Second-Level Entity Cache</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Hibernate L2 Cache (if enabled)</span> | JPA entities | <span style="background-color: rgba(91, 57, 243, 0.2)">TTL-based expiration</span> | Account and customer data |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Database Buffer Cache</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL shared_buffers</span> | Frequently accessed pages | <span style="background-color: rgba(91, 57, 243, 0.2)">LRU automatic management</span> | All database operations |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Caching Implementation Details</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Store</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session with Redis backend providing distributed session management and automatic serialization of complex session objects</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cache Aside Pattern</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Application-managed cache with Redis SET/GET operations for high-frequency lookup data</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">TTL-based Expiration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Configurable time-to-live settings ensuring data freshness while maintaining performance benefits</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cache Performance Optimization</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cache Hit Ratio Monitoring</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer metrics tracking cache effectiveness through Spring Boot Actuator</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Eviction Policy Configuration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Redis maxmemory-policy set to allkeys-lru for optimal memory utilization</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Clustering Strategy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Redis Cluster mode providing high availability and automatic failover capabilities</span>

#### 6.2.4.3 Connection Pooling (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP Configuration optimized for sub-200ms REST SLA</span>:**

```mermaid
flowchart LR
    A[Spring Boot Application] --> B[HikariCP Connection Pool]
    B --> C[PostgreSQL Primary Instance]
    B --> D[PostgreSQL Read Replica]
    
    subgraph "Pool Configuration"
        E[maxPoolSize: 20]
        F[minimumIdle: 5]
        G[connectionTimeout: 30s]
        H[idleTimeout: 10min]
        I[maxLifetime: 30min]
    end
    
    B --- E
    B --- F
    B --- G
    B --- H
    B --- I
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP Performance Settings tuned for financial transaction processing</span>:**

| Configuration Parameter | <span style="background-color: rgba(91, 57, 243, 0.2)">Recommended Value</span> | Performance Impact | <span style="background-color: rgba(91, 57, 243, 0.2)">REST SLA Alignment</span> |
|------------------------|------------------|-------------------|----------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">maxPoolSize</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">20</span> | Supports concurrent transactions | <span style="background-color: rgba(91, 57, 243, 0.2)">Enables <200ms response</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">minimumIdle</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">5</span> | Reduces connection establishment overhead | <span style="background-color: rgba(91, 57, 243, 0.2)">Maintains warm connections</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">connectionTimeout</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">30 seconds</span> | Prevents indefinite blocking | <span style="background-color: rgba(91, 57, 243, 0.2)">Fast failure detection</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">leakDetectionThreshold</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">60 seconds</span> | Identifies connection leaks | <span style="background-color: rgba(91, 57, 243, 0.2)">Maintains pool health</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Connection Pool Monitoring and Health Management</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time connection pool metrics exposed through Spring Boot Actuator endpoints</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Health Check Configuration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL connection validation query ("SELECT 1") with configurable timeout</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Automatic Pool Sizing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic pool adjustment based on application load and performance metrics</span>

#### 6.2.4.4 Read/Write Splitting (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Primary-Replica Architecture aligned with Spring Boot transaction management</span>:**

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Transactional Write Operations</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">All INSERT, UPDATE, DELETE operations routed to PostgreSQL primary instance through Spring @Transactional annotations with ACID compliance</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Read-Only Query Distribution</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT operations with @Transactional(readOnly = true) routed to read replicas for load distribution</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Consistency Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot service layer manages read-after-write consistency through primary routing for immediate read operations</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Database Tuning for PostgreSQL Performance Optimization</span>:**

| Configuration Parameter | <span style="background-color: rgba(91, 57, 243, 0.2)">Optimized Setting</span> | Performance Benefit | Impact on System |
|------------------------|------------------|-------------------|-----------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">autovacuum_naptime</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">15 seconds</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Frequent cleanup of dead tuples</span> | Maintains query performance |
| <span style="background-color: rgba(91, 57, 243, 0.2)">maintenance_work_mem</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">512MB</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Faster VACUUM and CREATE INDEX</span> | Improved batch processing |
| <span style="background-color: rgba(91, 57, 243, 0.2)">enable_partition_pruning</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ON</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic elimination of irrelevant partitions</span> | Faster range queries |
| <span style="background-color: rgba(91, 57, 243, 0.2)">work_mem</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">32MB</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Enhanced sort and hash operations</span> | Better join performance |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Partition Pruning Optimization</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Date-based Partition Elimination</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL query planner automatically excludes irrelevant monthly partitions for transaction date range queries</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Constraint Exclusion</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">CHECK constraints on partitioned tables enable intelligent query routing and partition elimination</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Runtime Partition Selection</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic partition pruning based on query parameters reduces I/O and improves response times</span>

#### 6.2.4.5 Batch Processing Approach (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Architecture optimized for 4-hour processing window</span>:**

```mermaid
flowchart LR
    subgraph "Evening Batch"
        A[Transaction Posting Job]
        B[Balance Update Job]
        C[Interest Calculation Job]
    end
    
    subgraph "Nightly Batch"
        D[Statement Generation Job]
        E[Report Creation Job]
        F[Data Archival Job]
    end
    
    subgraph "Morning Batch"
        G[Audit Report Job]
        H[Reconciliation Job]
        I[Backup Job]
    end
    
    A -->|parallelStep| B -->|chunk: 1000| C
    C -->|checkpoint| D -->|partitioner| E -->|taskExecutor| F
    F -->|restartable| G -->|asyncTaskExecutor| H -->|completionPolicy| I
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Optimization Configuration aligned with modernization requirements</span>:**

| <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Parameter</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Optimized Value</span> | Performance Impact | <span style="background-color: rgba(91, 57, 243, 0.2)">Legacy Mapping</span> |
|------------------------|------------------|-------------------|---------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">chunkSize</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">1000 records</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Balanced memory usage and commit frequency</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CICS SYNCPOINT intervals</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">checkpointFrequency</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Every 5000 records</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Restart capability with minimal reprocessing</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JCL checkpoint logic</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">parallelSteps</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">4 concurrent threads</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Parallel processing for independent operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-stream batch jobs</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">asyncTaskExecutor</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ThreadPoolTaskExecutor</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Non-blocking I/O operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Asynchronous processing</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Enhanced Batch Processing Features supporting operational requirements</span>:**

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Fault Tolerance and Recovery</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch JobRepository maintains execution state enabling automatic restart from last successful checkpoint with skip and retry policies for transient failures</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Parallel Processing Architecture</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Partitioned steps process different account ranges concurrently using ThreadPoolTaskExecutor with configurable thread pool size</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Memory-Optimized Processing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Stream-based readers and writers minimize memory footprint while processing large datasets through chunked pagination</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Management Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch PlatformTransactionManager ensures ACID compliance with configurable isolation levels and timeout settings</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Monitoring and Metrics</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Job Execution Tracking</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer timer metrics capturing job execution times and throughput rates</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Resource Utilization Monitoring</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JVM metrics tracking memory usage, garbage collection, and thread pool utilization during batch execution</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Completion Policy Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Configurable completion criteria based on record count, execution time, or business logic conditions</span>

### 6.2.5 DATA FLOW ARCHITECTURE

### 6.2.5 Data Flow Architecture (updated)

The data flow architecture demonstrates the <span style="background-color: rgba(91, 57, 243, 0.2)">modernized Spring Boot and PostgreSQL-based transaction processing pipeline</span> that replaces the original CICS/VSAM architecture while preserving identical data flow semantics and business logic patterns. This architecture supports both <span style="background-color: rgba(91, 57, 243, 0.2)">real-time REST API transactions and batch processing operations</span> within the containerized Kubernetes environment.

#### 6.2.5.1 Modernized Data Flow Diagram (updated)

```mermaid
flowchart TD
    subgraph "Data Input Layer"
        I1[REST JSON Request]
        I2[Batch File Input]
        I3[ASCII Data Files]
    end
    
    subgraph "Processing Layer"
        P1[Spring Boot Service Layer]
        P2[Spring Batch Job Processor]
        P3[Data Validation]
    end
    
    subgraph "JPA Repository Layer"
        R1[User Security Repository]
        R2[Customer Data Repository]
        R3[Account Data Repository]
        R4[Card Data Repository]
        R5[Transaction Repository]
        R6[Reference Table Repository]
    end
    
    subgraph "PostgreSQL Database Layer"
        D1[(user_security)]
        D2[(customer_data)]
        D3[(account_data)]
        D4[(card_data)]
        D5[(transactions)]
        D6[(reference_tables)]
    end
    
    subgraph "Session State Management"
        S1[(Redis Session Store)]
    end
    
    subgraph "Output Layer"
        O1[JSON Response]
        O2[Reports]
        O3[Archive Files]
    end
    
    I1 --> P1
    I2 --> P2
    I3 --> P2
    
    P1 --> R1
    P1 --> R2
    P1 --> R3
    P1 --> R4
    P1 --> R5
    P1 --> S1
    
    P2 --> R3
    P2 --> R5
    P2 --> R6
    
    P3 --> R1
    P3 --> R2
    P3 --> R3
    
    R1 --> D1
    R2 --> D2
    R3 --> D3
    R4 --> D4
    R5 --> D5
    R6 --> D6
    
    D1 --> O1
    D2 --> O1
    D3 --> O1
    D4 --> O1
    D5 --> O1
    D5 --> O2
    D5 --> O3
    
    S1 --> O1
```

#### 6.2.5.2 Data Flow Layer Analysis (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Data Input Layer Modernization</span>**:

| Input Type | <span style="background-color: rgba(91, 57, 243, 0.2)">Modern Implementation</span> | Legacy Equivalent | Data Format | Processing Target |
|------------|---------------------|------------------|-------------|-------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">REST JSON Request</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HTTPS POST/GET via Spring Cloud Gateway</span> | 3270 Terminal Input | <span style="background-color: rgba(91, 57, 243, 0.2)">JSON with Jackson serialization</span> | Spring Boot Service Layer |
| Batch File Input | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch file readers with FlatFileItemReader</span> | JCL-driven file processing | Fixed-width ASCII records | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Processor</span> |
| ASCII Data Files | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch MultiResourceItemReader</span> | Sequential file processing | Delimited and fixed-width | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Processor</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Processing Layer Transformation</span>**:

The processing layer implements <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot service architecture with @Service annotations and dependency injection</span>, replacing CICS transaction management while preserving identical business logic flow and error handling patterns. <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Service Layer contains 36 service classes that mirror COBOL paragraph structure</span>, ensuring functional equivalence with the original mainframe implementation.

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Service Layer</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Replaces CICS Transaction Manager with @Transactional boundaries, Spring Security integration, and RESTful endpoint handling</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Processor</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Modernized batch processing with chunk-oriented processing, job restart capabilities, and Kubernetes CronJob orchestration</span>
- **Data Validation**: Enhanced validation through Spring Boot validation annotations and custom constraint validators

**<span style="background-color: rgba(91, 57, 243, 0.2)">JPA Repository Layer Introduction</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">The JPA Repository Layer provides object-relational mapping abstraction between Spring Boot services and PostgreSQL database</span>, implementing the Repository pattern with Spring Data JPA interfaces. This layer replaces direct VSAM record access with standardized CRUD operations and complex query capabilities.

| Repository Interface | <span style="background-color: rgba(91, 57, 243, 0.2)">JPA Entity Mapping</span> | Primary Operations | <span style="background-color: rgba(91, 57, 243, 0.2)">Legacy VSAM Equivalent</span> |
|---------------------|---------------------|-------------------|---------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">UserSecurityRepository</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">UserSecurity entity with composite keys</span> | Authentication and authorization | <span style="background-color: rgba(91, 57, 243, 0.2)">USRSEC KSDS dataset</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CustomerDataRepository</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Customer entity with personal information</span> | Customer profile management | <span style="background-color: rgba(91, 57, 243, 0.2)">CUSTDAT KSDS dataset</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">AccountDataRepository</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Account entity with financial data</span> | Account lifecycle operations | <span style="background-color: rgba(91, 57, 243, 0.2)">ACCTDAT KSDS dataset</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CardDataRepository</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Card entity with payment card details</span> | Credit card operations | <span style="background-color: rgba(91, 57, 243, 0.2)">CARDDAT KSDS dataset</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">TransactionRepository</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction entity with financial records</span> | Transaction processing and history | <span style="background-color: rgba(91, 57, 243, 0.2)">TRANSACT KSDS dataset</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">ReferenceTableRepository</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Multiple reference entities</span> | Lookup data and configuration | <span style="background-color: rgba(91, 57, 243, 0.2)">Reference Tables (multiple VSAM files)</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Database Layer Modernization</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL relational tables replace VSAM KSDS datasets with equivalent data structures and access patterns</span>. The database schema maintains composite primary keys and referential integrity through foreign key constraints, providing ACID compliance and transaction isolation levels that match or exceed VSAM data integrity capabilities.

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Schema Design</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Column-to-field mapping preserves COBOL copybook layouts with appropriate PostgreSQL data types</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Indexing Strategy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">B-tree indexes replicate VSAM key access patterns for optimal performance</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Partitioning</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Range partitioning on transaction dates supports efficient archival and batch processing</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Session State Management Enhancement</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Store replaces CICS COMMAREA structures with distributed session management</span>, providing horizontal scaling capabilities and session persistence across pod restarts. The Redis cluster stores user context, navigation state, and temporary data within a 32KB limit per session, matching the original COMMAREA constraints.

#### 6.2.5.3 Data Flow Processing Patterns (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Real-time Transaction Processing Flow</span>**:

1. **<span style="background-color: rgba(91, 57, 243, 0.2)">REST JSON Request Reception</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway receives HTTPS requests with JWT authentication and routes to appropriate Spring Boot controllers</span>
2. **<span style="background-color: rgba(91, 57, 243, 0.2)">Service Layer Processing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot services execute business logic with @Transactional boundaries and session context from Redis</span>
3. **<span style="background-color: rgba(91, 57, 243, 0.2)">JPA Repository Access</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA repositories perform CRUD operations with automatic query generation and entity mapping</span>
4. **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Transaction Execution</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL processes queries with B-tree index utilization and transaction isolation</span>
5. **<span style="background-color: rgba(91, 57, 243, 0.2)">JSON Response Generation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Jackson serialization converts JPA entities to JSON format with field masking for sensitive data</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Processing Flow Enhancement</span>**:

1. **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes CronJob Trigger</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Scheduled batch job execution with Spring Batch JobLauncher initialization</span>
2. **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Processor</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Chunk-oriented processing with configurable commit intervals and restart capabilities</span>
3. **<span style="background-color: rgba(91, 57, 243, 0.2)">JPA Repository Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Batch operations utilize same repository interfaces with optimized bulk processing</span>
4. **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Bulk Operations</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Batch inserts and updates with transaction coordination and deadlock detection</span>
5. **Report and Archive Generation**: File-based output with identical formats to original batch processing

#### 6.2.5.4 Performance Optimization in Data Flow (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Connection Pool Management</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP Configuration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">20 maximum connections per pod with 30-second timeout and leak detection</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JPA Second-Level Cache</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Entity caching for reference data with configurable TTL settings</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Optimization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Distributed session management with Redis Cluster for high availability</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Query Optimization Patterns</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JPA Query Hints</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">@QueryHints annotations for PostgreSQL-specific optimizations</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Fetch Sizing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Configurable fetch sizes for large result set processing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Projection Queries</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">DTO projections for read-only operations reducing memory usage</span>

#### 6.2.5.5 Integration Points and Dependencies (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cross-Layer Communication</span>**:

| Communication Path | Protocol/Method | <span style="background-color: rgba(91, 57, 243, 0.2)">Data Serialization</span> | Performance Target |
|--------------------|-----------------|-------------------|--------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">Frontend → API Gateway</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HTTPS REST with JWT</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JSON with Jackson annotations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><200ms response time</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">API Gateway → Spring Boot</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HTTP forwarding with security context</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Request/response entity mapping</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><150ms processing time</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Service Layer → JPA Repository</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Method invocation with @Transactional</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Entity object mapping</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><50ms database operation</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">JPA Repository → PostgreSQL</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JDBC with connection pooling</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SQL parameter binding</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><10ms query execution</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Session State Flow</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Creation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security authentication stores user context in Redis with configurable expiration</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Propagation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session ID transmitted via HTTP cookies and accessed via Spring Session framework</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Cleanup</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic expiration and manual invalidation support with Redis TTL management</span>

#### 6.2.5.6 Error Handling and Recovery Patterns (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Recovery Flow</span>**:

```mermaid
flowchart TD
    A[Transaction Error] --> B{Error Classification}
    B -->|Input Validation| C[HTTP 400 Bad Request]
    B -->|Authentication| D[HTTP 401 Unauthorized] 
    B -->|Authorization| E[HTTP 403 Forbidden]
    B -->|Database Constraint| F[HTTP 409 Conflict]
    B -->|System Error| G[HTTP 500 Internal Server Error]
    
    C --> H[Spring Boot Global Exception Handler]
    D --> H
    E --> H
    F --> I[PostgreSQL Transaction Rollback]
    G --> I
    
    H --> J[JSON Error Response]
    I --> K[Redis Session State Restoration]
    I --> L[Application State Recovery]
    
    K --> M[User Notification]
    L --> M
    J --> M
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Data Consistency Guarantees</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">ACID Compliance</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL transaction isolation with Spring @Transactional propagation control</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Compensating Transactions</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Application-level rollback logic for complex business operations</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Recovery</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Redis-backed session state enables transaction resumption after system recovery</span>

The modernized data flow architecture provides equivalent functionality to the original CICS/VSAM system while leveraging cloud-native technologies for enhanced scalability, maintainability, and performance. <span style="background-color: rgba(91, 57, 243, 0.2)">The introduction of the JPA Repository layer and Redis session management creates clean separation of concerns while preserving transactional integrity and data consistency requirements for financial processing operations.</span>

### 6.2.6 DATABASE SCHEMA DIAGRAMS

#### 6.2.6.1 PostgreSQL Cluster Architecture (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The system implements a PostgreSQL cluster configuration with primary-standby architecture, replacing the VSAM catalog-based storage approach with cloud-native relational database design</span>. <span style="background-color: rgba(91, 57, 243, 0.2)">This architecture provides ACID compliance, horizontal scaling capabilities, and high availability through streaming replication</span> while maintaining equivalent data access patterns and performance characteristics.

```mermaid
graph TD
subgraph "PostgreSQL Primary Instance"
    subgraph "Tablespace Configuration"
        TS_DATA["DATA Tablespace<br/>Primary table storage"]
        TS_INDEX["INDEX Tablespace<br/>B-tree index storage"]  
        TS_WAL["WAL Tablespace<br/>Write-Ahead Logging"]
    end
    
    subgraph "Core Relational Tables"
        USER_SEC["user_security<br/>BIGINT: user_id PK<br/>VARCHAR(50): password_hash"]
        CUSTOMER["customer_data<br/>BIGINT: customer_id PK<br/>VARCHAR(50): first_name, last_name"]
        ACCOUNT["account_data<br/>BIGINT: account_id PK<br/>BIGINT: customer_id FK<br/>NUMERIC(12,2): current_balance"]
        CARD["card_data<br/>VARCHAR(16): card_number PK<br/>BIGINT: account_id FK<br/>BIGINT: customer_id FK"]
        TRANSACTION["transactions<br/>BIGINT: transaction_id PK<br/>BIGINT: account_id FK<br/>VARCHAR(16): card_number FK<br/>DATE: transaction_date<br/>PARTITIONED BY transaction_date"]
    end
    
    subgraph "Reference Data Tables"
        TCAT_BAL["transaction_category_balance<br/>Composite PK: (account_id, category_code, balance_date)<br/>NUMERIC(12,2): balance"]
        DISC_GRP["disclosure_groups<br/>BIGINT: disclosure_group_id PK<br/>VARCHAR(50): group_name"]
        TRAN_TYPE["transaction_types<br/>VARCHAR(2): transaction_type_code PK<br/>VARCHAR(50): description"]
        TRAN_CATG["transaction_categories<br/>Composite PK: (category_code, subcategory_code)<br/>VARCHAR(25): category_name"]
    end
    
    subgraph "Secondary Indexes"
        CARD_ACCOUNT_IDX["card_account_idx<br/>ON card_data (account_id)"]
        CUSTOMER_ACCOUNT_IDX["customer_account_idx<br/>ON account_data (customer_id)"]
        TRANSACTION_DATE_IDX["transaction_date_idx<br/>ON transactions (transaction_date, account_id)"]
        CUSTOMER_NAME_IDX["customer_name_idx<br/>ON customer_data (last_name, first_name)"]
    end
end

subgraph "PostgreSQL Hot-Standby Instance"
    STANDBY_REPLICA["Read Replica Tables<br/>Streaming Replication Target<br/>Read-only Query Support"]
    WAL_REPLAY["WAL Replay Process<br/>Continuous Log Apply"]
end

subgraph "Storage Architecture"
    DATA_STORAGE["Primary Data Files<br/>Table heap storage"]
    INDEX_STORAGE["Index Data Files<br/>B-tree index pages"]
    WAL_STORAGE["WAL Archive Files<br/>Transaction log segments"]
end

TS_DATA --> DATA_STORAGE
TS_INDEX --> INDEX_STORAGE
TS_WAL --> WAL_STORAGE

USER_SEC --> TS_DATA
CUSTOMER --> TS_DATA
ACCOUNT --> TS_DATA
CARD --> TS_DATA
TRANSACTION --> TS_DATA

CARD_ACCOUNT_IDX --> TS_INDEX
CUSTOMER_ACCOUNT_IDX --> TS_INDEX
TRANSACTION_DATE_IDX --> TS_INDEX
CUSTOMER_NAME_IDX --> TS_INDEX

TS_WAL -->|"Streaming Replication"| STANDBY_REPLICA
WAL_REPLAY -->|"Log Apply"| STANDBY_REPLICA
WAL_STORAGE -->|"Archive Recovery"| WAL_REPLAY
```

#### 6.2.6.2 Relational Table Structure and Keys (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The PostgreSQL relational model implements composite primary keys and foreign key relationships that preserve the data access patterns from the original VSAM KSDS organization</span> while providing enhanced referential integrity and query optimization capabilities through advanced indexing strategies.

| Table Name | Primary Key Structure | Foreign Key Relationships | <span style="background-color: rgba(91, 57, 243, 0.2)">Business Purpose</span> |
|------------|----------------------|---------------------------|------------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">user_security</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">user_id (BIGINT)</span> | None | <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication and authorization data</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">customer_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">customer_id (BIGINT)</span> | None | <span style="background-color: rgba(91, 57, 243, 0.2)">Customer profile management</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">account_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">customer_id → customer_data.customer_id</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Account lifecycle management</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">card_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">card_number (VARCHAR(16))</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_id → account_data.account_id<br/>customer_id → customer_data.customer_id</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Credit card operations</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transactions</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_id → account_data.account_id<br/>card_number → card_data.card_number</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction processing and history</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_category_balance</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Composite: (account_id, category_code, balance_date)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_id → account_data.account_id</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Balance management by category</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">disclosure_groups</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">disclosure_group_id (BIGINT)</span> | None | <span style="background-color: rgba(91, 57, 243, 0.2)">Interest rate configuration</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_types</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_type_code (VARCHAR(2))</span> | None | <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction classification</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_categories</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Composite: (category_code, subcategory_code)</span> | None | <span style="background-color: rgba(91, 57, 243, 0.2)">Category management</span> |

#### 6.2.6.3 Secondary Index Strategy (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL B-tree indexes replace VSAM alternate index files (CARDAIX and CXACAIX) with enhanced query optimization capabilities</span> and automatic query planner utilization for improved performance in financial transaction processing.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Core Secondary Indexes</span>**:

| Index Name | <span style="background-color: rgba(91, 57, 243, 0.2)">Target Table</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Indexed Columns</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Replaces VSAM Component</span> | Query Optimization |
|------------|-------------|----------------|-----------------------|---------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">card_account_idx</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">card_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_id</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CARDAIX alternate index</span> | Account-based card lookup operations |
| <span style="background-color: rgba(91, 57, 243, 0.2)">customer_account_idx</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">customer_id</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CXACAIX alternate index</span> | Customer-account relationship queries |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_date_idx</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transactions</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_date, account_id</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Date-range access pattern</span> | Date-range queries and partition pruning |
| <span style="background-color: rgba(91, 57, 243, 0.2)">customer_name_idx</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">customer_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">last_name, first_name</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Name-based search capability</span> | Customer search operations |

#### 6.2.6.4 Partitioned Transaction Table Design (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The transactions table implements PostgreSQL range partitioning by transaction_date to optimize batch processing performance and support efficient archival operations</span>. <span style="background-color: rgba(91, 57, 243, 0.2)">Each partition maintains the composite primary key structure (transaction_id) while enabling partition pruning for date-range queries</span>.

```mermaid
graph TD
    subgraph "Partitioned Transaction Table"
        subgraph "Parent Table: transactions"
            PARENT["transactions<br/>BIGINT: transaction_id PK<br/>BIGINT: account_id FK<br/>VARCHAR(16): card_number FK<br/>DATE: transaction_date<br/>NUMERIC(12,2): amount<br/>VARCHAR(2): transaction_type_code FK"]
        end
        
        subgraph "Monthly Partitions"
            PART_2024_01["transactions_2024_01<br/>FOR VALUES FROM ('2024-01-01') TO ('2024-02-01')<br/>Partition-local indexes"]
            PART_2024_02["transactions_2024_02<br/>FOR VALUES FROM ('2024-02-01') TO ('2024-03-01')<br/>Partition-local indexes"]
            PART_2024_03["transactions_2024_03<br/>FOR VALUES FROM ('2024-03-01') TO ('2024-04-01')<br/>Partition-local indexes"]
            PART_CURRENT["transactions_current<br/>FOR VALUES FROM (current_month) TO (next_month)<br/>Active processing partition"]
        end
        
        subgraph "Partition Indexes"
            IDX_2024_01["Local B-tree indexes<br/>transaction_id, account_id, transaction_date"]
            IDX_2024_02["Local B-tree indexes<br/>transaction_id, account_id, transaction_date"]
            IDX_2024_03["Local B-tree indexes<br/>transaction_id, account_id, transaction_date"]
            IDX_CURRENT["Local B-tree indexes<br/>transaction_id, account_id, transaction_date"]
        end
        
        subgraph "Partition Management"
            PRUNING["Partition Pruning<br/>Automatic elimination<br/>of irrelevant partitions"]
            ARCHIVAL["Monthly Archival<br/>Detach old partitions<br/>Move to archive schema"]
        end
    end
    
    PARENT --> PART_2024_01
    PARENT --> PART_2024_02
    PARENT --> PART_2024_03
    PARENT --> PART_CURRENT
    
    PART_2024_01 --> IDX_2024_01
    PART_2024_02 --> IDX_2024_02
    PART_2024_03 --> IDX_2024_03
    PART_CURRENT --> IDX_CURRENT
    
    PART_2024_01 -.->|Query Optimization| PRUNING
    PART_2024_02 -.->|Query Optimization| PRUNING
    PART_2024_03 -.->|Query Optimization| PRUNING
    
    PART_2024_01 -.->|Lifecycle Management| ARCHIVAL
    PART_2024_02 -.->|Lifecycle Management| ARCHIVAL
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Partition Configuration Details</span>**:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Partitioning Strategy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Range partitioning by transaction_date with monthly boundaries supporting efficient date-range queries</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Key Preservation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Each partition maintains the transaction_id primary key with partition-local uniqueness constraints</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Index Strategy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Local indexes on each partition enable partition-aware query optimization and parallel processing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Constraint Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">CHECK constraints on transaction_date enable automatic partition pruning during query execution</span>

#### 6.2.6.5 High Availability and Replication Architecture (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The PostgreSQL cluster provides enterprise-grade availability through streaming replication and automated failover capabilities</span>, replacing traditional mainframe data redundancy with cloud-native high availability patterns.

```mermaid
graph LR
    subgraph "Primary PostgreSQL Cluster"
        PRIMARY[Primary Instance<br/>Read/Write Operations<br/>WAL Generation]
        
        subgraph "Primary Storage"
            DATA_TS[Data Tablespace]
            INDEX_TS[Index Tablespace]  
            WAL_TS[WAL Tablespace]
        end
    end
    
    subgraph "Standby PostgreSQL Cluster"
        STANDBY[Hot Standby Instance<br/>Read-Only Operations<br/>WAL Replay]
        
        subgraph "Replica Storage"
            DATA_REP[Data Tablespace Replica]
            INDEX_REP[Index Tablespace Replica]
            WAL_REP[WAL Tablespace Replica]
        end
    end
    
    subgraph "Archive Storage"
        WAL_ARCHIVE[WAL Archive Files<br/>Long-term retention<br/>Point-in-time recovery]
        BASE_BACKUP[Base Backup Files<br/>Full cluster backup<br/>Recovery baseline]
    end
    
    PRIMARY -->|Streaming Replication<br/>Asynchronous| STANDBY
    PRIMARY -->|WAL Archiving<br/>Continuous| WAL_ARCHIVE
    PRIMARY -->|Base Backup<br/>Scheduled| BASE_BACKUP
    
    DATA_TS -.-> DATA_REP
    INDEX_TS -.-> INDEX_REP
    WAL_TS -.-> WAL_REP
    
    WAL_ARCHIVE -.->|Recovery| STANDBY
    BASE_BACKUP -.->|Restoration| STANDBY
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Replication Configuration</span>**:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Streaming Replication Mode</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Asynchronous streaming with configurable synchronization levels for performance optimization</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Hot Standby Capability</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Read-only queries supported on standby instances for load distribution and reporting workloads</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Automatic Failover</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Promotion of standby instances during primary failure with minimal service interruption</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">WAL Retention Policy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">30-day retention for point-in-time recovery supporting regulatory compliance requirements</span>

#### 6.2.6.6 Storage and Performance Optimization (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Tablespace Configuration Strategy</span>**:

| Tablespace | <span style="background-color: rgba(91, 57, 243, 0.2)">Storage Purpose</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Performance Optimization</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">I/O Characteristics</span> |
|------------|----------------|------------------------|-------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">DATA</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Primary table heap storage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">High-throughput SSD storage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Mixed read/write operations</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">INDEX</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">B-tree index page storage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Low-latency NVMe storage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Read-heavy with burst writes</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">WAL</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Write-ahead log segments</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Sequential write-optimized storage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">High-frequency sequential writes</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Query Performance Enhancement</span>**:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Index-Only Scan Optimization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Covering indexes eliminate heap table access for frequently queried columns</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Partition Pruning</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic elimination of irrelevant partitions during date-range queries</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Parallel Query Execution</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-worker parallel scans for large result set operations</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Connection Pool Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP connection pooling with optimized settings for concurrent transaction processing</span>

This modernized database schema architecture provides equivalent functionality to the original VSAM-based system while delivering enhanced performance, scalability, and maintainability through cloud-native PostgreSQL implementation patterns.

### 6.2.7 REFERENCES

#### COBOL Structure Definition Files (updated)
- `app/cpy/CVACT01Y.cpy` - Account record structure definition with balance fields <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for Account.java)</span>
- `app/cpy/CVACT02Y.cpy` - Card record structure definition with security fields <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for CreditCard.java)</span>
- `app/cpy/CVACT03Y.cpy` - Card cross-reference record structure for relationship management <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for CardXRef.java)</span>
- `app/cpy/CUSTREC.cpy` - Customer record structure definition with personal data <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for Customer.java)</span>
- `app/cpy/CVTRA01Y.cpy` - Transaction category balance structure for financial tracking <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for TransactionCategoryBalance.java)</span>
- `app/cpy/CVTRA02Y.cpy` - Disclosure group record structure for interest rate management <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for DisclosureGroup.java)</span>
- `app/cpy/CVTRA03Y.cpy` - Transaction type record structure for classification <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for TransactionType.java)</span>
- `app/cpy/CVTRA04Y.cpy` - Transaction category record structure for categorization <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for TransactionCategory.java)</span>
- `app/cpy/CVTRA05Y.cpy` - Transaction record structure for processing history <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for Transaction.java)</span>
- `app/cpy/CVTRA06Y.cpy` - Daily transaction record structure for batch processing <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for DailyTransaction.java)</span>
- `app/cpy/CSUSR01Y.cpy` - Security user data structure for authentication <span style="background-color: rgba(91, 57, 243, 0.2)">(serves as input to JPA entity generator for UserSecurity.java)</span>

#### Database Schema and JPA Implementation Files (updated)
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/resources/schema.sql` - PostgreSQL database schema definition with composite primary keys and referential integrity constraints</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/resources/db/changelog/` - Liquibase migration scripts for database version management and incremental schema updates</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/entity/Account.java` - JPA entity class with composite key implementation using @EmbeddedId annotation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/entity/Customer.java` - JPA entity class with customer data mapping and validation annotations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/entity/CreditCard.java` - JPA entity class with card data structure and security field mappings</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/entity/Transaction.java` - JPA entity class with BigDecimal precision configuration for monetary calculations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/entity/UserSecurity.java` - JPA entity class with Spring Security integration for authentication</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/entity/TransactionCategory.java` - JPA entity class with transaction categorization logic</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/entity/DisclosureGroup.java` - JPA entity class with interest rate and disclosure management</span>

#### Sample Data Files Examined
- `app/data/ASCII/acctdata.txt` - Sample account data demonstrating record format
- `app/data/ASCII/custdata.txt` - Sample customer data showing field layouts
- `app/data/ASCII/carddata.txt` - Sample card data with relationship keys
- `app/data/ASCII/dailytran.txt` - Sample transaction data for batch processing

#### Data Migration and Conversion Utilities (updated)
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/util/CobolDataConverter.java` - Utility class for BigDecimal precision handling and COBOL COMP-3 packed decimal conversion with exact scale preservation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/batch/migration/` - Spring Batch job classes for ASCII file migration to PostgreSQL database</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/resources/application-migration.yml` - Spring Boot configuration for data migration process with batch processing settings</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/resources/db/migration/V001__Initial_Schema.sql` - DDL script for initial database schema creation</span>

#### System Architecture References
- Technical Specification Section 3.3 DATABASES & STORAGE - Technology selection rationale for PostgreSQL implementation
- Technical Specification Section 5.1 HIGH-LEVEL ARCHITECTURE - <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-native Spring Boot architecture context</span>
- Technical Specification Section 5.2 COMPONENT DETAILS - Application integration with <span style="background-color: rgba(91, 57, 243, 0.2)">JPA repository layer</span>
- Technical Specification Section 6.1 CORE SERVICES ARCHITECTURE - Confirmation of <span style="background-color: rgba(91, 57, 243, 0.2)">monolithic Spring Boot application architecture</span>

#### Spring Data JPA Repository References (updated)
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/repository/AccountRepository.java` - JPA repository interface for account data operations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/repository/CustomerRepository.java` - JPA repository interface for customer data operations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/repository/TransactionRepository.java` - JPA repository interface for transaction processing operations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/repository/UserSecurityRepository.java` - JPA repository interface for authentication operations</span>

## 6.3 INTEGRATION ARCHITECTURE

### 6.3.1 INTEGRATION SCOPE ASSESSMENT

<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Architecture is now a first-class concern for CardDemo as a cloud-native platform involving browser-based React UI, REST APIs, Spring Session, PostgreSQL, Redis, and container orchestration</span>. The system requires sophisticated integration patterns to orchestrate communication between multiple architectural layers while maintaining the functional equivalence of the original mainframe system.

#### 6.3.1.1 System Architecture Context (updated)

The modernized CardDemo implements a comprehensive cloud-native integration architecture that demonstrates established enterprise patterns for distributed system communication:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">React SPA in browser</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Client-side Single Page Application providing dynamic user interface with 18 screen components that replicate original BMS map functionality</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Centralized API gateway managing request routing, authentication, authorization, and cross-cutting concerns between frontend and backend services</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot REST controllers that map 1-to-1 with the original CICS transaction codes</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">24 REST endpoints preserving transaction code identifiers (COSGN00C, COMEN01C, COADM01C) with identical request/response patterns</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Service layer that preserves COBOL paragraphs</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Java service classes maintaining original program structure with method naming conventions following COBOL paragraph patterns (0000-init, 1000-input, 2000-process, 3000-output, 9000-close)</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JPA data access to PostgreSQL tables that mirror VSAM KSDS</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA repositories providing ACID-compliant data operations with composite primary keys matching VSAM dataset organization</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis-backed Spring Session to replicate COMMAREA</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Distributed session management maintaining stateful interactions across REST API calls with JSON serialization of session attributes</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Docker/Kubernetes runtime</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Containerized deployment platform enabling horizontal scaling, service orchestration, and cloud-native operational patterns</span>

#### 6.3.1.2 Internal Integration Patterns (updated)

The cloud-native CardDemo architecture demonstrates sophisticated internal integration patterns that serve as reference implementations for enterprise modernization:

```mermaid
graph TD
    subgraph "Cloud-Native Architecture"
        subgraph "Client Layer"
            A[Browser] --> B[React SPA Components]
            B --> C[Axios HTTP Client]
        end
        
        subgraph "Gateway Layer"
            D[Spring Cloud Gateway] --> E[Request Routing]
            E --> F[Authentication/Authorization]
            F --> G[Rate Limiting & Circuit Breaker]
        end
        
        subgraph "Application Layer"
            H[Spring Boot REST Controllers] --> I[Business Service Layer]
            I --> J[JPA Repository Layer]
            H --> K[Spring Session Management]
        end
        
        subgraph "Data Layer"
            L[(PostgreSQL Database)] --> M[Composite Key Tables]
            N[(Redis Session Store)] --> O[Session Attributes]
            P[Spring Batch Jobs] --> L
        end
        
        subgraph "Container Platform"
            Q[Docker Containers] --> R[Kubernetes Orchestration]
            R --> S[Service Discovery & Load Balancing]
        end
        
        C --> D
        G --> H
        K --> N
        J --> L
        P --> H
        H --> Q
    end
    
    style A fill:#e1f5fe
    style L fill:#fff3e0
    style N fill:#ffcdd2
    style Q fill:#c8e6c9
```

#### 6.3.1.3 Integration Flow Architecture

**Browser-to-Gateway Integration**: React components communicate with Spring Cloud Gateway through Axios HTTP client, providing centralized request routing and authentication token propagation across all API endpoints.

**Gateway-to-Service Integration**: Spring Cloud Gateway routes authenticated requests to appropriate Spring Boot REST controllers based on path-based routing rules, maintaining session context through HTTP headers and JWT token validation.

**Controller-to-Service Integration**: REST controllers delegate business logic processing to service layer classes that preserve original COBOL program structure, ensuring identical processing sequences and error handling patterns.

**Service-to-Data Integration**: Spring Data JPA provides object-relational mapping between Java entities and PostgreSQL tables with composite primary keys, maintaining ACID transaction boundaries equivalent to CICS SYNCPOINT behavior.

**Session State Integration**: Redis-backed Spring Session maintains distributed session state across REST API calls, replicating COMMAREA functionality through JSON serialization of session attributes with configurable timeout policies.

**Batch Processing Integration**: Spring Batch jobs integrate with the same PostgreSQL data layer and Spring Boot service classes, providing scheduled processing capabilities that replace JCL job execution while maintaining identical processing logic and restart capabilities.

#### 6.3.1.4 Cross-Cutting Integration Concerns

**Security Integration**: Spring Security framework provides end-to-end authentication and authorization across all integration points, from React frontend authentication through Gateway token validation to service-level method security.

**Transaction Management**: Spring's declarative transaction management ensures data consistency across all integration layers, with transaction boundaries configured to match original CICS transaction processing patterns.

**Error Handling and Monitoring**: Comprehensive error handling integrates across all layers through Spring Boot's exception handling framework, with Micrometer metrics providing observability into integration performance and reliability.

**Configuration Management**: Spring Cloud Config enables centralized configuration management across all integration components, supporting environment-specific deployments and dynamic configuration updates without service disruption.

### 6.3.2 MAINFRAME-INTERNAL INTERFACES

#### 6.3.2.1 Modern Transaction Processing Interface Architecture (updated)

The system implements <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native Spring Boot interfaces that replace traditional mainframe integration patterns</span> within the containerized Kubernetes environment. <span style="background-color: rgba(91, 57, 243, 0.2)">These modern interfaces demonstrate production-ready integration patterns using industry-standard technologies while maintaining identical business functionality and data flow patterns</span>.

| Interface Type | Protocol/Method | Purpose | Implementation |
|---------------|----------------|---------|----------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">User Interface</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HTTPS/JSON via React</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Modern web-based user interaction</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA components with Material-UI rendering and REST API communication</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Service Invocation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Bean method calls</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Inter-service business logic orchestration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring dependency injection with @Service annotations and method-level transaction boundaries</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Data Access</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Object-relational database operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JPA repository interfaces with CRUD operations and ACID transaction compliance</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Security Integration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication and authorization framework</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Role-based access control with JWT authentication and method-level security</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Session State</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session & Redis</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Distributed session management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis cluster-backed session storage with automatic serialization and horizontal scaling</span> |
| External Interfaces | <span style="background-color: rgba(91, 57, 243, 0.2)">unchanged data formats over existing channels</span> | Legacy system integration | <span style="background-color: rgba(91, 57, 243, 0.2)">Fixed-width file interfaces and batch processing maintaining identical data contracts</span> |

#### 6.3.2.2 Modernized Data Flow Integration Patterns (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The modernized architecture demonstrates enterprise-grade integration patterns using Spring Boot ecosystem components that serve as reference implementations for mainframe-to-cloud transformation</span>. The system maintains functional parity while leveraging cloud-native technologies for enhanced scalability and maintainability.

```mermaid
sequenceDiagram
    participant Browser as Browser (React)
    participant Gateway as Spring Cloud Gateway
    participant Controller as Spring Boot REST Controller
    participant Session as Spring Session (Redis)
    participant Service as Service Layer
    participant Repository as JPA Repository
    participant Database as PostgreSQL
    participant Legacy as External Legacy Host/File Interface
    
    Browser->>Gateway: HTTPS Request with JWT Token
    Gateway->>Gateway: Authentication & Routing
    Gateway->>Controller: Forward Request with Security Context
    Controller->>Session: Retrieve/Update Session State
    Session-->>Controller: Session Attributes
    Controller->>Service: Business Logic Invocation
    Service->>Repository: Data Access Operations
    Repository->>Database: SQL Query Execution
    Database-->>Repository: Result Set
    Repository-->>Service: JPA Entity Objects
    Service->>Legacy: External Interface Call (identical contracts)
    Legacy-->>Service: Response Data
    Service-->>Controller: Business Logic Response
    Controller->>Session: Update Session State
    Controller->>Gateway: JSON Response
    Gateway-->>Browser: HTTPS Response with Data
```

#### 6.3.2.3 Spring Batch Processing Integration Framework (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The Spring Batch processing framework demonstrates modern automated integration patterns for high-volume operations within the 4-hour processing window</span>, replacing JCL-driven batch processing while maintaining identical business logic and data flow patterns.

```mermaid
flowchart LR
    subgraph "Daily Processing Sequence"
        A[Flat File Input] --> B[DailyTransactionJob Validation]
        B --> C[InterestCalculationJob Processing]
        C --> D[StatementGenerationJob Output]
        D --> E[ReportGenerationJob Creation]
        E --> F[ArchivalJob Management]
    end
    
    subgraph "Spring Boot Service Integration Points"
        G[Service Components] --> B
        G --> C
        G --> D
        H[JPA Repositories] --> C
        H --> D
        I[PostgreSQL Database] --> C
        I --> D
    end
    
    subgraph "Output Integration"
        F --> J[Sequential Report Files]
        D --> K[Statement Output Files]
        B --> L[Error and Reject Files]
    end
    
    subgraph "Checkpoint Management"
        M[(PostgreSQL JobRepository)] --> B
        M --> C
        M --> D
        M --> E
        M --> F
    end
    
    style A fill:#e1f5fe
    style J fill:#c8e6c9
    style K fill:#c8e6c9
    style L fill:#ffcdd2
    style M fill:#fff3e0
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Architecture Details</span>**:

| Job Name | <span style="background-color: rgba(91, 57, 243, 0.2)">Processing Function</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Input Source</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Service Layer Integration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Output Destination</span> |
|----------|-------------|------------|-----------------|----------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">DailyTransactionJob</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction validation and posting</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">dailytran.txt flat file</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">TransactionService.validateAndPost()</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL transactions table</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">InterestCalculationJob</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Account interest computation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL account_data table</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">InterestService.calculateInterest()</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Interest transaction records</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">StatementGenerationJob</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Monthly statement creation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL transaction history</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">StatementService.generateStatement()</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PDF statement files</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">ReportGenerationJob</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Regulatory report creation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL aggregated data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ReportService.createRegulatorReport()</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Structured report files</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">ArchivalJob</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Data retention management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL aged transactions</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ArchivalService.moveToArchive()</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Archive schema tables</span> |

#### 6.3.2.4 Cloud-Native Integration Architecture Patterns (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Horizontal Scaling Integration</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">The Spring Boot application integrates with Kubernetes HorizontalPodAutoscaler for automatic scaling based on CPU utilization and request latency metrics</span>. Redis session clustering enables stateless scaling while maintaining session continuity across pod restarts and scaling events.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Service Mesh Integration</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway provides API gateway functionality with built-in circuit breaker patterns, rate limiting, and request routing</span>. The gateway integrates seamlessly with Spring Security for centralized authentication and authorization across all service endpoints.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Observability Integration</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer with Prometheus registry provides comprehensive application metrics collection integrated with Spring Boot Actuator endpoints</span>. Custom business metrics track transaction processing rates, error rates, and performance characteristics across all integration points.

#### 6.3.2.5 Integration Performance and Monitoring (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Real-time Performance Monitoring</span>**:

```mermaid
graph TD
    A[Spring Boot Actuator] --> B[Micrometer Metrics]
    B --> C[Prometheus Registry]
    C --> D[Grafana Dashboard]
    
    E[Custom Business Metrics] --> B
    F[JVM Performance Metrics] --> B
    G[Database Connection Pool Metrics] --> B
    H[Redis Session Metrics] --> B
    
    I[Spring Security Audit Events] --> J[Application Logs]
    K[Transaction Processing Events] --> J
    L[Batch Job Execution Logs] --> J
    
    J --> M[Centralized Logging System]
    D --> N[Operations Team Dashboard]
    
    style B fill:#e8f5e8
    style D fill:#e3f2fd
    style M fill:#fff3e0
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Performance Targets</span>**:

| Integration Layer | <span style="background-color: rgba(91, 57, 243, 0.2)">Performance Target</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring Method</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Optimization Strategy</span> |
|------------------|----------------|-----------------|------------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">React → Spring Gateway</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><50ms routing latency</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Gateway request metrics</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Connection pooling and caching</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Gateway → Spring Boot</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><100ms controller processing</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring MVC handler metrics</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Async processing and thread pools</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Service → JPA Repository</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><50ms data access</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JPA query execution metrics</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Query optimization and indexing</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">JPA → PostgreSQL</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><10ms query execution</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Database performance monitoring</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Connection pooling and prepared statements</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session Redis</span> | <span style="background-color: rgba(91, 57, 243, 0.2)"><5ms session operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis cluster monitoring</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Memory optimization and clustering</span> |

#### 6.3.2.6 External System Integration Contracts (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Legacy Host Interface Preservation</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">External integration contracts maintain identical data formats and communication patterns to preserve compatibility with existing upstream and downstream systems</span>. Spring Batch jobs process fixed-width files using the same record layouts and validation rules as the original COBOL programs.

**<span style="background-color: rgba(91, 57, 243, 0.2)">File-Based Integration Patterns</span>**:

| Interface Type | <span style="background-color: rgba(91, 57, 243, 0.2)">Data Format</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Processing Method</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Integration Component</span> |
|---------------|-------------|-----------------|----------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">Daily Transaction Input</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Fixed-width ASCII records (80-byte)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch FlatFileItemReader</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">DailyTransactionJob with CobolDataConverter</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Statement Output Files</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PDF and structured text formats</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch FlatFileItemWriter</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">StatementGenerationJob with PDF rendering</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Regulatory Reports</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CSV and XML structured data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch MultiResourceItemWriter</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ReportGenerationJob with format converters</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Archive Data Export</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Compressed delimited files</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch database readers</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ArchivalJob with compression utilities</span> |

#### 6.3.2.7 Integration Security and Compliance (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">End-to-End Security Integration</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security provides comprehensive security integration across all interface layers with JWT token propagation, method-level authorization, and audit logging</span>. Security context flows seamlessly from React frontend through Spring Cloud Gateway to backend services while maintaining RBAC compliance.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Compliance Integration Patterns</span>**:

| Compliance Requirement | <span style="background-color: rgba(91, 57, 243, 0.2)">Integration Implementation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring Component</span> |
|----------------------|---------------------|-------------------|
| PCI DSS Data Protection | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL column-level encryption with pgcrypto</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit events</span> |
| GDPR Privacy Controls | <span style="background-color: rgba(91, 57, 243, 0.2)">API-level data masking in Spring Boot services</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Custom privacy metrics</span> |
| SOX Financial Integrity | <span style="background-color: rgba(91, 57, 243, 0.2)">JPA transaction boundaries with ACID compliance</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Database audit logging</span> |
| Regulatory Reporting | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch automated report generation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Batch job execution tracking</span> |

This modernized internal interface architecture provides equivalent functionality to the original CICS/VSAM system while delivering enhanced performance, scalability, and maintainability through cloud-native Spring Boot integration patterns. <span style="background-color: rgba(91, 57, 243, 0.2)">The architecture maintains strict compatibility with external systems while leveraging modern technologies for internal processing optimization</span>.

### 6.3.3 MODERNIZATION INTEGRATION PATHWAY

#### 6.3.3.1 Reference Architecture for <span style="background-color: rgba(91, 57, 243, 0.2)">Implemented Cloud-Native Integration Layer

<span style="background-color: rgba(91, 57, 243, 0.2)">CardDemo now operates with a fully implemented cloud-native integration architecture that demonstrates enterprise-grade modernization patterns.</span> The system provides comprehensive integration capabilities through containerized services that maintain functional equivalence with the original mainframe system while enabling modern cloud-native operational patterns.

```mermaid
graph TB
    subgraph "Current CardDemo Architecture"
        A[3270 Interface] --> B[CICS Programs]
        B --> C[VSAM Datasets]
    end
    
    subgraph "Implemented Cloud-Native Integration Layer"
        D[Spring Cloud Gateway] --> E[Spring Boot REST Services]
        E --> F[Spring Session with Redis]
        F --> G[PostgreSQL Database]
        G --> H[Spring Batch Jobs]
        I[React SPA] --> D
        J[Spring Boot Actuator/Micrometer] --> E
        K[Spring Cloud Config] --> E
    end
    
    subgraph "Integration Bridge Layer"
        L[Protocol Conversion] --> M[Data Format Translation]
        M --> N[Transaction Coordination]
    end
    
    B -.-> L
    L -.-> D
    
    style A fill:#e1f5fe
    style C fill:#fff3e0
    style D fill:#91c788
    style E fill:#91c788
    style F fill:#91c788
    style G fill:#91c788
    style H fill:#91c788
    style I fill:#91c788
    style J fill:#91c788
    style K fill:#91c788
    style L fill:#ff9800
```

#### 6.3.3.2 <span style="background-color: rgba(91, 57, 243, 0.2)">Modernization Implementation Status Summary

<span style="background-color: rgba(91, 57, 243, 0.2)">The CardDemo modernization has achieved comprehensive functional parity through cloud-native integration patterns. The following components demonstrate successful implementation of enterprise modernization strategies:</span>

| Modernization Component | Implementation Status | Reference Citation | Technical Implementation |
|------------------------|---------------------|-------------------|------------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">API Layer</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**IMPLEMENTED**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Summary of Changes §0.3 - REST controllers for each CICS transaction code</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">24 Spring Boot REST endpoints with identical transaction code mapping (COSGN00C, COMEN01C, etc.)</span> |
| Message Processing | **NOT IN SCOPE** | Summary of Changes §0.3 - Event-driven architecture excluded from current implementation | CardDemo operates without external message processing requirements |
| <span style="background-color: rgba(91, 57, 243, 0.2)">External DB Connectors</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**IMPLEMENTED via PostgreSQL**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Summary of Changes §0.3 - VSAM-to-PostgreSQL data migration with composite keys</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA repositories with ACID compliance and cursor-based pagination</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud Integration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**IMPLEMENTED via Docker/K8s**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Summary of Changes §0.3 - Containerization and service extraction</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes orchestration with horizontal scaling and service discovery</span> |

#### 6.3.3.3 <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Integration Architecture Patterns

<span style="background-color: rgba(91, 57, 243, 0.2)">The implemented architecture demonstrates production-ready integration patterns that serve as reference implementations for enterprise mainframe modernization initiatives:</span>

**Gateway Integration Layer**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway provides centralized API management with request routing, authentication, authorization, and cross-cutting concerns handling. The gateway maintains session context through HTTP headers and JWT token validation while routing to appropriate Spring Boot REST controllers.</span>

**Service Integration Framework**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot services implement dependency injection patterns that preserve original COBOL program structure through method naming conventions following paragraph patterns (0000-init, 1000-input, 2000-process, 3000-output, 9000-close). Service boundaries maintain transaction integrity equivalent to CICS SYNCPOINT behavior.</span>

**Data Layer Integration**:
<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL integration through Spring Data JPA provides ACID-compliant data operations with composite primary keys matching VSAM dataset organization. Redis-backed Spring Session maintains distributed session state across REST API calls, replicating COMMAREA functionality through JSON serialization.</span>

**Batch Processing Integration**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch jobs integrate with the same PostgreSQL data layer and Spring Boot service classes, providing scheduled processing capabilities that replace JCL job execution while maintaining identical processing logic and restart capabilities within the existing 4-hour processing windows.</span>

#### 6.3.3.4 <span style="background-color: rgba(91, 57, 243, 0.2)">Integration Performance and Monitoring Implementation

<span style="background-color: rgba(91, 57, 243, 0.2)">The modernized system implements comprehensive observability through Spring Boot Actuator and Micrometer integration, providing production-grade monitoring capabilities that exceed mainframe operational visibility:</span>

```mermaid
sequenceDiagram
    participant React as React SPA
    participant Gateway as Spring Cloud Gateway
    participant Config as Spring Cloud Config
    participant Controller as Spring Boot REST Controller
    participant Session as Spring Session (Redis)
    participant Service as Service Layer
    participant Repository as JPA Repository
    participant Database as PostgreSQL
    participant Monitor as Actuator/Micrometer
    
    React->>Gateway: HTTPS Request with Authentication
    Gateway->>Config: Load Configuration
    Config-->>Gateway: Environment Properties
    Gateway->>Controller: Route Authenticated Request
    Controller->>Session: Retrieve Session State
    Session-->>Controller: COMMAREA-equivalent Data
    Controller->>Service: Business Logic Invocation
    Service->>Repository: JPA Data Operations
    Repository->>Database: SQL Execution
    Database-->>Repository: Result Set
    Repository-->>Service: Entity Objects
    Service-->>Controller: Processing Results
    Controller->>Session: Update Session State
    Controller->>Monitor: Record Performance Metrics
    Controller-->>Gateway: JSON Response
    Gateway-->>React: HTTPS Response
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Operational Integration Metrics</span>**:

| Performance Indicator | <span style="background-color: rgba(91, 57, 243, 0.2)">Target Achievement</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring Implementation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Integration Technology</span> |
|----------------------|----------------|-----------------|---------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">API Response Time</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Sub-200ms for card authorization</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Timer metrics</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring MVC handler timing</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Session State Management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">32KB COMMAREA replication</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis cluster monitoring</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session with JSON serialization</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Batch Processing Windows</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">4-hour completion guarantee</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch execution tracking</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JobRepository with PostgreSQL backend</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Data Integrity</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Byte-for-byte output matching</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JPA transaction boundary metrics</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ACID-compliant PostgreSQL operations</span> |

#### 6.3.3.5 <span style="background-color: rgba(91, 57, 243, 0.2)">Modernization Integration Best Practices Demonstrated

<span style="background-color: rgba(91, 57, 243, 0.2)">The CardDemo implementation serves as a reference architecture for enterprise modernization projects, demonstrating proven integration patterns for mainframe-to-cloud transformation:</span>

**Configuration Management Integration**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Config enables environment-specific deployments with centralized configuration management, supporting development, testing, and production environments without code changes. Configuration properties maintain identical values to original CICS region parameters while enabling dynamic updates.</span>

**Security Integration Framework**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security provides end-to-end authentication and authorization across all integration layers, from React frontend authentication through Gateway token validation to service-level method security. Role-based access control replicates RACF functionality while enabling modern JWT-based authentication patterns.</span>

**Horizontal Scaling Integration**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes HorizontalPodAutoscaler integration enables automatic scaling based on CPU utilization and request latency metrics. Redis session clustering supports stateless scaling while maintaining session continuity across pod restarts and scaling events, exceeding traditional mainframe capacity constraints.</span>

**External System Compatibility**:
<span style="background-color: rgba(91, 57, 243, 0.2)">File-based integration patterns maintain identical data contracts with upstream and downstream systems through Spring Batch processing. Fixed-width file formats, record layouts, and validation rules remain unchanged, ensuring seamless integration with existing enterprise systems while leveraging modern processing capabilities.</span>

### 6.3.4 INTEGRATION DESIGN PRINCIPLES

#### 6.3.4.1 Internal Integration Standards (updated)

CardDemo demonstrates enterprise integration standards within the <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native Spring Boot environment</span>:

**Transaction Integrity**: All data operations maintain ACID compliance through <span style="background-color: rgba(91, 57, 243, 0.2)">Spring @Transactional boundaries mirroring CICS SYNCPOINT behavior</span>, ensuring reliable internal integration between system components through declarative transaction management.

**Standardized Interfaces**: The system implements consistent interface patterns using <span style="background-color: rgba(91, 57, 243, 0.2)">shared Java DTOs, standardized REST request/response structures, and unified error handling across all Spring Boot controller interactions</span>.

**Session Management**: User session state is preserved through <span style="background-color: rgba(91, 57, 243, 0.2)">Redis-backed Spring Session management equivalent to COMMAREA</span>, enabling seamless integration between REST API calls while maintaining security context and stateful program data.

**Error Handling**: Comprehensive error propagation through <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot's exception handling framework (@ControllerAdvice and custom exception classes)</span> ensures reliable integration behavior across all system components.

**Precision Handling**: Financial calculations maintain exact decimal precision through <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal precision utilities that replicate COBOL COMP-3 arithmetic behavior</span>, ensuring identical computational results in currency operations.

**Security Integration**: Authentication and authorization flow seamlessly across all integration layers through <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security framework replacing RACF functionality</span> with role-based access control and JWT token propagation.

#### 6.3.4.2 Minimal-Change Logic Preservation (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The system implements a fundamental design principle of preserving exact business logic during modernization to minimize functional risk and ensure identical behavioral outcomes</span>:

**Program Structure Preservation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Java service classes maintain original COBOL program organization with method naming conventions following paragraph patterns (0000-init, 1000-input, 2000-process, 3000-output, 9000-close)</span>, ensuring logic flow remains identical to original implementation.

**Transaction Code Mapping**: <span style="background-color: rgba(91, 57, 243, 0.2)">Each CICS transaction code (COSGN00C, COMEN01C, COACTUSR) maps one-to-one with dedicated Spring Boot REST controller endpoints</span>, preserving original system boundaries and maintaining identical request/response patterns.

**Data Processing Logic**: <span style="background-color: rgba(91, 57, 243, 0.2)">Business rules, validation logic, and computational algorithms remain unchanged from COBOL implementation</span>, with Java methods performing identical operations while leveraging modern language features for enhanced maintainability.

**Screen Flow Equivalence**: <span style="background-color: rgba(91, 57, 243, 0.2)">React SPA components replicate exact screen navigation patterns and field validation rules from original BMS maps</span>, ensuring user experience remains functionally identical while delivering modern web interface capabilities.

**Error Handling Consistency**: <span style="background-color: rgba(91, 57, 243, 0.2)">Exception conditions, error messages, and recovery procedures maintain identical behavior patterns</span> while leveraging Spring Boot's exception handling framework for improved observability and debugging.

#### 6.3.4.3 Data Integration Consistency (updated)

The system maintains data consistency through <span style="background-color: rgba(91, 57, 243, 0.2)">modern enterprise integration patterns using PostgreSQL and Spring ecosystem components</span>:

**Referential Integrity**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL foreign key constraints enforce data consistency across related entities</span>, replacing VSAM cross-reference datasets while providing superior relationship validation and cascade operations through declarative database constraints.

**Concurrency Control**: <span style="background-color: rgba(91, 57, 243, 0.2)">JPA optimistic locking with version columns prevents concurrent update conflicts</span>, ensuring data integrity in multi-user scenarios while enabling higher throughput than traditional pessimistic locking approaches.

**Transaction Coordination**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch jobs coordinate updates across multiple database tables using checkpoint/restart capabilities</span>, demonstrating enterprise-grade integration reliability within existing 4-hour processing windows while maintaining identical processing sequences.

**Audit Trail**: All data changes are tracked through <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator audit events and PostgreSQL database audit triggers</span>, providing comprehensive integration monitoring and compliance capabilities that exceed traditional mainframe logging with structured event data and real-time observability.

**Batch Processing Reliability**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch JobRepository with PostgreSQL backend maintains execution state for restart capabilities</span>, enabling robust recovery from processing interruptions while preserving identical business logic execution patterns and data validation rules.

#### 6.3.4.4 Integration Performance Standards

The modernized architecture delivers enhanced performance characteristics while maintaining functional equivalence:

**Response Time Optimization**: REST API endpoints target sub-200ms response times through optimized Spring Boot controller processing, Redis session caching, and PostgreSQL query optimization with composite index strategies.

**Throughput Management**: System supports concurrent user sessions equivalent to CICS region capacity through stateless REST architecture with Redis-backed session clustering, enabling horizontal scaling beyond traditional mainframe constraints.

**Resource Utilization**: Docker containerization with Kubernetes orchestration provides dynamic resource allocation and automatic scaling based on demand patterns, optimizing infrastructure utilization while maintaining performance guarantees.

**Integration Monitoring**: Real-time performance metrics through Micrometer and Spring Boot Actuator provide comprehensive visibility into integration layer performance, enabling proactive optimization and capacity management with alerting capabilities that exceed traditional mainframe monitoring.

#### 6.3.4.5 Cloud-Native Integration Patterns

The system demonstrates production-ready cloud-native integration patterns:

```mermaid
graph TD
    subgraph "Integration Design Principles Implementation"
        A[React Frontend] --> B[Spring Cloud Gateway]
        B --> C[Spring Boot REST Controllers]
        C --> D[Service Layer with Preserved Logic]
        D --> E[Spring Data JPA Repositories]
        E --> F[PostgreSQL with FK Constraints]
        
        C --> G[Redis-backed Spring Session]
        C --> H[Spring Security Integration]
        
        I[Spring Batch Jobs] --> D
        I --> E
        
        J[Spring Boot Actuator] --> K[Performance Monitoring]
        L[Audit Triggers] --> M[Compliance Tracking]
        
        F --> L
        H --> N[JWT Authentication]
        G --> O[COMMAREA Equivalent State]
    end
    
    style A fill:#e1f5fe
    style F fill:#fff3e0
    style G fill:#ffcdd2
    style I fill:#c8e6c9
    style K fill:#e8f5e8
```

**Configuration-Driven Integration**: Spring Cloud Config enables environment-specific integration parameters while maintaining identical business logic across development, testing, and production environments.

**Observability Integration**: Comprehensive monitoring through Spring Boot Actuator, Micrometer metrics, and structured logging provides real-time visibility into integration health and performance characteristics.

**Scalability Patterns**: Redis session clustering and PostgreSQL connection pooling enable horizontal scaling while maintaining session state consistency and data integrity across multiple application instances.

**Security Integration**: End-to-end security context propagation through Spring Security ensures consistent authentication and authorization across all integration boundaries while maintaining role-based access control equivalent to original RACF implementation.

### 6.3.5 INTEGRATION MONITORING AND OBSERVABILITY

#### 6.3.5.1 Cloud-Native Integration Monitoring (updated)

CardDemo implements <span style="background-color: rgba(91, 57, 243, 0.2)">modern cloud-native monitoring patterns using Spring Boot Actuator with Micrometer metrics collection, providing comprehensive observability for containerized microservices architecture</span>:

| Monitoring Component | Implementation | Purpose | Data Source |
|---------------------|----------------|---------|-------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">Endpoint Health</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator /health</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Application and dependency health verification</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Actuator health indicators</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Application Metrics</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer → Prometheus</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Performance and business metrics collection</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer MeterRegistry</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Log Aggregation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Docker/Kubernetes stdout → ELK Stack</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Centralized logging and analysis</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Container log streams</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Batch Job Status</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch metadata tables</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Batch processing execution tracking</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL JobRepository</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Database Metrics</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL pg_stat views</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Database performance monitoring</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL system catalogs</span> |

#### Spring Boot Actuator Integration Architecture

The system leverages <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator 3.2.x with comprehensive endpoint exposure for production monitoring capabilities</span>:

**Health Check Endpoints**: The `/actuator/health` endpoint provides sophisticated health verification with custom health indicators for PostgreSQL database connectivity, Redis session store availability, and external service dependencies. Health indicators implement composite health status aggregation with configurable status mappings and detailed diagnostic information.

**Metrics Exposition**: <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer 1.12.x integration provides dimensional metrics collection with Prometheus registry support</span>, enabling comprehensive application performance monitoring through `/actuator/prometheus` endpoint. Custom business metrics track transaction processing rates, account operation latencies, and batch job execution statistics.

**Management Operations**: Additional actuator endpoints support operational requirements including `/actuator/info` for application metadata, `/actuator/metrics` for metric inspection, and `/actuator/env` for configuration validation across development, staging, and production environments.

#### Observability Technology Stack

<span style="background-color: rgba(91, 57, 243, 0.2)">**Prometheus 3.5 LTS Integration**</span>: <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus server configuration scrapes metrics from Spring Boot applications via HTTP endpoints, providing high-performance time-series data collection with configurable retention policies and alert rule evaluation</span>.

<span style="background-color: rgba(91, 57, 243, 0.2)">**Grafana 11.x Dashboard Platform**</span>: <span style="background-color: rgba(91, 57, 243, 0.2)">Grafana dashboards visualize application performance metrics, business intelligence data, and operational health indicators with customizable alerting thresholds and notification channels</span>.

<span style="background-color: rgba(91, 57, 243, 0.2)">**ELK Stack Log Analytics**</span>: <span style="background-color: rgba(91, 57, 243, 0.2)">Elasticsearch, Logstash, and Kibana provide centralized log aggregation from Docker containers and Kubernetes pods, enabling full-text search, log correlation, and security event analysis</span>.

#### 6.3.5.2 Integration Health Assessment (updated)

The system provides <span style="background-color: rgba(91, 57, 243, 0.2)">comprehensive health monitoring through modern cloud-native observability platforms with real-time alerting and automated response capabilities</span>:

```mermaid
graph TD
    subgraph "Monitoring Data Sources"
        A[Spring Boot Actuator Endpoints] --> B[Micrometer Metrics Registry]
        C[PostgreSQL pg_stat Views] --> B
        D[Spring Batch JobRepository] --> E[Alertmanager SLA Monitoring]
        F[Container Log Streams] --> G[ELK Stack Processing]
    end
    
    subgraph "Metrics Collection & Storage"
        B --> H[Prometheus Time-Series DB]
        G --> I[Elasticsearch Log Index]
        E --> J[Alert Rule Evaluation]
    end
    
    subgraph "Visualization & Alerting"
        H --> K[Grafana Dashboards]
        I --> L[Kibana Log Analytics]
        J --> M[Notification Channels]
        H --> J
    end
    
    subgraph "Operational Response"
        K --> N[Performance Analysis]
        L --> O[Error Investigation]
        M --> P[Incident Response]
        N --> Q[Capacity Optimization]
    end
    
    style B fill:#e8f5e8
    style H fill:#fff3e0
    style K fill:#e3f2fd
    style E fill:#ffcdd2
```

#### Advanced Health Monitoring Capabilities

**<span style="background-color: rgba(91, 57, 243, 0.2)">Real-Time Application Health**</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator health indicators continuously monitor critical system components including database connection pools, Redis session store connectivity, and external API endpoint availability</span>. Health check aggregation provides composite application status with configurable health groups supporting different service availability requirements.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Metrics Collection**</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Timer and Counter metrics capture detailed performance characteristics for REST endpoint response times, database query execution latencies, and business transaction processing rates</span>. Custom metrics provide domain-specific insights into card authorization success rates, account balance update operations, and statement generation processing throughput.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Processing Observability**</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch JobRepository metadata tables provide comprehensive execution tracking with step-level progress monitoring, error rate analysis, and restart capability verification</span>. Automated alerting through Alertmanager monitors SLA compliance for critical batch processing windows including daily transaction processing and monthly statement generation.

#### Database Performance Monitoring Integration

<span style="background-color: rgba(91, 57, 243, 0.2)">**PostgreSQL Native Monitoring**</span>: <span style="background-color: rgba(91, 57, 243, 0.2)">Integration with PostgreSQL pg_stat_statements and pg_stat_database views provides detailed query performance analysis, connection pool utilization metrics, and index effectiveness monitoring</span>. Database-specific dashboards display slow query identification, transaction throughput trends, and resource utilization patterns.

<span style="background-color: rgba(91, 57, 243, 0.2)">**Connection Pool Analytics**</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP connection pool metrics integration with Micrometer provides real-time visibility into connection acquisition times, pool saturation levels, and connection leak detection</span>. Automated alerting triggers when connection pool utilization exceeds configurable thresholds.

#### Distributed Tracing and Log Correlation

**<span style="background-color: rgba(91, 57, 243, 0.2)">Container Log Aggregation**</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Docker and Kubernetes stdout/stderr streams flow through Logstash processing pipelines with structured log parsing, field extraction, and correlation ID tracking</span>. Log correlation enables end-to-end request tracing across microservices boundaries with unified search and analysis capabilities.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Security Event Monitoring**</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit events and authentication failure patterns flow through centralized logging infrastructure with automated threat detection and incident response workflows</span>. Security dashboards provide real-time visibility into authentication patterns, authorization failures, and potential security incidents.

#### Alerting and Incident Response Integration

<span style="background-color: rgba(91, 57, 243, 0.2)">**Prometheus Alertmanager Integration**</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Alert rule definitions monitor critical business metrics including transaction processing SLA compliance, batch job completion status, and system resource utilization thresholds</span>. Multi-channel notification routing supports email, Slack, PagerDuty, and webhook integrations for comprehensive incident response.

<span style="background-color: rgba(91, 57, 243, 0.2)">**Automated Response Workflows**</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Integration with Kubernetes HorizontalPodAutoscaler enables automatic scaling responses to performance degradation events</span>. Circuit breaker pattern implementation through Spring Cloud Gateway provides automatic fault isolation and recovery for external service dependencies.

#### Business Intelligence and Reporting

**<span style="background-color: rgba(91, 57, 243, 0.2)">Custom Business Metrics**</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Domain-specific metrics capture business KPIs including daily transaction volumes, account creation rates, card authorization success percentages, and statement generation completion times</span>. Business dashboards provide executive-level visibility into operational performance and customer experience metrics.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Compliance Monitoring**</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated compliance tracking monitors data retention policies, audit log completeness, and regulatory reporting deadlines with integration to enterprise governance platforms</span>. Compliance dashboards provide audit trail verification and regulatory requirement fulfillment tracking.

This modernized monitoring and observability architecture provides enterprise-grade operational visibility that exceeds traditional mainframe monitoring capabilities while maintaining comprehensive coverage of all system components and business processes. <span style="background-color: rgba(91, 57, 243, 0.2)">The cloud-native approach enables real-time operational insights, predictive capacity management, and automated incident response workflows that support continuous business operations with enhanced reliability and performance optimization</span>.

### 6.3.6 TECHNOLOGY INTEGRATION FRAMEWORK

#### 6.3.6.1 Cloud-Native Technology Stack Integration (updated)

CardDemo demonstrates comprehensive integration within the <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native technology stack</span>:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot 3.2.x Integration</span>**: Application framework provides the integration platform for all REST operations, demonstrating proper dependency injection, request routing, and transaction coordination through comprehensive auto-configuration capabilities.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA Integration</span>**: Object-relational mapping provides the data integration layer with automatic entity management, query generation, and transaction integrity checking without requiring external ORM configuration.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch 5.x Integration</span>**: Job processing framework coordination enables automated batch processing integration with comprehensive job scheduling, checkpoint management, and restart capabilities.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security 6.x Integration</span>**: Security framework integration demonstrates enterprise authentication and authorization patterns native to the cloud-native environment with JWT token management and role-based access control.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway Integration</span>**: API gateway provides centralized request routing, authentication propagation, and cross-cutting concerns management between React frontend and Spring Boot backend services.

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL 15.x Integration</span>**: Relational database system provides ACID-compliant data persistence with composite key support, referential integrity, and advanced indexing capabilities for optimal query performance.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Redis 7.x Integration</span>**: In-memory data store provides distributed session management, caching layer, and high-performance data operations supporting horizontal scaling and session clustering.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Docker 24 Integration</span>**: Containerization platform provides consistent deployment packaging, resource isolation, and environment portability across development, staging, and production environments.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes 1.28 Integration</span>**: Container orchestration platform provides automatic scaling, service discovery, load balancing, and rolling deployment capabilities for production-grade container management.

**<span style="background-color: rgba(91, 57, 243, 0.2)">React 18 Integration</span>**: Frontend framework provides component-based user interface development with virtual DOM optimization, state management, and modern web application patterns for enhanced user experience.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Node 20 Integration</span>**: JavaScript runtime provides frontend build tooling, package management, and development server capabilities supporting modern web application development workflows.

#### 6.3.6.2 Development Tool Integration (updated)

The system integrates with modern cloud-native development tools while supporting advanced CI/CD practices:

| Tool Category | <span style="background-color: rgba(91, 57, 243, 0.2)">Integration Type</span> | Purpose | <span style="background-color: rgba(91, 57, 243, 0.2)">Implementation</span> |
|--------------|------------------|---------|----------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">Build System</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Maven/Gradle build automation</span> | Code compilation and dependency management | <span style="background-color: rgba(91, 57, 243, 0.2)">Maven 3.9.11 with Spring Boot plugin integration</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Source Control</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Git version control system</span> | Source code management and branching | <span style="background-color: rgba(91, 57, 243, 0.2)">Git repositories with feature branch workflow</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CI/CD Pipeline</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GitHub Actions/Jenkins CI automation</span> | Continuous integration and deployment | <span style="background-color: rgba(91, 57, 243, 0.2)">Automated build, test, and deployment workflows</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Container Build</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Docker build pipeline</span> | Container image creation and registry | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-stage Docker builds with security scanning</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Deployment Orchestration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Helm charts</span> | Automated deployment and configuration | <span style="background-color: rgba(91, 57, 243, 0.2)">Helm-based deployment with environment templating</span> |

#### 6.3.6.3 Technology Integration Architecture

The cloud-native technology stack demonstrates sophisticated integration patterns that serve as reference implementations for enterprise modernization:

```mermaid
graph TD
    subgraph "Frontend Layer"
        A[React 18 Components] --> B[Node 20 Runtime]
        B --> C[Axios HTTP Client]
    end
    
    subgraph "API Gateway Layer"
        D[Spring Cloud Gateway] --> E[Request Routing]
        E --> F[Spring Security 6.x]
    end
    
    subgraph "Application Layer"
        G[Spring Boot 3.2.x] --> H[Spring Data JPA]
        G --> I[Spring Batch 5.x]
        H --> J[JPA Repository Layer]
    end
    
    subgraph "Data Layer"
        K[(PostgreSQL 15.x)] --> L[Composite Key Tables]
        M[(Redis 7.x)] --> N[Session Storage]
    end
    
    subgraph "Container Platform"
        O[Docker 24] --> P[Kubernetes 1.28]
        P --> Q[Service Discovery & Load Balancing]
    end
    
    subgraph "Development Tools"
        R[Maven/Gradle] --> S[GitHub Actions/Jenkins]
        S --> T[Docker Build Pipeline]
        T --> U[Kubernetes Helm Charts]
    end
    
    C --> D
    F --> G
    J --> K
    G --> M
    G --> O
    R --> O
    
    style A fill:#e1f5fe
    style K fill:#fff3e0
    style M fill:#ffcdd2
    style O fill:#c8e6c9
```

#### 6.3.6.4 Integration Framework Standards

**Java Language Compliance**: The system maintains compatibility with Java 21 LTS while avoiding experimental features. Implementation follows established Java patterns and Spring Boot conventions without utilizing preview features or advanced language constructs that could affect application stability or behavioral consistency.

**Spring Ecosystem Integration**: All components leverage Spring Framework's dependency injection and configuration management patterns, ensuring consistent integration approaches across the entire technology stack. Spring Boot auto-configuration eliminates boilerplate while maintaining explicit control over critical integration points.

**Container-First Integration**: Docker containerization provides consistent runtime environments across all deployment targets, with Kubernetes orchestration enabling cloud-native operational patterns including horizontal scaling, service mesh integration, and automated lifecycle management.

**Database Integration Patterns**: PostgreSQL integration through Spring Data JPA maintains ACID transaction properties while providing advanced relational database capabilities including foreign key constraints, composite primary keys, and query optimization through proper indexing strategies.

**Session State Management**: Redis-backed Spring Session provides distributed session management that replicates mainframe COMMAREA functionality while enabling stateless application scaling and session clustering for high availability scenarios.

**Build and Deployment Integration**: Maven-based build automation integrates with containerization workflows, enabling continuous integration through GitHub Actions or Jenkins with automated testing, security scanning, and deployment orchestration through Kubernetes Helm charts.

This technology integration framework demonstrates production-ready cloud-native patterns while maintaining functional equivalence with traditional mainframe system capabilities. The architecture provides enhanced scalability, maintainability, and operational visibility through modern observability tools and cloud-native deployment practices.

### 6.3.7 REFERENCES

#### Technical Specification Sections Examined:
- <span style="background-color: rgba(91, 57, 243, 0.2)">0.2.2 Component Impact Analysis</span> - <span style="background-color: rgba(91, 57, 243, 0.2)">Confirmed cloud-native Spring Boot architecture with Spring Cloud Gateway, Redis session management, and PostgreSQL database integration</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">0.3 Implementation Design</span> - <span style="background-color: rgba(91, 57, 243, 0.2)">Validated technical approach for containerized deployment with Spring Boot service layer and React SPA frontend</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">0.5 Validation Checklist</span> - <span style="background-color: rgba(91, 57, 243, 0.2)">Established comprehensive integration testing requirements for frontend-backend communication and database integration verification</span>
- 1.2 SYSTEM OVERVIEW - <span style="background-color: rgba(91, 57, 243, 0.2)">Confirmed cloud-native two-tier architecture with containerized Spring Boot deployment</span>
- 3.5 THIRD-PARTY SERVICES & INTEGRATIONS - <span style="background-color: rgba(91, 57, 243, 0.2)">Verified Spring Cloud Gateway for API routing, Redis for session management, and enterprise identity provider integration with OAuth2/OIDC protocols</span>
- 4.1 SYSTEM WORKFLOWS - <span style="background-color: rgba(91, 57, 243, 0.2)">Confirmed REST API transaction flows with Spring Boot controllers and PostgreSQL database operations</span>
- 5.1 HIGH-LEVEL ARCHITECTURE - <span style="background-color: rgba(91, 57, 243, 0.2)">Established containerized modular monolith architecture with Spring Boot 3.2.x, React SPA frontend, and Kubernetes orchestration</span>
- 6.2 DATABASE DESIGN - <span style="background-color: rgba(91, 57, 243, 0.2)">Verified PostgreSQL relational database schema with composite primary keys, B-tree indexes, and JPA entity mapping preserving VSAM data structures</span>

#### Repository Analysis:
<span style="background-color: rgba(91, 57, 243, 0.2)">Complete repository structure examination confirmed presence of backend, frontend, and infrastructure directories as enumerated in Summary of Changes §0.2.3:</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/` directory contains Spring Boot application with service classes, REST controllers, JPA repositories, and entity mappings</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`frontend/` directory contains React SPA components, API client services, and Material-UI styling implementations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`infrastructure/` directory contains Docker containerization files, Kubernetes deployment manifests, and CI/CD pipeline configurations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">All integration architecture components confirmed: Spring Cloud Gateway configuration, Redis session management setup, PostgreSQL schema definition, and microservices communication patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Configuration files validate external integration capabilities including OAuth2 authentication, database connection pooling, and API gateway routing rules</span>

## 6.4 SECURITY ARCHITECTURE

### 6.4.1 AUTHENTICATION FRAMEWORK

### 6.4.1 Authentication Framework

The CardDemo authentication framework implements a <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security-based authentication system that replaces the legacy COSGN00C program with modern, cloud-native security components</span>. This framework maintains identical authentication logic while providing enhanced security capabilities and scalable session management through industry-standard Java enterprise technologies.

#### 6.4.1.1 Identity Management System (updated)

The <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security authentication framework centers on the SignOnService component, which serves as the primary authentication service for all user access to the system</span>. This service implements security patterns aligned with modern enterprise authentication best practices while preserving the exact validation logic of the original mainframe system.

**Primary Authentication Components:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**AuthenticationController**: REST controller implementing transaction mapping from CC00 to `/api/auth/login` endpoint</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**SignOnService**: Core authentication service containing business logic for credential validation and session establishment</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**UserDetailsService**: Spring Security integration service for loading user details from PostgreSQL</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**React SignOn.jsx**: Frontend component for credential collection and validation feedback, replacing COSGN0A BMS map</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Session (Redis)**: Distributed session storage maintaining user context across all system components</span>

**Authentication Process Flow:**
```mermaid
sequenceDiagram
    participant React as React SignOn.jsx
    participant Gateway as Spring Cloud Gateway
    participant AuthCtrl as AuthenticationController
    participant SignOnSvc as SignOnService
    participant UserDetails as UserDetailsService
    participant PostgreSQL as PostgreSQL (usrsec)
    participant Redis as Redis Session Store
    participant MenuSvc as Menu Services
    
    React->>Gateway: POST /api/auth/login (JSON credentials)
    Gateway->>AuthCtrl: Route authenticated request
    AuthCtrl->>SignOnSvc: Validate credentials
    SignOnSvc->>SignOnSvc: Convert to uppercase
    SignOnSvc->>UserDetails: loadUserByUsername()
    UserDetails->>PostgreSQL: SELECT * FROM usrsec WHERE sec_usr_id = ?
    
    alt Valid Credentials
        PostgreSQL-->>UserDetails: User record found
        UserDetails-->>SignOnSvc: UserDetails object
        SignOnSvc->>Redis: Store session attributes (SEC-USR-ID, SEC-USR-TYPE)
        SignOnSvc->>SignOnSvc: Create JWT token
        SignOnSvc-->>AuthCtrl: Authentication successful
        AuthCtrl-->>Gateway: 200 OK with JWT + user type
        Gateway-->>React: Success response
        alt Admin User (Type 'A')
            React->>Gateway: Navigate to Admin Menu
            Gateway->>MenuSvc: Route to AdminMenuService
        else Regular User (Type 'U')
            React->>Gateway: Navigate to User Menu
            Gateway->>MenuSvc: Route to UserMenuService
        end
    else Invalid Credentials
        PostgreSQL-->>UserDetails: Record not found
        UserDetails-->>SignOnSvc: UsernameNotFoundException
        SignOnSvc-->>AuthCtrl: Authentication failed
        AuthCtrl-->>Gateway: 401 Unauthorized + error message
        Gateway-->>React: Error response
        React->>React: Display error message on form
    end
```

#### 6.4.1.2 User Credential Repository (updated)

The <span style="background-color: rgba(91, 57, 243, 0.2)">**usrsec** PostgreSQL table implements the core identity store with JPA entity mapping</span>, maintaining identical field structures and data types from the original VSAM dataset while providing relational database capabilities and transaction integrity.

<span style="background-color: rgba(91, 57, 243, 0.2)">**PostgreSQL Table Structure** (usrsec):</span>

| Field Name | PostgreSQL Type | Length | JPA Annotation | Purpose | Security Consideration |
|------------|----------------|--------|---------------|---------|----------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">sec_usr_id</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">VARCHAR(8)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">8 chars</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">@Id @Column(length = 8)</span> | Primary key identifier | Case-insensitive authentication |
| <span style="background-color: rgba(91, 57, 243, 0.2)">sec_usr_fname</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">VARCHAR(20)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">20 chars</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">@Column(length = 20)</span> | User first name | Display and audit purposes |
| <span style="background-color: rgba(91, 57, 243, 0.2)">sec_usr_lname</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">VARCHAR(20)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">20 chars</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">@Column(length = 20)</span> | User last name | Display and audit purposes |
| <span style="background-color: rgba(91, 57, 243, 0.2)">sec_usr_pwd</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">VARCHAR(8)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">8 chars</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">@Column(length = 8)</span> | Authentication credential | Plain text with NoOpPasswordEncoder |
| <span style="background-color: rgba(91, 57, 243, 0.2)">sec_usr_type</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">VARCHAR(1)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">1 char</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">@Column(length = 1)</span> | Authorization level | 'A' for Admin, 'U' for User |
| <span style="background-color: rgba(91, 57, 243, 0.2)">sec_usr_filler</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">VARCHAR(23)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">23 chars</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">@Column(length = 23)</span> | Reserved expansion space | Future security field allocation |

**<span style="background-color: rgba(91, 57, 243, 0.2)">JPA Entity Configuration</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">@Entity annotation mapping table to UserSecurity Java class</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">@Table(name = "usrsec") specifying exact table name for PostgreSQL schema</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Custom field converters maintaining COBOL field length constraints and data formats</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA repository interface providing findBySecUsrId() method for authentication queries</span>

**Repository Security Characteristics:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL table-level access control through role-based permissions</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA abstraction with automatic query generation and SQL injection protection</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction management through Spring @Transactional boundaries ensuring ACID compliance</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Connection pooling via HikariCP for optimal performance and resource management</span>

#### 6.4.1.3 Session Management Architecture (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">Session state preservation utilizes **Spring Session with Redis backend**, providing distributed session storage that maintains user context across all REST API calls while supporting horizontal scaling and session clustering</span>. This approach replaces CICS COMMAREA passing with modern session management patterns while preserving identical functional behavior.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Context Elements</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**User Identity**: SEC-USR-ID and SEC-USR-TYPE preserved in Redis hash structures with JSON serialization</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Navigation State**: Program routing flags and menu context maintained as session attributes</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Security Context**: Spring Security Authentication object with granted authorities</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Transaction State**: Current operation status and error handling context with 32KB storage limit</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session Configuration</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">@EnableRedisHttpSession annotation enabling Redis-backed session management</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">RedisTemplate configured with JSON serialization for complex session objects</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Session timeout policies matching CICS transaction timeout behavior (30 minutes default)</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Session event listeners for audit logging and monitoring session lifecycle events</span>

**Session Lifecycle:**
```mermaid
flowchart TD
    A[React User Login] --> B[Spring Security Authentication]
    B --> C[Redis Session Creation]
    C --> D[JWT Token Generation]
    D --> E[Menu Service Navigation]
    E --> F[Business Function Access]
    F --> G{Continue Session?}
    G -->|Yes| H[HTTP Request with Session Cookie]
    H --> I[Spring Session Retrieval from Redis]
    I --> F
    G -->|No| J[Explicit Logout or Session Timeout]
    J --> K[Redis Session Deletion]
    K --> L[Security Context Cleanup]
    
    M[Automatic Session Timeout] -.-> J
    N[Authentication Exception] -.-> O[Session Invalidation]
    O --> K
    
    style C fill:#e1f5fe
    style K fill:#ffcdd2
    style O fill:#ff5252
    style I fill:#e8f5e8
```

#### 6.4.1.4 Password Policies and Management (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Current Password Implementation with Legacy Compatibility</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Fixed Length**: 8-character password field maintained for legacy system parity</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Case Handling**: Automatic uppercase conversion preserved through Spring Security UserDetailsService</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Storage Method**: Plain text storage using NoOpPasswordEncoder (or custom PlainTextPasswordEncoder) to match legacy behavior exactly</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Update Capabilities**: Administrative password updates through Spring Boot REST controllers with transaction integrity</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Password Configuration</span>:**
```java
@Bean
public PasswordEncoder passwordEncoder() {
    return NoOpPasswordEncoder.getInstance(); // Preserves plain text passwords for legacy parity
}

// Alternative custom implementation for explicit legacy compatibility:
@Bean
public PasswordEncoder customPlainTextPasswordEncoder() {
    return new PlainTextPasswordEncoder(); // Custom encoder maintaining exact COBOL behavior
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Security Configuration Integration</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security authentication manager configured with UserDetailsService and NoOpPasswordEncoder</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Password validation logic preserved identically from COSGN00C program implementation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication failure handling with detailed error messages matching legacy system responses</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Session establishment through Spring Session Redis with UserDetails integration</span>

**Security Enhancement Migration Path:**
Based on current Spring Security 6.5.x capabilities and enterprise authentication standards, the following improvements can be implemented in future iterations while maintaining backward compatibility:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Migration from NoOpPasswordEncoder to BCryptPasswordEncoder with gradual user password updates</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Enhanced password complexity requirements through Spring Security configuration</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-factor authentication integration using Spring Security's authentication provider chain</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive audit trail enhancement through Spring Boot Actuator and Micrometer metrics integration</span>

#### 6.4.1.5 Authentication Flow Integration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">End-to-End Authentication Architecture</span>:**
```mermaid
graph TB
    subgraph "Frontend Layer"
        A[React SignOn.jsx Component<br/>Material-UI Form + Formik Validation]
    end
    
    subgraph "API Gateway Layer"
        B[Spring Cloud Gateway<br/>Request Routing + CORS + Security Headers]
    end
    
    subgraph "Authentication Service Layer"
        C[AuthenticationController<br/>/api/auth/login Endpoint]
        D[SignOnService<br/>Business Logic + Validation]
        E[UserDetailsService<br/>Spring Security Integration]
    end
    
    subgraph "Data Layer"
        F[PostgreSQL usrsec Table<br/>JPA Repository + Connection Pool]
    end
    
    subgraph "Session Layer"
        G[Redis Session Store<br/>Spring Session + JSON Serialization]
    end
    
    subgraph "Security Configuration"
        H[Spring Security Config<br/>NoOpPasswordEncoder + JWT]
    end
    
    A -->|HTTPS POST /api/auth/login| B
    B -->|Route to Authentication Service| C
    C -->|Delegate Business Logic| D
    D -->|Load User Details| E
    E -->|Query User Credentials| F
    F -->|Return UserDetails Object| E
    E -->|Authenticate Credentials| H
    H -->|Create Security Context| D
    D -->|Store Session Data| G
    D -->|Generate JWT Token| C
    C -->|Return Authentication Response| B
    B -->|Secure Response + Session Cookie| A
    
    style A fill:#e3f2fd
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#fce4ec
    style F fill:#e0f2f1
    style G fill:#fff9c4
    style H fill:#ffebee
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Component Integration Details</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**React SignOn.jsx**: Material-UI components with Formik validation, replacing 3270 terminal interaction patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Cloud Gateway**: Centralized entry point providing security headers, CORS configuration, and request routing</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**AuthenticationController**: REST endpoint mapping preserving CC00 transaction code semantics through URL path mapping</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**SignOnService**: Core authentication business logic maintaining identical validation rules and error handling from COSGN00C</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**UserDetailsService**: Spring Security standard interface providing seamless integration with authentication providers</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**PostgreSQL Integration**: JPA repositories with automatic connection management and transaction boundaries</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Redis Session Management**: Distributed session storage enabling stateless microservices while maintaining session state</span>

This modernized authentication framework provides enterprise-grade security capabilities while preserving the exact functional behavior and business logic of the original COSGN00C mainframe implementation, ensuring seamless user experience migration with enhanced scalability and maintainability.

### 6.4.2 AUTHORIZATION SYSTEM

#### 6.4.2.1 Role-Based Access Control Model (updated)

CardDemo implements a <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security-based two-tier authorization model</span> that demonstrates fundamental role-based access control principles suitable for financial transaction processing environments. The authorization framework <span style="background-color: rgba(91, 57, 243, 0.2)">maps legacy SEC-USR-TYPE values to Spring Security authorities: ROLE_ADMIN for type 'A' users and ROLE_USER for type 'U' users</span>, maintaining identical access control logic while providing modern security architecture capabilities.

**User Role Classifications:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Regular Users (ROLE_USER)**: Mapped from SEC-USR-TYPE 'U'</span> - Standard transaction processing access with restricted administrative functions
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Admin Users (ROLE_ADMIN)**: Mapped from SEC-USR-TYPE 'A'</span> - Comprehensive system access including user management and administrative operations

**Role-Based Menu Access Control (updated):**
```mermaid
graph TD
subgraph "Spring Security Authentication Gateway"
    A[AuthenticationController] --> B{SEC-USR-TYPE Check}
end

subgraph "Regular User Path (ROLE_USER)"
    B -->|Type 'U'| C[MainMenu.jsx Component]
    C --> D["/api/accounts - Account Operations"]
    C --> E["/api/transactions - Transaction History"]
    C --> F["/api/customers - Customer Inquiries"]
    C --> G["/api/cards - Card Operations"]
end

subgraph "Admin User Path (ROLE_ADMIN)"
    B -->|Type 'A'| H[AdminMenu.jsx Component]
    H --> I["/api/admin/users - User Management"]
    H --> J["/api/admin/system - System Administration"]
    H --> K[All Regular User Functions]
    
    I --> L["/api/admin/users/list - List Users"]
    I --> M["/api/admin/users/create - Add Users"]
    I --> N["/api/admin/users/update - Update Users"]
    I --> O["/api/admin/users/delete - Delete Users"]
end

style A fill:#fff3e0
style B fill:#e1f5fe
style C fill:#c8e6c9
style H fill:#ffb74d
```

**Spring Security Role Integration:**
The system preserves identical menu options and access logic while leveraging Spring Security's declarative authorization model. <span style="background-color: rgba(91, 57, 243, 0.2)">Authorization decisions continue to hinge solely on SEC-USR-TYPE with no additional privilege granularity</span>, ensuring functional parity with the legacy CICS implementation while providing enhanced security capabilities through modern framework integration.

#### 6.4.2.2 Permission Management Framework (updated)

The system implements granular permission controls through <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security's multi-layered authorization architecture, replacing program-level authorization checking with declarative security annotations and HTTP filter chain enforcement</span> integrated with business logic components.

**Access Control Enforcement Points (updated):**
| Control Level | Implementation | Components Affected | Security Validation |
|---------------|----------------|---------------------|---------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">HTTP Filter Chain</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security FilterSecurityInterceptor</span> | All REST endpoints | Request-level authorization before controller access |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Service Method Level</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">@PreAuthorize annotations</span> | All business service methods | Function entry authorization with Spring EL expressions |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Data Level</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL row-level security</span> | Sensitive data operations | Read/write/update/delete control with database policies |
| Field Level | Application logic restrictions | Sensitive data services | PII and financial data protection |

**Authorization Decision Flow (updated):**
```mermaid
flowchart LR
A[HTTP Request] --> B[Spring Security Filter Chain]
B --> C[Extract Authentication from Session]
C --> D[Spring Security Decision Manager]
D --> E{Authorization Check}

E -->|Admin Required| F{"hasRole('ROLE_ADMIN')?"}
E -->|Regular User| G{"hasRole('ROLE_USER') or hasRole('ROLE_ADMIN')?"}

F -->|Yes| H[Grant Admin Access]
F -->|No| I[Access Denied Exception]
G -->|Yes| J[Grant User Access]
G -->|No| I

H --> K[Execute Service Method]
J --> K
I --> L[Return 403 Forbidden]

style D fill:#fff3e0
style F fill:#ffb74d
style G fill:#c8e6c9
style I fill:#ffcdd2
```

**Service-Level Authorization Configuration:**
The framework implements declarative security through <span style="background-color: rgba(91, 57, 243, 0.2)">@PreAuthorize annotations on service methods</span>, providing fine-grained access control that maintains the exact authorization logic while leveraging Spring Security's expression language capabilities:

```java
// Admin-only operations
@PreAuthorize("hasRole('ROLE_ADMIN')")
public UserResponse createUser(UserRequest request) { }

@PreAuthorize("hasRole('ROLE_ADMIN')")
public UserResponse updateUser(String userId, UserRequest request) { }

// User and Admin operations
@PreAuthorize("hasRole('ROLE_USER') or hasRole('ROLE_ADMIN')")
public AccountResponse getAccountDetails(String accountId) { }

@PreAuthorize("hasRole('ROLE_USER') or hasRole('ROLE_ADMIN')")
public List<TransactionResponse> getTransactionHistory(String accountId) { }
```

#### 6.4.2.3 Audit Logging and Compliance (updated)

**Transaction-Level Audit Trail (updated):**
The system maintains comprehensive audit capabilities through <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot's logging infrastructure and PostgreSQL audit tables</span>, aligned with regulatory requirements for financial transaction processing while providing enhanced visibility and compliance reporting capabilities.

**Audit Data Sources (updated):**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Security Event Logs**: Authentication and authorization events with detailed security context information</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Boot Request Logs**: HTTP request/response logging with user identification and endpoint tracking</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**PostgreSQL Audit Tables**: Database-level transaction logs with row-level change tracking and timestamp precision</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Application Service Logs**: Business logic audit trails through SLF4J with structured logging patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Redis Session Events**: Session lifecycle monitoring with creation, modification, and expiration tracking</span>

**Compliance Monitoring Framework (updated):**
```mermaid
graph TD
    subgraph "Audit Data Collection"
        A[Spring Security Authentication Events] --> B[Centralized Audit Store]
        C[REST API Transaction Processing] --> B
        C2[PostgreSQL Data Access Operations] --> B
        D[Administrative Actions via @PreAuthorize] --> B
        E[Error and Security Exception Events] --> B
        F[Session Management Events] --> B
    end
    
    subgraph "Audit Analysis"
        B --> G[Spring Boot Actuator Metrics]
        B --> H[PostgreSQL Audit Query Views]
        B --> I[Security Event Correlation Engine]
    end
    
    subgraph "Compliance Reporting"
        G --> J[Performance and Access Reports]
        H --> K[Data Access Security Reports]
        I --> L[Security Exception Reports]
        
        J --> M[Regulatory Compliance Dashboard]
        K --> M
        L --> M
    end
    
    style B fill:#fff3e0
    style M fill:#c8e6c9
```

**Spring Security Audit Integration:**
The audit framework leverages <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security's built-in event publishing mechanism combined with custom ApplicationListener implementations</span> to capture comprehensive security events:

- **Authentication Events**: Login success/failure with user identity and timestamp precision
- **Authorization Events**: Access granted/denied decisions with role and resource context
- **Session Events**: Session creation, invalidation, and timeout tracking through Spring Session Redis
- **Method-Level Security**: @PreAuthorize evaluation results with expression details and decision rationale
- **Data Access Tracking**: PostgreSQL audit triggers capturing row-level changes with user attribution

**Regulatory Compliance Features:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Immutable Audit Trail**: PostgreSQL append-only audit tables with cryptographic integrity validation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Real-Time Monitoring**: Spring Boot Actuator endpoints providing security metrics and health status</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Automated Compliance Reporting**: Scheduled jobs generating security reports with role-based access summaries</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Exception Handling Audit**: Security exceptions logged with full context for forensic analysis and compliance review</span>

### 6.4.3 DATA PROTECTION

#### 6.4.3.1 Encryption Standards and Implementation

CardDemo's data protection strategy leverages <span style="background-color: rgba(91, 57, 243, 0.2)">modern cloud-native security capabilities combined with Spring Security integration</span> for comprehensive data security aligned with enterprise standards in the containerized PostgreSQL environment.

**Encryption Framework:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database-Level Encryption</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL cluster-level or storage provider encryption for data at rest with no application changes introduced</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Encryption</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">HTTPS/TLS for secure communication between React SPA, Spring Cloud Gateway, and Spring Boot services</span>
- **Field-Level Protection**: Application-level masking for sensitive data elements (SSN, card numbers) maintained through existing logic
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Key Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Database encryption keys managed by cloud provider or Kubernetes Secrets</span>

**Data Classification and Protection Matrix:**
| Data Category | Sensitivity Level | Protection Method | Compliance Standard |
|---------------|------------------|-------------------|-------------------|
| Customer SSN | Highly Sensitive | Field masking + <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security protection</span> | PCI DSS |
| Credit Card Numbers | Highly Sensitive | Application masking + <span style="background-color: rgba(91, 57, 243, 0.2)">cluster-level encryption</span> | PCI DSS 3.2 |
| User Passwords | Sensitive | Plain text (enhancement opportunity) | Enterprise policy |
| Transaction Data | Regulated | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL integrity + audit logging</span> | SOX compliance |
| Administrative Data | Internal | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security access control</span> | Corporate governance |

#### 6.4.3.2 Key Management Architecture (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Key Management</span>:**
The system leverages enterprise-grade key management through <span style="background-color: rgba(91, 57, 243, 0.2)">cloud provider managed services and Kubernetes native security</span>:

```mermaid
graph TD
    subgraph "Cloud-Native Key Management"
        A[Cloud Provider Key Management] --> B[Database Encryption Keys]
        A --> C[Application Secrets]
        A --> D[TLS Certificate Management]
    end
    
    subgraph "Kubernetes Integration"
        E[Kubernetes Secrets] --> A
        F[Service Mesh TLS] --> A
        G[ConfigMap Security] --> A
    end
    
    subgraph "Application Integration"
        H[PostgreSQL Cluster Encryption] --> A
        I[Spring Boot Security Context] --> A
        J[Redis Session Encryption] --> A
    end
    
    subgraph "Security Controls"
        B --> K[Automated Key Rotation]
        C --> L[Secret Versioning]
        D --> M[Certificate Lifecycle Management]
    end
    
    style A fill:#fff3e0
    style K fill:#ffb74d
    style L fill:#c8e6c9
```

#### 6.4.3.3 Secure Communication Framework (updated)

**Network Security Architecture:**
The system implements multiple layers of communication security appropriate for <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native containerized transaction processing environments</span>:

**Communication Security Controls:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">HTTPS/TLS Encryption</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">End-to-end TLS encryption for all HTTP communications between React frontend, Spring Cloud Gateway, and Spring Boot backend services</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Mutual TLS for Internal Services</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Service-to-service communication secured through Kubernetes ingress with mutual TLS configuration providing no behavioral impact on application functionality</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JWT-based authentication and authorization with session management through Redis</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Security</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL connection security with SSL/TLS encrypted client connections and connection pooling through HikariCP</span>

#### 6.4.3.4 Data Protection Implementation (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Encryption at Rest Implementation</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Cluster Encryption</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Data at rest protection handled transparently by PostgreSQL cluster-level encryption or underlying storage provider encryption mechanisms with no application code modifications required</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Persistent Volume Encryption</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Database storage volumes encrypted using cloud provider storage-level encryption services</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Encryption</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session data encrypted in transit and at rest through Redis cluster configuration</span>

**Encryption in Transit:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">API Gateway TLS Termination</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway handles TLS termination with certificate management through Kubernetes ingress controllers</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Internal Service Mesh</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes service mesh provides automatic TLS for pod-to-pod communications with certificate rotation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Connections</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL JDBC connections encrypted with SSL/TLS configuration in Spring Boot datasource properties</span>

**Field-Level Data Masking (preserved):**
- **SSN Masking**: Existing application-level masking logic preserved showing only last 4 digits (XXX-XX-1234) in REST API responses
- **Credit Card Masking**: Current field masking implementation maintained displaying only last 4 digits (****-****-****-1234) for PCI compliance
- **Password Storage**: Plain-text password storage retained as enhancement opportunity with no new cryptographic algorithms introduced
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Data Transformation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Sensitive data masking implemented through Spring Boot service layer with conditional field visibility based on user authorization levels</span>

#### 6.4.3.5 Compliance and Audit Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Security Monitoring</span>:**

| Security Domain | <span style="background-color: rgba(91, 57, 243, 0.2)">Implementation Method</span> | Monitoring Approach | Compliance Integration |
|-----------------|---------------------|-------------------|----------------------|
| Data Encryption | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL cluster + storage provider</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator health checks</span> | PCI DSS validation |
| Network Security | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes ingress TLS + service mesh</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Istio security dashboards</span> | Network compliance audits |
| Access Control | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security + JWT</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Security event logging to ELK stack</span> | Access audit trails |
| Data Masking | Existing application logic | <span style="background-color: rgba(91, 57, 243, 0.2)">API response validation</span> | Data privacy compliance |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Security Event Integration</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Security Context</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Pod security policies and network policies enforced at runtime with comprehensive logging</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Audit Events</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication and authorization events captured through Spring Security context and forwarded to centralized logging infrastructure</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Audit Logging</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Database access patterns monitored through pgAudit extension with integration to compliance reporting systems</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Monitoring</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session creation, modification, and expiration events tracked for security analysis and user behavior monitoring</span>

#### 6.4.3.6 Data Protection Architecture Summary (updated)

The modernized data protection architecture provides equivalent security to the original mainframe implementation while leveraging cloud-native capabilities:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Key Architectural Changes</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Replaced z/OS transparent dataset encryption with PostgreSQL cluster-level and storage provider encryption</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Migrated from TN3270/SNA network security to HTTPS/TLS with Kubernetes service mesh</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Transitioned from ICSF key management to cloud provider and Kubernetes Secrets management</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Integrated Spring Security framework for comprehensive authentication and authorization</span>

**Preserved Security Controls:**
- Existing field-level masking logic for sensitive data (SSN, credit card numbers)
- Current plain-text password storage approach maintained as documented enhancement opportunity
- Identical data classification and protection levels for regulatory compliance
- No new cryptographic algorithms introduced to maintain minimal change approach

**<span style="background-color: rgba(91, 57, 243, 0.2)">Enhanced Capabilities</span>:**
- <span style="background-color: rgba(91, 57, 243, 0.2)">Automated key rotation and certificate lifecycle management through cloud provider services</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive security event integration with centralized logging and monitoring infrastructure</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Horizontal scaling capabilities for security services through Kubernetes orchestration</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Zero-downtime certificate updates and security policy modifications</span>

### 6.4.4 RACF INTEGRATION ARCHITECTURE

#### 6.4.4.1 <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Integration (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">CardDemo demonstrates comprehensive integration with Spring Security 6.2.x framework, providing enterprise-grade security management aligned with modern cloud-native security best practices</span>. This integration framework replaces the legacy RACF security model with a modern, scalable authentication and authorization system that maintains identical functional behavior while providing enhanced capabilities for containerized environments.

<span style="background-color: rgba(91, 57, 243, 0.2)">As mandated by Summary 0.1.1 "Security framework migration from RACF to Spring Security" and Summary 0.2.2 Backend & Gateway components, the system implements comprehensive Spring Security integration patterns</span> that serve as reference implementations for enterprise mainframe-to-cloud security modernization initiatives.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Integration Points</span>:**
```mermaid
graph TD
subgraph "Spring Security Framework"
    A["UserDetailsService Integration"] --> B["CardDemo Authentication"]
    C["PostgreSQL Security Tables"] --> D["Database Access Control"]
    E["Role-Based Access Control"] --> F["Method Authorization"]
    G["Spring Security Events"] --> H["Audit Logging"]
end

subgraph "CardDemo Security Components"
    B --> I["FilterChainProxy Integration"]
    D --> J["JPA Security Context"]
    F --> K["@PreAuthorize Annotations"]
    H --> L["Event Publishing"]
end

subgraph "Security Policy Enforcement"
    I --> M["JWT Authentication"]
    J --> N["Data Classification"]
    K --> O["Method Security"]
    L --> P["Compliance Monitoring"]
end

style A fill:#fff3e0
style B fill:#e1f5fe
style H fill:#c8e6c9
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Core Spring Security Components</span>:**

- **<span style="background-color: rgba(91, 57, 243, 0.2)">FilterChainProxy</span>**: Servlet filter chain proxy providing comprehensive HTTP request security processing with authentication, authorization, and cross-cutting security concerns management
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JwtAuthenticationFilter</span>**: Custom authentication filter integrated with Spring Cloud Gateway for JWT token validation and security context establishment across microservices boundaries
- **<span style="background-color: rgba(91, 57, 243, 0.2)">UserDetailsService</span>**: Spring Security standard interface implementation providing PostgreSQL-backed user credential verification and authority management through JPA repository integration
- **<span style="background-color: rgba(91, 57, 243, 0.2)">SecurityContextHolder</span>**: Thread-local security context management enabling authentication and authorization state propagation across Spring Boot service method invocations
- **<span style="background-color: rgba(91, 57, 243, 0.2)">MethodSecurityInterceptor</span>**: AOP-based method-level security enforcement through @PreAuthorize annotations with Spring Expression Language (SpEL) evaluation

#### 6.4.4.2 <span style="background-color: rgba(91, 57, 243, 0.2)">Database-Level Security Controls (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Table Privileges and Role Management</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Each CardDemo PostgreSQL table operates under comprehensive role-based privilege control supporting the principle of least privilege through database-level security enforcement</span>:

| Table Name | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Schema</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ROLE_ADMIN Privileges</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ROLE_USER Privileges</span> |
|------------|----------|------------|----------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">usrsec</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo.usrsec</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT, INSERT, UPDATE, DELETE</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT (own record only)</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">custdat</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo.customer</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT, INSERT, UPDATE</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT, UPDATE (limited fields)</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">acctdat</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo.account</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT, INSERT, UPDATE</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT, UPDATE (balance inquiry)</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">carddat</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo.card</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT, INSERT, UPDATE, DELETE</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT, UPDATE (status changes)</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">transact</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo.transaction</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT, INSERT, UPDATE, DELETE</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT, INSERT (transaction posting)</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Secret-Based Credential Management</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Database connection credentials and application secrets are managed through Kubernetes native secret management with automatic rotation capabilities</span>:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Connection Secrets</span>**: PostgreSQL connection strings, usernames, and passwords stored as Kubernetes secrets with base64 encoding and RBAC access control
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JWT Signing Keys</span>**: JWT token signing and verification keys managed through Kubernetes secret rotation with automated key rollover capabilities
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Authentication</span>**: Redis cluster authentication tokens and connection parameters secured through container environment variable injection from Kubernetes secrets
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Application Configuration</span>**: Sensitive configuration properties including encryption keys and API tokens managed through Spring Cloud Config integration with Kubernetes secret backends

**<span style="background-color: rgba(91, 57, 243, 0.2)">Role-Level Data Access Controls</span>:**
Spring Security authorization integrates seamlessly with PostgreSQL row-level security policies and JPA repository method-level access control:

```java
// Admin-only database operations
@PreAuthorize("hasRole('ROLE_ADMIN')")
public List<UserSecurityEntity> getAllUsers() {
    return userRepository.findAll(); // Full table access
}

// User-level restricted access
@PreAuthorize("hasRole('ROLE_USER') and #userId == authentication.name")
public UserSecurityEntity getUserProfile(String userId) {
    return userRepository.findBySecUsrId(userId); // Own record only
}
```

#### 6.4.4.3 <span style="background-color: rgba(91, 57, 243, 0.2)">Security Policy Enforcement (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Multi-Layer Authorization Framework</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security provides comprehensive security policy enforcement through declarative annotations and method-level access control</span>:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">@RolesAllowed Integration</span>**: Jakarta EE-standard role-based authorization annotations integrated with Spring Security's role hierarchy for fine-grained access control across service methods
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Method Security Configuration</span>**: @EnableMethodSecurity annotation enables comprehensive method-level security with @PreAuthorize, @PostAuthorize, and @Secured annotations for declarative authorization policies
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Event Publishing</span>**: Automatic security event publication through ApplicationEventPublisher for authentication success/failure, authorization decisions, and session lifecycle management
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Custom Security Expressions</span>**: Spring Expression Language (SpEL) integration enabling complex authorization rules with access to authentication context, request parameters, and domain objects

**<span style="background-color: rgba(91, 57, 243, 0.2)">Method-Level Security Implementation</span>:**

```java
@Service
@EnableMethodSecurity(prePostEnabled = true)
public class AdminUserService {
    
    @RolesAllowed("ROLE_ADMIN")
    @PreAuthorize("hasAuthority('ADMIN_USER_MANAGEMENT')")
    public UserResponse createUser(UserRequest request) {
        // Admin-only user creation logic
    }
    
    @PreAuthorize("hasRole('ROLE_USER') or hasRole('ROLE_ADMIN')")
    public AccountResponse getAccountDetails(String accountId) {
        // Multi-role account access
    }
    
    @PostAuthorize("returnObject.userId == authentication.name or hasRole('ROLE_ADMIN')")
    public UserProfile getUserProfile(String userId) {
        // Self-access or admin override
    }
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Event Publishing and Audit Integration</span>:**

<span style="background-color: rgba(91, 57, 243, 0.2)">The system implements comprehensive audit trail capabilities through Spring Security's event publishing mechanism combined with custom ApplicationListener implementations</span>:

| Event Type | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Event</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Audit Implementation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Storage Destination</span> |
|------------|----------|----------|----------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication Success</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">AuthenticationSuccessEvent</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Custom AuthenticationSuccessListener</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL audit_log table</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication Failure</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">AbstractAuthenticationFailureEvent</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SecurityFailureAuditListener</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Security incident logging</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Authorization Failure</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">AuthorizationDeniedEvent</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">AccessDeniedAuditHandler</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Compliance audit trail</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">Session Creation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SessionCreationEvent</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session Redis integration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Session lifecycle tracking</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Security Policy Features</span>:**

<span style="background-color: rgba(91, 57, 243, 0.2)">The modernized security architecture provides enhanced capabilities beyond traditional RACF functionality</span>:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic Authorization</span>**: Spring Security expressions enable runtime authorization decisions based on request context, user attributes, and business data conditions
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Method Security Caching</span>**: Authorization decision caching through Spring Cache abstraction improves performance while maintaining security integrity
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Context Propagation</span>**: Automatic security context propagation across @Async method calls and Spring Boot service boundaries
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive Audit Trail</span>**: Real-time security event streaming to enterprise SIEM systems through Spring Boot Actuator and Micrometer metrics integration

**<span style="background-color: rgba(91, 57, 243, 0.2)">Security Policy Configuration</span>:**

```java
@Configuration
@EnableMethodSecurity(prePostEnabled = true, jsr250Enabled = true)
public class SecurityMethodConfig {
    
    @EventListener
    public void handleAuthenticationSuccess(AuthenticationSuccessEvent event) {
        // Custom audit logging for successful authentication
        auditService.logSecurityEvent("AUTH_SUCCESS", 
                                     event.getAuthentication().getName());
    }
    
    @EventListener  
    public void handleAuthorizationFailure(AuthorizationDeniedEvent event) {
        // Security incident tracking and compliance reporting
        securityIncidentService.recordUnauthorizedAccess(event);
    }
    
    @Bean
    public MethodSecurityExpressionHandler methodSecurityExpressionHandler() {
        // Custom security expression handler for business logic integration
        return new CustomMethodSecurityExpressionHandler();
    }
}
```

<span style="background-color: rgba(91, 57, 243, 0.2)">This comprehensive Spring Security integration architecture provides equivalent functionality to the original RACF implementation while delivering enhanced security capabilities, improved audit trail management, and modern cloud-native security patterns. The architecture maintains strict compliance with enterprise security requirements while leveraging Spring Security's extensive ecosystem for advanced authentication, authorization, and monitoring capabilities</span>.

### 6.4.5 SECURITY MONITORING AND INCIDENT RESPONSE

#### 6.4.5.1 Security Event Monitoring (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Security Monitoring</span>:**
The system implements comprehensive security monitoring through <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator health endpoints, Micrometer metrics collection, and Spring Security event listeners integrated with a centralized monitoring stack</span>. This modern approach replaces traditional mainframe monitoring with scalable, container-native observability patterns.

```mermaid
flowchart TD
    subgraph "Security Event Sources"
        A[Authentication Failures] --> B[Spring Security Event Processor]
        C[Authorization Violations] --> B
        D["Container Runtime Logs"] --> B
        E[System Anomalies] --> B
        F[Configuration Changes] --> B
        G["Kubernetes Audit Events"] --> B
    end
    
    subgraph "Event Processing"
        B --> H["Spring Boot Application"]
        H --> I["Actuator Health Endpoints"]
        H --> J["Micrometer Metrics"]
        H --> K["Spring Security Event Listeners"]
    end
    
    subgraph "Monitoring Service"
        I --> L["Prometheus Metrics Collection"]
        J --> L
        K --> L
        L --> M["Grafana Dashboards"]
    end
    
    subgraph "Response Actions"
        M --> N[Real-Time Alerting]
        L --> O[Alert Manager]
        O --> P[Security Team Notification]
        
        N --> Q[Incident Documentation]
        P --> R[Automated Response Actions]
        Q --> S[Compliance Reporting]
    end
    
    style B fill:#fff3e0
    style H fill:#e3f2fd
    style L fill:#ffcdd2
    style P fill:#ff5252
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator Integration</span>:**
The monitoring framework leverages Spring Boot Actuator's production-ready features to provide comprehensive application health and security monitoring:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Health Endpoints</span>**: `/actuator/health` provides real-time application status including database connectivity, Redis session store health, and security subsystem status
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Metrics</span>**: Custom Micrometer metrics track authentication success/failure rates, authorization decision patterns, and session lifecycle events
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Audit Events</span>**: `/actuator/auditevents` endpoint exposes security-related events for integration with external monitoring systems
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Thread Dump Analysis</span>**: `/actuator/threaddump` enables performance analysis and security thread monitoring for incident investigation

**<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Metrics Framework</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer integration with Prometheus registry provides detailed application and security metrics collection</span>:

| Metric Category | Metric Name | Description | Alert Threshold |
|-----------------|-------------|-------------|-----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication</span>** | `spring.security.authentication.success` | Successful authentication events | N/A |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication</span>** | `spring.security.authentication.failure` | Failed authentication attempts | >5 failures/minute |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Authorization</span>** | `spring.security.authorization.denied` | Access denied events | >10 denials/minute |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Management</span>** | `spring.session.events.created` | New session creation rate | >100 sessions/minute |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Security</span>** | `container.security.violations` | Container runtime security violations | Any violation |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Event Listeners</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Custom ApplicationListener implementations capture comprehensive security events and publish them to the centralized monitoring stack</span>:

```java
@Component
public class SecurityEventMonitoringListener {
    
    @EventListener
    public void handleAuthenticationSuccess(AuthenticationSuccessEvent event) {
        meterRegistry.counter("security.authentication.success",
            "user", event.getAuthentication().getName()).increment();
        publishToMonitoringStack(event);
    }
    
    @EventListener
    public void handleAuthorizationFailure(AuthorizationDeniedEvent event) {
        meterRegistry.counter("security.authorization.denied",
            "endpoint", event.getRequestUrl()).increment();
        alertManager.sendSecurityAlert(event);
    }
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Container Runtime and Kubernetes Integration</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Security monitoring extends to the container infrastructure layer with comprehensive Kubernetes audit logging and container runtime security events</span>:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Audit Events</span>**: Cluster-level security events including pod creation, service account usage, RBAC violations, and network policy enforcement
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Runtime Logs</span>**: Docker and containerd security events including privilege escalation attempts, resource constraint violations, and container escape detection
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Pod Security Standard Monitoring</span>**: Real-time monitoring of Pod Security Standard compliance with automatic violation detection and remediation
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Policy Violations</span>**: Detection and logging of unauthorized network communication attempts between containers and external systems

#### 6.4.5.2 Incident Response Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Incident Response Architecture</span>:**
The incident response framework leverages modern cloud-native patterns and automation to provide rapid detection, analysis, and response to security incidents within the containerized environment.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Detection and Alerting</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Alert Manager integration provides intelligent alerting with context-aware incident classification and automated response triggers</span>:

```yaml
groups:
- name: carddemo-security
  rules:
  - alert: HighAuthenticationFailures
    expr: increase(spring_security_authentication_failure_total[5m]) > 10
    for: 2m
    labels:
      severity: warning
      component: authentication
    annotations:
      summary: "High authentication failure rate detected"
      description: "{{ $value }} authentication failures in the last 5 minutes"
  
  - alert: AuthorizationViolationSpike
    expr: increase(spring_security_authorization_denied_total[1m]) > 5
    for: 1m
    labels:
      severity: critical
      component: authorization
    annotations:
      summary: "Authorization violation spike detected"
      description: "Potential security breach - multiple authorization denials"
```

**Incident Classification and Escalation:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Level 1 - Informational</span>**: Normal security events logged for audit and compliance purposes
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Level 2 - Warning</span>**: Unusual patterns requiring investigation (e.g., repeated authentication failures)
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Level 3 - Critical</span>**: Active security threats requiring immediate response (e.g., authorization bypass attempts)
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Level 4 - Emergency</span>**: System compromise or data breach requiring immediate containment

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Response Actions</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes-native response automation enables rapid incident containment and system protection</span>:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Account Lockout</span>**: Automatic session invalidation through Redis and JWT token revocation for compromised accounts
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Isolation</span>**: Network policy enforcement to isolate compromised pods from cluster resources
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Traffic Blocking</span>**: Ingress controller rules to block malicious IP addresses and request patterns
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Pod Termination</span>**: Automatic termination and recreation of compromised containers with clean state

#### 6.4.5.3 Security Assessment and Penetration Testing (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Security Validation Framework</span>:**
The security assessment approach embraces modern cloud-native testing methodologies and containerized application security evaluation, <span style="background-color: rgba(91, 57, 243, 0.2)">replacing traditional mainframe penetration testing with comprehensive Spring Boot and Kubernetes security validation</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Application Security Testing</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">REST API Security Assessment</span>**: Comprehensive evaluation of 24 REST endpoints with authentication bypass testing, authorization matrix validation, and input validation fuzzing
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Configuration Testing</span>**: Analysis of security filter chains, method-level security annotations, and JWT token validation mechanisms
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Management Validation</span>**: Redis session store security testing including session fixation, hijacking, and privilege escalation scenarios
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Security Assessment</span>**: PostgreSQL access control validation, SQL injection testing, and data protection verification

**<span style="background-color: rgba(91, 57, 243, 0.2)">Container and Kubernetes Security Testing</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Escape Testing</span>**: Evaluation of container runtime security with privilege escalation and namespace isolation bypass attempts
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes RBAC Validation</span>**: Testing of role-based access controls, service account permissions, and cluster-level authorization policies
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Policy Testing</span>**: Validation of pod-to-pod communication restrictions and ingress/egress traffic controls
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Secret Management Assessment</span>**: Testing of Kubernetes Secrets encryption, access controls, and rotation mechanisms

**Continuous Security Monitoring Integration:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Ongoing security validation through automated scanning and monitoring integrated with the CI/CD pipeline and runtime security controls</span>:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Vulnerability Scanning</span>**: Container image scanning integrated with build pipelines and registry security
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Runtime Security Monitoring</span>**: Continuous behavioral analysis and anomaly detection through Prometheus metrics and Spring Security events
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Compliance Validation</span>**: Automated compliance checking against security benchmarks and regulatory requirements
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Dashboard Integration</span>**: Real-time security posture visibility through Grafana dashboards with comprehensive metrics and alerting

#### 6.4.5.4 Monitoring Stack Integration Architecture (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Centralized Monitoring and Observability Platform</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">The security monitoring framework integrates seamlessly with the enterprise observability stack, providing comprehensive visibility across application, infrastructure, and security domains</span>.

```mermaid
graph TB
    subgraph "CardDemo Application Layer"
        A[Spring Boot Services] --> B[Actuator Endpoints]
        A --> C[Micrometer Metrics]
        A --> D[Spring Security Events]
        A --> E[Application Logs]
    end
    
    subgraph "Infrastructure Layer"
        F[Kubernetes Audit Logs] --> G[Container Runtime Events]
        H[Network Policy Violations] --> G
        I[Pod Security Events] --> G
    end
    
    subgraph "Monitoring Collection"
        B --> J[Prometheus Server]
        C --> J
        D --> J
        E --> K[ELK Stack]
        G --> K
        F --> L[Audit Log Aggregator]
    end
    
    subgraph "Analysis and Alerting"
        J --> M[Grafana Dashboards]
        K --> N[Kibana Security Analytics]
        L --> O[Compliance Reporting]
        J --> P[Alert Manager]
    end
    
    subgraph "Response and Notification"
        P --> Q[Security Team Notifications]
        M --> R[Executive Dashboards]
        N --> S[Incident Response System]
        O --> T[Regulatory Reporting]
    end
    
    style J fill:#fff3e0
    style K fill:#e3f2fd
    style P fill:#ffcdd2
    style Q fill:#ff5252
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Security Metrics and KPIs</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive security metrics collection enabling proactive security posture management and compliance reporting</span>:

| Metric Domain | Key Indicators | Collection Method | Alert Conditions |
|---------------|----------------|-------------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication Security</span>** | Success rate, failure patterns, session duration | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Event Listeners</span> | >5% failure rate |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Authorization Control</span>** | Access denials, privilege escalation attempts | <span style="background-color: rgba(91, 57, 243, 0.2)">Method Security Interceptors</span> | Any escalation attempt |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Security</span>** | Runtime violations, escape attempts | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Audit Events</span> | Any security violation |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Security</span>** | Policy violations, unauthorized connections | <span style="background-color: rgba(91, 57, 243, 0.2)">Network Policy Logs</span> | Unauthorized egress traffic |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Access</span>** | Sensitive data queries, unauthorized access | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Audit Logs</span> | PII access outside hours |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Real-Time Security Dashboard Configuration</span>:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Grafana security dashboards provide real-time visibility into security posture with executive-level reporting and operational drill-down capabilities</span>:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Executive Security Overview</span>**: High-level security metrics, compliance status, and risk indicators for leadership visibility
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Operational Security Dashboard</span>**: Real-time incident tracking, active threats, and response status for security operations teams
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Application Security Metrics</span>**: Detailed Spring Boot application security status, authentication patterns, and authorization trends
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Infrastructure Security Status</span>**: Kubernetes cluster security posture, container compliance, and network security enforcement

**Incident Response Integration:**
<span style="background-color: rgba(91, 57, 243, 0.2)">Seamless integration between monitoring, alerting, and automated response systems enables rapid incident detection and containment with comprehensive audit trails for regulatory compliance and forensic analysis</span>.

### 6.4.6 SECURITY COMPLIANCE AND GOVERNANCE

#### 6.4.6.1 Regulatory Compliance Framework (updated)

**Financial Services Compliance:**
CardDemo's security architecture supports multiple regulatory compliance requirements essential for financial transaction processing:

| Compliance Standard | Applicable Controls | Implementation Status | Validation Method |
|-------------------|-------------------|---------------------|------------------|
| PCI DSS | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security authentication, PostgreSQL data protection</span> | Partial - encryption gaps identified | Annual assessment |
| SOX | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot transaction integrity, PostgreSQL audit logging</span> | Implemented | Internal audit |
| GDPR | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security data access control, PostgreSQL privacy controls</span> | Framework ready | Privacy impact assessment |
| Banking Regulations | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL 7-year retention, Spring Boot audit trail</span> | Implemented | Regulatory examination |

#### 6.4.6.2 Security Risk Assessment (updated)

**Current Security Posture:**
```mermaid
graph TD
subgraph "Security Strengths"
    A["Spring Security Integration"] --> B["Enterprise Authentication"]
    C["PostgreSQL Audit Logging"] --> D["Compliance Support"]
    E["Spring Boot Role-Based Access"] --> F["Authorization Control"]
    G["PostgreSQL Data Integrity"] --> H["Transaction Protection"]
end

subgraph "Enhancement Opportunities"
    I["Password Encryption"] --> J["Credential Protection"]
    K["Multi-Factor Authentication"] --> L["Enhanced Authentication"]
    M["Spring Configuration Exposure"] --> N["Configuration Security"]
    O["Container Image Vulnerabilities"] --> P["Container Hardening"]
end

subgraph "Risk Mitigation"
    B --> Q["Continuous Improvement"]
    D --> Q
    F --> Q
    H --> Q
    J --> Q
    L --> Q
    N --> Q
    P --> Q
end

style Q fill:#c8e6c9
style I fill:#ffb74d
style K fill:#ffb74d
style M fill:#ffb74d
style O fill:#ffb74d
```

**Security Enhancement Roadmap:**
Based on contemporary security requirements and identified <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot and containerized security risks</span>, the following improvements align with modern security standards:

1. **Authentication Enhancements**: Implementation of password hashing and multi-factor authentication capabilities
2. **Communication Security**: Mandatory encryption for all network communications
3. **Access Control Modernization**: Enhanced <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security configurations</span> and privilege management
4. **Security Monitoring**: Real-time threat detection and automated response capabilities

#### 6.4.6.3 Security Control Implementation Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Control Mapping</span>:**
The modernized security architecture implements comprehensive controls through Spring Security framework integration, providing enterprise-grade security management while maintaining regulatory compliance requirements.

**Core Security Controls:**

| Control Category | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Implementation</span> | Regulatory Alignment | Enhancement Status |
|------------------|-------------------|---------------------|-------------------|
| **Authentication Controls** | <span style="background-color: rgba(91, 57, 243, 0.2)">UserDetailsService with PostgreSQL backend</span> | PCI DSS Section 8 | Active |
| **Authorization Controls** | <span style="background-color: rgba(91, 57, 243, 0.2)">@PreAuthorize annotations with role hierarchy</span> | SOX Access Management | Active |
| **Session Management** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session Redis with JWT integration</span> | GDPR Session Control | Active |
| **Audit Logging** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Event Listeners with PostgreSQL storage</span> | Banking Regulations | Active |

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Data Protection Controls</span>:**
The database layer provides comprehensive data protection aligned with financial services regulatory requirements:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Role-Based Database Access</span>**: PostgreSQL user roles mapped to Spring Security authorities with table-level privilege enforcement
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Integrity</span>**: ACID compliance through PostgreSQL transaction boundaries managed by Spring @Transactional annotations
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Audit Trail Management</span>**: Comprehensive audit logging through PostgreSQL triggers and Spring Boot application logging
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Encryption</span>**: Cluster-level encryption with cloud provider key management integration

#### 6.4.6.4 Governance Framework Architecture (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Security Governance</span>:**
The security governance framework leverages modern cloud-native patterns to provide comprehensive oversight and control of security policies across the containerized application environment.

**Governance Components:**

```mermaid
graph TD
subgraph "Policy Management Layer"
    A["Spring Security Configuration"] --> B["Authentication Policies"]
    A --> C["Authorization Rules"]
    A --> D["Session Management Policies"]
end

subgraph "Enforcement Layer"
    B --> E["Spring Cloud Gateway Filters"]
    C --> F["Method-Level Security"]
    D --> G["Redis Session Store"]
end

subgraph "Monitoring Layer"
    E --> H["Spring Boot Actuator"]
    F --> H
    G --> H
    H --> I["Prometheus Metrics"]
    I --> J["Grafana Dashboards"]
end

subgraph "Compliance Reporting"
    J --> K["Regulatory Compliance Reports"]
    J --> L["Security Posture Assessment"]
    J --> M["Risk Management Dashboard"]
end

style A fill:#fff3e0
style H fill:#e3f2fd
style I fill:#c8e6c9
style K fill:#ffcdd2
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Security Governance</span>:**
Container orchestration security governance through Kubernetes native security controls:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Pod Security Standards</span>**: Enforcement of security policies at the container runtime level with comprehensive compliance monitoring
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Policy Governance</span>**: Declarative network security policies controlling pod-to-pod communications and external access patterns
- **<span style="background-color: rgba(91, 57, 243, 0.2)">RBAC Integration</span>**: Kubernetes Role-Based Access Control synchronized with Spring Security authorities for comprehensive access management
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Secret Management</span>**: Centralized secrets management through Kubernetes native capabilities with automatic rotation and audit trails

#### 6.4.6.5 Compliance Monitoring and Reporting (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Compliance Validation</span>:**
The system implements continuous compliance monitoring through automated validation of security controls aligned with regulatory requirements:

**Real-Time Compliance Monitoring:**

| Compliance Domain | Monitoring Method | <span style="background-color: rgba(91, 57, 243, 0.2)">Technology Implementation</span> | Reporting Frequency |
|-------------------|-------------------|-------------------|---------------------|
| **Access Control Compliance** | Authentication/Authorization events | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Event Listeners</span> | Real-time |
| **Data Protection Compliance** | Database access patterns | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL audit logs + Spring Boot monitoring</span> | Daily |
| **Session Management Compliance** | Session lifecycle tracking | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis session events + Spring Session monitoring</span> | Continuous |
| **Infrastructure Compliance** | Container security posture | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes audit logs + Pod Security Standards</span> | Hourly |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator Integration for Compliance</span>:**
Comprehensive compliance reporting through Spring Boot's production-ready monitoring capabilities:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Health Indicators</span>**: Custom health indicators for security subsystem status and compliance posture assessment
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Audit Events Endpoint</span>**: `/actuator/auditevents` providing comprehensive security event history for compliance reporting
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Metrics Endpoint</span>**: `/actuator/metrics` exposing security-related metrics for automated compliance validation
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Info Endpoint</span>**: `/actuator/info` providing security configuration and compliance status information

#### 6.4.6.6 Security Enhancement Pipeline (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Planned Security Improvements</span>:**
Based on the minimal change approach, the following security enhancements remain as future implementation opportunities while maintaining current functional parity:

**Authentication Enhancement Roadmap:**
- **Password Hashing Implementation**: Migration from plain text passwords to BCrypt encoding through Spring Security PasswordEncoder configuration
- **Multi-Factor Authentication**: Integration of TOTP-based MFA through Spring Security authentication provider chain
- **<span style="background-color: rgba(91, 57, 243, 0.2)">OAuth2 Integration</span>**: Enterprise OAuth2/OpenID Connect integration for federated authentication capabilities
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JWT Enhancement</span>**: Advanced JWT token features including refresh tokens and claims-based authorization

**<span style="background-color: rgba(91, 57, 243, 0.2)">Container Security Enhancement</span>:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Image Vulnerability Scanning</span>**: Automated container image security scanning integrated with CI/CD pipeline
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Runtime Security Monitoring</span>**: Advanced runtime security monitoring with behavioral analysis and threat detection
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Policy as Code</span>**: Infrastructure security policies managed through GitOps with automated enforcement
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Zero Trust Architecture</span>**: Implementation of zero trust networking principles with service mesh integration

**Governance Enhancement Strategy:**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Policy Automation</span>**: Automated security policy enforcement through Kubernetes admission controllers and Spring Security configuration management
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Compliance as Code</span>**: Regulatory compliance validation through automated testing and continuous compliance monitoring
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Threat Detection</span>**: Machine learning-based anomaly detection integrated with Spring Boot applications and Kubernetes infrastructure
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Orchestration</span>**: Automated incident response through security orchestration and automated response (SOAR) platform integration

The comprehensive Security Compliance and Governance framework provides equivalent regulatory compliance to the original mainframe implementation while leveraging modern <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security and PostgreSQL security controls</span>. This architecture maintains strict adherence to financial services regulatory requirements while providing a foundation for future security enhancements and advanced threat protection capabilities.

### 6.4.7 SECURITY ARCHITECTURE DIAGRAMS

#### 6.4.7.1 Authentication Flow Architecture (updated)

```mermaid
sequenceDiagram
    participant React as React SPA
    participant Gateway as Spring Cloud Gateway
    participant AuthCtrl as AuthenticationController
    participant SignOnSvc as SignOnService  
    participant UserDetails as UserDetailsService
    participant PostgreSQL as PostgreSQL Database
    participant Redis as Redis Session Store
    participant MenuSvc as Menu Services
    
    React->>Gateway: POST /api/auth/login (HTTPS)
    Gateway->>Gateway: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Filter Chain</span>
    Gateway->>AuthCtrl: Route to Authentication Service
    AuthCtrl->>SignOnSvc: Validate Credentials Request
    SignOnSvc->>SignOnSvc: Input Format Validation
    SignOnSvc->>UserDetails: loadUserByUsername()
    UserDetails->>PostgreSQL: <span style="background-color: rgba(91, 57, 243, 0.2)">SELECT * FROM usrsec WHERE sec_usr_id = ?</span>
    PostgreSQL-->>UserDetails: User Record Data
    UserDetails-->>SignOnSvc: <span style="background-color: rgba(91, 57, 243, 0.2)">UserDetails Object with Authorities</span>
    
    alt Valid Credentials
        SignOnSvc->>SignOnSvc: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Authentication</span>
        SignOnSvc->>Redis: <span style="background-color: rgba(91, 57, 243, 0.2)">Store Session Context (SEC-USR-ID, SEC-USR-TYPE)</span>
        SignOnSvc->>SignOnSvc: <span style="background-color: rgba(91, 57, 243, 0.2)">Generate JWT Token</span>
        SignOnSvc-->>AuthCtrl: Authentication Success + JWT
        AuthCtrl-->>Gateway: 200 OK + JWT + User Type
        Gateway-->>React: <span style="background-color: rgba(91, 57, 243, 0.2)">Secure Response + Session Cookie</span>
        
        alt Admin User (ROLE_ADMIN)
            React->>Gateway: Navigate to Admin Functions
            Gateway->>MenuSvc: <span style="background-color: rgba(91, 57, 243, 0.2)">Route to AdminMenuController</span>
        else Regular User (ROLE_USER)
            React->>Gateway: Navigate to User Functions
            Gateway->>MenuSvc: <span style="background-color: rgba(91, 57, 243, 0.2)">Route to UserMenuController</span>
        end
    else Invalid Credentials
        PostgreSQL-->>UserDetails: Record Not Found
        UserDetails-->>SignOnSvc: UsernameNotFoundException
        SignOnSvc-->>AuthCtrl: Authentication Failed
        AuthCtrl-->>Gateway: 401 Unauthorized
        Gateway-->>React: Error Response + Message
        React->>React: Display Authentication Error
    end
    
    Note over Gateway,PostgreSQL: <span style="background-color: rgba(91, 57, 243, 0.2)">All access controlled by Spring Security + PostgreSQL</span>
    Note over SignOnSvc,Redis: <span style="background-color: rgba(91, 57, 243, 0.2)">Session state preserved via Redis + JWT</span>
```

#### 6.4.7.2 Authorization Flow Architecture (updated)

```mermaid
flowchart TD
subgraph "HTTP Request Processing"
    A["React SPA Request"] --> B["Spring Cloud Gateway"]
    B --> C["Extract JWT + Session Context"]
    C --> D["Spring Security Filter Chain"]
end

subgraph "Spring Security Authorization Decision"
    D --> E{"AccessDecisionManager"}
    E -->|Admin Function Required| F{"hasRole('ROLE_ADMIN')?"}
    E -->|User Function| G{"hasRole('ROLE_USER') or hasRole('ROLE_ADMIN')?"}
    
    F -->|Yes| H["@PreAuthorize Validation"]
    F -->|No| I["AccessDeniedException"]
    G -->|Yes| H
    G -->|No| I
end

subgraph "Controller Method Execution"
    H --> J{"Method-Level Authorization"}
    J -->|Granted| K["Execute Controller Method"]
    J -->|Denied| L["Log Spring Security Event"]
    
    K --> M["PostgreSQL Data Access"]
    K --> N["Update Spring Boot Audit Log"]
    L --> O["Return 403 Forbidden"]
    I --> O
end

style E fill:#fff3e0
style H fill:#e1f5fe
style I fill:#ffcdd2
style L fill:#ff5252
```

#### 6.4.7.3 Security Zone Architecture (updated)

```mermaid
graph TD
subgraph "External Access Layer"
    A["React SPA (HTTPS)"] --> B["TLS Termination"]
    C["Administrative Workstations"] --> B
end

subgraph "Application Zone (Kubernetes)"
    B --> D["Spring Cloud Gateway Pod"]
    D --> E["Spring Security Filter Chain"]
    E --> F["Authentication Service Pods"]
    F --> G["Business Logic Pods"]
    
    H["Redis Session Cluster"] --> E
    H --> F
    H --> G
end

subgraph "Data Security Zone"
    G --> I["Spring Security Context"]
    I --> J["JPA Repository Layer"]
    J --> K["PostgreSQL Cluster"]
    
    K --> L["usrsec table"]
    K --> M["customer table"]
    K --> N["account table"]
    K --> O["card table"]
    K --> P["transaction table"]
end

subgraph "Monitoring Zone"
    Q["Spring Boot Actuator"] --> R["Prometheus Metrics"]
    S["Spring Security Event Logger"] --> R
    T["PostgreSQL Audit Logger"] --> R
    R --> U["Grafana Security Dashboard"]
end

D -.-> Q
I -.-> S
J -.-> T

style E fill:#fff3e0
style I fill:#e1f5fe
style K fill:#c8e6c9
style R fill:#ffb74d
```

#### 6.4.7.4 <span style="background-color: rgba(91, 57, 243, 0.2)">Container Security Architecture (updated)

```mermaid
graph TB
subgraph "Kubernetes Security Context"
    A["Ingress Controller (NGINX/Istio)"] --> B["Service Mesh Security"]
    B --> C["Pod Security Standards"]
    C --> D["Network Policies"]
end

subgraph "Application Security Pods"
    E["Spring Cloud Gateway Pod"]
    F["Authentication Service Pod"]
    G["Business Service Pods"]
    H["Redis Cluster Pods"]
    
    D --> E
    D --> F
    D --> G
    D --> H
end

subgraph "Data Layer Security"
    I["PostgreSQL StatefulSet"]
    J["Persistent Volume Encryption"]
    K["Kubernetes Secrets"]
    
    G --> I
    I --> J
    K --> I
    K --> H
end

subgraph "Security Monitoring"
    L["Kubernetes Audit Logs"]
    M["Container Runtime Security"]
    N["Spring Boot Actuator Endpoints"]
    O["Prometheus Operator"]
    
    C --> L
    E --> N
    F --> N
    G --> N
    L --> O
    M --> O
    N --> O
end

style A fill:#fff3e0
style C fill:#e1f5fe
style I fill:#c8e6c9
style O fill:#ffb74d
```

#### 6.4.7.5 <span style="background-color: rgba(91, 57, 243, 0.2)">JWT Token Security Flow (updated)

```mermaid
sequenceDiagram
    participant React as React SPA
    participant Gateway as Spring Cloud Gateway
    participant AuthFilter as JwtAuthenticationFilter
    participant TokenService as JwtTokenService
    participant Redis as Redis Session Store
    participant Controller as Spring Boot Controllers
    
    React->>Gateway: <span style="background-color: rgba(91, 57, 243, 0.2)">API Request + JWT Token</span>
    Gateway->>AuthFilter: <span style="background-color: rgba(91, 57, 243, 0.2)">Extract JWT from Authorization Header</span>
    AuthFilter->>TokenService: <span style="background-color: rgba(91, 57, 243, 0.2)">Validate JWT Token</span>
    
    alt Valid JWT Token
        TokenService->>TokenService: <span style="background-color: rgba(91, 57, 243, 0.2)">Verify Signature + Expiration</span>
        TokenService->>Redis: <span style="background-color: rgba(91, 57, 243, 0.2)">Retrieve Session Context</span>
        Redis-->>TokenService: <span style="background-color: rgba(91, 57, 243, 0.2)">User Session + Authorities</span>
        TokenService-->>AuthFilter: <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication Object</span>
        AuthFilter->>AuthFilter: <span style="background-color: rgba(91, 57, 243, 0.2)">Set SecurityContext</span>
        AuthFilter->>Controller: <span style="background-color: rgba(91, 57, 243, 0.2)">Process Request with Security Context</span>
        Controller-->>Gateway: <span style="background-color: rgba(91, 57, 243, 0.2)">Authorized Response</span>
        Gateway-->>React: <span style="background-color: rgba(91, 57, 243, 0.2)">Secure API Response</span>
    else Invalid/Expired JWT
        TokenService-->>AuthFilter: <span style="background-color: rgba(91, 57, 243, 0.2)">JwtException</span>
        AuthFilter-->>Gateway: <span style="background-color: rgba(91, 57, 243, 0.2)">401 Unauthorized</span>
        Gateway-->>React: <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication Required</span>
        React->>React: <span style="background-color: rgba(91, 57, 243, 0.2)">Redirect to Login</span>
    end
    
    Note over AuthFilter,Redis: <span style="background-color: rgba(91, 57, 243, 0.2)">Stateless JWT + Stateful Session Hybrid</span>
    Note over TokenService,Controller: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Context propagation</span>
```

#### 6.4.7.6 Security Architecture Integration Summary (updated)

The modernized security architecture diagrams demonstrate the comprehensive transformation from legacy mainframe security to <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native Spring Security and Kubernetes-based security controls</span>. This architecture maintains identical functional behavior while providing enhanced security capabilities through modern enterprise frameworks.

**Key Architectural Transformations:**

- **Authentication Flow**: <span style="background-color: rgba(91, 57, 243, 0.2)">Replaced CICS/RACF authentication with React SPA → Spring Cloud Gateway → Spring Security → PostgreSQL flow, maintaining identical credential validation logic through Spring Boot services</span>

- **Authorization Management**: <span style="background-color: rgba(91, 57, 243, 0.2)">Transformed RACF resource authorization into Spring Security AccessDecisionManager with @PreAuthorize annotations, preserving ROLE_ADMIN and ROLE_USER access patterns</span>

- **Security Zone Architecture**: <span style="background-color: rgba(91, 57, 243, 0.2)">Migrated from 3270/CICS zones to HTTPS/Kubernetes zones with comprehensive pod-level security policies and network isolation</span>

- **Session Management**: <span style="background-color: rgba(91, 57, 243, 0.2)">Replaced CICS COMMAREA with Redis Session Store + JWT tokens, providing distributed session management with identical session state preservation</span>

- **Monitoring Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Enhanced SMF/CICS monitoring with Spring Boot Actuator, Prometheus metrics, and Kubernetes audit logging for comprehensive security observability</span>

**Enhanced Security Capabilities:**

The <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native security architecture provides equivalent protection to the original mainframe implementation while delivering advanced capabilities including horizontal scaling, automated certificate management, container-level security policies, and real-time security metrics integration</span>. All security controls maintain strict regulatory compliance while leveraging modern security frameworks for enhanced threat detection and automated incident response capabilities.

**Preserved Security Controls:**

- Identical user authentication logic with case-insensitive username processing
- Exact authorization patterns maintaining Admin/User role separation  
- Equivalent session management with preserved timeout and context handling
- Same data access patterns with enhanced audit trail capabilities through Spring Boot logging integration
- Consistent error handling and security event patterns aligned with original COBOL program behavior

The comprehensive security architecture transformation demonstrates successful migration from legacy mainframe security to modern cloud-native security patterns while maintaining 100% functional parity and regulatory compliance requirements.

### 6.4.8 SECURITY CONTROL MATRICES

#### 6.4.8.1 Authentication Control Matrix (updated)

| Control Category | Implementation | Status | Compliance | Enhancement Required |
|------------------|----------------|--------|------------|---------------------|
| User Identification | SEC-USR-ID in <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL usrsec table</span> | Implemented | ✓ SOX | Multi-factor integration |
| Password Management | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security (plain-text encoder)</span> | Basic | ⚠ PCI DSS | Encryption and complexity |
| Session Management | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session Redis preservation</span> | Implemented | ✓ Enterprise | Timeout configuration |
| Account Lockout | Manual administrative | Partial | ⚠ Security Policy | Automated lockout |

#### 6.4.8.2 Authorization Control Matrix (updated)

| Resource Type | Access Control Method | Admin Access | User Access | Audit Level |
|---------------|----------------------|--------------|-------------|-------------|
| User Management | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security @PreAuthorize / Repository guards</span> | Full CRUD | Read-only | Complete |
| Customer Data | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security @PreAuthorize / PostgreSQL role privileges</span> | Update/Delete | Read/Update | Detailed |
| Transaction Data | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security @PreAuthorize / PostgreSQL role privileges</span> | Full access | Restricted | Comprehensive |
| System Configuration | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security @PreAuthorize / PostgreSQL role privileges</span> | Exclusive | None | Critical events |

#### 6.4.8.3 Data Protection Control Matrix (updated)

| Data Element | Classification | Protection Method | Encryption Status | Compliance Gap |
|--------------|----------------|-------------------|------------------|----------------|
| Customer SSN | PII Sensitive | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL role privileges + Application masking</span> | Storage level | Application level |
| Credit Card Numbers | PCI Sensitive | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL role privileges + Application masking</span> | Storage level | Field level |
| User Passwords | Authentication | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL role privileges</span> | None | Hash implementation |
| Transaction Amounts | Financial | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL role privileges + Audit logging</span> | Storage level | None |

#### 6.4.8.4 Security Control Implementation Matrix (updated)

**Spring Security Control Framework:**
The modernized security control matrices demonstrate the comprehensive migration from legacy mainframe security to cloud-native Spring Security framework while maintaining identical security posture and compliance requirements. This implementation preserves all existing security controls through equivalent Spring Boot and PostgreSQL mechanisms.

| Legacy Control | Modern Implementation | Technology Stack | Functional Parity |
|----------------|----------------------|------------------|-------------------|
| RACF User Authentication | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security UserDetailsService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">UserDetailsService + PostgreSQL usrsec table</span> | ✓ Identical validation logic |
| RACF Resource Authorization | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security @PreAuthorize annotations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Method-level security + Role hierarchy</span> | ✓ Same authorization patterns |
| RACF Data Protection | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL role-based access control</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Database roles + JPA repository guards</span> | ✓ Equivalent data protection |
| CICS Session Management | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session Redis store</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Distributed session + JWT tokens</span> | ✓ Same session lifecycle |

**Authorization Enforcement Architecture:**
```mermaid
graph TD
subgraph "Spring Security Authorization Flow"
    A[HTTP Request] --> B[Spring Security Filter Chain]
    B --> C[Authentication Extraction]
    C --> D{Access Decision Manager}
    D -->|ROLE_ADMIN Required| E["@PreAuthorize Validation"]
    D -->|ROLE_USER Access| F["@PreAuthorize Validation"]
    E --> G[Method Execution]
    F --> G
    G --> H[PostgreSQL Repository]
    H --> I[Role-Based Data Access]
end

style D fill:#fff3e0
style E fill:#e1f5fe
style F fill:#e1f5fe
style I fill:#c8e6c9
```

#### 6.4.8.5 Compliance Control Mapping Matrix (updated)

**Regulatory Compliance Alignment:**
The modernized security controls maintain full regulatory compliance while leveraging enhanced capabilities of the Spring Security framework and PostgreSQL database platform.

| Compliance Standard | Control Category | Legacy Implementation | <span style="background-color: rgba(91, 57, 243, 0.2)">Modern Implementation</span> | Enhancement Status |
|-------------------|------------------|----------------------|---------------------|-------------------|
| **PCI DSS Section 7** | Access Control | RACF profile-based authorization | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security @PreAuthorize + PostgreSQL roles</span> | **Enhanced** - Method-level granularity |
| **PCI DSS Section 8** | User Authentication | RACF user validation | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security UserDetailsService + PostgreSQL</span> | **Equivalent** - Same validation logic |
| **SOX IT Controls** | Change Management | RACF audit trails | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security events + PostgreSQL audit logs</span> | **Enhanced** - Real-time monitoring |
| **GDPR Article 32** | Data Protection | RACF dataset authorization | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL role privileges + Application masking</span> | **Equivalent** - Same protection level |

#### 6.4.8.6 Security Control Validation Matrix (updated)

**Control Testing and Verification Framework:**
Each modernized security control requires comprehensive validation to ensure functional parity with legacy RACF implementation while leveraging enhanced Spring Security capabilities.

**Authentication Control Validation:**
- **User Credential Verification**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security UserDetailsService validates credentials against PostgreSQL usrsec table</span> using identical logic to original COSGN00C program
- **Session Establishment**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session Redis integration</span> maintains user context equivalent to CICS COMMAREA preservation
- **Password Policy Enforcement**: Plain-text storage maintained for migration parity with enhancement opportunities documented
- **Account Lockout Processing**: Administrative lockout procedures preserved with Spring Security event integration

**Authorization Control Validation:**
- **Role-Based Access Control**: <span style="background-color: rgba(91, 57, 243, 0.2)">@PreAuthorize annotations enforce ROLE_ADMIN and ROLE_USER access patterns</span> identical to legacy SEC-USR-TYPE checking
- **Method-Level Security**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security MethodSecurityInterceptor</span> provides granular authorization control beyond original program-level checking
- **Resource Authorization**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL repository guards</span> implement table-level access control equivalent to RACF resource profiles
- **Business Logic Integration**: Authorization decisions integrated with business service methods through Spring AOP

**Data Protection Control Validation:**
- **Field-Level Security**: Application-level masking for SSN and credit card numbers preserved through Spring Boot service layer
- **Database Access Control**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL role-based privileges</span> replace RACF dataset authorization with equivalent granularity
- **Audit Trail Generation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security event listeners combined with PostgreSQL audit triggers</span> provide comprehensive security monitoring
- **Transaction Integrity**: ACID compliance maintained through Spring @Transactional boundaries equivalent to CICS SYNCPOINT behavior

#### 6.4.8.7 Security Enhancement Roadmap (updated)

**Planned Security Improvements:**
The migration to Spring Security framework provides foundation for enhanced security capabilities while maintaining current functional parity and compliance requirements.

**Short-Term Enhancements (Next 6 Months):**
- **Password Encryption Migration**: Implement BCryptPasswordEncoder to replace plain-text storage with gradual user password updates
- **Enhanced Session Security**: Configure advanced Spring Session Redis features including session event auditing and timeout policies
- **Method Security Expansion**: Implement additional @PostAuthorize annotations for return value filtering and data sanitization
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Security Hardening</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Implement row-level security policies and enhanced audit logging configurations</span>

**Medium-Term Enhancements (6-12 Months):**
- **Multi-Factor Authentication**: Integrate TOTP-based MFA through Spring Security authentication provider chain
- **OAuth2/OpenID Connect**: Enterprise federated authentication integration for single sign-on capabilities
- **Advanced Authorization**: Implement attribute-based access control (ABAC) using Spring Security expression language
- **Security Analytics**: Real-time security event correlation and anomaly detection through Spring Boot Actuator integration

**Long-Term Strategic Enhancements (12+ Months):**
- **Zero Trust Architecture**: Implement comprehensive zero trust networking with service mesh integration
- **Behavioral Authentication**: Machine learning-based user behavior analysis for advanced threat detection
- **Automated Compliance**: Policy-as-code implementation for automated regulatory compliance validation
- **Advanced Encryption**: Field-level encryption with cloud-native key management service integration

The comprehensive Security Control Matrices demonstrate successful migration from legacy mainframe security architecture to modern cloud-native Spring Security framework while maintaining identical security posture, regulatory compliance, and functional behavior. <span style="background-color: rgba(91, 57, 243, 0.2)">The modernized implementation leverages Spring Security's declarative authorization model and PostgreSQL's enterprise-grade access control capabilities</span> to provide equivalent protection with enhanced monitoring, audit trail generation, and future security enhancement capabilities.

### 6.4.9 REFERENCES

#### Technical Specification Sources
- **Section 5.4 CROSS-CUTTING CONCERNS** - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security authentication framework integration, error handling patterns with Spring Boot exception management, and cloud-native security integration points</span>
- **Section 6.2 DATABASE DESIGN** - <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL user_security table structure, Spring Data JPA integration, and database-level data protection mechanisms</span>
- **Section 6.3 INTEGRATION ARCHITECTURE** - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway security services integration and cloud-native security interfaces</span>

#### Repository Security Implementation Files
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/service/SignOnService.java` - Primary authentication service with Spring Security credential validation logic</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/config/SecurityConfig.java` - Spring Security configuration defining authentication providers, authorization rules, and JWT token management</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/entity/UserSecurity.java` - JPA entity class defining user authentication data structure with BCrypt password encoding</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/controller/UserController.java` - Regular user REST controller with role-based access control using Spring Security annotations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/controller/AdminController.java` - Administrative REST controller demonstrating elevated privilege access through @PreAuthorize annotations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/service/UserManagementService.java` - User management service with administrative access controls and Spring Security method-level security</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`frontend/src/components/screens/SignOn.jsx` - React authentication component with secure form handling and JWT token management</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/security/SessionAttributes.java` - Spring Session attribute management class for secure session state handling</span>

#### Security Research and Best Practices
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Official Documentation - Comprehensive guide to Spring Security 6.x authentication, authorization, and JWT implementation patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Observability Documentation - Application monitoring and security metrics collection for Spring Boot applications</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator Security Guide - Production-ready security monitoring endpoints and health checks for containerized applications</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Security Best Practices - Database-level security controls, role-based access, and encryption at rest implementations</span>

## 6.5 MONITORING AND OBSERVABILITY

### 6.5.1 MONITORING INFRASTRUCTURE

#### 6.5.1.1 Spring Boot Actuator Monitoring Framework (updated)

**Architecture Classification**: The system utilizes <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native containerised monitoring infrastructure designed for distributed services observability</span>. This approach is appropriate for the <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot application architecture and aligns with industry standards for modern cloud-based financial systems</span>.

**Core Monitoring Components**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator Endpoints</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Production-ready application monitoring and management endpoints</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Instrumentation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Application metrics collection with dimensional data</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Scrape Targets</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Time-series metrics storage and querying</span>  
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Liveness/Readiness Probes</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Container health monitoring and automated recovery</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Structured JSON Application Logs</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Centralized logging with metadata enrichment</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">These components replace the previous CICS/SMF/VSAM monitoring tools while providing identical metric coverage</span> for transaction performance, system resource utilization, application health, and error tracking across the modernized platform.

#### 6.5.1.2 Metrics Collection Strategy (updated)

The system implements multi-tier metrics collection appropriate for <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native REST transaction processing</span>:

| Metrics Category | Collection Method | Frequency | Retention Period | Purpose |
|------------------|-------------------|-----------|------------------|---------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">REST Transaction Performance</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Actuator `/metrics` exposure with Micrometer Prometheus registry</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time scrape (15-second default)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Determined by Prometheus retention configuration (default 15–30 days)</span> | SLA monitoring |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">JVM/System Resources</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Actuator `/metrics` exposure with Micrometer Prometheus registry</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time scrape (15-second default)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Determined by Prometheus retention configuration (default 15–30 days)</span> | Capacity planning |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Application-Level Metrics</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Actuator `/metrics` exposure with Micrometer Prometheus registry</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time scrape (15-second default)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Determined by Prometheus retention configuration (default 15–30 days)</span> | Business monitoring |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Error Metrics</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Actuator `/metrics` exposure with Micrometer Prometheus registry</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time scrape (15-second default)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Determined by Prometheus retention configuration (default 15–30 days)</span> | Incident response |

**Cloud-Native Monitoring Architecture**:
*Note: <span style="background-color: rgba(91, 57, 243, 0.2)">The following diagram should be redrawn to show: Spring Boot app → Micrometer → Prometheus → Grafana dashboards, and Kubernetes node exporter feeding cluster metrics</span>.*

```mermaid
graph TD
    subgraph "Spring Boot Application"
        A[REST Controllers] --> B[Micrometer Metrics]
        C[Service Layer] --> B
        D[JPA Repositories] --> B
        B --> E[Actuator Endpoints]
    end
    
    subgraph "Prometheus Monitoring"
        E -->|HTTP Scrape| F[Prometheus Server]
        G[Kubernetes Node Exporter] -->|Cluster Metrics| F
        H[Application Metrics] --> F
        F --> I[Time Series Database]
    end
    
    subgraph "Visualization & Alerting"
        I --> J[Grafana Dashboards]
        I --> K[Prometheus Alertmanager]
        K --> L[Alert Notifications]
    end
    
    subgraph "Health Monitoring"
        E --> M[Kubernetes Probes]
        M --> N[Container Orchestration]
        N --> O[Automatic Recovery]
    end
    
    style B fill:#e3f2fd
    style F fill:#f3e5f5
    style J fill:#e8f5e8
    style K fill:#ffcdd2
```

#### 6.5.1.3 Log Aggregation Architecture (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes-Native Logging Implementation</span>**:

The system employs a structured logging hierarchy designed for <span style="background-color: rgba(91, 57, 243, 0.2)">containerised environments with appropriate retention policies for regulatory compliance</span>:

```mermaid
flowchart TD
    subgraph "Application Layer Logging"
        A[Spring Boot Services] --> B[Logback JSON Configuration]
        C[REST Controller Logging] --> B
        D[Business Logic Tracking] --> B
    end
    
    subgraph "Container Layer Logging"
        B --> E[JSON Structured Logs]
        E --> F[stdout/stderr Streams]
        F --> G[Kubernetes Logging Driver]
    end
    
    subgraph "Centralized Log Processing"
        G --> H[Log Aggregation Service]
        I[Security Events] --> H
        J[Error Stream Processing] --> H
    end
    
    subgraph "Retention Management"
        H --> K[30-Day Retention]
        I --> L[Compliance Retention]
        J --> M[90-Day Retention]
    end
    
    style B fill:#e8f5e8
    style G fill:#e3f2fd
    style H fill:#f3e5f5
    style J fill:#ffcdd2
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Structured Logging Categories</span>**:

- **Application Logs**: <span style="background-color: rgba(91, 57, 243, 0.2)">Emitted in JSON format via Logback configuration and collected through Kubernetes logging driver (stdout/stderr)</span>
- **Transaction Logs**: <span style="background-color: rgba(91, 57, 243, 0.2)">REST API request/response logging with correlation IDs and session tracking</span>
- **System Logs**: <span style="background-color: rgba(91, 57, 243, 0.2)">JVM performance data and Kubernetes container lifecycle events</span>
- **Security Logs**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security authentication events and authorization tracking</span>

**Log Retention Policies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Maintain regulatory parity with 30-day operational retention and 90-day troubleshooting retention periods</span> for comprehensive audit trail preservation.

#### 6.5.1.4 Alert Management Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Alerting Infrastructure</span>**:

The system implements alert management through <span style="background-color: rgba(91, 57, 243, 0.2)">modern cloud-native monitoring platforms with automated incident response</span>:

| Alert Type | Detection Method | Response Time | Escalation Path | Resolution Tracking |
|------------|------------------|---------------|-----------------|-------------------|
| **Transaction Response Time** | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus alert rules (Alertmanager)</span> | Real-time | Operations → Systems Programming | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus metrics and Grafana dashboards</span> |
| **Application Errors** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot error counter > threshold</span> | Immediate | Applications → Database Administration | <span style="background-color: rgba(91, 57, 243, 0.2)">Structured JSON error logs</span> |
| **System Resource** | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes node metrics threshold</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time monitoring</span> | Operations → Capacity Planning | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes resource utilization reports</span> |
| **Security Events** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit event stream</span> | Real-time | Security → Management | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security incident logs</span> |

**Alert Rule Configuration**:

- **Performance Thresholds**: REST API response time > 500ms sustained for 2+ minutes triggers immediate escalation
- **Error Rate Monitoring**: Application error rate > 1% over 5-minute window generates critical alerts
- **Resource Utilization**: JVM heap usage > 85% or CPU utilization > 80% for 10+ minutes initiates capacity alerts  
- **Security Monitoring**: Failed authentication attempts > 10 per minute or privilege escalation events trigger security alerts

**Integration with Incident Response**: <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Alertmanager integrates with enterprise incident management systems to provide automated ticket creation, escalation routing, and resolution tracking while maintaining operational continuity equivalent to traditional mainframe monitoring practices</span>.

### 6.5.2 OBSERVABILITY PATTERNS

#### 6.5.2.1 Health Checks Implementation (updated)

**Multi-Layer Health Monitoring**:

The CardDemo system implements comprehensive health checking appropriate for cloud-native Spring Boot environments:

**System Health Indicators**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Database Connectivity</span>**: Database connection pool health and query response verification
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Store Accessibility</span>**: Session store availability and read/write operation testing
- **<span style="background-color: rgba(91, 57, 243, 0.2)">REST Controller Availability</span>**: Spring Boot service endpoint responsiveness and routing capability
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Status</span>**: Batch processing health and execution state monitoring

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator Health Architecture</span>**:
```mermaid
graph TD
    subgraph "Interactive System Health"
        A[Browser Sessions] --> B{React SPA Response Check}
        B --> C[API Gateway Routing Test]
        C --> D[Spring Boot REST Processing]
        D --> E[PostgreSQL Database Access]
        E --> F[Authentication System Check]
    end
    
    subgraph "Batch System Health"
        G[Spring Batch Job Execution] --> H{Job Status Monitoring}
        H --> I[Database Operation Processing]
        I --> J[Transaction Update Operations]
        J --> K[Report Generation]
    end
    
    subgraph "Data Integrity Health"
        L[Balance Verification] --> M{Financial Accuracy}
        M --> N[Cross-Reference Validation]
        N --> O[Transaction Completeness]
        O --> P[Interest Calculation Verification]
    end
    
    B -->|Success| Q[Healthy Status]
    B -->|Failure| R[Alert Generation]
    H -->|Success| Q
    H -->|Failure| R
    M -->|Success| Q
    M -->|Failure| S[Critical Alert]
    
    style Q fill:#c8e6c9
    style R fill:#ffb74d
    style S fill:#ff5252
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Custom HealthIndicator Implementation</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">The system implements custom HealthIndicator beans that mirror COBOL validation logic while leveraging Spring Boot Actuator's health endpoint capabilities. These indicators perform:</span>

- **<span style="background-color: rgba(91, 57, 243, 0.2)">DatabaseHealthIndicator</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Executes validation queries equivalent to VSAM dataset integrity checks</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">SessionStoreHealthIndicator</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Validates Redis connectivity and COMMAREA-equivalent session storage operations</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">BatchJobHealthIndicator</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Monitors Spring Batch job completion status and validates daily processing completion</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">BusinessLogicHealthIndicator</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Performs sample financial calculations to verify core business rule accuracy</span>

#### 6.5.2.2 Performance Metrics Framework (updated)

**Key Performance Indicators**:

| Metric Category | Specific Measurements | Target Thresholds | Collection Method | Analysis Frequency |
|-----------------|----------------------|-------------------|-------------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">REST Response Time</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot controller duration</span> | < 1 second (95th percentile) | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer/Prometheus</span> | Real-time |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Throughput (TPS)</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Requests per second per endpoint</span> | 1000+ per service instance | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer/Prometheus</span> | Hourly |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">JVM/Container Resource Utilisation</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">CPU, memory, heap usage</span> | < 80% sustained | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer/Prometheus</span> | 15-minute intervals |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Error Rate</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Failed requests per hour</span> | < 1% of total volume | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer/Prometheus</span> | Continuous |

**Performance Monitoring Dashboard Equivalent**:
```mermaid
graph TD
    subgraph "Real-Time Performance Tracking"
        A[Spring Boot Actuator Monitor] --> B[Response Time Metrics]
        A --> C[Throughput Measurements]
        A --> D[Resource Utilization]
        
        B --> E[< 1 Second Target]
        C --> F[1000+ TPS Target]
        D --> G[< 80% CPU Target]
    end
    
    subgraph "Business Metrics Tracking"
        H[Authentication Success Rate] --> I[> 99% Target]
        J[Transaction Completion Rate] --> K[> 99% Target]
        L[Financial Accuracy Rate] --> M[100% Target]
    end
    
    subgraph "Batch Performance Tracking"
        N[Spring Batch Job Duration] --> O[< 4 Hour Target]
        P[Report Generation Time] --> Q[< 30 Minute Target]
        R[Statement Processing] --> S[Complete Daily Target]
    end
    
    style E fill:#c8e6c9
    style F fill:#c8e6c9
    style G fill:#c8e6c9
    style I fill:#c8e6c9
    style K fill:#c8e6c9
    style M fill:#c8e6c9
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Metrics Integration</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">Batch performance monitoring leverages Spring Boot Actuator `/metrics/job.*` endpoints to track:</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Job Execution Duration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Complete job runtime from start to finish</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Step Performance Metrics</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Individual step execution times and throughput rates</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Job Success/Failure Rates</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Completion percentage and error tracking</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Resource Consumption Patterns</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Memory and CPU utilization during batch processing</span>

#### 6.5.2.3 Business Metrics Tracking (updated)

**Financial Transaction Monitoring**:

The system implements comprehensive business process monitoring aligned with financial services requirements:

**Critical Business Metrics**:
- **Authentication Success/Failure Rates**: User access pattern analysis
- **Transaction Validation Accuracy**: Business rule compliance verification
- **Interest Calculation Precision**: Financial accuracy monitoring
- **Statement Generation Completeness**: Customer service metrics
- **Balance Reconciliation Status**: Data integrity verification

**<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Custom Metrics Implementation</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">Business metrics are captured through Micrometer custom counters and timers populated from translated Java service methods, replacing COBOL DISPLAY statements while maintaining identical metric definitions:</span>

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Counter Metrics</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication attempts, transaction completions, validation failures</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Timer Metrics</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Service method execution times, database query durations, validation processing times</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Gauge Metrics</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Current session counts, active transaction volumes, system resource levels</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Distribution Summary Metrics</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction amounts, processing volumes, error rates</span>

#### 6.5.2.4 SLA Monitoring Framework (updated)

**Service Level Agreement Tracking**:

| SLA Category | Commitment Level | Measurement Method | Reporting Frequency | Escalation Threshold |
|--------------|------------------|-------------------|-------------------|---------------------|
| **Interactive Response Time** | 95% < 1 second | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus alert rule on `http_server_requests_seconds`</span> | Real-time | Any transaction > 3 seconds |
| **System Availability** | 99.9% business hours | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes readiness probes + Prometheus `up` metric</span> | Continuous | > 30 minutes downtime |
| **Batch Processing Window** | Complete in 4 hours | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job completion tracking via Actuator metrics</span> | Daily | > 6 hours total time |
| **Data Integrity** | Zero financial errors | <span style="background-color: rgba(91, 57, 243, 0.2)">Automated verification through custom HealthIndicator validation</span> | Continuous | Any discrepancy |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Alert Configuration</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">SLA monitoring leverages Prometheus alerting rules integrated with Spring Boot Actuator metrics to provide real-time SLA compliance tracking:</span>

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Response Time Alerts</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Configured thresholds on HTTP request duration percentiles</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Availability Monitoring</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes health probe integration with service discovery</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Job SLA Tracking</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch JobRepository metrics for completion time monitoring</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Error Rate Thresholds</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Custom business logic validation alerts for financial accuracy compliance</span>

### 6.5.3 INCIDENT RESPONSE

#### 6.5.3.1 Alert Routing Framework (updated)

**Cloud-Native Operations Model**:

The system implements incident response through established cloud-native operations practices with defined escalation procedures:

```mermaid
flowchart TD
    subgraph "Incident Detection"
        A["Prometheus Alert Firing"] --> B["Kubernetes Event Stream"]
        C["Spring Boot Exception Logs"] --> D["Actuator Health Checks"]
        E["Performance Metric Alerts"] --> F["Micrometer Analysis"]
        G["Security Events"] --> H["Spring Security Audit Review"]
    end
    
    subgraph "Initial Response"
        B --> I[Operations Team]
        D --> I
        F --> I
        H --> J[Security Team]
    end
    
    subgraph "Escalation Procedures"
        I --> K{Severity Level}
        K -->|Low| L[Standard Resolution]
        K -->|Medium| M[Systems Programming]
        K -->|High| N[Management Notification]
        K -->|Critical| O[Emergency Response]
        
        J --> P[Security Incident Response]
    end
    
    subgraph "Resolution Tracking"
        L --> Q[Resolution Documentation]
        M --> Q
        N --> Q
        O --> R[Post-Incident Review]
        P --> R
    end
    
    style I fill:#e3f2fd
    style J fill:#ffb74d
    style O fill:#ff5252
    style R fill:#c8e6c9
```

#### 6.5.3.2 Escalation Procedures (updated)

**Incident Classification and Response**:

| Incident Severity | Response Time | Escalation Path | Communication Requirements | Detection Method |
|------------------|---------------|-----------------|----------------------------|------------------|
| **Critical** | 15 minutes | Operations → Management → Executive | Immediate all-hands notification | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus critical alert</span> |
| **High** | 30 minutes | Operations → Systems Programming | Stakeholder notification | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes pod failure event</span> |
| **Medium** | 1 hour | Operations → Subject Matter Expert | Team notification | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot error threshold breach</span> |
| **Low** | 4 hours | Operations → Standard Process | Documentation only | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit event</span> |

#### 6.5.3.3 Runbooks and Procedures (updated)

**Standardized Response Procedures**:

The system includes comprehensive runbooks for common incident scenarios:

**System Recovery Runbooks**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Pod Restart via Kubernetes rollout</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">15-minute restart procedures with graceful shutdown and session recovery</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL point-in-time recovery</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Forward recovery from backup snapshots with transaction log replay</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">API Gateway / React SPA connectivity troubleshooting</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Network routing analysis and frontend-backend communication restoration</span>
- **Batch Processing Failures**: <span style="background-color: rgba(91, 57, 243, 0.2)">Checkpoint-restart procedures and error recovery via Spring Batch JobOperator</span>

**Problem Diagnosis Procedures**:
- **Performance Issues**: <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus metrics analysis and Spring Boot Actuator statistics review</span>
- **Transaction Errors**: <span style="background-color: rgba(91, 57, 243, 0.2)">Structured JSON log analysis and REST API error code interpretation</span>
- **Security Incidents**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit trail investigation and access review</span>
- **Data Integrity Problems**: Cross-reference validation and balance reconciliation

#### 6.5.3.4 Post-Mortem Processes (updated)

**Incident Review Framework**:

```mermaid
flowchart LR
A["Incident Resolution"] --> B["Data Collection"]
B --> C["Root Cause Analysis"]
C --> D["Impact Assessment"]
D --> E["Improvement Identification"]
E --> F["Action Plan Creation"]
F --> G["Implementation Tracking"]
G --> H["Effectiveness Review"]

B --> I["Prometheus Time-series Data"]
B --> J["Kubernetes Pod Logs"]
B --> K["PostgreSQL Logs"]
B --> L["Operator Actions"]

style A fill:#c8e6c9
style C fill:#e3f2fd
style E fill:#ffb74d
style G fill:#f3e5f5
style I fill:#e8e3f3
style J fill:#e8e3f3
style K fill:#e8e3f3
```

**Enhanced Post-Mortem Data Sources**:

The cloud-native incident review process leverages comprehensive observability data:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Time-series Metrics</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Historical performance data including response times, error rates, and resource utilization patterns</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Pod Logs</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Container lifecycle events, resource constraints, and orchestration activities</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Database Logs</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Query performance statistics, connection pool status, and transaction integrity data</span>
- **Spring Boot Application Logs**: Structured JSON logs with correlation IDs and business context
- **Security Audit Trails**: Spring Security authentication and authorization events

**Continuous Improvement Process**:

Post-mortem reviews focus on:
- **Alert Threshold Optimization**: Refining Prometheus alert rules to reduce false positives
- **Recovery Automation**: Enhancing Kubernetes self-healing capabilities and rollback procedures  
- **Observability Enhancement**: Expanding custom metrics and distributed tracing coverage
- **Runbook Accuracy**: Validating procedures against actual incident resolution patterns
- **Team Training**: Knowledge transfer on cloud-native troubleshooting techniques and tools

The post-mortem process maintains regulatory compliance requirements while leveraging modern observability platforms for enhanced root cause analysis and preventive improvement identification.

### 6.5.4 MONITORING ARCHITECTURE DIAGRAMS

#### 6.5.4.1 Overall Monitoring Architecture (updated)

```mermaid
graph TD
    subgraph "Data Sources"
        A[Spring Boot Services<br/>24 REST Controllers + 12 Batch Jobs] --> B[Application Metrics<br/>JVM, HTTP, Business]
        C[PostgreSQL Database] --> D[Database Metrics<br/>Connections, Queries, Performance]
        E[Redis Session Store] --> F[Cache Metrics<br/>Memory Usage, Hit Rates]
        G[Kubernetes Node Metrics] --> H[Infrastructure Metrics<br/>CPU, Memory, Network]
        I[Spring Cloud Gateway] --> J[API Gateway Metrics<br/>Routing, Request Rates]
    end
    
    subgraph "Collection Layer"
        B --> K[Micrometer Exporters<br/>Prometheus Registry]
        D --> L[PostgreSQL Exporter]
        F --> M[Redis Exporter]
        H --> N[Kubernetes Metrics Server<br/>Node Exporter]
        J --> K
    end
    
    subgraph "Analysis Layer"
        K --> P[Prometheus Time Series DB<br/>Metrics Storage & Querying]
        L --> P
        M --> P
        N --> P
        P --> Q[Alertmanager<br/>Rule Evaluation & Routing]
    end
    
    subgraph "Reporting Layer"
        P --> U[Grafana Dashboards<br/>Application Performance]
        P --> V[Grafana Dashboards<br/>Business Metrics]
        P --> W[Grafana Dashboards<br/>Infrastructure Monitoring]
        Q --> X[Alert Notifications<br/>Email, Slack, PagerDuty]
        P --> Y[SLA Reporting<br/>Response Times, Availability]
    end
    
    style K fill:#e3f2fd
    style L fill:#e8f5e8
    style M fill:#f3e5f5
    style N fill:#fff3e0
    style P fill:#e1f5fe
    style Q fill:#ffb74d
```

#### 6.5.4.2 Alert Flow Architecture (updated)

```mermaid
sequenceDiagram
    participant SYS as System Components<br/>(Spring Boot, PostgreSQL, Redis)
    participant PROM as Prometheus<br/>Monitoring Framework
    participant AM as Alertmanager<br/>Rule Evaluation Engine
    participant OPS as Operations Team
    participant SME as Subject Matter Experts
    participant MGT as Management
    
    SYS->>PROM: Metrics Collection<br/>(HTTP response times, error rates)
    PROM->>AM: Performance Threshold Exceeded
    AM->>AM: Alertmanager Rule Evaluation<br/>(Severity Assessment)
    AM->>OPS: Generate Alert Notification<br/>(Email, Slack, PagerDuty)
    
    alt Critical Severity
        OPS->>MGT: Immediate Escalation<br/>(< 15 minutes)
        MGT->>SME: Emergency Response<br/>(All-hands notification)
        SME->>SYS: Implement Fix<br/>(Kubernetes rollout, DB recovery)
    else High Severity
        OPS->>SME: Standard Escalation<br/>(< 30 minutes)
        SME->>SYS: Implement Resolution<br/>(Service restart, scaling)
    else Medium/Low Severity
        OPS->>OPS: Standard Response<br/>(< 1-4 hours)
        OPS->>SYS: Apply Standard Fix<br/>(Configuration updates)
    end
    
    SYS->>PROM: Resolution Confirmation<br/>(Metrics normalization)
    PROM->>AM: Alert Closure<br/>(Threshold restoration)
    AM->>OPS: Alert Resolution Notification
    OPS->>MGT: Incident Summary<br/>(Post-mortem documentation)
    
    Note over SYS,MGT: All actions logged in Prometheus/Grafana<br/>for post-incident review and analysis
```

#### 6.5.4.3 Monitoring Data Flow Architecture

The <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native monitoring architecture provides comprehensive observability across the entire Spring Boot ecosystem, replacing traditional mainframe monitoring while maintaining identical operational visibility</span>:

**Application Layer Monitoring**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator endpoints expose JVM metrics, HTTP request statistics, and custom business counters through Micrometer registries</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">REST controller performance tracking with response time percentiles, error rates, and throughput measurements</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job monitoring including execution duration, step completion rates, and failure tracking</span>

**Infrastructure Layer Monitoring**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes metrics-server collection of node resources, pod health, and container resource utilization</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL database metrics including connection pool status, query performance, and transaction throughput</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Redis session store monitoring with memory usage, connection statistics, and cache hit ratios</span>

**Business Process Monitoring**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Financial transaction accuracy tracking through custom Micrometer counters and timers</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication success rates and security event monitoring via Spring Security audit logs</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">SLA compliance tracking with automated threshold alerts for response time and availability metrics</span>

#### 6.5.4.4 Dashboard Layout Architecture

```mermaid
graph TB
    subgraph "Executive Dashboard Layer"
        A[Business Metrics Overview<br/>Transaction Volume, SLA Status]
        B[System Health Summary<br/>Service Availability, Performance]
        C[Security Status Dashboard<br/>Authentication, Access Control]
    end
    
    subgraph "Operational Dashboard Layer"
        D[Application Performance<br/>Response Times, Error Rates]
        E[Infrastructure Monitoring<br/>CPU, Memory, Network]
        F[Database Performance<br/>PostgreSQL Metrics, Query Analysis]
        G[Batch Processing Status<br/>Spring Batch Jobs, Completion Times]
    end
    
    subgraph "Technical Dashboard Layer"
        H[JVM Monitoring<br/>Heap Usage, GC Performance]
        I[Kubernetes Cluster Status<br/>Pod Health, Resource Usage]
        J[Session Management<br/>Redis Performance, Session Count]
        K[API Gateway Metrics<br/>Routing Performance, Rate Limiting]
    end
    
    A --> D
    B --> E
    B --> F
    C --> I
    D --> H
    E --> I
    F --> J
    G --> K
    
    style A fill:#c8e6c9
    style B fill:#e3f2fd
    style C fill:#ffb74d
    style D fill:#e1f5fe
    style E fill:#f3e5f5
    style F fill:#e8f5e8
```

**Dashboard Hierarchy and Access Control**:
- **Executive Level**: <span style="background-color: rgba(91, 57, 243, 0.2)">High-level business metrics and SLA compliance dashboards accessible to management team with read-only permissions</span>
- **Operational Level**: <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time system performance and health monitoring accessible to operations team with alert configuration capabilities</span>
- **Technical Level**: <span style="background-color: rgba(91, 57, 243, 0.2)">Detailed technical metrics and diagnostics accessible to development and systems teams with full dashboard editing permissions</span>

The dashboard architecture ensures appropriate visibility at each organizational level while maintaining role-based access controls through Grafana's authentication integration with <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security role definitions, replicating traditional mainframe operations console access patterns</span>.

### 6.5.5 MONITORING CONTROL MATRICES

#### 6.5.5.1 Metrics Definition Matrix (updated)

| Metric Name | Description | Data Source | Target Value | Alert Threshold |
|-------------|-------------|-------------|--------------|-----------------|
| **Transaction Response Time** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot REST controller execution duration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`http_server_requests_seconds`</span> | < 1 second (95%) | > 3 seconds |
| **System Availability** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot application uptime percentage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`up`</span> | 99.9% | < 99% |
| **Throughput Rate** | <span style="background-color: rgba(91, 57, 243, 0.2)">REST requests processed per second</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`http_server_requests_total`</span> | 1000+ per service instance | < 500 per service instance |
| **Error Rate** | <span style="background-color: rgba(91, 57, 243, 0.2)">Failed REST requests percentage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`http_server_requests_total{status=~"4..|5.."}`</span> | < 1% | > 5% |
| **CPU Utilization** | <span style="background-color: rgba(91, 57, 243, 0.2)">JVM and container processor usage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`process_cpu_usage`</span> | < 80% | > 90% |
| **Storage Utilization** | <span style="background-color: rgba(91, 57, 243, 0.2)">JVM heap and PostgreSQL storage usage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`jvm_memory_used_bytes`</span> | < 85% | > 95% |

#### 6.5.5.2 SLA Requirements Matrix (updated)

| Service Component | Availability Target | Performance Target | Recovery Target | Monitoring Method |
|------------------|-------------------|-------------------|-----------------|-------------------|
| **Interactive Transactions** | 99.9% business hours | < 1 second response | 15 minutes | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator monitoring</span> |
| **Batch Processing** | 99% daily window | < 4 hour completion | 1 hour restart | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job tracking</span> |
| **Data Integrity** | 100% accuracy | Zero calculation errors | Immediate correction | <span style="background-color: rgba(91, 57, 243, 0.2)">Automated JPA validation</span> |
| **Security Services** | 99.9% continuous | Real-time validation | 5 minutes | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit events</span> |

#### 6.5.5.3 Alert Threshold Matrix (updated)

| Component | Warning Level | Critical Level | Emergency Level | Response Time | Alert Rule Reference |
|-----------|---------------|----------------|-----------------|---------------|---------------------|
| **Response Time** | > 2 seconds | > 3 seconds | > 5 seconds | 15 minutes | <span style="background-color: rgba(91, 57, 243, 0.2)">`HighResponseTime`</span> |
| **CPU Usage** | > 70% | > 85% | > 95% | 30 minutes | <span style="background-color: rgba(91, 57, 243, 0.2)">`HighCPUUtilization`</span> |
| **Storage Space** | > 80% | > 90% | > 95% | 1 hour | <span style="background-color: rgba(91, 57, 243, 0.2)">`HighMemoryUsage`</span> |
| **Error Rate** | > 2% | > 5% | > 10% | 15 minutes | <span style="background-color: rgba(91, 57, 243, 0.2)">`HighErrorRate`</span> |
| **Availability** | < 99.5% | < 99% | < 95% | Immediate | <span style="background-color: rgba(91, 57, 243, 0.2)">`ServiceDown`</span> |

#### 6.5.5.4 Business Metrics Control Matrix

| Business Metric | Description | Data Source | Business Target | Alert Configuration |
|------------------|-------------|-------------|-----------------|-------------------|
| **Authentication Success Rate** | User login completion percentage | <span style="background-color: rgba(91, 57, 243, 0.2)">`spring_security_authentication_total{result="success"}`</span> | > 99% | < 95% triggers investigation |
| **Transaction Completion Rate** | Financial transaction success percentage | <span style="background-color: rgba(91, 57, 243, 0.2)">`http_server_requests_total{uri="/api/transactions",status="200"}`</span> | > 99.5% | < 99% triggers escalation |
| **Interest Calculation Accuracy** | Batch job validation success rate | <span style="background-color: rgba(91, 57, 243, 0.2)">`spring_batch_job_seconds{job_name="interestCalculationJob",status="COMPLETED"}`</span> | 100% | Any failure triggers critical alert |
| **Statement Generation Completeness** | Daily batch processing completion | <span style="background-color: rgba(91, 57, 243, 0.2)">`spring_batch_step_seconds{job_name="statementJob",step_name="generateStatements"}`</span> | 100% daily | Missing statements trigger immediate review |
| **Balance Reconciliation Status** | Financial data consistency verification | <span style="background-color: rgba(91, 57, 243, 0.2)">`custom_balance_verification_total{result="passed"}`</span> | 100% | Any discrepancy triggers emergency response |

#### 6.5.5.5 Prometheus Alert Rule Configuration

**Critical Business Rules**:

```yaml
groups:
  - name: carddemo.business.rules
    rules:
    - alert: HighResponseTime
      expr: histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket{uri=~"/api/.*"}[5m])) by (le)) > 3
      for: 2m
      labels:
        severity: critical
      annotations:
        summary: "REST API response time exceeding SLA threshold"

    - alert: HighErrorRate  
      expr: sum(rate(http_server_requests_total{status=~"5.."}[5m])) / sum(rate(http_server_requests_total[5m])) > 0.05
      for: 1m
      labels:
        severity: critical
      annotations:
        summary: "Application error rate exceeding 5% threshold"

    - alert: HighCPUUtilization
      expr: process_cpu_usage > 0.85
      for: 10m
      labels:
        severity: warning
      annotations:
        summary: "JVM CPU utilization exceeding 85% for extended period"

    - alert: HighMemoryUsage
      expr: jvm_memory_used_bytes{area="heap"} / jvm_memory_max_bytes{area="heap"} > 0.90
      for: 5m
      labels:
        severity: critical
      annotations:
        summary: "JVM heap memory usage exceeding 90% threshold"

    - alert: ServiceDown
      expr: up{job="carddemo-service"} == 0
      for: 30s
      labels:
        severity: critical
      annotations:
        summary: "CardDemo service instance unavailable"
```

**Spring Batch Job Monitoring Rules**:

```yaml
  - name: carddemo.batch.rules
    rules:
    - alert: BatchJobFailure
      expr: increase(spring_batch_job_seconds_count{status="FAILED"}[1h]) > 0
      labels:
        severity: critical
      annotations:
        summary: "Spring Batch job execution failure detected"

    - alert: BatchJobDuration
      expr: spring_batch_job_seconds{status="COMPLETED"} > 14400
      labels:
        severity: warning
      annotations:
        summary: "Batch job execution time exceeding 4-hour SLA window"
```

**Security Event Monitoring Rules**:

```yaml
  - name: carddemo.security.rules  
    rules:
    - alert: AuthenticationFailureSpike
      expr: increase(spring_security_authentication_total{result="failure"}[5m]) > 10
      labels:
        severity: warning
      annotations:
        summary: "Elevated authentication failure rate detected"

    - alert: UnauthorizedAccessAttempt
      expr: increase(http_server_requests_total{status="401"}[1m]) > 5
      labels:
        severity: critical
      annotations:
        summary: "Potential security breach - multiple unauthorized access attempts"
```

#### 6.5.5.6 SLA Compliance Dashboard Configuration

**Executive SLA Reporting Panel**:

| SLA Metric | Prometheus Query | Visualization Type | Threshold Indicators |
|------------|------------------|-------------------|---------------------|
| **System Availability** | `avg_over_time(up{job="carddemo-service"}[24h]) * 100` | Gauge with target line | 99.9% target, 99% warning |
| **Response Time P95** | `histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket[24h])) by (le))` | Time series graph | 1 second target, 3 second alert |
| **Error Rate** | `sum(rate(http_server_requests_total{status=~"5.."}[24h])) / sum(rate(http_server_requests_total[24h])) * 100` | Single stat with spark line | 1% target, 5% critical |
| **Batch Job SLA** | `sum(spring_batch_job_seconds{status="COMPLETED"} < 14400) / count(spring_batch_job_seconds) * 100` | Progress bar | 100% completion within 4 hours |

**Operational Monitoring Panel**:

The comprehensive monitoring control matrices provide enterprise-grade observability across the modernized CardDemo application, ensuring identical SLA compliance and operational visibility as the original mainframe system while leveraging cloud-native monitoring capabilities through Prometheus, Grafana, and Spring Boot Actuator integration.

### 6.5.6 MONITORING LIMITATIONS AND ENHANCEMENT OPPORTUNITIES

#### 6.5.6.1 Current Implementation Gaps (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Basic Actuator + Micrometer Monitoring Constraints</span>**:

The CardDemo monitoring implementation utilizes <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator and Micrometer for basic application observability, providing essential metrics collection and health monitoring capabilities</span>. However, this baseline setup has inherent limitations compared to advanced modern observability platforms:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Distributed Tracing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">No end-to-end request tracing capabilities across Spring Boot services, limiting complex transaction troubleshooting and performance bottleneck identification</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Log Correlation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Limited correlation between application metrics, structured JSON logs, and error events, requiring manual investigation across multiple data sources</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Analytics</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Basic metric aggregation without sophisticated query capabilities or anomaly detection patterns</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cross-Service Observability</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">No unified view of interactions between Spring Boot application, PostgreSQL database, and Redis session store components</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Custom Dashboard Flexibility</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Limited business-specific visualization options beyond standard Actuator endpoint metrics</span>

**Current Monitoring Coverage**:

The existing implementation provides adequate observability for:
- Application health status through Actuator endpoints
- Basic performance metrics via Micrometer Prometheus integration
- JVM and system resource monitoring
- HTTP request/response tracking
- Spring Batch job execution monitoring
- Database connection pool status

These capabilities satisfy core operational requirements for the modernized CardDemo system while maintaining monitoring parity with the original mainframe implementation.

#### 6.5.6.2 Enterprise Enhancement Pathways (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Observability Evolution</span>** *(Out-of-Scope per No Advanced Features Directive)*:

Organizations implementing CardDemo in production environments may consider future adoption of advanced observability platforms, though these enhancements are explicitly marked as out-of-scope to prevent scope creep beyond the current implementation requirements:

**Potential Future Integration Points** *(Not Implemented)*:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">OpenTelemetry Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Standardized distributed tracing and metrics collection across microservices architectures</span> *(Future consideration only)*
- **<span style="background-color: rgba(91, 57, 243, 0.2)">ELK Stack Adoption</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Elasticsearch, Logstash, and Kibana for advanced log aggregation and analysis capabilities</span> *(Future consideration only)*
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Grafana Loki Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Enhanced log correlation and querying capabilities with Prometheus metrics integration</span> *(Future consideration only)*
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced APM Platforms</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Application Performance Monitoring tools for deep application insights and automated anomaly detection</span> *(Future consideration only)*

**Implementation Boundary Enforcement**:

Per the technical specification directive to avoid advanced features and maintain scope discipline, the current monitoring implementation deliberately limits capabilities to:

- Spring Boot Actuator endpoint exposure
- Micrometer metrics collection and Prometheus integration  
- Basic Grafana dashboard visualization
- Kubernetes-native health checks and pod monitoring
- Standard application logging through Logback configuration

These constraints ensure the monitoring system remains aligned with the core modernization objectives while providing production-ready observability equivalent to the original mainframe monitoring capabilities.

**Strategic Monitoring Position**:

The current implementation establishes a solid foundation for future observability enhancements while maintaining strict adherence to project scope boundaries. Organizations requiring advanced monitoring capabilities can evaluate these options during subsequent enhancement phases, ensuring the baseline CardDemo system remains focused on core business functionality delivery rather than comprehensive observability platform integration.

### 6.5.7 REFERENCES

#### 6.5.7.1 Technical Specification Sources

- **Section 5.4 CROSS-CUTTING CONCERNS** - Multi-layer monitoring strategy, logging architecture, and performance requirements
- **Section 6.4 SECURITY ARCHITECTURE** - Security event monitoring, <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security integration, and audit logging frameworks</span>
- **Section 5.1 HIGH-LEVEL ARCHITECTURE** - System overview, component interaction, and performance objectives

#### 6.5.7.2 Implementation Architecture Sources

- **Spring Boot Application Services** - <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction processing capabilities with integrated Actuator monitoring endpoints</span>
- **REST Controller Layer** - <span style="background-color: rgba(91, 57, 243, 0.2)">HTTP request/response monitoring with built-in performance tracking through Micrometer metrics</span>
- **PostgreSQL Database Integration** - <span style="background-color: rgba(91, 57, 243, 0.2)">Connection pool monitoring and query performance analysis via JPA metrics</span>
- **Spring Batch Job Processing** - <span style="background-color: rgba(91, 57, 243, 0.2)">Batch execution monitoring with step-level performance tracking and failure analysis</span>
- **Redis Session Management** - <span style="background-color: rgba(91, 57, 243, 0.2)">Session store performance monitoring and cache hit ratio analysis</span>
- **Spring Security Framework** - <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication and authorization event monitoring for security incident detection</span>

#### 6.5.7.3 Cloud-Native Monitoring Standards (updated)

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator Documentation (v3.4.x)</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Production-ready application monitoring and management endpoints for health checks, metrics exposure, and operational insights</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Metrics Reference (v1.15.x)</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Application observability facade supporting dimensional metrics collection and multiple monitoring system backends</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Operator User Guide (compatible with Kubernetes 1.28+)</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes-native Prometheus deployment and configuration management for container-based monitoring infrastructure</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Grafana Dashboard JSON Schema</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Dashboard configuration standards for visualization of Spring Boot metrics and operational data</span>

#### 6.5.7.4 Spring Framework Monitoring Integration (updated)

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Actuator Metrics</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Specialized monitoring capabilities for batch job execution, step performance tracking, and failure analysis</span>
- **Spring Security Audit Events** - <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication and authorization monitoring for security event tracking and incident response</span>
- **Spring Boot Health Indicators** - <span style="background-color: rgba(91, 57, 243, 0.2)">Custom health check implementations for business logic validation and system component status verification</span>
- **Spring Data JPA Metrics** - <span style="background-color: rgba(91, 57, 243, 0.2)">Database operation monitoring including connection pool status, query performance, and transaction tracking</span>

#### 6.5.7.5 Monitoring Technology Documentation

- **Kubernetes Metrics Server Documentation** - Container resource utilization monitoring and horizontal pod autoscaling metrics collection
- **Prometheus Alerting Rules Reference** - Alert rule configuration for threshold-based monitoring and escalation procedures
- **Spring Boot Configuration Properties Reference** - Actuator endpoint configuration and security settings for production deployment
- **Logback JSON Configuration Guide** - Structured logging setup for container-based log aggregation and analysis

#### 6.5.7.6 Industry Standards and Best Practices

- **OpenTelemetry Specification** - <span style="background-color: rgba(91, 57, 243, 0.2)">Observability standards for future distributed tracing integration (reference only, not implemented)</span>
- **Cloud Native Computing Foundation Monitoring Best Practices** - <span style="background-color: rgba(91, 57, 243, 0.2)">Industry guidelines for cloud-native application observability and operational excellence</span>
- **Spring Boot Production-Ready Features Documentation** - <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive guide for deploying Spring Boot applications with enterprise monitoring capabilities</span>
- **Financial Services Monitoring Compliance Guidelines** - <span style="background-color: rgba(91, 57, 243, 0.2)">Regulatory requirements for transaction monitoring, audit trails, and system availability reporting</span>

## 6.6 TESTING STRATEGY

### 6.6.1 TESTING APPROACH OVERVIEW

The CardDemo system implements a **<span style="background-color: rgba(91, 57, 243, 0.2)">comprehensive cloud-native testing strategy</span>** that ensures <span style="background-color: rgba(91, 57, 243, 0.2)">minimal-change functional parity</span> between the original COBOL implementation and the modernized Spring Boot/React/PostgreSQL architecture. This layered approach validates that modernized components produce <span style="background-color: rgba(91, 57, 243, 0.2)">identical functional results to their COBOL counterparts</span>, not new behavior.

**Testing Philosophy**: The modernization employs <span style="background-color: rgba(91, 57, 243, 0.2)">test-driven development principles with comprehensive behavioral equivalence validation</span> across four distinct layers: <span style="background-color: rgba(91, 57, 243, 0.2)">unit testing for Java service class behavior, integration testing for data access parity, end-to-end testing for complete user workflow validation, and performance testing ensuring response time equivalence</span>.

#### 6.6.1.1 Layered Cloud-Native Testing Model (updated)

```mermaid
graph TD
subgraph "Unit Testing Layer"
    A[JUnit 5 Test Classes] --> B[Java-COBOL Output Comparison]
    C[Spring Boot Service Tests] --> D[Business Logic Validation]
    E[MockMvc Controller Tests] --> F[REST API Behavior]
    G[Repository Unit Tests] --> H[Data Access Logic]
    style A fill:#5B39F3
    style C fill:#5B39F3
    style E fill:#5B39F3
    style G fill:#5B39F3
end

subgraph "Integration Testing Layer"
    I[Testcontainers PostgreSQL] --> J[VSAM Behavior Emulation]
    K[Spring Boot Test Slices] --> L[Component Integration]
    M[REST API Integration] --> N[End-to-End Service Flow]
    O[Database Integration Tests] --> P[Data Consistency Validation]
    style I fill:#5B39F3
    style K fill:#5B39F3
    style M fill:#5B39F3
    style O fill:#5B39F3
end

subgraph "End-to-End Testing Layer"
    Q[React Testing Library] --> R[UI Component Validation]
    S[Cypress E2E Tests] --> T[Complete User Workflows]
    U[API Integration Tests] --> V[Frontend-Backend Integration]
    W[Cross-Browser Testing] --> X[UI Compatibility Validation]
    style Q fill:#5B39F3
    style S fill:#5B39F3
    style U fill:#5B39F3
    style W fill:#5B39F3
end

subgraph "Performance Testing Layer"
    Y[Spring Actuator Metrics] --> Z[Response Time Monitoring]
    AA[Micrometer Timers] --> BB[Performance Benchmarking]
    CC[Load Testing] --> DD[Throughput Validation]
    EE[Memory Profiling] --> FF[Resource Usage Analysis]
    style Y fill:#5B39F3
    style AA fill:#5B39F3
    style CC fill:#5B39F3
    style EE fill:#5B39F3
end
```

#### 6.6.1.2 Comprehensive Testing Framework (updated)

| Testing Level | Implementation Method | Validation Scope | <span style="background-color: rgba(91, 57, 243, 0.2)">Tools/Frameworks</span> |
|---------------|----------------------|------------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Unit Testing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5 with behavioral comparison</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Java service class equivalence to COBOL paragraphs</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5, Mockito, AssertJ</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Testing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Testcontainers-managed PostgreSQL</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">VSAM behavior emulation in isolation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Testcontainers, Spring Boot Test, TestRestTemplate</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">End-to-End Testing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">React Testing Library with Cypress</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Complete user workflow validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">React Testing Library, Cypress, Jest</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Testing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Actuator with Micrometer</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Response time and throughput validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Actuator, Micrometer, K6 load testing</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Testing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Test framework</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication and authorization validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Test, MockMvc Security</span> |

#### 6.6.1.3 Functional Parity Validation Strategy (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Core Testing Principle</span>**: All testing focuses on <span style="background-color: rgba(91, 57, 243, 0.2)">minimal-change functional parity validation</span> where <span style="background-color: rgba(91, 57, 243, 0.2)">test assertions verify identical functional results between COBOL and Java implementations</span>. Tests do not validate new functionality but ensure that modernized components behave identically to their mainframe predecessors.

**<span style="background-color: rgba(91, 57, 243, 0.2)">COBOL-Java Equivalence Testing</span>**: Each <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot service class undergoes JUnit 5 testing that compares Java method outputs against expected COBOL paragraph results</span>. This includes:

- **BigDecimal Precision Validation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive testing of COBOL COMP-3 to Java BigDecimal conversion accuracy, ensuring identical mathematical operations and rounding behavior</span>
- **Business Logic Equivalence**: <span style="background-color: rgba(91, 57, 243, 0.2)">Method-level validation of conditional logic, loop structures, and data processing algorithms converted from COBOL paragraphs</span>
- **Data Structure Mapping**: <span style="background-color: rgba(91, 57, 243, 0.2)">Verification that JPA entity classes maintain identical data relationships and constraints as original VSAM copybook definitions</span>
- **Error Handling Consistency**: <span style="background-color: rgba(91, 57, 243, 0.2)">Validation that Spring Boot exception handling produces identical error codes and messages as COBOL ABEND routines</span>

#### 6.6.1.4 Data Access Testing with VSAM Emulation (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Testcontainers Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Data-access tests utilize Testcontainers-managed PostgreSQL instances to provide isolated database environments that emulate VSAM dataset behavior</span>. This approach ensures:

- **Isolation Testing**: <span style="background-color: rgba(91, 57, 243, 0.2)">Each test class receives a clean PostgreSQL container instance, eliminating data contamination between test executions</span>
- **VSAM Operation Simulation**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL queries configured to replicate VSAM KSDS key-sequential access patterns through composite primary key indexes</span>
- **Data Integrity Validation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction boundary testing ensuring ACID compliance matches original CICS SYNCPOINT behavior</span>
- **Performance Baseline Testing**: <span style="background-color: rgba(91, 57, 243, 0.2)">Response time comparisons validating that PostgreSQL operations meet or exceed VSAM dataset performance characteristics</span>

#### 6.6.1.5 Modern Observability Testing Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive Monitoring Validation</span>**: The testing strategy incorporates modern observability tools replacing traditional mainframe monitoring approaches:

| <span style="background-color: rgba(91, 57, 243, 0.2)">Legacy Monitoring</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Modern Replacement</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Testing Approach</span> | Coverage Scope |
|------------------|-------------------|-----------------|----------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">~~CICS Statistics~~</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Actuator Metrics</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Automated health endpoint validation</span> | Application performance monitoring |
| <span style="background-color: rgba(91, 57, 243, 0.2)">~~SMF Records~~</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Custom Metrics</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Business transaction timing validation</span> | Transaction throughput analysis |
| <span style="background-color: rgba(91, 57, 243, 0.2)">~~RACF Integration~~</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Tests</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Role-based access control validation</span> | Authentication and authorization |
| <span style="background-color: rgba(91, 57, 243, 0.2)">~~3270 Terminal Emulation~~</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">React Testing Library</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Component interaction and navigation testing</span> | User interface behavior validation |

#### 6.6.1.6 Test Organization and Coverage Requirements (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Unit Test Coverage Standards</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">All Java service classes require comprehensive JUnit 5 test coverage with minimum 90% code coverage and 100% business logic path coverage</span>. Each converted COBOL program must have corresponding test classes validating:

- **Method-Level Equivalence**: <span style="background-color: rgba(91, 57, 243, 0.2)">Individual Spring Boot service methods tested against COBOL paragraph expected outputs</span>
- **State Management Validation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session attribute handling compared to CICS COMMAREA data flow patterns</span>
- **Data Type Conversion Accuracy**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive validation of COBOL data type to Java equivalent conversions with precision preservation</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Test Architecture</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">TestRestTemplate-based integration tests validate complete request-response cycles through Spring Boot controllers, ensuring REST API behavior matches original CICS transaction processing patterns</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">End-to-End Test Coverage</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">React Testing Library and Cypress tests validate complete user workflows, ensuring that React component interactions replicate 3270 screen navigation and PF-key functionality</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Test Benchmarks</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Actuator and Micrometer metrics provide continuous performance monitoring with automated alerts when response times exceed original mainframe baseline measurements</span>.

### 6.6.2 UNIT TESTING APPROACH

### 6.6.2 Unit Testing Approach

#### 6.6.2.1 <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5 Testing Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Testing Framework</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5 (Jupiter) with Mockito integration provides comprehensive unit validation executed automatically during Maven/Gradle build cycles, replacing traditional mainframe compilation-based validation.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Core Testing Components</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5 Jupiter Engine</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Parameterized tests, nested test classes, and dynamic test generation for comprehensive validation coverage</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Mockito 5.x</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Mock object creation for Spring Boot service dependencies and external integration isolation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">AssertJ Fluent Assertions</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Readable assertions for complex object comparisons and BigDecimal precision validation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Maven Surefire/Gradle Test</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Continuous integration execution with parallel test execution and comprehensive reporting</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Unit Test Organization Structure</span>**:
```
backend/src/test/java/com/carddemo/
├── service/
│   ├── SignOnServiceTest.java           // COSGN00C.cbl tests
│   ├── TransactionServiceTest.java      // COTRN00C.cbl tests
│   ├── AccountServiceTest.java          // COACTVWC.cbl tests
│   └── CardServiceTest.java             // COCRDVWC.cbl tests
├── repository/
│   ├── AccountRepositoryTest.java       // VSAM ACCTDAT emulation
│   ├── TransactionRepositoryTest.java   // VSAM TRANSACT emulation
│   └── CustomerRepositoryTest.java      // VSAM CUSTDAT emulation
├── controller/
│   ├── TransactionControllerTest.java   // REST endpoint validation
│   └── AccountControllerTest.java       // Controller layer testing
└── util/
    ├── BigDecimalConverterTest.java     // COMP-3 precision tests
    └── TestDataGeneratorTest.java       // CSV/JSON data generation
```

#### 6.6.2.2 <span style="background-color: rgba(91, 57, 243, 0.2)">COBOL-to-Java Method Equivalence Testing (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Paragraph-to-Method Mapping Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Every Java method that corresponds to a COBOL paragraph must have a dedicated JUnit test that asserts identical outputs using legacy test vectors.</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">**Test Implementation Pattern**:
```java
@Test
@DisplayName("0000-MAIN-PROCESSING equivalent - processes customer account validation")
public void test0000MainProcessing_ValidatesCustomerAccount_ReturnsIdenticalOutput() {
    // Given: Legacy COBOL test vector inputs
    CustomerAccount inputAccount = testDataGenerator.createLegacyAccountData();
    
    // When: Java method processes same inputs as COBOL paragraph
    ValidationResult result = signOnService.processMainLogic(inputAccount);
    
    // Then: Assert identical output to COBOL COSGN00C.cbl 0000-MAIN-PROCESSING
    assertThat(result.getReturnCode()).isEqualTo("00");
    assertThat(result.getCustomerId()).isEqualTo(inputAccount.getCustomerId());
    assertThat(result.getProcessingTimestamp()).matches(LEGACY_TIMESTAMP_PATTERN);
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Standardized Test Structure for Business Logic Methods</span>**:

| <span style="background-color: rgba(91, 57, 243, 0.2)">COBOL Paragraph Pattern</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Java Method Mapping</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit Test Requirements</span> |
|------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">`0000-MAIN-PROCESSING`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`processMainLogic()`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Primary workflow validation with legacy test vectors</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">`1000-PROCESS-INPUTS`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`processInputValidation()`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Input parsing and validation rule testing</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">`2000-PROCESS-BUSINESS-LOGIC`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`executeBusinessProcessing()`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Core calculation logic with precision validation</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">`3000-PROCESS-OUTPUTS`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`formatOutputResponse()`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Output formatting and data structure testing</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">`9999-ABEND-PROGRAM`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`handleSystemException()`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Exception handling and error code validation</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Legacy Test Vector Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Unit tests utilize converted mainframe test data from `app/data/ASCII/` files, ensuring that Java implementations produce byte-for-byte identical results to their COBOL counterparts when processing equivalent input scenarios.</span>

#### 6.6.2.3 <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal Precision and COMP-3 Validation Testing (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Specialized Financial Precision Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive unit tests verify that BigDecimal scale and rounding behavior precisely mirrors COBOL COMP-3 packed decimal calculations using sample byte arrays and known mathematical operations.</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">**COMP-3 to BigDecimal Conversion Testing**:
```java
@Test
@DisplayName("COMP-3 PIC S9(7)V99 - validates identical precision to packed decimal")
public void testComp3ToBigDecimalConversion_ValidatesIdenticalPrecision() {
    // Given: COBOL COMP-3 byte array representing $12345.67
    byte[] comp3Bytes = {0x01, 0x23, 0x45, 0x67, 0x0F}; // Packed decimal format
    
    // When: Converting to BigDecimal with COBOL-equivalent scale
    BigDecimal result = comp3Converter.convertFromComp3(comp3Bytes, 7, 2);
    
    // Then: Assert exact precision match with COBOL calculation
    assertThat(result.scale()).isEqualTo(2);
    assertThat(result.precision()).isEqualTo(7);
    assertThat(result.toString()).isEqualTo("12345.67");
    assertThat(result.unscaledValue()).isEqualTo(BigInteger.valueOf(1234567));
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Financial Calculation Accuracy Validation</span>**:

| <span style="background-color: rgba(91, 57, 243, 0.2)">COBOL Data Type</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Java BigDecimal Configuration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Test Validation Requirements</span> |
|------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">`PIC S9(7)V99 COMP-3`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`BigDecimal(precision=7, scale=2)`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Currency amount validation with penny precision</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">`PIC S9(9)V9999 COMP-3`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`BigDecimal(precision=9, scale=4)`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Interest rate calculations with basis point accuracy</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">`PIC S9(15) COMP-3`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`BigDecimal(precision=15, scale=0)`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Large integer account numbers and transaction IDs</span> |

<span style="background-color: rgba(91, 57, 243, 0.2)">**Rounding Mode Validation Testing**:
```java
@Test
@DisplayName("Interest calculation - validates COBOL ROUNDED modifier behavior")
public void testInterestCalculation_ValidatesCobolRoundingBehavior() {
    // Given: Principal amount and interest rate from legacy test case
    BigDecimal principal = new BigDecimal("1000.00");
    BigDecimal rate = new BigDecimal("0.0525"); // 5.25% annual rate
    
    // When: Calculating monthly interest with COBOL ROUNDED equivalent
    BigDecimal monthlyInterest = interestService.calculateMonthlyInterest(
        principal, rate, RoundingMode.HALF_UP
    );
    
    // Then: Assert identical result to COBOL CBACT04C.cbl calculation
    assertThat(monthlyInterest).isEqualTo(new BigDecimal("4.38"));
    assertThat(monthlyInterest.scale()).isEqualTo(2);
}
```

#### 6.6.2.4 <span style="background-color: rgba(91, 57, 243, 0.2)">React Component Unit Testing (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">**React Testing Library and Jest Integration**: Unit tests for React components ensure field validation rules and user interaction patterns match original BMS mapset definitions, replacing BMS preprocessing validation.</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">**BMS-to-React Component Testing Strategy**:
```javascript
// COSGN00.bms equivalent validation testing
describe('SignOnComponent - COSGN00 BMS Map Equivalent', () => {
  test('validates user ID field length matches BMS USERID definition', () => {
    render(<SignOnComponent />);
    
    const userIdField = screen.getByLabelText('User ID');
    fireEvent.change(userIdField, { target: { value: 'TESTUSER123456' } });
    
    // Validate 8-character limit from original BMS mapset
    expect(userIdField.value).toBe('TESTUSER');
    expect(screen.getByText('User ID limited to 8 characters')).toBeInTheDocument();
  });
  
  test('validates password field attributes match BMS PASSWD definition', () => {
    render(<SignOnComponent />);
    
    const passwordField = screen.getByLabelText('Password');
    
    // Validate hidden input behavior matching BMS ASKIP+DARK attributes
    expect(passwordField).toHaveAttribute('type', 'password');
    expect(passwordField).toHaveAttribute('maxLength', '8');
  });
});
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">PF-Key Navigation Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Jest tests validate that keyboard event handlers accurately replicate 3270 terminal PF-key functionality for navigation and form submission.</span>

| <span style="background-color: rgba(91, 57, 243, 0.2)">BMS Map Element</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">React Component Property</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Jest Test Validation</span> |
|------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">`DFHMDF POS=(row,col)`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CSS Grid positioning</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Layout rendering and field positioning tests</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">`DFHMDF ATTRB=ASKIP`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`disabled={true}` property</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Field accessibility and interaction validation</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">`DFHMDF ATTRB=FSET`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Modified state tracking</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Form submission and change detection testing</span> |

#### 6.6.2.5 <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Context and Bean Wiring Testing (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">**@SpringBootTest Context Loading**: Comprehensive integration unit tests validate Spring bean wiring and dependency injection, replacing traditional CICS link resolution and VSAM file status compilation checks.</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">**Application Context Validation Testing**:
```java
@SpringBootTest
@TestPropertySource(locations = "classpath:application-test.properties")
class SpringContextLoadingTest {
    
    @Autowired
    private ApplicationContext applicationContext;
    
    @Test
    @DisplayName("Application context loads all required service beans")
    void testApplicationContextLoadsAllRequiredBeans() {
        // Validate all service classes corresponding to COBOL programs are wired
        assertThat(applicationContext.getBean(SignOnService.class)).isNotNull();
        assertThat(applicationContext.getBean(TransactionService.class)).isNotNull();
        assertThat(applicationContext.getBean(AccountService.class)).isNotNull();
        assertThat(applicationContext.getBean(CardService.class)).isNotNull();
    }
    
    @Test
    @DisplayName("JPA repositories are properly configured and accessible")
    void testJpaRepositoriesConfigured() {
        // Validate replacement of VSAM file access with JPA repositories
        assertThat(applicationContext.getBean(AccountRepository.class)).isNotNull();
        assertThat(applicationContext.getBean(TransactionRepository.class)).isNotNull();
        assertThat(applicationContext.getBean(CustomerRepository.class)).isNotNull();
    }
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Management Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">@Transactional annotation testing ensures Spring transaction boundaries replicate CICS SYNCPOINT behavior with identical rollback and commit semantics.</span>

#### 6.6.2.6 <span style="background-color: rgba(91, 57, 243, 0.2)">Test Data Generators and Legacy Data Conversion (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">**Anonymized CSV/JSON Test Data Generation**: Specialized test data generators convert legacy fixed-width mainframe files into anonymized CSV and JSON equivalents for in-memory object creation during unit testing.</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">**Test Data Generator Architecture**:
```java
@Component
public class LegacyTestDataGenerator {
    
    @Value("classpath:test-data/legacy-customer.csv")
    private Resource customerDataFile;
    
    public List<Customer> generateCustomerTestData() {
        // Convert fixed-width legacy format to JPA entities
        return csvParser.parseCustomerData(customerDataFile)
            .stream()
            .map(this::anonymizeCustomerData)
            .map(customerMapper::toEntity)
            .collect(toList());
    }
    
    public List<Account> generateAccountTestData() {
        // Custom JPA converter integration for COBOL data types
        return csvParser.parseAccountData(accountDataFile)
            .stream()
            .map(this::convertComp3Fields)
            .map(accountMapper::toEntity)
            .collect(toList());
    }
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Legacy Data File Conversion Strategy</span>**:

| <span style="background-color: rgba(91, 57, 243, 0.2)">Legacy Fixed-Width File</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Modern Test Format</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Conversion Requirements</span> |
|------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">`customer.txt` (502 chars)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`test-customer.csv`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Anonymized PII with preserved data relationships</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">`account.txt` (289 chars)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`test-account.json`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal conversion for COMP-3 amounts</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">`transaction.txt` (189 chars)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`test-transaction.json`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Timestamp conversion and precision preservation</span> |

<span style="background-color: rgba(91, 57, 243, 0.2)">**Custom JPA Converter Integration Testing**:
```java
@Test
@DisplayName("Custom JPA converters handle COBOL data type mappings accurately")
void testCustomJpaConverters_HandleCobolDataTypeMappings() {
    // Given: Legacy account record with COMP-3 balance field
    String legacyAccountRecord = "001234567890000012345670F20231201...";
    
    // When: Converting through custom JPA converter
    Account account = legacyDataConverter.convertAccountRecord(legacyAccountRecord);
    
    // Then: Validate BigDecimal precision matches COBOL COMP-3
    assertThat(account.getAccountBalance())
        .isEqualTo(new BigDecimal("123456.70"))
        .extracting(BigDecimal::scale)
        .isEqualTo(2);
}
```

#### 6.6.2.7 Test Execution and Coverage Requirements

**<span style="background-color: rgba(91, 57, 243, 0.2)">Unit Test Coverage Standards</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Minimum 100% coverage for business logic methods, 90% overall code coverage, with mandatory testing for all methods corresponding to COBOL paragraph conversions.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Continuous Integration Execution</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Maven Surefire and Gradle Test plugins execute complete unit test suites during CI pipeline builds, with parallel execution support and comprehensive failure reporting for immediate feedback on COBOL-Java equivalence validation.</span>

### 6.6.3 INTEGRATION TESTING APPROACH

#### 6.6.3.1 REST API Integration Testing

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Integration Testing Framework</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Integration testing focuses on REST endpoint validation through MockMvc and WebTestClient frameworks, ensuring one-to-one mapping with transaction codes while maintaining identical functional behavior to the original CICS transaction processing.</span>

```mermaid
sequenceDiagram
    participant TC as Test Client
    participant MVC as MockMvc
    participant SC as Spring Controller
    participant SVC as Service Layer
    participant DB as PostgreSQL
    participant RS as Redis Session
    
    TC->>MVC: POST /api/transactions/CC00
    MVC->>SC: @PostMapping("/CC00")
    SC->>RS: Session State Retrieval
    RS-->>SC: COMMAREA-equivalent Data
    SC->>SVC: Authentication Processing
    SVC->>DB: User Validation Query
    DB-->>SVC: Authentication Result
    SVC-->>SC: Business Logic Response
    SC->>RS: Session State Update
    SC-->>MVC: JSON Response
    MVC-->>TC: HTTP 200 + Menu Data
    
    Note over TC,RS: Integration validated through complete request-response cycle
    Note over SVC,DB: Data access tested via JPA repository integration
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Code REST Endpoint Mapping</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Each CICS transaction code maps directly to a REST endpoint with MockMvc integration tests validating complete request-response cycles</span>:

| <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Code</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">REST Endpoint</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Integration Test Scope</span> | Testing Method |
|------------------|------------------|------------------|----------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">**CC00** (Sign-On)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`/api/transactions/CC00`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication flow and menu display</span> | MockMvc with Security Context |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**CC01** (Account View)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`/api/transactions/CC01`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Account inquiry and display logic</span> | WebTestClient with Test Slices |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**CC02** (Transaction History)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`/api/transactions/CC02`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Pagination and transaction retrieval</span> | TestRestTemplate Integration |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**CC03** (Card Management)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`/api/transactions/CC03`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Card operations and validation</span> | MockMvc with Database Testing |

**<span style="background-color: rgba(91, 57, 243, 0.2)">MockMvc Integration Test Implementation</span>**:
```java
@SpringBootTest
@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)
@Testcontainers
class TransactionControllerIntegrationTest {
    
    @Autowired
    private MockMvc mockMvc;
    
    @Container
    static PostgreSQLContainer<?> postgres = new PostgreSQLContainer<>("postgres:16-alpine");
    
    @Test
    @DisplayName("CC00 transaction endpoint - validates complete authentication flow")
    void testCC00Transaction_ValidatesCompleteAuthenticationFlow() throws Exception {
        // Given: Valid authentication request matching CICS CC00 transaction
        String requestBody = """
            {
                "userId": "TESTUSER",
                "password": "password123",
                "transactionCode": "CC00"
            }
            """;
        
        // When: Processing through complete Spring MVC stack
        mockMvc.perform(post("/api/transactions/CC00")
                .contentType(MediaType.APPLICATION_JSON)
                .content(requestBody))
                
        // Then: Assert identical response to CICS COSGN00C program
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.menuOptions").isArray())
                .andExpect(jsonPath("$.userId").value("TESTUSER"))
                .andExpect(jsonPath("$.transactionCode").value("CC00"));
    }
}
```

#### 6.6.3.2 Session State Integration Testing

**<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Integration Testing</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session with Redis backend provides COMMAREA-equivalent state persistence across multiple HTTP requests, with integration tests validating session clustering and state management identical to CICS terminal session handling.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Session State Persistence Validation</span>**:
```java
@SpringBootTest
@DirtiesContext
@Testcontainers
class SessionStateIntegrationTest {
    
    @Container
    static GenericContainer<?> redis = new GenericContainer<>("redis:7-alpine")
            .withExposedPorts(6379);
    
    @Test
    @DisplayName("Session state persists across multiple requests - COMMAREA equivalent")
    void testSessionStatePersistence_AcrossMultipleRequests() throws Exception {
        // Given: Initial sign-on request establishing session
        MvcResult signOnResult = mockMvc.perform(post("/api/transactions/CC00")
                .contentType(MediaType.APPLICATION_JSON)
                .content(signOnRequestJson))
                .andExpect(status().isOk())
                .andReturn();
        
        String sessionId = extractSessionId(signOnResult);
        
        // When: Subsequent request using same session
        mockMvc.perform(get("/api/transactions/CC01")
                .header("Cookie", "SESSION=" + sessionId))
                
        // Then: Session data available without re-authentication
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.userContext.authenticated").value(true))
                .andExpect(jsonPath("$.userContext.userId").value("TESTUSER"));
    }
    
    @Test
    @DisplayName("Session timeout handling matches CICS terminal timeout behavior")
    void testSessionTimeout_MatchesCicsTerminalTimeout() throws Exception {
        // Validate session expiration and cleanup
        // Ensures Redis TTL matches original CICS timeout settings
    }
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Session Clustering and Replication Testing</span>**:

| <span style="background-color: rgba(91, 57, 243, 0.2)">Session Scenario</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis Configuration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Integration Test Validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CICS Equivalent</span> |
|------------------|------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">**Cross-Request State**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Single Redis instance</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Data persistence across HTTP requests</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COMMAREA passing</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**Session Failover**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis Sentinel cluster</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic failover without data loss</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Terminal reconnection</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**Concurrent Sessions**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis sharding</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Isolated user session state</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-terminal isolation</span> |

#### 6.6.3.3 Database Integration Testing

**<span style="background-color: rgba(91, 57, 243, 0.2)">Testcontainers PostgreSQL Integration</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Database integration tests utilize Testcontainers-managed PostgreSQL instances to replicate VSAM KSDS cursor operations through PostgreSQL queries, ensuring identical data access patterns and transaction semantics.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">VSAM Operation Simulation through PostgreSQL</span>**:
```java
@SpringBootTest
@Testcontainers
@Transactional
class DatabaseIntegrationTest {
    
    @Container
    static PostgreSQLContainer<?> postgres = new PostgreSQLContainer<>("postgres:16-alpine")
            .withDatabaseName("carddemo")
            .withUsername("testuser")
            .withPassword("testpass");
    
    @Test
    @DisplayName("STARTBR/READNEXT cursor operations - PostgreSQL equivalent")
    void testCursorOperations_PostgreSqlEquivalent() {
        // Given: Account dataset with composite key structure
        List<Account> accounts = testDataGenerator.generateAccountTestData();
        accountRepository.saveAll(accounts);
        
        // When: Simulating VSAM STARTBR with >= key condition
        String startKey = "1000000001";
        Pageable pageable = PageRequest.of(0, 10, Sort.by("accountId"));
        Page<Account> results = accountRepository.findByAccountIdGreaterThanEqual(
            startKey, pageable);
        
        // Then: Validate cursor behavior matches VSAM READNEXT sequence
        assertThat(results.getContent()).isNotEmpty();
        assertThat(results.getContent().get(0).getAccountId()).isEqualTo(startKey);
        assertThat(results.getContent()).isSortedAccordingTo(
            Comparator.comparing(Account::getAccountId));
    }
    
    @Test
    @DisplayName("Transaction boundary testing - SYNCPOINT equivalent")
    void testTransactionBoundaries_SyncpointEquivalent() {
        // Validate ACID compliance matching CICS SYNCPOINT behavior
        assertThatThrownBy(() -> {
            transactionService.performTransfer(
                invalidAccountId, validAccountId, transferAmount);
        }).isInstanceOf(DataIntegrityViolationException.class);
        
        // Ensure no partial updates occurred
        assertThat(accountRepository.findById(validAccountId))
            .hasValueSatisfying(account -> 
                assertThat(account.getBalance()).isEqualTo(originalBalance));
    }
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Database Access Pattern Validation</span>**:

| <span style="background-color: rgba(91, 57, 243, 0.2)">VSAM Operation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Equivalent</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Integration Test Focus</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Success Criteria</span> |
|------------------|------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">**STARTBR**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`WHERE key >= ?` with pagination</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Cursor positioning and iteration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Identical record sequence</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**READNEXT**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`ORDER BY key LIMIT 1 OFFSET n`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Sequential record retrieval</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Key-ordered traversal</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**READPREV**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`ORDER BY key DESC` with pagination</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Reverse cursor operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Backward traversal accuracy</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**ENDBR**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Connection and cursor cleanup</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Resource management validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">No resource leaks</span> |

#### 6.6.3.4 Security Integration Testing

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Integration Validation</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Security integration tests validate role-based authorization and authentication flows that maintain identical access control patterns to the original RACF security implementation.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Role and Permission Mapping Tests</span>**:
```java
@SpringBootTest
@AutoConfigureMockMvc
class SecurityIntegrationTest {
    
    @Test
    @WithMockUser(roles = {"ADMIN"})
    @DisplayName("Admin role access - matches RACF ADMIN group permissions")
    void testAdminRoleAccess_MatchesRacfAdminGroup() throws Exception {
        // When: Admin user accesses admin-only endpoint
        mockMvc.perform(get("/api/admin/users"))
                
        // Then: Access granted matching RACF ADMIN group
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.userList").exists());
    }
    
    @Test
    @WithMockUser(roles = {"USER"})
    @DisplayName("User role restrictions - matches RACF USER group limitations")
    void testUserRoleRestrictions_MatchesRacfUserGroup() throws Exception {
        // When: Regular user attempts admin operation
        mockMvc.perform(post("/api/admin/users/create"))
                
        // Then: Access denied matching RACF authorization rules
                .andExpect(status().isForbidden());
    }
    
    @Test
    @DisplayName("Session-based authentication flow - RACF equivalent validation")
    void testSessionBasedAuthentication_RacfEquivalent() throws Exception {
        // Validate complete authentication flow with Spring Security
        // ensuring identical behavior to RACF security validation
    }
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security to RACF Mapping Validation</span>**:

| <span style="background-color: rgba(91, 57, 243, 0.2)">RACF Group</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Role</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Access Permissions</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Integration Test Validation</span> |
|------------------|------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">**ADMIN**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`ROLE_ADMIN`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Full system access and user management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Admin endpoint access validation</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**USER**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`ROLE_USER`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Account and transaction operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">User operation boundary testing</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**READONLY**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`ROLE_READONLY`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">View-only access to data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Read operation validation</span> |

#### 6.6.3.5 Spring Batch Integration Testing

**<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Job Integration via Actuator Endpoints</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Integration tests validate Spring Batch job execution through REST actuator endpoints, ensuring identical processing sequences and restart capabilities as the original JCL batch operations.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Job Execution and Restart Testing</span>**:
```java
@SpringBootTest
@TestPropertySource(properties = {"management.endpoints.web.exposure.include=*"})
class SpringBatchIntegrationTest {
    
    @Autowired
    private TestRestTemplate restTemplate;
    
    @Test
    @DisplayName("Daily batch job launch via actuator - JCL equivalent execution")
    void testDailyBatchJobLaunch_ViaActuator() {
        // Given: Batch job parameters matching JCL PARM values
        String requestBody = """
            {
                "jobName": "dailyProcessingJob",
                "jobParameters": {
                    "processDate": "2024-01-15",
                    "batchMode": "FULL"
                }
            }
            """;
        
        // When: Launching job through actuator endpoint
        ResponseEntity<String> response = restTemplate.postForEntity(
            "/actuator/batch/jobs", requestBody, String.class);
        
        // Then: Job executes successfully matching JCL behavior
        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.ACCEPTED);
        
        // Validate job completion and results
        eventually(() -> {
            JobExecution jobExecution = getJobExecution(response.getBody());
            assertThat(jobExecution.getStatus()).isEqualTo(BatchStatus.COMPLETED);
        });
    }
    
    @Test
    @DisplayName("Batch job restart capability - JCL restart equivalent")
    void testBatchJobRestart_JclRestartEquivalent() {
        // Simulate job failure and validate restart from checkpoint
        // Ensuring identical restart behavior to JCL //RESTART processing
    }
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">JCL to Spring Batch Migration Validation</span>**:

| <span style="background-color: rgba(91, 57, 243, 0.2)">JCL Job</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Integration Test Focus</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Validation Criteria</span> |
|------------------|------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">**DAILYPROC**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`dailyProcessingJob`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">End-to-end batch processing</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Identical output files and processing counts</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**INTRST**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`interestCalculationJob`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Interest calculation accuracy</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal precision matching COBOL</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**STMT**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`statementGenerationJob`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Statement formatting and delivery</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Byte-for-byte identical statement content</span> |

#### 6.6.3.6 External Service Contract Testing

**<span style="background-color: rgba(91, 57, 243, 0.2)">Contract Testing with Pact and WireMock</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">External interface contract tests ensure identical message formats and communication patterns with payment networks and banking core systems, maintaining interface compatibility during modernization.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Payment Network Interface Contract Testing</span>**:
```java
@SpringBootTest
@PactTestFor(providerName = "payment-network", port = "8080")
class PaymentNetworkContractTest {
    
    @Test
    @PactTestFor
    @DisplayName("Authorization request contract - maintains identical message format")
    void testAuthorizationRequest_MaintainsIdenticalMessageFormat() {
        // Given: Authorization request matching legacy format
        AuthorizationRequest request = AuthorizationRequest.builder()
            .cardNumber("4532123456789012")
            .amount(new BigDecimal("150.00"))
            .merchantId("MERCHANT001")
            .transactionType("AUTH")
            .build();
        
        // When: Sending request through modernized interface
        ResponseEntity<AuthorizationResponse> response = 
            paymentNetworkClient.authorizeTransaction(request);
        
        // Then: Response format matches original interface specification
        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);
        assertThat(response.getBody().getResponseCode()).matches("\\d{2}");
        assertThat(response.getBody().getAuthCode()).matches("[A-Z0-9]{6}");
    }
}

@Component
class WireMockBankingCoreTest {
    
    @Test
    @DisplayName("Core banking interface - WireMock contract validation")
    void testCoreBankingInterface_WireMockContractValidation() {
        // Given: WireMock server with core banking contract stubs
        WireMockServer wireMockServer = new WireMockServer(8089);
        wireMockServer.start();
        
        wireMockServer.stubFor(post(urlEqualTo("/core/account/balance"))
            .withRequestBody(matchingJsonPath("$.accountId"))
            .willReturn(aResponse()
                .withStatus(200)
                .withHeader("Content-Type", "application/json")
                .withBody("""
                    {
                        "accountId": "1000000001",
                        "balance": "1250.75",
                        "currency": "USD",
                        "responseCode": "00"
                    }
                    """)));
        
        // When/Then: Validate message format compliance
        // Ensure identical request/response structure to legacy interface
    }
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">External Interface Contract Matrix</span>**:

| <span style="background-color: rgba(91, 57, 243, 0.2)">External System</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Contract Tool</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Message Format Validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Compatibility Requirement</span> |
|------------------|------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">**Payment Networks**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Pact Consumer/Provider</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ISO 8583 message structure preservation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">100% field-level compatibility</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**Core Banking**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">WireMock API simulation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Proprietary JSON/XML format adherence</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Identical request/response schema</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**Regulatory Reporting**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Pact with schema validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Regulatory file format compliance</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Audit trail preservation</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**Fraud Detection**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">WireMock with latency simulation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time scoring API compatibility</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Response time SLA maintenance</span> |

### 6.6.4 END-TO-END TESTING APPROACH

#### 6.6.4.1 Business Process Validation (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">React UI Automation through Browser Testing</span>**:
End-to-end testing occurs through comprehensive business process validation using <span style="background-color: rgba(91, 57, 243, 0.2)">modern browser automation tools that drive the React frontend while validating complete backend integration</span>:

**<span style="background-color: rgba(91, 57, 243, 0.2)">E2E Testing Architecture</span>**:
```mermaid
graph TD
    subgraph "Browser Automation Layer"
        A[Cypress Test Runner] --> B[React Component Interaction]
        B --> C[PF-Key Event Simulation]
        C --> D[Form Validation Testing]
        D --> E[Navigation Flow Testing]
    end
    
    subgraph "API Integration Layer"
        F[REST API Calls] --> G[Spring Boot Controller]
        G --> H[Service Layer Validation]
        H --> I[Database Transaction Verification]
    end
    
    subgraph "Data Validation Layer"
        J[PostgreSQL Query Results] --> K[VSAM Equivalence Check]
        K --> L[Business Rule Validation]
        L --> M[Calculation Accuracy Testing]
    end
    
    subgraph "Performance Monitoring Layer"
        N[Response Time Measurement] --> O[< 200ms Target Validation]
        O --> P[Throughput Analysis]
        P --> Q[Resource Usage Monitoring]
    end
    
    B --> F
    I --> J
    E --> N
    
    style A fill:#5B39F3
    style F fill:#5B39F3
    style J fill:#5B39F3
    style N fill:#5B39F3
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">E2E Test Scenarios Mapping Original 3270 Workflows</span>**:
1. **<span style="background-color: rgba(91, 57, 243, 0.2)">Complete User Journey</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication → Menu Navigation → Business Function → Transaction Completion via React components with keyboard event automation</span>
2. **<span style="background-color: rgba(91, 57, 243, 0.2)">Account Management Flow</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Customer Creation → Account Setup → Card Issuance → Transaction Processing through REST API integration testing</span>
3. **<span style="background-color: rgba(91, 57, 243, 0.2)">Financial Processing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Entry → Interest Calculation → Statement Generation → Report Production with byte-for-byte identical output validation</span>
4. **<span style="background-color: rgba(91, 57, 243, 0.2)">Administrative Functions</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">User Management → System Administration → Audit Review through Spring Security role-based testing</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cypress Browser Automation Configuration</span>**:

| Test Category | <span style="background-color: rgba(91, 57, 243, 0.2)">Cypress Configuration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">React Component Target</span> | Validation Method |
|---------------|------------------|-------------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication Testing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">`cy.visit('/login').type().submit()`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SignOn.jsx component</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JWT token validation + session creation</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Menu Navigation</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">`cy.get('[data-testid=menu-item]').click()`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">MainMenu.jsx component</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">React Router navigation + authorization check</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">PF-Key Simulation</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">`cy.get('body').type('{ctrl}{f3}')`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Keyboard event handlers</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Function key equivalent execution</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Entry Forms</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">`cy.get('[name=field]').type().blur()`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Formik form components</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Field validation + REST API submission</span> |

#### 6.6.4.2 Performance Testing Requirements (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Modern Performance Validation Architecture</span>**:
Based on <span style="background-color: rgba(91, 57, 243, 0.2)">Validation Checklist 0.5.1 requirement to maintain transaction response times under 200ms</span>, the system implements comprehensive performance testing through <span style="background-color: rgba(91, 57, 243, 0.2)">automated CI/CD integration with JMeter and Gatling load testing frameworks</span>:

| Transaction Type | <span style="background-color: rgba(91, 57, 243, 0.2)">Response Time Target</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Testing Tool</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CI/CD Integration</span> |
|------------------|---------------------|-------------------|---------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">REST API Authentication</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 200ms</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JMeter HTTP Request Sampler</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Jenkins Pipeline Stage</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Account Query Operations</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 200ms (95th percentile)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Gatling simulation scripts</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">GitLab CI performance testing</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Updates</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 200ms</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JMeter load testing plans</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Automated threshold validation</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Processing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 4 hours daily window</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes CronJob validation scripts</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Job completion monitoring</span>** |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Microservices Performance Testing Architecture</span>**:
```mermaid
graph TD
    subgraph "CI/CD Performance Testing Pipeline"
        A[Git Push Trigger] --> B[JMeter Test Execution]
        B --> C[Gatling Load Generation]
        C --> D[Performance Metrics Collection]
        D --> E[Spring Actuator Monitoring]
    end
    
    subgraph "Spring Boot Application Layer"
        F[REST Controller Endpoints] --> G[Service Layer Processing]
        G --> H[PostgreSQL Database Access]
        H --> I[Response Generation]
        I --> J[< 200ms Target Validation]
    end
    
    subgraph "Kubernetes Batch Validation"
        K[Spring Batch CronJob] --> L[Job Execution Monitoring]
        L --> M[< 4 Hour Window Validation]
        M --> N[Batch Completion Verification]
    end
    
    subgraph "Performance Metrics Dashboard"
        O[Micrometer Custom Metrics] --> P[Prometheus Data Collection]
        P --> Q[Grafana Performance Dashboard]
        Q --> R[Automated Alert Generation]
    end
    
    C --> F
    E --> O
    L --> O
    J --> R
    N --> R
    
    style B fill:#5B39F3
    style C fill:#5B39F3
    style K fill:#5B39F3
    style O fill:#5B39F3
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">JMeter and Gatling Integration Configuration</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JMeter Test Plans</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated execution of REST API performance tests with 10,000 TPS target load, integrated into Jenkins CI/CD pipeline stages</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Gatling Simulation Scripts</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Scala-based performance testing scenarios replicating complete user workflows with concurrent user load simulation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes CronJob Monitoring</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job execution validation scripts measuring end-to-end processing time within 4-hour daily processing window</span>

#### 6.6.4.3 Security Testing Strategy (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Security Testing with OWASP ZAP Integration</span>**:
Security testing integrates with <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security framework and automated OWASP ZAP vulnerability scanning</span> following modern cloud-native security best practices:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Security Test Categories</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JWT token validation, OAuth2 flow testing, session management verification through automated OWASP ZAP scanning</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Authorization Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security role-based access control, method-level security annotation testing, React component authorization validation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Protection Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Sensitive field encryption validation, PostgreSQL data masking verification, Spring Boot security headers testing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Security Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">HTTPS/TLS encryption validation, REST API security testing, Spring Cloud Gateway security configuration verification</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">OWASP ZAP Automated Security Testing Matrix</span>**:

| <span style="background-color: rgba(91, 57, 243, 0.2)">Security Test Category</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">OWASP ZAP Integration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Expected Result</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Validation Criteria</span> |
|-----------------|-------------|-----------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication Vulnerability Scanning</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Automated credential testing and brute force detection</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Access control enforcement validation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit logs</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Authorization Path Coverage</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Role-based endpoint accessibility scanning</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">403 Forbidden responses for unauthorized access</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security method-level protection</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">SQL Injection Testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Automated injection attack simulation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JPA prepared statement protection</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL query parameterization</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Cross-Site Scripting (XSS) Prevention</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">React component XSS vulnerability scanning</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Input sanitization and output encoding</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Content Security Policy validation</span>** |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Integration Testing Framework</span>**:
```mermaid
graph TD
    subgraph "Authentication Testing Layer"
        A[OWASP ZAP Scanner] --> B[JWT Token Validation]
        B --> C[Spring Security Authentication]
        C --> D[Session Management Testing]
    end
    
    subgraph "Authorization Testing Layer"
        E[Role-Based Access Control] --> F[Method-Level Security]
        F --> G[React Component Authorization]
        G --> H[REST Endpoint Protection]
    end
    
    subgraph "Data Security Testing Layer"
        I[Field-Level Encryption] --> J[PostgreSQL Data Masking]
        J --> K[Sensitive Data Handling]
        K --> L[Audit Trail Generation]
    end
    
    subgraph "Network Security Testing Layer"
        M[HTTPS/TLS Validation] --> N[API Security Headers]
        N --> O[CORS Configuration]
        O --> P[CSRF Protection Testing]
    end
    
    A --> E
    D --> I
    H --> M
    L --> P
    
    style A fill:#5B39F3
    style E fill:#5B39F3
    style I fill:#5B39F3
    style M fill:#5B39F3
```

#### 6.6.4.4 Cross-Browser and Compatibility Testing (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Multi-Browser React Component Validation</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive cross-browser testing ensuring React UI components maintain functional parity across all supported browsers</span>, replicating the consistent behavior previously provided by standardized 3270 terminal interfaces:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Selenium Grid Integration</span>**:

| Browser Platform | <span style="background-color: rgba(91, 57, 243, 0.2)">Selenium Configuration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">React Component Testing Scope</span> | Validation Coverage |
|------------------|-------------------|-------------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Chrome Latest</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">WebDriver Chrome options with headless mode</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Full workflow testing with keyboard event simulation</span> | Complete functional validation |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Firefox Latest</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">GeckoDriver with automated profile management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PF-key equivalent functionality testing</span> | Cross-platform compatibility |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Safari (macOS)</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Safari WebDriver with macOS automation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Apple ecosystem integration validation</span> | Platform-specific behavior |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Edge (Chromium)</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">EdgeDriver with Windows integration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise Windows environment testing</span> | Corporate environment validation |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Mobile Responsive Testing Integration</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Extend testing coverage beyond traditional desktop environments to include mobile device compatibility, ensuring React components maintain usability across device form factors</span>:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Mobile Device Simulation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Cypress viewport testing with mobile device dimensions and touch event simulation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Responsive Design Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Material-UI component behavior testing across breakpoints and screen sizes</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Touch Interface Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Mobile interaction pattern validation replacing keyboard-based 3270 navigation</span>

#### 6.6.4.5 Data Flow and Integration Testing (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">End-to-End Data Flow Validation Architecture</span>**:
```mermaid
graph TD
    subgraph "React Frontend Layer"
        A[User Input Validation] --> B[Formik Form Submission]
        B --> C[Axios HTTP Request]
        C --> D[REST API Call]
    end
    
    subgraph "Spring Boot Backend Layer"
        E[Controller Request Processing] --> F[Service Layer Business Logic]
        F --> G[JPA Repository Operations]
        G --> H[PostgreSQL Database Transaction]
    end
    
    subgraph "Data Consistency Validation"
        I[Database State Verification] --> J[VSAM Equivalence Check]
        J --> K[Business Rule Validation]
        K --> L[Calculation Accuracy Testing]
    end
    
    subgraph "Response Flow Validation"
        M[Database Response] --> N[Service Layer Processing]
        N --> O[Controller JSON Response]
        O --> P[React Component State Update]
    end
    
    D --> E
    H --> I
    L --> M
    P --> A
    
    style A fill:#5B39F3
    style E fill:#5B39F3
    style I fill:#5B39F3
    style M fill:#5B39F3
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Byte-for-Byte Identical Output Validation</span>**:
Critical requirement from <span style="background-color: rgba(91, 57, 243, 0.2)">Validation Checklist 0.5.1 to ensure identical calculation results between COBOL and Java implementations</span>:

| <span style="background-color: rgba(91, 57, 243, 0.2)">Business Function</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">E2E Validation Method</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Precision Requirement</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Testing Framework</span> |
|------------------|-------------------|-------------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Interest Calculation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal precision comparison testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Penny-level accuracy matching COBOL COMP-3</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Cypress custom commands with assertion validation</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Balance Updates</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Database state verification after transaction completion</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Exact decimal precision preservation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot test integration with database assertions</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Statement Generation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">File output comparison with COBOL-generated reports</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Identical file layouts and data formats</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job testing with file comparison utilities</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Validation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Real-time validation rule execution comparison</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Identical business rule enforcement</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5 test suite with parallel COBOL comparison</span>** |

### 6.6.5 TEST AUTOMATION FRAMEWORK

#### 6.6.5.1 CI/CD Build Automation (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated CI/CD Pipeline</span>**:
The system implements <span style="background-color: rgba(91, 57, 243, 0.2)">comprehensive CI/CD automation through GitHub Actions workflows</span>, replacing traditional JCL-based compilation with modern containerized build processes:

```mermaid
flowchart TD
    subgraph "CI/CD Pipeline Automation"
        A[Code Push to Repository] --> B[GitHub Actions Trigger]
        B --> C[Maven Backend Build]
        B --> D[npm Frontend Build]
        C --> E[JUnit Unit Tests]
        D --> F[Jest/React Testing Library]
    end
    
    subgraph "Integration Testing Stage"
        E --> G[Testcontainers PostgreSQL]
        F --> H[Spring Boot Integration Tests]
        G --> I[API Integration Validation]
        H --> I
    end
    
    subgraph "End-to-End Testing Stage"
        I --> J[Cypress E2E Tests]
        J --> K[Cross-Browser Validation]
        K --> L[Performance Testing - Gatling]
    end
    
    subgraph "Quality Gate & Deployment"
        L --> M[SonarQube Quality Gate]
        M --> N{Quality Gate Passed?}
        N -->|Yes| O[Docker Image Build]
        N -->|No| P[Pipeline Failure]
        O --> Q[Container Registry Push]
        Q --> R[Kubernetes Deployment]
    end
    
    style G fill:#5B39F3
    style J fill:#5B39F3
    style L fill:#5B39F3
    style M fill:#5B39F3
    style O fill:#5B39F3
    style P fill:#ffcdd2
    style R fill:#c8e6c9
```

#### 6.6.5.2 Containerized Test Execution (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Docker Compose Test Environment</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Containerized test execution ensures repeatable testing across all environments using Docker Compose orchestration and Testcontainers integration</span>:

**Test Environment Orchestration**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Testcontainers Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated PostgreSQL container provisioning for isolated database testing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Containerized Redis instances for session state validation</span>  
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Isolation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Dedicated Docker networks preventing test interference</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Resource Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Container resource limits ensuring consistent test performance</span>

#### 6.6.5.3 SonarQube Quality Gate Integration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Code Quality Validation</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">SonarQube integration provides comprehensive static analysis and quality gate enforcement</span> ensuring all code changes meet enterprise quality standards:

| Quality Metric | <span style="background-color: rgba(91, 57, 243, 0.2)">Threshold</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Validation Method</span> | Enforcement Level |
|----------------|-----------|-------------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Code Coverage</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">≥ 80%</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JaCoCo Maven Plugin</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Pipeline Blocking</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Duplicate Code</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 3%</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">SonarQube Analysis</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Warning</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Hotspots</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">0 High/Critical</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Static Security Analysis</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Pipeline Blocking</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Technical Debt</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">≤ 30 min per KLOC</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Code Smell Detection</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Advisory</span>** |

#### 6.6.5.4 Kubernetes Test Environment Automation (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic Test Environment Provisioning</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Automated deployment of test environments to dedicated Kubernetes namespaces</span> enables isolated integration and performance testing:

**Test Environment Management**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Namespace Isolation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Dedicated Kubernetes namespaces (`test-integration`, `test-performance`) with resource quotas</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Helm Chart Deployment</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated application deployment using Helm charts with environment-specific values</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Provisioning</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL StatefulSet deployment with test data seeding via kubectl jobs</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Service Mesh Configuration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Istio service mesh configuration for traffic management and observability</span>

#### 6.6.5.5 Parallel Test Execution Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Multi-Stage Pipeline Parallelization</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Modern CI/CD pipeline supports concurrent test execution across multiple dimensions</span> ensuring rapid feedback and efficient resource utilization:

**Execution Strategies**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Test Suite Parallelization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5 parallel execution with configurable thread pools for unit test acceleration</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container-Based Isolation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Independent Docker containers for integration tests preventing data contamination</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Job Scaling</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Horizontal scaling of test execution pods for performance testing workloads</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Browser Grid Execution</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Selenium Grid integration for parallel cross-browser Cypress test execution</span>

#### 6.6.5.6 Failed Test Handling and Recovery (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Failure Management</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive failure detection, analysis, and recovery mechanisms</span> ensure reliable test execution and rapid issue resolution:

| Failure Category | <span style="background-color: rgba(91, 57, 243, 0.2)">Detection Method</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Recovery Action</span> | Documentation Required |
|------------------|---------------|----------------|----------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Build Failures</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Maven/npm exit codes</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Dependency resolution retry</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Build log analysis</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Unit Test Failures</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JUnit/Jest assertions</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Test isolation and retry</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Failure reason analysis</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Failures</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Docker/Kubernetes health checks</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Container restart and reschedule</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Container log collection</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">E2E Test Failures</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Cypress test results</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Screenshot capture and retry</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Video recording analysis</span>** |

#### 6.6.5.7 Flaky Test Management (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Intelligent Test Stability Monitoring</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced flaky test detection and management system</span> maintains pipeline reliability through statistical analysis and automated remediation:

**Flaky Test Detection**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Success Rate Tracking</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated monitoring of test success rates with configurable thresholds (< 95% success indicates flaky behavior)</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Retry Mechanism</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Intelligent retry logic with exponential backoff for environment-dependent test failures</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Test Quarantine</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic quarantine of consistently failing tests with dedicated investigation workflows</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Root Cause Analysis</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated collection of test execution context including environment state, timing, and resource utilization</span>

#### 6.6.5.8 Test Automation Tool Integration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive Testing Technology Stack</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Modern testing framework integration</span> provides comprehensive coverage across all application layers:

**Testing Framework Integration**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Unit Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5.x with Mockito for Spring Boot service testing and Jest for React component testing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Test with Testcontainers providing PostgreSQL and Redis container orchestration</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">API Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">RestAssured and TestRestTemplate for comprehensive REST API validation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">End-to-End Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Cypress with React Testing Library for complete user workflow validation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Gatling for load testing with k6 for API performance validation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">OWASP ZAP integration for security vulnerability scanning</span>

#### 6.6.5.9 Test Reporting and Analytics (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive Test Observability</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced reporting and analytics system</span> provides detailed insights into test execution, coverage, and quality metrics:

**Reporting Infrastructure**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Test Execution Reports</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit XML and JSON reports aggregated through GitHub Actions with historical trending</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Coverage Analytics</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JaCoCo coverage reports with SonarQube integration providing branch and line coverage analysis</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Metrics</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Gatling HTML reports with response time distribution and throughput analysis</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Quality Dashboards</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Grafana dashboards displaying test execution trends, failure rates, and quality gate compliance</span>

#### 6.6.5.10 Test Environment Resource Management (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Resource Optimization</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Efficient resource management through containerization and Kubernetes orchestration</span> ensures optimal cost and performance balance:

**Resource Management Strategies**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Resource Limits</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Defined CPU and memory limits for test containers preventing resource exhaustion</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Test Environment Lifecycle</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated provisioning and cleanup of test environments with configurable retention policies</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Parallel Execution Scaling</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic scaling of test execution resources based on pipeline workload and available cluster capacity</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cost Optimization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spot instance utilization for non-critical test workloads with appropriate failure handling</span>

### 6.6.6 QUALITY METRICS AND MONITORING

#### 6.6.6.1 Performance Quality Metrics (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator Performance Tracking</span>**:
Quality metrics are captured through <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native monitoring infrastructure using Prometheus, Grafana, and Spring Boot Actuator endpoints</span>:

| Metric Category | Target Value | Measurement Method | Alerting Threshold | Review Frequency |
|-----------------|--------------|-------------------|-------------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">REST Response Time</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 200ms (95%)</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer `http_server_requests_seconds`</span> | **<span style="background-color: rgba(91, 57, 243, 0.2)">> 500ms</span>** | Real-time |
| **Batch Processing Window** | < 4 hours daily | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job completion tracking</span> | > 6 hours | Daily |
| **Transaction Success Rate** | > 99% | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus error rate calculation</span> | < 95% | Hourly |
| **System Availability** | 99.9% business hours | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes readiness probes + Prometheus `up` metric</span> | < 99% | Continuous |
| **CPU Utilization** | < 80% sustained | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer `process_cpu_usage` metric</span> | > 90% | 15-minute intervals |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Alert Rules for Performance Monitoring</span>**:

```yaml
groups:
  - name: carddemo.performance.rules
    rules:
    - alert: RestResponseTimeHigh
      expr: histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket{uri=~"/api/.*"}[5m])) by (le)) > 0.5
      for: 2m
      labels:
        severity: critical
      annotations:
        summary: "REST API response time exceeding 500ms threshold"
        
    - alert: SystemCpuHigh
      expr: process_cpu_usage > 0.80
      for: 10m
      labels:
        severity: warning
      annotations:
        summary: "System CPU utilization exceeding 80% threshold"
        
    - alert: BatchJobDurationExceeded
      expr: spring_batch_job_seconds{status="COMPLETED"} > 21600
      labels:
        severity: critical
      annotations:
        summary: "Batch job execution exceeding 6-hour alert threshold"
```

#### 6.6.6.2 Business Quality Metrics (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Financial Precision Verification Framework</span>**:
```mermaid
graph TD
    subgraph "Financial Accuracy Metrics"
        A[Spring Boot Transaction Processing] --> B[BigDecimal Balance Verification]
        B --> C[100% Accuracy Target]
        C --> D{Precision Validation}
        D -->|Pass| E[Continue Operations]
        D -->|Fail| F[Critical Alert]
    end
    
    subgraph "Business Process Metrics"
        G[Interest Calculation Service] --> H[COBOL Precision Comparison]
        I[Statement Generation Job] --> J[Output Completeness Check]
        K[Report Production Job] --> L[Data Integrity Verification]
    end
    
    subgraph "Quality Assurance"
        M[Nightly Reconciliation Job] --> N[COBOL vs Java Validation]
        O[Cross-Reference Integrity] --> P[JPA Referential Consistency]
        Q[Audit Trail Completeness] --> R[Spring Security Event Compliance]
    end
    
    style C fill:#c8e6c9
    style F fill:#ff5252
    style E fill:#e3f2fd
    style H fill:#e8f5e8
    style N fill:#fff3e0
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Nightly Financial Precision Verification Job</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">A dedicated Spring Batch job performs nightly comparison between theoretical COBOL calculation outputs and actual Java service results to ensure complete precision parity</span>:

| Verification Component | Comparison Method | Success Criteria | Failure Response | Execution Schedule |
|----------------------|-------------------|------------------|------------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Interest Calculation Precision</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal output vs COBOL COMP-3 results</span> | **<span style="background-color: rgba(91, 57, 243, 0.2)">Penny-level accuracy match</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Critical alert + processing halt</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Daily 2:00 AM</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Balance Update Verification</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Account balance calculations comparing Java vs COBOL logic</span> | **<span style="background-color: rgba(91, 57, 243, 0.2)">Zero discrepancy tolerance</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Emergency escalation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Daily 2:30 AM</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Amount Precision</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot service calculations vs reference COBOL outputs</span> | **<span style="background-color: rgba(91, 57, 243, 0.2)">Exact decimal place matching</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Data integrity alert</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Daily 3:00 AM</span>** |

**Business Process Quality Metrics**:

| Business Metric | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Metric Source</span> | Target Value | <span style="background-color: rgba(91, 57, 243, 0.2)">Alert Configuration</span> | Business Impact |
|-----------------|-----------------|--------------|-------------------|-----------------|
| **Authentication Success Rate** | <span style="background-color: rgba(91, 57, 243, 0.2)">`spring_security_authentication_total{result="success"}`</span> | > 99% | <span style="background-color: rgba(91, 57, 243, 0.2)">< 95% triggers investigation</span> | Customer access |
| **Transaction Completion Rate** | <span style="background-color: rgba(91, 57, 243, 0.2)">`http_server_requests_total{status="200",uri="/api/transactions"}`</span> | > 99.5% | <span style="background-color: rgba(91, 57, 243, 0.2)">< 99% triggers escalation</span> | Revenue processing |
| **Interest Calculation Accuracy** | <span style="background-color: rgba(91, 57, 243, 0.2)">`custom_precision_verification_total{result="passed"}`</span> | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% COBOL parity</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Any deviation triggers critical alert</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Financial compliance</span>** |
| **Statement Generation Completeness** | <span style="background-color: rgba(91, 57, 243, 0.2)">`spring_batch_job_seconds{job_name="statementJob",status="COMPLETED"}`</span> | 100% daily completion | <span style="background-color: rgba(91, 57, 243, 0.2)">Missing statements trigger immediate review</span> | Customer communication |

#### 6.6.6.3 Security Quality Metrics (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Event Monitoring Framework</span>**:
Security quality metrics integrate with <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit events and Prometheus monitoring systems</span>:

| Security Metric | Measurement | Target | Alert Condition | Response Time |
|-----------------|-------------|--------|------------------|---------------|
| **Authentication Success Rate** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security authentication events</span> | > 95% | < 90% success | 15 minutes |
| **Authorization Violations** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security access denied events</span> | Zero violations | Any violation | Immediate |
| **Data Access Compliance** | <span style="background-color: rgba(91, 57, 243, 0.2)">JPA audit logs and method security</span> | 100% authorized | Unauthorized access | Immediate |
| **Security Event Response** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security incident tracking</span> | < 15 minutes | > 30 minutes | Management escalation |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Metrics Collection Configuration</span>**:

```yaml
# Custom Micrometer metrics for Spring Security events
management:
  metrics:
    tags:
      application: carddemo
    export:
      prometheus:
        enabled: true
  endpoints:
    web:
      exposure:
        include: "metrics,health,prometheus"

#### Security event listeners configuration
spring:
  security:
    events:
      enabled: true
      include: "authentication-success,authentication-failure,authorization-failure"
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Security Alert Rules for Prometheus</span>**:

```yaml
groups:
  - name: carddemo.security.rules
    rules:
    - alert: AuthenticationFailureSpike
      expr: increase(spring_security_authentication_total{result="failure"}[5m]) > 10
      for: 1m
      labels:
        severity: warning
      annotations:
        summary: "Elevated authentication failure rate detected"
        
    - alert: UnauthorizedAccessAttempt
      expr: increase(http_server_requests_total{status="403"}[1m]) > 5
      labels:
        severity: critical
      annotations:
        summary: "Multiple unauthorized access attempts detected"
        
    - alert: SecurityEventResponseSlow
      expr: avg_over_time(security_incident_response_duration_seconds[15m]) > 900
      labels:
        severity: warning
      annotations:
        summary: "Security incident response time exceeding 15-minute target"
```

#### 6.6.6.4 Quality Gates and Thresholds (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus-Based Quality Gate Matrix</span>**:
| Quality Gate | Criteria | Pass Threshold | Action on Failure | Escalation Path |
|--------------|----------|----------------|-------------------|-----------------|
| **Build Quality** | <span style="background-color: rgba(91, 57, 243, 0.2)">Maven compilation + Spring Boot tests</span> | 100% clean compile | Build rejection | Development team |
| **Performance Quality** | <span style="background-color: rgba(91, 57, 243, 0.2)">REST API response time compliance</span> | **<span style="background-color: rgba(91, 57, 243, 0.2)">95% under 200ms</span>** | Performance review | Systems programming |
| **Financial Accuracy** | <span style="background-color: rgba(91, 57, 243, 0.2)">COBOL-Java precision verification</span> | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% calculation parity</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Processing halt</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Management notification</span>** |
| **Security Compliance** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit events</span> | Zero violations | Security review | Security team |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive Prometheus Alert Rule Configuration</span>**:

```yaml
groups:
  - name: carddemo.quality.gates
    rules:
    # Performance Quality Gates
    - alert: RestApiPerformanceGate
      expr: histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket{uri=~"/api/.*"}[5m])) by (le)) > 0.2
      for: 2m
      labels:
        severity: critical
        gate: "performance"
      annotations:
        summary: "REST API 95th percentile response time exceeding 200ms quality gate"
        description: "Performance quality gate failure - immediate investigation required"
        
    # Financial Accuracy Quality Gates
    - alert: FinancialPrecisionGate
      expr: increase(custom_precision_verification_total{result="failed"}[1h]) > 0
      labels:
        severity: critical
        gate: "financial"
      annotations:
        summary: "Financial precision verification failure detected"
        description: "COBOL-Java calculation mismatch - processing halt required"
        
    # System Availability Quality Gates  
    - alert: SystemAvailabilityGate
      expr: avg_over_time(up{job="carddemo-service"}[1h]) < 0.99
      labels:
        severity: critical
        gate: "availability"
      annotations:
        summary: "System availability below 99% quality gate"
        description: "Availability SLA violation - immediate escalation required"
        
    # Transaction Success Quality Gates
    - alert: TransactionSuccessGate
      expr: (sum(rate(http_server_requests_total{status="200",uri="/api/transactions"}[1h])) / sum(rate(http_server_requests_total{uri="/api/transactions"}[1h]))) < 0.99
      labels:
        severity: warning
        gate: "business"
      annotations:
        summary: "Transaction success rate below 99% quality gate"
        description: "Business transaction quality degradation detected"
```

#### 6.6.6.5 Financial Precision Monitoring Implementation (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">COBOL-Java Calculation Verification System</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">A specialized monitoring system ensures complete financial precision parity between the original COBOL calculations and the modernized Java implementation through automated nightly verification</span>:

```mermaid
graph TD
    subgraph "Precision Verification Architecture"
        A[Nightly Verification Job] --> B[Sample Transaction Set]
        B --> C[Parallel Processing]
        C --> D[COBOL Reference Calculation]
        C --> E[Java Service Calculation]
        D --> F[Precision Comparison Engine]
        E --> F
        F --> G{Results Match?}
        G -->|Yes| H[Verification Passed]
        G -->|No| I[Critical Precision Alert]
    end
    
    subgraph "Verification Metrics"
        J[Interest Calculation Precision] --> K[BigDecimal vs COMP-3]
        L[Balance Update Accuracy] --> M[Account State Consistency]
        N[Transaction Amount Precision] --> O[Decimal Place Validation]
    end
    
    subgraph "Alert Response"
        I --> P[Immediate Processing Halt]
        P --> Q[Management Notification]
        Q --> R[Investigation Initiation]
        R --> S[Root Cause Analysis]
    end
    
    style H fill:#c8e6c9
    style I fill:#ff5252
    style P fill:#ffcdd2
    style K fill:#e8f5e8
    style M fill:#e3f2fd
    style O fill:#fff3e0
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Precision Verification Job Configuration</span>**:

| Verification Type | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Name</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Execution Schedule</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Metric</span> | Alert Threshold |
|------------------|-----------------|-------------------|-------------------|-----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Interest Rate Calculations</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`precisionVerificationJob`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Daily 2:00 AM</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`precision_verification_interest_total`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Any mismatch</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Account Balance Updates</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`balanceVerificationJob`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Daily 2:30 AM</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`precision_verification_balance_total`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Any deviation</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Payment Processing Amounts</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`paymentVerificationJob`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Daily 3:00 AM</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`precision_verification_payment_total`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Precision error</span>** |

#### 6.6.6.6 Monitoring Dashboard Integration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Grafana Quality Metrics Dashboard Configuration</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">Quality metrics are visualized through comprehensive Grafana dashboards providing real-time visibility into system performance, business accuracy, and security compliance</span>:

| Dashboard Panel | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Query</span> | Visualization Type | Alert Integration | Refresh Rate |
|-----------------|-------------------|-------------------|-------------------|--------------|
| **REST API Performance** | <span style="background-color: rgba(91, 57, 243, 0.2)">`histogram_quantile(0.95, http_server_requests_seconds_bucket)`</span> | Time series graph | Performance gate alerts | 15 seconds |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Financial Precision Status</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`precision_verification_total{result="passed"} / precision_verification_total * 100`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Gauge with 100% target</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Critical precision alerts</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">30 seconds</span>** |
| **Security Event Overview** | <span style="background-color: rgba(91, 57, 243, 0.2)">`spring_security_authentication_total` rate</span> | Security event heatmap | Security gate alerts | 30 seconds |
| **System Health Summary** | <span style="background-color: rgba(91, 57, 243, 0.2)">`up{job="carddemo-service"} * 100`</span> | Availability status | System gate alerts | 15 seconds |

**Quality Metrics Flow Architecture**:

```mermaid
graph TD
    subgraph "Quality Data Sources"
        A[Spring Boot Services] --> B[Micrometer Metrics]
        C[Spring Security Events] --> D[Authentication Metrics]
        E[Spring Batch Jobs] --> F[Precision Verification Results]
        G[JPA Repositories] --> H[Database Performance Metrics]
    end
    
    subgraph "Prometheus Collection"
        B --> I[Performance Metrics Registry]
        D --> J[Security Metrics Registry]
        F --> K[Business Metrics Registry]
        H --> L[Data Quality Metrics Registry]
        
        I --> M[Prometheus Server]
        J --> M
        K --> M
        L --> M
    end
    
    subgraph "Quality Gate Processing"
        M --> N[Alert Rule Evaluation]
        N --> O{Quality Gate Status}
        O -->|Pass| P[Continue Operations]
        O -->|Fail| Q[Quality Gate Failure]
        Q --> R[Automated Response]
        Q --> S[Escalation Notification]
    end
    
    subgraph "Visualization Layer"
        M --> T[Grafana Quality Dashboard]
        M --> U[Executive SLA Dashboard]
        M --> V[Operations Console]
        R --> W[Alert Integration]
    end
    
    style P fill:#c8e6c9
    style Q fill:#ff5252
    style R fill:#ffb74d
    style F fill:#e8f5e8
    style K fill:#fff3e0
```

#### 6.6.6.7 Advanced Quality Monitoring Capabilities (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Business Logic Validation Monitoring</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">The quality monitoring system implements sophisticated business logic validation through custom Micrometer metrics that track the accuracy and consistency of financial operations across the modernized platform</span>:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Custom Business Metrics Implementation</span>**:

| Custom Metric | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Implementation</span> | Business Purpose | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Export</span> |
|---------------|-------------------|------------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Interest Calculation Duration</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`Timer.Sample` for batch job steps</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance regression detection</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`interest_calculation_duration_seconds`</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Balance Reconciliation Accuracy</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`Counter` for validation passes/failures</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Financial integrity monitoring</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`balance_reconciliation_total`</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Validation Rate</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`Gauge` for success percentage</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Business rule compliance</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`transaction_validation_success_ratio`</span>** |
| **Authentication Flow Performance** | <span style="background-color: rgba(91, 57, 243, 0.2)">`Timer` for Spring Security processing</span> | User experience optimization | <span style="background-color: rgba(91, 57, 243, 0.2)">`authentication_duration_seconds`</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Quality Metrics Data Flow</span>**:

```mermaid
sequenceDiagram
    participant SVC as Spring Boot Services
    participant MIC as Micrometer Registry
    participant PROM as Prometheus Server
    participant GRAF as Grafana Dashboards
    participant ALERT as Alertmanager
    participant OPS as Operations Team
    
    SVC->>MIC: Custom Business Metrics<br/>(Interest calculations, balance updates)
    SVC->>MIC: Performance Metrics<br/>(REST response times, batch durations)
    SVC->>MIC: Security Metrics<br/>(Authentication events, access controls)
    
    MIC->>PROM: Metrics Scrape<br/>(15-second intervals)
    PROM->>GRAF: Real-time Visualization<br/>(Quality dashboard updates)
    PROM->>ALERT: Quality Gate Evaluation<br/>(Threshold monitoring)
    
    alt Quality Gate Pass
        ALERT->>GRAF: Normal Operations Display<br/>(Green status indicators)
    else Quality Gate Failure
        ALERT->>OPS: Immediate Notification<br/>(Critical alert routing)
        OPS->>SVC: Investigation Response<br/>(System analysis and remediation)
    end
    
    Note over SVC,OPS: All quality metrics maintain<br/>mainframe monitoring parity
```

#### 6.6.6.8 Quality Monitoring Control Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive Quality Control Matrix</span>**:

| Quality Dimension | <span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring Tool</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Metric Source</span> | **<span style="background-color: rgba(91, 57, 243, 0.2)">Updated Threshold</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Alert Severity</span> | Business Impact |
|------------------|--------------|-------------------|-----------------|-------------------|-----------------|
| **Interactive Performance** | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus + Grafana</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator</span> | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 200ms (95%)</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Critical</span> | Customer satisfaction |
| **Batch Processing** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch monitoring</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JobRepository metrics</span> | < 4 hours daily | <span style="background-color: rgba(91, 57, 243, 0.2)">Warning</span> | Operational efficiency |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Financial Precision</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Custom verification job</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">COBOL-Java comparison</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% accuracy match</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Critical</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Regulatory compliance</span>** |
| **Security Compliance** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Authentication events</span> | Zero violations | <span style="background-color: rgba(91, 57, 243, 0.2)">Critical</span> | Data protection |
| **System Availability** | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes probes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Pod health status</span> | 99.9% business hours | <span style="background-color: rgba(91, 57, 243, 0.2)">Critical</span> | Service continuity |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Quality Monitoring Integration Points</span>**:

The quality metrics framework integrates seamlessly with existing system components:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Services</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated metrics collection through Micrometer annotations on service methods</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Database</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JPA performance metrics and connection pool monitoring via HikariCP integration</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Store</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session performance metrics and cache hit ratio tracking</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">React Frontend</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Client-side performance metrics transmitted via API calls for end-to-end monitoring</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">API gateway performance and routing metrics for comprehensive request tracking</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Production Quality Assurance Framework</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">The comprehensive quality monitoring system ensures that the modernized CardDemo application maintains identical operational characteristics to the original mainframe system while providing enhanced visibility and automated quality assurance through cloud-native monitoring capabilities</span>. This approach satisfies regulatory requirements for financial system monitoring while enabling proactive quality management through automated alerts and comprehensive metrics tracking.

### 6.6.7 TEST ENVIRONMENT ARCHITECTURE

#### 6.6.7.1 Test Environment Configuration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Multi-Tier Cloud-Native Testing Architecture</span>**:
```mermaid
graph TD
    subgraph "Development Environment"
        A[Docker Compose Stack] --> B[PostgreSQL Container]
        B --> C[Local Test Schemas]
        C --> D[Development ConfigMaps]
        A --> E[Redis Container]
        E --> F[Session Test Data]
    end
    
    subgraph "Integration Test Environment"
        G[Shared Kubernetes Namespace] --> H[PostgreSQL StatefulSet]
        H --> I[Integration Test Schemas]
        I --> J[Team ConfigMaps/Secrets]
        G --> K[Redis Cluster]
        K --> L[Shared Session Storage]
    end
    
    subgraph "User Acceptance Environment"
        M[Production-Like Kubernetes] --> N[PostgreSQL HA Cluster]
        N --> O[Business Test Schemas]
        O --> P[UAT Secrets Management]
        M --> Q[Redis Sentinel Cluster]
        Q --> R[Production Session Config]
    end
    
    subgraph "Performance Test Environment"
        S[Isolated High-Load Cluster] --> T[PostgreSQL Performance Cluster]
        T --> U[High-Volume Test Schemas]
        U --> V[Load Test Configuration]
        S --> W[Redis Cluster - Performance]
        W --> X[Stress Test Session Data]
    end
    
    style A fill:#5B39F3
    style G fill:#5B39F3
    style M fill:#5B39F3
    style S fill:#5B39F3
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Environment-Specific Architecture Overview</span>**:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Development Environment (Docker Compose)</span>**: Local development utilizes Docker Compose orchestration with PostgreSQL 15.4 and Redis 7.0.5 containers providing rapid iteration cycles. Each developer maintains isolated database schemas with seeded test data from Spring Batch migration scripts. Configuration management relies on environment-specific docker-compose override files enabling personalized development setups while maintaining consistency with shared schemas.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Environment (Shared Kubernetes Namespace)</span>**: Team integration testing employs dedicated Kubernetes namespace `carddemo-integration` with shared PostgreSQL StatefulSet and Redis cluster instances. Integration test schemas contain standardized datasets enabling cross-team testing validation. Kubernetes ConfigMaps and Secrets provide centralized configuration management replacing traditional parameter files.

**<span style="background-color: rgba(91, 57, 243, 0.2)">User Acceptance Environment (Production-Like Kubernetes)</span>**: UAT environment replicates production infrastructure patterns using high-availability PostgreSQL clusters with read replicas and Redis Sentinel configurations. Business test schemas contain representative customer data with PII anonymization. Advanced security policies and network segmentation mirror production constraints.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Environment (Isolated High-Load Cluster)</span>**: Dedicated Kubernetes cluster optimized for load testing with high-performance storage classes and enhanced networking capabilities. PostgreSQL configuration tuned for maximum throughput with connection pooling optimization. Redis cluster configured for high-concurrency session management stress testing.

#### 6.6.7.2 Test Data Management Strategy (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive PostgreSQL Schema-Based Test Data Framework</span>**:
Test data management leverages <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL schema isolation and Spring Batch ETL processing</span> for structured data lifecycle management across all testing environments.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Schema-Based Test Data Categories</span>**:
- **Unit Test Schemas**: <span style="background-color: rgba(91, 57, 243, 0.2)">Individual service testing with isolated PostgreSQL schemas containing minimal datasets for focused validation</span>
- **Integration Test Schemas**: <span style="background-color: rgba(91, 57, 243, 0.2)">Cross-service testing schemas with complete referential integrity across all PostgreSQL tables</span>
- **Volume Test Schemas**: <span style="background-color: rgba(91, 57, 243, 0.2)">High-volume PostgreSQL schemas populated through Spring Batch jobs for performance validation</span>
- **Business Test Schemas**: <span style="background-color: rgba(91, 57, 243, 0.2)">Representative business scenario schemas with anonymized production-equivalent datasets</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Data Refresh Procedures</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Helm Chart-Managed Refresh</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Daily automated environment teardown and refresh using Helm charts with PostgreSQL schema recreation and Spring Batch data loading jobs</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Production Data Snapshots</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Anonymized PostgreSQL dump files processed through data masking pipelines ensuring PII compliance while maintaining referential integrity</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Migration Script Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch ETL jobs automatically populate PostgreSQL schemas from ASCII fixed-width files during environment initialization</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Seed Data</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated Redis instance population with test session data for Spring Session functionality validation</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Schema Management Strategy</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Database schemas are automatically provisioned through Flyway migration scripts integrated with Spring Boot initialization. Each environment maintains separate PostgreSQL schemas (`carddemo_dev`, `carddemo_int`, `carddemo_uat`, `carddemo_perf`) with identical table structures but environment-appropriate data volumes. Spring Batch migration jobs populate schemas from original ASCII data files, ensuring data consistency across testing phases while supporting rapid environment provisioning and teardown cycles.</span>

#### 6.6.7.3 Resource Requirements (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Infrastructure Resource Allocation</span>**:
| Environment Type | Pod Resources | PostgreSQL Storage | Redis Configuration |
|------------------|---------------|-------------------|---------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Development</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">CPU: 250m, Memory: 512Mi</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">PVC: 2Gi SSD</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Single instance, 256Mi</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">CPU: 500m, Memory: 1Gi</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">PVC: 10Gi SSD</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Cluster mode, 512Mi per node</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">UAT</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">CPU: 1000m, Memory: 2Gi</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">PVC: 50Gi NVMe</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Sentinel cluster, 1Gi per node</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">CPU: 2000m, Memory: 4Gi</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">PVC: 100Gi NVMe</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">HA cluster, 2Gi per node</span>** |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Resource Specifications</span>**:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Application Pods</span>**:
- **Resource Requests**: <span style="background-color: rgba(91, 57, 243, 0.2)">Guaranteed CPU and memory allocation ensuring consistent application performance</span>
- **Resource Limits**: <span style="background-color: rgba(91, 57, 243, 0.2)">Maximum resource consumption boundaries preventing resource contention</span>
- **Horizontal Pod Autoscaling**: <span style="background-color: rgba(91, 57, 243, 0.2)">CPU-based scaling triggers for load testing scenarios</span>
- **Health Check Configuration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator integration for liveness and readiness probes</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL StatefulSet Configuration</span>**:
- **Storage Classes**: <span style="background-color: rgba(91, 57, 243, 0.2)">Environment-specific storage performance tiers (Standard SSD, Premium SSD, NVMe)</span>
- **Backup Integration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated PostgreSQL backup jobs with point-in-time recovery capabilities</span>
- **Connection Pooling**: <span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP configuration optimized for concurrent test execution</span>
- **Replication Setup**: <span style="background-color: rgba(91, 57, 243, 0.2)">Primary-replica configuration for read/write separation in higher environments</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Store Configuration</span>**:
- **Memory Allocation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Environment-appropriate Redis memory sizing for Spring Session storage requirements</span>
- **Persistence Configuration**: <span style="background-color: rgba(91, 57, 243, 0.2)">RDB and AOF settings ensuring session data durability during testing cycles</span>
- **Cluster Configuration**: <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-node Redis setup for high availability and session replication testing</span>
- **Eviction Policies**: <span style="background-color: rgba(91, 57, 243, 0.2)">LRU eviction configuration managing session lifecycle and memory optimization</span>

#### 6.6.7.4 Security and Configuration Management (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Secrets and ConfigMaps Integration</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Environment isolation is achieved through Kubernetes native security mechanisms replacing traditional RACF profile management</span>. Each testing environment utilizes dedicated namespaces with role-based access control (RBAC) policies governing resource access and operations.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Configuration Management Strategy</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Environment-Specific ConfigMaps</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot application configuration stored in Kubernetes ConfigMaps with environment-specific overrides for database connections, logging levels, and feature flags</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Secrets Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Database credentials, Redis authentication, and external service API keys managed through Kubernetes Secrets with encrypted at-rest storage</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Service Account Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Dedicated service accounts for each environment with minimal required permissions following principle of least privilege</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Policy Enforcement</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes network policies restricting inter-pod communication and external access based on testing requirements</span>

#### 6.6.7.5 Automated Environment Operations (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Helm Chart-Based Environment Management</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Complete environment lifecycle management through Helm charts enabling rapid provisioning, configuration updates, and teardown procedures</span>. Helm templates support parameterized deployments across development, integration, UAT, and performance environments with environment-specific value overrides.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Environment Refresh Pipeline</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Daily Refresh Jobs</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes CronJobs executing Helm upgrade operations with fresh PostgreSQL schema initialization and Redis cache clearing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Anonymization Pipeline</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated production data snapshot processing with PII masking and referential integrity preservation using Spring Batch jobs</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Schema Migration Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Flyway migration script execution with rollback testing ensuring database schema consistency across environment refreshes</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Health Check Verification</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Post-refresh validation through Spring Boot Actuator health endpoints confirming environment readiness</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Environment Monitoring and Observability</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive monitoring stack including Prometheus metrics collection, Grafana dashboards for resource utilization tracking, and ELK stack integration for centralized logging across all testing environments. Spring Boot Actuator metrics provide application-level performance monitoring with custom business metrics for testing scenario validation.</span>

#### 6.6.7.6 Test Environment Data Flow Architecture (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">End-to-End Test Data Pipeline</span>**:
```mermaid
graph LR
    subgraph "Data Source Layer"
        A[Production Snapshots] --> B[Anonymization Pipeline]
        C[ASCII Migration Files] --> D[Spring Batch ETL Jobs]
        E[Synthetic Data Generators] --> F[Volume Test Data]
    end
    
    subgraph "Processing Layer"
        B --> G[PostgreSQL Schema Population]
        D --> G
        F --> G
        G --> H[Redis Session Initialization]
    end
    
    subgraph "Test Environment Layer"
        H --> I[Development Docker Compose]
        H --> J[Integration Kubernetes]
        H --> K[UAT Kubernetes]
        H --> L[Performance Cluster]
    end
    
    subgraph "Validation Layer"
        I --> M[Unit Test Execution]
        J --> N[Integration Test Execution]
        K --> O[UAT Test Execution]
        L --> P[Performance Test Execution]
    end
    
    style B fill:#5B39F3
    style D fill:#5B39F3
    style G fill:#5B39F3
    style H fill:#5B39F3
```

This <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native test environment architecture ensures comprehensive testing coverage while maintaining operational efficiency through automated provisioning, configuration management, and data refresh capabilities aligned with modern DevOps practices</span>.

### 6.6.8 TESTING STRATEGY DIAGRAMS

#### 6.6.8.1 Overall Testing Flow Architecture (updated)

```mermaid
flowchart TD
    subgraph "CI Pipeline Testing"
        A[Source Code Repository] --> B[Maven Build & Unit Tests]
        B --> C[Docker Container Build]
        C --> D[Container Image Registry]
        D --> E[Kubernetes Test Deployment]
    end
    
    subgraph "Containerized Integration Testing"
        E --> F[Testcontainers PostgreSQL]
        F --> G[Spring Boot Integration Tests]
        G --> H[Redis Session Testing]
        H --> I[API Gateway Integration]
        I --> J[React Component Tests]
    end
    
    subgraph "End-to-End Testing Pipeline"
        J --> K[Cypress E2E Test Suite]
        K --> L[Cross-Browser Testing]
        L --> M[Performance Testing]
        M --> N[Security Validation]
    end
    
    subgraph "Prometheus/Grafana Monitoring"
        N --> O[Micrometer Metrics Collection]
        O --> P[Prometheus Time-Series Storage]
        P --> Q[Grafana Dashboard Validation]
        Q --> R[Alert Rule Testing]
    end
    
    subgraph "Quality Gates & Deployment"
        R --> S{Quality Metrics Pass?}
        S -->|Yes| T[Production Deployment]
        S -->|No| U[Pipeline Failure & Rollback]
        U --> A
    end
    
    style C fill:#5B39F3
    style E fill:#5B39F3
    style G fill:#5B39F3
    style K fill:#5B39F3
    style O fill:#5B39F3
    style P fill:#5B39F3
    style T fill:#4caf50
    style U fill:#ff5252
```

#### 6.6.8.2 <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Test Data Flow Architecture (updated)

```mermaid
graph TD
subgraph "Production Data Sources"
    A["Production PostgreSQL Snapshot"] --> B["Data Anonymization Service"]
    C["Synthetic Data Generators"] --> D["Format Validation"]
    E["Business Scenario Templates"] --> F["Test Case Data Generation"]
end

subgraph "Cloud Storage Repository"
    B --> G["Test Data Repository (S3/GCS)"]
    D --> G
    F --> G
    G --> H["Versioned Dataset Management"]
end

subgraph "Kubernetes Test Environment Deployment"
    H --> I["Kubernetes Data Loading Jobs"]
    I --> J["Development Environment"]
    I --> K["Integration Test Environment"]
    I --> L["Performance Test Environment"]
    I --> M["UAT Environment"]
end

subgraph "Data Lifecycle Management"
    N["Automated Daily Refresh"] --> G
    O["Git-based Version Control"] --> G
    P["Cleanup CronJobs"] --> Q["Archive Storage"]
end

style G fill:#5B39F3
style H fill:#5B39F3
style I fill:#5B39F3
style Q fill:#f3e5f5
```

#### 6.6.8.3 <span style="background-color: rgba(91, 57, 243, 0.2)">Modern Observability Testing Sequence (updated)

```mermaid
sequenceDiagram
    participant React as React SPA (Cypress Tests)
    participant Gateway as Spring Cloud Gateway
    participant Controller as Spring Boot Service
    participant PostgreSQL as PostgreSQL Database
    participant Redis as Redis Session Store
    participant Micrometer as Micrometer Metrics
    participant Prometheus as Prometheus Server
    participant Grafana as Grafana Dashboards
    
    React->>Gateway: <span style="background-color: rgba(91, 57, 243, 0.2)">HTTPS Test Request with JWT</span>
    Gateway->>Gateway: <span style="background-color: rgba(91, 57, 243, 0.2)">Request Routing & Authentication</span>
    Gateway->>Controller: <span style="background-color: rgba(91, 57, 243, 0.2)">Forward to Spring Boot Service</span>
    
    Controller->>Redis: <span style="background-color: rgba(91, 57, 243, 0.2)">Session State Retrieval</span>
    Redis-->>Controller: <span style="background-color: rgba(91, 57, 243, 0.2)">Session Attributes</span>
    
    Controller->>PostgreSQL: <span style="background-color: rgba(91, 57, 243, 0.2)">JPA Data Operations</span>
    PostgreSQL-->>Controller: <span style="background-color: rgba(91, 57, 243, 0.2)">Query Results</span>
    
    Controller->>Micrometer: <span style="background-color: rgba(91, 57, 243, 0.2)">Record Response Time Metrics</span>
    Controller->>Micrometer: <span style="background-color: rgba(91, 57, 243, 0.2)">Track Transaction Counters</span>
    Controller->>Micrometer: <span style="background-color: rgba(91, 57, 243, 0.2)">Log Business Metrics</span>
    
    Micrometer->>Prometheus: <span style="background-color: rgba(91, 57, 243, 0.2)">/actuator/prometheus Metrics Export</span>
    Prometheus->>Grafana: <span style="background-color: rgba(91, 57, 243, 0.2)">Time-Series Data Query</span>
    
    Controller-->>Gateway: <span style="background-color: rgba(91, 57, 243, 0.2)">JSON Response with Metrics</span>
    Gateway-->>React: <span style="background-color: rgba(91, 57, 243, 0.2)">Test Response Validation</span>
    
    Note over React,Grafana: <span style="background-color: rgba(91, 57, 243, 0.2)">Continuous metrics flow during test execution</span>
    
    alt Performance Test Validation
        Grafana->>Grafana: <span style="background-color: rgba(91, 57, 243, 0.2)">Response Time Analysis</span>
        Grafana->>Grafana: <span style="background-color: rgba(91, 57, 243, 0.2)">Throughput Validation</span>
    else Load Test Monitoring
        Prometheus->>Prometheus: <span style="background-color: rgba(91, 57, 243, 0.2)">Alert Rule Evaluation</span>
        Prometheus->>Grafana: <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time Dashboard Updates</span>
    end
```

#### 6.6.8.4 <span style="background-color: rgba(91, 57, 243, 0.2)">Containerized Test Environment Architecture (updated)

```mermaid
graph TD
subgraph "Test Orchestration Layer"
    A["Kubernetes Test Namespace"] --> B["Helm Test Charts"]
    B --> C["Test Pod Orchestration"]
end

subgraph "Application Test Containers"
    D["Spring Boot Test Container"] --> E["Testcontainers PostgreSQL"]
    F["React Test Runner"] --> G["Cypress E2E Container"]
    H["Redis Test Instance"] --> I["Session State Testing"]
end

subgraph "Test Data Management"
    J["Test Data Init Containers"] --> K["Database Schema Setup"]
    K --> L["Test Data Loading"]
    L --> M["Data Validation Checks"]
end

subgraph "Monitoring & Observability"
    N["Prometheus Test Metrics"] --> O["Test Result Collection"]
    P["Grafana Test Dashboards"] --> Q["Performance Validation"]
    R["Spring Boot Actuator"] --> S["Health Check Monitoring"]
end

subgraph "Quality Gates"
    T["Code Coverage Analysis"] --> U["SonarQube Integration"]
    V["Security Scanning"] --> W["Vulnerability Assessment"]
end

C --> D
C --> F
C --> H
C --> J

D --> N
F --> N
H --> R

N --> P
R --> P

O --> T
Q --> V

style D fill:#5B39F3
style E fill:#5B39F3
style F fill:#5B39F3
style G fill:#5B39F3
style H fill:#5B39F3
style N fill:#5B39F3
style P fill:#5B39F3
```

#### 6.6.8.5 <span style="background-color: rgba(91, 57, 243, 0.2)">CI/CD Testing Pipeline Flow (updated)

```mermaid
flowchart LR
    subgraph "Source & Build"
        A["Git Repository"] --> B["Maven/npm Build"]
        B --> C["Unit Test Execution"]
        C --> D["Code Coverage Report"]
    end
    
    subgraph "Containerization"
        D --> E["Docker Multi-Stage Build"]
        E --> F["Container Security Scan"]
        F --> G["Container Registry Push"]
    end
    
    subgraph "Integration Testing"
        G --> H["Kubernetes Test Deploy"]
        H --> I["Spring Boot Integration Tests"]
        I --> J["API Contract Testing"]
        J --> K["Database Integration Tests"]
    end
    
    subgraph "E2E & Performance"
        K --> L["Cypress E2E Test Suite"]
        L --> M["Performance Load Testing"]
        M --> N["Monitoring Validation"]
    end
    
    subgraph "Quality Gates"
        N --> O{"All Tests Pass?"}
        O -->|Yes| P["Production Deployment"]
        O -->|No| Q["Pipeline Failure"]
        Q --> R["Notification & Rollback"]
    end
    
    style E fill:#5B39F3
    style H fill:#5B39F3
    style I fill:#5B39F3
    style L fill:#5B39F3
    style N fill:#5B39F3
    style P fill:#4caf50
    style Q fill:#ff5252
```

#### 6.6.8.6 Performance Testing Monitoring Dashboard (updated)

The <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native testing strategy integrates comprehensive performance monitoring through Prometheus and Grafana, replacing traditional mainframe performance analysis tools</span>:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Real-Time Test Metrics Collection</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator endpoints expose comprehensive test execution metrics via `/actuator/prometheus`</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Timer and Counter metrics capture response times, throughput, and error rates during test execution</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Custom business metrics track transaction processing rates and financial calculation accuracy</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">JVM and container resource metrics monitor memory usage, CPU utilization, and garbage collection performance</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Grafana Test Dashboard Integration</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Automated test result visualization with pass/fail status tracking across test suites</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Performance trend analysis comparing current test runs against historical baselines</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time alerting when performance thresholds are exceeded during test execution</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Cross-environment comparison dashboards showing performance consistency across development, staging, and production-like test environments</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes-Native Test Orchestration</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Helm charts manage test environment provisioning with consistent configuration across environments</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Jobs execute batch processing tests with automatic cleanup and resource management</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Pod-level resource monitoring ensures test execution does not impact other workloads</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Service mesh integration provides network performance metrics and fault injection capabilities for resilience testing</span>

This modernized testing approach provides comprehensive validation capabilities that exceed traditional mainframe testing while maintaining functional equivalence and ensuring reliable system behavior across all deployment environments.

### 6.6.9 TESTING STRATEGY CONTROL MATRICES

#### 6.6.9.1 Test Coverage Matrix (updated)

| Component Type | Test Method | Coverage Level | Validation Criteria | Responsible Party |
|----------------|-------------|----------------|-------------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Java Service Classes (36)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5 + behavioral comparison</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% business logic coverage</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">COBOL-Java equivalence validation</span>** | Development |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">REST Controllers (24)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">MockMvc + TestRestTemplate</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">95% response time compliance</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)"><200ms response validation</span>** | Development |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">JPA Entities (9)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Testcontainers + repository testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% data integrity validation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL constraint compliance</span>** | Development |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">React Components (18)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">React Testing Library + Cypress</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% user workflow coverage</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">3270 screen equivalence</span>** | Development |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Jobs (12)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Test + job execution</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% batch processing validation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">4-hour window compliance</span>** | Development |
| **Business Functions** | **<span style="background-color: rgba(91, 57, 243, 0.2)">End-to-end automated testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% financial accuracy</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Penny-level calculation precision</span>** | Business analysts |
| **Security Functions** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security role-based tests</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% authorization scenarios</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Role-based access validation</span>** | Security team |

#### 6.6.9.2 Quality Requirements Matrix (updated)

| Quality Attribute | Measurement Method | Target Value | Test Frequency | Alert Threshold |
|-------------------|-------------------|--------------|----------------|-----------------|
| **Performance** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Actuator + Micrometer</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 200ms response</span>** | Real-time | **<span style="background-color: rgba(91, 57, 243, 0.2)">> 300ms</span>** |
| **Reliability** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Service health monitoring</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">> 99.5% success rate</span>** | Continuous | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 95% success</span>** |
| **Security** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit events</span>** | Zero violations | Continuous | Any violation |
| **Accuracy** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Financial calculation validation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% BigDecimal precision</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Per transaction</span>** | Any discrepancy |
| **Availability** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes health checks</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">99.9% uptime</span>** | Continuous | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 99% uptime</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Resource Utilization</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JVM metrics monitoring</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">< 80% memory usage</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Continuous</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">> 90% memory</span>** |

#### 6.6.9.3 Test Environment Matrix (updated)

| Environment Type | Purpose | Test Data | **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Orchestration</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Refresh Cadence</span>** |
|------------------|---------|-----------|------------------|----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Development Namespace</span>** | Individual testing | **<span style="background-color: rgba(91, 57, 243, 0.2)">Testcontainers + synthetic data</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Local Docker Compose</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">On-demand</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Cluster</span>** | Component integration | **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL test fixtures</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes staging cluster</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Daily pipeline refresh</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">UAT Environment</span>** | Business validation | **<span style="background-color: rgba(91, 57, 243, 0.2)">Production-like data subset</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes UAT cluster</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Weekly data restore</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Environment</span>** | Load testing | **<span style="background-color: rgba(91, 57, 243, 0.2)">High-volume synthetic datasets</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes perf cluster</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Monthly baseline refresh</span>** |

#### 6.6.9.4 Testing Framework Control Matrix (updated)

| **<span style="background-color: rgba(91, 57, 243, 0.2)">Testing Level</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Framework</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Supporting Tools</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Coverage Requirement</span>** |
|-------------|-------------|-------------------|-----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Unit Testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5.10.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Mockito 5.x, AssertJ 3.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">90% code coverage, 100% business logic</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Test 3.2.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Testcontainers 1.19.x, TestRestTemplate</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% API endpoint coverage</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">End-to-End Testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Cypress 13.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">React Testing Library 14.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% user journey validation</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">K6 Load Testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Actuator metrics</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">95% response time SLA compliance</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Test 6.x</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">OWASP ZAP, MockMvc Security</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% authorization scenario coverage</span>** |

#### 6.6.9.5 Continuous Integration Control Matrix (updated)

| **<span style="background-color: rgba(91, 57, 243, 0.2)">Pipeline Stage</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Trigger Condition</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Test Execution</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Quality Gates</span>** |
|---------------|------------------|------------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Commit Validation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Every Git push</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Unit tests + static analysis</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">90% coverage, zero violations</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Build</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Pull request creation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration + API tests</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">All tests pass, <5min execution</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Release Candidate</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Main branch merge</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Full test suite + E2E</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">100% critical path validation</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Production Deploy</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Manual approval</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Smoke tests + health checks</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Zero deployment failures</span>** |

#### 6.6.9.6 Data Validation Control Matrix (updated)

| **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Category</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Validation Method</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Precision Requirement</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Test Frequency</span>** |
|-------------|----------------|-------------------|-----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Financial Calculations</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal comparison testing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">COBOL COMP-3 equivalence</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Every transaction test</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Account Balances</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Parallel COBOL-Java execution</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Penny-level accuracy</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Nightly batch validation</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Interest Calculations</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Regression test comparison</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Four decimal place precision</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Monthly calculation cycle</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Type Conversion</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JPA entity validation</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL constraint compliance</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration test execution</span>** |

#### 6.6.9.7 Performance Monitoring Control Matrix (updated)

| **<span style="background-color: rgba(91, 57, 243, 0.2)">Metric Category</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring Tool</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Target Threshold</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Alert Configuration</span>** |
|------------|-------------|----------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">API Response Time</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer + Prometheus</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">95th percentile <200ms</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Alert when >300ms for 2min</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Query Performance</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL pg_stat_statements</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Average <50ms execution</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Slow query log >100ms</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Batch Processing Time</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch JobExecution</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Complete within 4-hour window</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Alert if >3.5 hours elapsed</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Memory Utilization</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">JVM metrics + Kubernetes</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Heap usage <80%</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Critical alert at >90%</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Connection Pool Health</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP metrics</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Active connections <15/20</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Warning at >18 active</span>** |

### 6.6.10 REFERENCES

#### 6.6.10.1 Technical Specification Sources

- **Section 2.4 IMPLEMENTATION CONSIDERATIONS** - Performance requirements, technical constraints, and quality thresholds for testing validation
- **Section 6.5 MONITORING AND OBSERVABILITY** - Quality metrics framework, performance monitoring, and operational validation procedures
- **Section 6.4 SECURITY ARCHITECTURE** - Security testing requirements, <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security integration validation, and authentication testing frameworks</span>
- **Section 5.1 HIGH-LEVEL ARCHITECTURE** - System architecture understanding for comprehensive test planning and component integration testing
- **Section 5.4 CROSS-CUTTING CONCERNS** - Error handling patterns, monitoring integration, and quality assurance mechanisms
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Section 0.5 VALIDATION CHECKLIST</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Implementation verification points, performance benchmarks, and integration testing requirements for quality gate validation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Section 0.6 EXECUTION PARAMETERS</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Quality requirements, testing constraints, and coverage thresholds defining minimum acceptable testing standards</span>

#### 6.6.10.2 Repository Testing Implementation Evidence

- `src/main/java/com/carddemo/service/` folder - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot service classes demonstrating comprehensive business logic implementation with standardized error handling patterns and validation procedures for unit testing coverage</span>
- `src/main/java/com/carddemo/controller/` folder - <span style="background-color: rgba(91, 57, 243, 0.2)">REST API controllers providing structured endpoint definitions and request/response validation patterns essential for integration testing procedures</span>
- `src/main/java/com/carddemo/entity/` folder - <span style="background-color: rgba(91, 57, 243, 0.2)">JPA entity classes with composite primary keys and validation annotations supporting database integration testing and data integrity verification</span>
- `src/main/java/com/carddemo/repository/` folder - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA repositories demonstrating standardized data access patterns and custom query methods for repository testing validation</span>
- `src/test/java/` folder - <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive JUnit 5 test suite with unit tests, integration tests, and test configuration classes providing testing framework implementation examples</span>
- `src/main/resources/application-test.yml` - <span style="background-color: rgba(91, 57, 243, 0.2)">Test environment configuration demonstrating Testcontainers integration, test database setup, and Spring Boot test profile configuration</span>
- `frontend/src/components/` folder - <span style="background-color: rgba(91, 57, 243, 0.2)">React functional components with corresponding test files supporting user interface testing and component validation procedures using React Testing Library</span>
- `frontend/cypress/` folder - <span style="background-color: rgba(91, 57, 243, 0.2)">End-to-end test specifications and configuration files demonstrating complete user workflow testing and cross-browser validation procedures</span>

#### 6.6.10.3 <span style="background-color: rgba(91, 57, 243, 0.2)">Modern Testing Standards and Best Practices (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Core Testing Framework Documentation</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Testing Documentation</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive testing methodologies for Spring Boot applications including test slices, MockMvc configuration, and integration testing best practices</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5 User Guide</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Modern unit testing framework with parameterized tests, test lifecycle management, and assertion libraries for Java service layer validation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Mockito Framework Documentation</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Mock object creation and behavior verification for isolated unit testing of Spring Boot services and dependency injection testing patterns</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Integration and Container Testing</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Testcontainers Documentation</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Docker-based integration testing with PostgreSQL containers for database integration testing and data access layer validation procedures</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Testing Best Practices</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-native testing strategies for containerized applications including deployment testing, service mesh validation, and cluster integration verification</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Frontend and End-to-End Testing</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">React Testing Library Documentation</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Component testing framework for React applications with user-centric testing approaches and accessibility validation procedures</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cypress Testing Framework</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">End-to-end testing platform for complete user workflow validation, cross-browser testing, and visual regression testing capabilities</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Performance and Load Testing</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Gatling Performance Testing</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">High-performance load testing framework for REST API throughput validation and system capacity planning with detailed performance metrics</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JMeter Testing Guide</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive load testing tool for web applications with GUI-based test plan creation and distributed testing capabilities</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring and Observability Testing</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Documentation</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Application metrics collection framework with custom metric creation, performance monitoring, and testing metric validation procedures</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Testing and Monitoring</span>** - <span style="background-color: rgba(91, 57, 243, 0.2)">Time-series monitoring system for application performance tracking, alerting configuration, and operational metrics validation in testing environments</span>

# 7. USER INTERFACE DESIGN

## 7.1 UI TECHNOLOGY STACK

### 7.1.1 Core UI Technologies (updated)

The CardDemo application implements a <span style="background-color: rgba(91, 57, 243, 0.2)">modern React Single Page Application (SPA) architecture designed for enterprise-grade transaction processing and optimal performance in cloud-native environments</span>.

#### Primary UI Technology Components (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">React 18.x Framework</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Version</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">React 18.2.0 with Concurrent Features support</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Component Architecture</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">18 React components providing screen-for-screen functional parity with original BMS mapsets</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Virtual DOM</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Optimized rendering performance with automatic state reconciliation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Hooks Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">useState and useEffect for component lifecycle management</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Component Location</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Every historical BMS mapset is now rendered by a 1-to-1 React component located under `frontend/src/components/screens/` and keeps the original mapset name for traceability (e.g. `COSGN00.jsx`)</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">React Router 6.x Navigation</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Version</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">React Router 6.8.0 with data loading features</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Declarative Routing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Client-side routing configuration with nested route hierarchies</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Navigation Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Browser history management and navigation guards</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PF-Key Mapping</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">F1=Help, F3=Exit, F7=Page Up, F8=Page Down, F12=Cancel mapped to keyboard event listeners</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Material-UI (MUI) Component Library</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Version</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Material-UI 5.14.x with design system components</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">UI Components</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Pre-built accessible components for forms, tables, and navigation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Theming System</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Consistent typography and color schemes maintaining professional appearance</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Grid Layout</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Responsive grid layout components for optimal screen utilization</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Form Management and Validation</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Formik Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Formik 2.4.x for declarative form state management</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Yup Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Yup 1.3.x schema-based validation with custom rules</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Field Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Client-side form validation is implemented with Formik/Yup to replicate original BMS field rules</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Error Handling</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Real-time validation feedback and error message display</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">HTTP Communication Layer</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Axios HTTP Client</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Axios 1.6.x with interceptors and error handling</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">REST API Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Promise-based HTTP request/response handling for REST communication</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Request and response interceptors for automatic authentication token handling</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JSON Serialization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic JSON serialization and deserialization</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Build Tools and Styling</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Node.js Runtime</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Node.js 20.x LTS for development and build processes</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Build Toolchain</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Vite or Webpack for module bundling and hot module replacement</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Styling Framework</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">CSS/SCSS for custom styling and responsive design</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Development Server</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Hot reload capabilities for efficient development workflow</span>

### 7.1.2 Technology Architecture Justification (updated)

The UI technology stack leverages modern web development patterns optimized for high-performance transaction processing and enterprise scalability:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Session Management</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Browser Session Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Browser sessions are preserved via Spring Session backed by Redis using an `XSRF-TOKEN`/`JSESSIONID` cookie pair</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Stateless UI Tier</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">React components maintain local state while server-side session management handles persistent context</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cross-Request Context</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session attributes replicate COMMAREA functionality at the backend service layer</span>

**Technology Benefits**:
- **Enterprise Reliability**: Modern React architecture provides robust error boundaries and component isolation
- **Sub-second Response Times**: Virtual DOM optimization and efficient HTTP communication
- **Proven Scalability**: Component-based architecture enables horizontal scaling
- **Security Integration**: Seamless integration with Spring Security for authentication and authorization

```mermaid
graph TB
    subgraph "Modern UI Technology Stack"
        A[Browser Interface] --> B[React SPA Components]
        B --> C[Spring Cloud Gateway]
        C --> D[Spring Boot REST Controllers]
        D --> E[Service Layer]
        E --> F[PostgreSQL Database]
    end
    
    subgraph "Frontend Components"
        G[18 React Screen Components] --> B
        H[Material-UI Design System] --> B
        I[Formik/Yup Validation] --> B
        J[React Router Navigation] --> B
    end
    
    subgraph "Communication Layer"
        K[Axios HTTP Client] --> C
        L[JSON REST APIs] --> C
        M[XSRF-TOKEN/JSESSIONID] --> C
    end
    
    subgraph "Technology Benefits"
        N[Modern User Experience]
        O[Enterprise Security]
        P[Horizontal Scalability]
        Q[Maintainable Architecture]
    end
    
    F --> N
    F --> O
    F --> P
    F --> Q
    
    style A fill:#e1f5fe
    style C fill:#f3e5f5
    style E fill:#e8f5e8
    style F fill:#fff3e0
```

## 7.2 UI USE CASES AND FUNCTIONAL AREAS

### 7.2.1 Authentication and Security Operations

**Primary Use Case**: Secure system access with role-based authorization

**User Scenarios**:
- System administrators requiring access to administrative functions
- Regular users needing access to standard credit card operations
- Guest users with limited read-only access

**UI Implementation**:
- **Transaction Code**: CC00 (COSGN00)
- **Screen Layout**: Centralized credential entry with clear security messaging
- **Validation**: Real-time credential verification against USRSEC dataset
- **Session Management**: Automatic role-based menu redirection upon successful authentication

### 7.2.2 Menu Navigation and System Discovery

**Primary Use Case**: Intuitive navigation through complex system functionality

**User Scenarios**:
- New users discovering available system functions
- Experienced users requiring quick access to frequently used features
- Administrators accessing privileged functions

**UI Implementation**:
- **Main Menu (CM00)**: COMEN01 - Standard user functions
- **Admin Menu (CA00)**: COADM01 - Administrative operations
- **Report Menu (CR00)**: CORPT00 - Reporting and analytics
- **Dynamic Options**: Role-based menu option generation

### 7.2.3 Account and Customer Management

**Primary Use Case**: Comprehensive customer relationship management

**User Scenarios**:
- Customer service representatives updating account information
- Account managers reviewing customer details and history
- Compliance officers verifying account data accuracy

**UI Implementation**:
- **Account View (CAVW)**: COACTVW - Read-only account information display
- **Account Update (CAUP)**: COACTUP - Comprehensive account editing
- **Field Validation**: Real-time validation for SSN, phone, state/ZIP, FICO scores
- **Data Integration**: Cross-reference validation with customer and account datasets

### 7.2.4 Credit Card Lifecycle Management

**Primary Use Case**: Complete credit card issuance and maintenance operations

**User Scenarios**:
- Card operations staff issuing new credit cards
- Customer service updating card status and information
- Analysts reviewing card portfolio data

**UI Implementation**:
- **Card Listing (CCLI)**: COCRDLI - Paginated card browse with search filters
- **Card Detail (CCDL)**: COCRDSL - Comprehensive card information display
- **Card Update (CCUP)**: COCRDUP - Status changes and information maintenance
- **Cross-Reference Management**: Account-to-card linkage validation

### 7.2.5 Transaction Processing and Payment Management

**Primary Use Case**: Real-time transaction entry and payment processing

**User Scenarios**:
- Merchants processing credit card transactions
- Customers making bill payments
- Operations staff reviewing transaction history

**UI Implementation**:
- **Transaction List (CT00)**: COTRN00 - Historical transaction browsing
- **Transaction Detail (CT01)**: COTRN01 - Individual transaction examination
- **Add Transaction (CT02)**: COTRN02 - Real-time transaction entry
- **Bill Payment (CB00)**: COBIL00 - Customer payment processing

### 7.2.6 User Administration

**Primary Use Case**: System user lifecycle management

**User Scenarios**:
- System administrators managing user accounts
- Security officers reviewing user access rights
- HR personnel onboarding/offboarding system users

**UI Implementation**:
- **List Users (CU00)**: COUSR00 - Paginated user directory
- **Add User (CU01)**: COUSR01 - New user creation with validation
- **Update User (CU02)**: COUSR02 - User information maintenance
- **Delete User (CU03)**: COUSR03 - Secure user removal procedures

## 7.3 UI/BACKEND INTERACTION BOUNDARIES

### 7.3.1 REST/JSON Communication Layer (updated)

**HTTP-Based API Communication**
- **Session State Management**: <span style="background-color: rgba(91, 57, 243, 0.2)">Server-side session context managed through Spring Session with Redis backend, surfaced to the UI through HTTP session cookies (XSRF-TOKEN/JSESSIONID pair)</span>
- **Data Structure**: <span style="background-color: rgba(91, 57, 243, 0.2)">JSON request/response payloads over HTTPS, with REST endpoints mapping one-to-one to legacy transaction codes</span>
- **Transaction Scope**: <span style="background-color: rgba(91, 57, 243, 0.2)">HTTP session boundaries preserved within Spring @Transactional contexts</span>
- **Error Recovery**: <span style="background-color: rgba(91, 57, 243, 0.2)">RESTful error responses with structured JSON error messages and HTTP status codes</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">**COMMAREA State Translation**: Former COMMAREA state now resides exclusively on the server side within Spring Session contexts. No fixed-length COMMAREA structures are transmitted to the browser; instead, session attributes maintain user context across REST API calls while the React SPA remains stateless.</span>

**REST Endpoint Mapping**
<span style="background-color: rgba(91, 57, 243, 0.2)">Each legacy CICS transaction code corresponds to a Spring Boot REST controller endpoint, maintaining identical functionality while providing modern HTTP-based access patterns:</span>

| Legacy Transaction Code | REST Endpoint | Purpose | HTTP Method |
|------------------------|---------------|---------|-------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">CC00 (Sign On)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`/api/auth/signin`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">User authentication</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">POST</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CM00 (Main Menu)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`/api/menu/main`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Menu display</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CT00 (Transaction List)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`/api/transactions`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction browsing</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CAUP (Account Update)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">`/api/accounts/{id}`</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Account management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PUT</span> |

```mermaid
sequenceDiagram
    participant User as Browser User
    participant React as React Component
    participant Gateway as Spring Cloud Gateway
    participant Controller as Spring Boot Controller
    participant Service as Service Layer
    participant DB as PostgreSQL

    User->>React: Form Interaction
    React->>React: Client-side Validation (Yup Schema)
    React->>Gateway: HTTP POST/GET with JSON Payload
    Gateway->>Gateway: Authentication & Routing
    Gateway->>Controller: Authenticated Request
    Controller->>Service: Business Logic Processing
    Service->>DB: JPA Repository Operations
    DB->>Service: Query Results
    Service->>Controller: Processed Response
    Controller->>Gateway: JSON Response
    Gateway->>React: HTTP Response with Data
    React->>User: Updated UI Display
```

### 7.3.2 React Form Submit / API Response Processing (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">React Form Submit / API Response</span> Cycle**
- **Initial Display**: <span style="background-color: rgba(91, 57, 243, 0.2)">React component mount triggers GET request for initial form data population</span>
- **Data Entry**: <span style="background-color: rgba(91, 57, 243, 0.2)">User input captured through controlled React form components with real-time validation</span>
- **Validation Phase**: <span style="background-color: rgba(91, 57, 243, 0.2)">Client-side validation using Yup schemas generated from original COBOL picture clauses, with identical error highlighting semantics</span>
- **Response Display**: <span style="background-color: rgba(91, 57, 243, 0.2)">API responses processed through React state updates with success/error message display</span>

**Navigation Control Flow**
- **Program Transfer**: <span style="background-color: rgba(91, 57, 243, 0.2)">React Router navigation for inter-component routing</span>
- **Session Preservation**: <span style="background-color: rgba(91, 57, 243, 0.2)">HTTP session cookies maintain user context across component transitions</span>
- **Return Path Management**: <span style="background-color: rgba(91, 57, 243, 0.2)">F3 key standardized for previous screen return via keyboard event handlers</span>
- **Error Recovery**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic form state restoration on validation errors with field-level error messaging</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">PF-Key Navigation Preservation</span>**
<span style="background-color: rgba(91, 57, 243, 0.2)">Traditional mainframe PF-key functionality is preserved through keyboard event handlers that trigger identical navigation actions:</span>

| PF Key | Function | React Implementation |
|--------|----------|---------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">F1</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Help</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">useKeyboardHandler hook with help dialog display</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">F3</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Exit</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">React Router navigation to previous component</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">F7/F8</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Page Up/Down</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Pagination API calls with state management</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">F12</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Cancel</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Form reset with confirmation dialog</span> |

### 7.3.3 Data Validation Boundaries (updated)

**Client-Side Validation (React/Yup Level)**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Yup Schema Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Schema-based validation rules generated from original COBOL picture clauses, executed before each API call</span>
- **Field Format Checking**: <span style="background-color: rgba(91, 57, 243, 0.2)">Date formats (YYYY-MM-DD), numeric validation (PIC 9(n)V9(n)), and alphanumeric constraints (PIC X(n))</span>
- **Required Field Validation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Yup .required() methods enforcing MUST_FILL attribute equivalence</span>
- **Cross-Field Dependencies**: <span style="background-color: rgba(91, 57, 243, 0.2)">Custom Yup validation functions for state/ZIP code consistency and account-card linkage</span>
- **Input Length Limits**: <span style="background-color: rgba(91, 57, 243, 0.2)">Yup .max() constraints matching original COBOL field definitions</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Yup Schema Generation Example</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Original COBOL picture clause `03 ACCT-ID PIC 9(11)` translates to Yup schema:</span>
```javascript
accountId: yup.string()
  .matches(/^\d{11}$/, 'Account ID must be exactly 11 digits')
  .required('Account ID is required')
```

**Server-Side Validation (Spring Boot Service Level)**
- **Business Rule Validation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Complex business logic enforcement within Spring @Service components</span>
- **Database Constraint Checking**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL referential integrity validation through JPA constraint annotations</span>
- **Cross-Reference Validation**: <span style="background-color: rgba(91, 57, 243, 0.2)">Account-card linkage verification using Spring Data JPA repository methods</span>
- **Duplicate Detection**: <span style="background-color: rgba(91, 57, 243, 0.2)">Unique key constraint enforcement through PostgreSQL UNIQUE constraints and @Column(unique=true) JPA annotations</span>

**Validation Error Handling Flow**
```mermaid
flowchart TD
    A[User Form Submission] --> B{Client-side Validation}
    B -->|Passes| C[HTTP API Request]
    B -->|Fails| D[Display Field Errors]
    D --> A
    
    C --> E{Server-side Validation}
    E -->|Passes| F[Business Logic Processing]
    E -->|Fails| G[HTTP 400 with Error Details]
    
    F --> H[Success Response]
    G --> I[React Error State Update]
    H --> J[UI Success Feedback]
    I --> K[Field-level Error Display]
    
    style D fill:#ffcdd2
    style G fill:#ffcdd2
    style I fill:#ffcdd2
    style K fill:#ffcdd2
    style H fill:#c8e6c9
    style J fill:#c8e6c9
```

### 7.3.4 Session and State Management Architecture (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">HTTP Session-Based State Management</span>**
<span style="background-color: rgba(91, 57, 243, 0.2)">The modernized system replaces CICS COMMAREA structures with HTTP session management through Spring Session, providing distributed session storage while maintaining the same functional semantics as the original mainframe system.</span>

**Session Architecture Components**:
- **Spring Session Redis**: <span style="background-color: rgba(91, 57, 243, 0.2)">Distributed session storage replacing CICS task-attached memory</span>
- **Cookie Management**: <span style="background-color: rgba(91, 57, 243, 0.2)">XSRF-TOKEN and JSESSIONID cookie pair for secure session identification</span>
- **Session Attributes**: <span style="background-color: rgba(91, 57, 243, 0.2)">Server-side storage of user context, transaction state, and navigation history</span>
- **Cross-Request Persistence**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session data automatically available across REST API calls within the same user session</span>

**State Transition Patterns**:

| State Category | CICS Original | Spring Boot Implementation |
|---------------|---------------|----------------------------|
| **User Authentication** | <span style="background-color: rgba(91, 57, 243, 0.2)">EIBCPOSN/EIBTRMID</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Principal in session attributes</span> |
| **Transaction Context** | <span style="background-color: rgba(91, 57, 243, 0.2)">COMMAREA fields</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HttpSession attributes with identical field names</span> |
| **Navigation State** | <span style="background-color: rgba(91, 57, 243, 0.2)">Program-to-program XCTL chain</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Session-stored navigation history stack</span> |
| **Error Recovery** | <span style="background-color: rgba(91, 57, 243, 0.2)">CICS HANDLE CONDITION</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Session-persisted error context for retry operations</span> |

**Session Lifecycle Management**:
```mermaid
sequenceDiagram
    participant Browser as Browser
    participant Gateway as Spring Cloud Gateway  
    participant Session as Spring Session (Redis)
    participant Controller as REST Controller

    Browser->>Gateway: Initial Request (no session)
    Gateway->>Session: Create New Session
    Session->>Gateway: JSESSIONID Cookie
    Gateway->>Browser: Set-Cookie: JSESSIONID
    
    Browser->>Gateway: Subsequent Request (with cookie)
    Gateway->>Session: Retrieve Session Data
    Session->>Gateway: User Context & State
    Gateway->>Controller: Request with Session Context
    Controller->>Session: Update Session Attributes
    Session->>Gateway: Session Updated
    Gateway->>Browser: Response (maintains session)
```

### 7.3.5 API Request/Response Data Contracts (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">JSON Schema Definitions</span>**
<span style="background-color: rgba(91, 57, 243, 0.2)">REST API data contracts maintain field-level compatibility with original COBOL copybook structures while providing modern JSON formatting for browser consumption.</span>

**Standard Request Format**:
```json
{
  "transactionCode": "CT00",
  "requestData": {
    "accountId": "12345678901",
    "startDate": "2024-01-01", 
    "pageSize": 10,
    "pageNumber": 1
  },
  "sessionContext": {
    "userId": "USER001",
    "userRole": "ADMIN"
  }
}
```

**Standard Response Format**:
```json
{
  "status": "SUCCESS",
  "transactionCode": "CT00", 
  "responseData": {
    "transactions": [...],
    "totalCount": 150,
    "hasMorePages": true
  },
  "messages": [
    {"level": "INFO", "text": "15 transactions retrieved"}
  ],
  "sessionUpdates": {
    "lastTransactionId": "TXN987654321"
  }
}
```

**Error Response Format**:
```json
{
  "status": "ERROR",
  "transactionCode": "CT00",
  "errors": [
    {
      "field": "accountId",
      "code": "INVALID_FORMAT", 
      "message": "Account ID must be 11 digits"
    }
  ],
  "supportingData": {
    "validationRules": {...},
    "suggestedCorrection": "Enter account ID in format 12345678901"
  }
}
```

## 7.4 UI SCHEMAS AND DATA STRUCTURES

### 7.4.1 Responsive React Layout Schema (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Modern Flexbox/Grid Layout Structure</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">The responsive React layout system replaces the fixed 24x80 character grid with a flexible CSS Grid and Flexbox architecture that maintains the original field positions while enabling dynamic browser resizing and mobile responsiveness.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Layout Container</span>**
```css
.screen-container {
  display: grid;
  grid-template-areas: 
    "header header header"
    "content content content" 
    "messages messages messages"
    "function-keys function-keys function-keys";
  grid-template-rows: auto 1fr auto auto;
  min-height: 100vh;
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
  gap: 0.5rem;
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Screen Header Layout (Replaces Lines 1-3)</span>**
```css
.screen-header {
  grid-area: header;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #f5f5f5;
  padding: 0.75rem;
  border-bottom: 2px solid #333;
}

.header-left { flex: 1; }
.header-center { flex: 2; text-align: center; font-weight: bold; }
.header-right { flex: 1; text-align: right; }
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Content Area Layout (Replaces Lines 4-20)</span>**
```css
.content-area {
  grid-area: content;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1rem;
  padding: 1rem 0;
  overflow-y: auto;
}

.form-section {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.field-row {
  display: flex;
  align-items: center;
  gap: 1rem;
  min-height: 2.5rem;
}

.field-label {
  flex: 0 0 150px;
  text-align: right;
  font-weight: 500;
}

.field-input {
  flex: 1;
  max-width: 300px;
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Message Area Layout (Replaces Lines 22-23)</span>**
```css
.message-area {
  grid-area: messages;
  min-height: 3rem;
  padding: 0.5rem;
  border-top: 1px solid #ccc;
}

.info-messages { color: #2196F3; }
.error-messages { color: #f44336; background: #ffebee; }
.success-messages { color: #4caf50; }
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Function Key Area Layout (Replaces Line 24)</span>**
```css
.function-keys {
  grid-area: function-keys;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #e0e0e0;
  padding: 0.5rem;
  border-top: 1px solid #333;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.pf-key-button {
  padding: 0.25rem 0.75rem;
  border: 1px solid #666;
  background: #f0f0f0;
  cursor: pointer;
  font-family: monospace;
  font-size: 0.85rem;
}
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Responsive Breakpoints</span>**
```css
/* Tablet Layout */
@media (max-width: 768px) {
  .screen-container {
    padding: 0.5rem;
    gap: 0.25rem;
  }
  
  .field-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.25rem;
  }
  
  .field-label {
    flex: none;
    text-align: left;
  }
  
  .field-input {
    width: 100%;
    max-width: none;
  }
}

/* Mobile Layout */
@media (max-width: 480px) {
  .screen-header {
    flex-direction: column;
    gap: 0.5rem;
  }
  
  .header-left, .header-center, .header-right {
    flex: none;
    text-align: center;
  }
  
  .content-area {
    grid-template-columns: 1fr;
  }
  
  .function-keys {
    flex-direction: column;
  }
}
```

### 7.4.2 Field Attribute Schema (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">BMS to React/HTML Attribute Mapping</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">The following mapping table translates traditional BMS field attributes to their modern React and CSS counterparts, ensuring functional parity while leveraging contemporary web technologies.</span>

| BMS Attribute | **<span style="background-color: rgba(91, 57, 243, 0.2)">React/HTML Property</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">CSS Class/Style</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Implementation Notes</span>** |
|---------------|---------------------------|---------------------|------------------------|
| ASKIP | **<span style="background-color: rgba(91, 57, 243, 0.2)">`readOnly={true}`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`field-readonly`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Auto-skip behavior via tabIndex=-1</span>** |
| UNPROT | **<span style="background-color: rgba(91, 57, 243, 0.2)">`readOnly={false}`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`field-input`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Standard input field with validation</span>** |
| PROT | **<span style="background-color: rgba(91, 57, 243, 0.2)">`disabled={true}`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`field-disabled`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Prevents any user interaction</span>** |
| NUM | **<span style="background-color: rgba(91, 57, 243, 0.2)">`inputMode="numeric"`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`field-numeric`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Combined with Yup numeric validation</span>** |
| IC | **<span style="background-color: rgba(91, 57, 243, 0.2)">`autoFocus={true}`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`field-cursor-initial`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Initial cursor positioning on mount</span>** |
| BRT | **<span style="background-color: rgba(91, 57, 243, 0.2)">N/A (CSS only)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`field-highlight`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">font-weight: bold; background: #fff3cd</span>** |
| NORM | **<span style="background-color: rgba(91, 57, 243, 0.2)">N/A (default)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`field-normal`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Standard font-weight and background</span>** |
| FSET | **<span style="background-color: rgba(91, 57, 243, 0.2)">React state tracking</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`field-modified`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">onChange handler sets dirty state</span>** |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Color Coding Translation</span>**

| BMS Color | **<span style="background-color: rgba(91, 57, 243, 0.2)">CSS Utility Class</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">CSS Properties</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Usage Context</span>** |
|-----------|-------------------|-----------------|----------------|
| GREEN | **<span style="background-color: rgba(91, 57, 243, 0.2)">`text-success`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`color: #28a745; background: #d4edda`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Normal data display, success messages</span>** |
| RED | **<span style="background-color: rgba(91, 57, 243, 0.2)">`text-error`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`color: #dc3545; background: #f8d7da`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Error messages, validation failures</span>** |
| YELLOW | **<span style="background-color: rgba(91, 57, 243, 0.2)">`text-warning`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`color: #856404; background: #fff3cd`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Highlighted fields, important notices</span>** |
| BLUE | **<span style="background-color: rgba(91, 57, 243, 0.2)">`text-info`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">`color: #0c5460; background: #d1ecf1`</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">Informational messages, help text</span>** |

**<span style="background-color: rgba(91, 57, 243, 0.2)">React Component Implementation Example</span>**
```jsx
const FormField = ({ 
  name, 
  label, 
  value, 
  bmAttribute = 'UNPROT',
  colorCode = 'GREEN',
  onChange,
  onBlur 
}) => {
  const getFieldProps = () => {
    const baseProps = {
      id: name,
      name: name,
      value: value || '',
      onChange: onChange,
      onBlur: onBlur
    };
    
    switch(bmAttribute) {
      case 'ASKIP':
        return { ...baseProps, readOnly: true, tabIndex: -1 };
      case 'PROT':
        return { ...baseProps, disabled: true };
      case 'NUM':
        return { ...baseProps, inputMode: 'numeric', pattern: '[0-9]*' };
      default:
        return baseProps;
    }
  };

  const getFieldClasses = () => {
    const classes = ['form-input'];
    
    if (bmAttribute === 'BRT') classes.push('field-highlight');
    if (colorCode === 'RED') classes.push('text-error');
    if (colorCode === 'YELLOW') classes.push('text-warning');
    if (colorCode === 'BLUE') classes.push('text-info');
    
    return classes.join(' ');
  };

  return (
    <div className="field-row">
      <label className="field-label" htmlFor={name}>{label}</label>
      <input 
        {...getFieldProps()} 
        className={getFieldClasses()}
        type="text"
      />
    </div>
  );
};
```

### 7.4.3 Data Input Schemas (updated)

**Account Management Schema (COACTVW/COACTUP)**
```
Account ID:      [11-digit number] (ASKIP for view, UNPROT for search)
Customer ID:     [9-digit number]  (ASKIP)
Account Status:  [1-character]     (UNPROT - Y/N validation)
Account Balance: [9.2 decimal]     (ASKIP - display only)
Credit Limit:    [9.2 decimal]     (UNPROT with validation)
Opening Date:    [CCYYMMDD]        (UNPROT with date validation)
Customer Name:   [50 characters]   (UNPROT)
SSN:            [11 characters]    (UNPROT with format validation)
Phone:          [20 characters]    (UNPROT with format validation)
Address:        [4x50 characters]  (UNPROT)
State/ZIP:      [2+9 characters]   (UNPROT with cross-validation)
FICO Score:     [3 digits]         (UNPROT with range 300-850)
```

**Credit Card Schema (COCRDLI/COCRDSL/COCRDUP)**
```
Card Number:     [16 digits]       (UNPROT for search, ASKIP for display)
Account ID:      [11 digits]       (UNPROT with cross-reference validation)
Card Type:       [10 characters]   (UNPROT - lookup validation)
Expiry Date:     [MMYY]           (UNPROT with business rule validation)
Card Status:     [1 character]     (UNPROT - predefined values)
Issue Date:      [CCYYMMDD]        (ASKIP - system generated)
```

**Transaction Schema (COTRN00/COTRN01/COTRN02)**
```
Transaction ID:  [16 characters]   (ASKIP - system generated)
Account ID:      [11 digits]       (UNPROT with validation)
Card Number:     [16 digits]       (UNPROT with cross-reference check)
Transaction Type:[2 characters]    (UNPROT - type table lookup)
Category Code:   [4 digits]        (UNPROT - category validation)
Amount:          [9.2 decimal]     (UNPROT with range validation)
Description:     [50 characters]   (UNPROT)
Transaction Date:[CCYYMMDD]        (UNPROT with date validation)
Originating ID:  [50 characters]   (UNPROT)
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Numeric Field Precision Handling</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">**COBOL COMP-3 Precision Compatibility**: All numeric input fields utilize `<input type="text">` elements with specialized onBlur formatters to maintain exact COBOL COMP-3 packed decimal precision. This approach ensures that decimal scaling, rounding, and arithmetic operations remain identical to the original mainframe behavior.</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">The scale handling logic is delegated to the shared `CobolDataConverter` utility class, which provides:</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Precision Preservation**: Maintains exact decimal places as defined in original COBOL PIC clauses</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Scale Conversion**: Automatic conversion between display format and packed decimal representation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Rounding Rules**: Identical COBOL ROUND behavior for financial calculations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Overflow Detection**: Validates numeric ranges matching original COBOL field definitions</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Implementation Pattern</span>**:
```jsx
const NumericField = ({ name, picClause, value, onChange }) => {
  const handleBlur = (event) => {
    const formattedValue = CobolDataConverter.formatDecimal(
      event.target.value, 
      picClause
    );
    onChange(name, formattedValue);
  };

  return (
    <input
      type="text"
      name={name}
      value={CobolDataConverter.displayFormat(value, picClause)}
      onBlur={handleBlur}
      inputMode="decimal"
      className="field-numeric"
    />
  );
};
```

## 7.5 SCREENS REQUIRED AND USER INTERACTIONS

### 7.5.1 Authentication and Session Management Screens

**Sign-On Screen (COSGN00)**
- **Transaction Code**: CC00
- **Purpose**: Secure system entry point with credential validation
- **Layout**: Centered credential entry form with security messaging
- **Input Fields**: User ID (8 characters), Password (masked display)
- **Validation**: Real-time authentication against USRSEC dataset
- **Error Handling**: Invalid credential messaging with retry capability
- **Navigation**: Automatic redirect to role-appropriate menu upon success

```
 COSGN00                        CREDIT CARD DEMO                    07/12/2025
 COSGN00C                                                          14:30:15
 ──────────────────────────────────────────────────────────────────────────────
                           CARDDEMO APPLICATION SIGN-ON
                           
                           
                    User ID  : ________
                    Password : ________
                    
                    
                    [ ] Administrator Access
                    
                    
                           Press ENTER to continue
                           
 ──────────────────────────────────────────────────────────────────────────────
 
 
 ENTER=Sign On  PF3=Exit  PF12=Cancel
```

### 7.5.2 Menu Navigation Screens

**Main Menu (COMEN01)**
- **Transaction Code**: CM00
- **Purpose**: Primary navigation hub for regular users
- **Layout**: Numbered option list with function descriptions
- **User Interactions**: Option selection via keyboard entry
- **Dynamic Content**: Role-based option availability

**Admin Menu (COADM01)**
- **Transaction Code**: CA00
- **Purpose**: Administrative function access for privileged users
- **Layout**: Enhanced option set including user management functions
- **Access Control**: Administrative role verification required

### 7.5.3 Account Management Screens

**Account View Screen (COACTVW)**
- **Transaction Code**: CAVW
- **Purpose**: Comprehensive account information display
- **Search Capability**: 11-digit account ID filter
- **Data Integration**: Real-time data from ACCTDAT and CUSTDAT
- **Navigation**: Direct transfer to account update functionality

**Account Update Screen (COACTUP)**
- **Transaction Code**: CAUP
- **Purpose**: Comprehensive account information maintenance
- **Locking Mechanism**: Record-level locking during update operations
- **Field Validation**: Extensive real-time validation for all modifiable fields
- **Change Detection**: Modified field highlighting and confirmation

### 7.5.4 Credit Card Management Screens

**Credit Card List Screen (COCRDLI)**
- **Transaction Code**: CCLI
- **Purpose**: Paginated credit card portfolio browsing
- **Pagination**: 7 cards per page with PF7/PF8 navigation
- **Search Filters**: Multiple search criteria support
- **Selection Interface**: Direct navigation to detail/update screens

**Credit Card Detail Screen (COCRDSL)**
- **Transaction Code**: CCDL
- **Purpose**: Comprehensive card information display
- **Cross-Reference Display**: Account linkage information
- **Status Information**: Current card status and history
- **Navigation**: Quick access to update functionality

**Credit Card Update Screen (COCRDUP)**
- **Transaction Code**: CCUP
- **Purpose**: Card information maintenance and status management
- **Status Transitions**: Controlled card status change workflow
- **Business Rules**: Expiry date validation and business rule enforcement
- **Cross-Reference Maintenance**: Account-card relationship management

### 7.5.5 Transaction Processing Screens

**Transaction List Screen (COTRN00)**
- **Transaction Code**: CT00
- **Purpose**: Historical transaction browsing and analysis
- **Pagination**: 10 transactions per page
- **Filtering**: Date range and account-based filtering
- **Detail Access**: Direct navigation to individual transaction details

**Add Transaction Screen (COTRN02)**
- **Transaction Code**: CT02
- **Purpose**: Real-time transaction entry and processing
- **Account Validation**: Real-time account and card cross-reference checking
- **Amount Validation**: Business rule enforcement for transaction amounts
- **ID Generation**: Automatic unique transaction ID generation

**Bill Payment Screen (COBIL00)**
- **Transaction Code**: CB00
- **Purpose**: Customer payment processing and account updating
- **Payment Validation**: Account verification and payment amount validation
- **Balance Updates**: Real-time account balance adjustment
- **Confirmation Display**: Payment confirmation with updated balance information

### 7.5.6 User Administration Screens

**User List Screen (COUSR00)**
- **Transaction Code**: CU00
- **Purpose**: System user directory and management access
- **Pagination**: Efficient browsing of user accounts
- **Administrative Access**: Administrative role requirement enforcement
- **Quick Actions**: Direct access to user maintenance functions

**Add User Screen (COUSR01)**
- **Transaction Code**: CU01
- **Purpose**: New user account creation with role assignment
- **Role Management**: User type assignment (admin/regular)
- **Validation**: Comprehensive user data validation
- **Security Integration**: Initial password assignment and security setup

**Update User Screen (COUSR02)**
- **Transaction Code**: CU02
- **Purpose**: User account information maintenance
- **Role Changes**: Administrative role assignment modification
- **Status Management**: User account activation/deactivation
- **Audit Trail**: Change tracking for security compliance

## 7.6 USER INTERACTION PATTERNS AND NAVIGATION

### 7.6.1 Standard Navigation Conventions (updated)

**Function Key Standardization**
- **ENTER**: Submit current form/Continue to next step
- **PF3**: Exit current function/Return to previous screen
- **PF4**: Clear current screen/Reset form fields
- **PF5**: Refresh current screen/Update displayed data
- **PF7**: Page backward in list displays
- **PF8**: Page forward in list displays
- **PF12**: Cancel current operation/Return without saving

**<span style="background-color: rgba(91, 57, 243, 0.2)">Modern PF-Key Implementation</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">PF-keys (PF3, PF7, PF8, PF12, etc.) are captured via JavaScript `keydown` listeners and translated into React Router navigation events, thereby retaining legacy keyboard workflows while providing modern single-page application navigation. This approach preserves the familiar mainframe interaction patterns while leveraging React's component-based architecture.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Keyboard Event Handler Architecture</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Event Capture</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Global `keydown` event listeners attached to document root for system-wide PF-key recognition</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Key Translation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Function key codes (F3=114, F7=118, F8=119, F12=123) mapped to React Router navigation actions</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Navigation Events</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">useNavigate() hook triggers programmatic routing based on detected function key presses</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Context Preservation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Session state maintained through HTTP session cookies during keyboard-triggered navigation</span>

**Screen Flow Patterns**
1. **Entry Pattern**: Initial screen display with empty form (EIBCALEN=0)
2. **Input Pattern**: User data entry with real-time validation
3. **Processing Pattern**: Server-side validation and business logic execution
4. **Response Pattern**: Results display with confirmation or error messages
5. **Navigation Pattern**: User-directed flow control through PF keys or menu selection

### 7.6.2 Data Entry and Validation Workflows (updated)

**Standard Input Validation Sequence**
1. **<span style="background-color: rgba(91, 57, 243, 0.2)">Client-Side Pre-Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Formik/Yup validation invoked on the client side prior to submitting data to the backend, mirroring BMS client-side validation patterns with identical field format and business rule checking</span>
2. **Field Format Validation**: Client-side format checking (dates, numbers, codes)
3. **Required Field Validation**: Mandatory field completion verification
4. **Cross-Field Validation**: Relationship checking between related fields
5. **Business Rule Validation**: Server-side business logic enforcement
6. **Database Constraint Validation**: Referential integrity checking
7. **Confirmation Display**: Success confirmation or error detail presentation

**<span style="background-color: rgba(91, 57, 243, 0.2)">Formik/Yup Integration Architecture</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Schema-Based Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Yup validation schemas generated from original COBOL picture clauses, providing identical field-level validation semantics</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Real-Time Feedback</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Formik field-level error states provide immediate validation feedback, matching BMS field highlighting behavior</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Pre-Submit Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Complete form validation executed before HTTP API calls, preventing invalid data transmission</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Error State Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Formik error handling maintains form state during validation failures, preserving user input for correction</span>

**Error Handling and Recovery**
- **Field-Level Errors**: Individual field highlighting with specific error messages
- **Screen-Level Errors**: General error messages in dedicated message area
- **Automatic Recovery**: Return to input state with error correction guidance
- **Progressive Disclosure**: Detailed error information available through help functions

### 7.6.3 Session State Management

**COMMAREA-Based State Preservation**
- **Session Context**: User role, current function, navigation history
- **Transaction State**: Current operation status, temporary data storage
- **Error Context**: Error state information for recovery procedures
- **Navigation Context**: Previous screen information for return navigation

**Session Lifecycle Management**
- **Session Initialization**: User authentication and initial context establishment
- **Session Maintenance**: State preservation across program transfers
- **Session Timeout**: Automatic session termination after inactivity
- **Session Termination**: Secure logout and context cleanup

### 7.6.4 Advanced Navigation Patterns

**Hierarchical Navigation Structure**
- **Main Menu Entry**: Role-based menu presentation with function discovery
- **Function Selection**: Direct navigation to selected business function
- **Sub-Function Navigation**: Drill-down capability within functional areas
- **Return Path Management**: Consistent PF3 exit behavior across all screens

**Pagination and List Navigation**
- **Standard Page Size**: 7-10 records per page depending on screen layout
- **Forward/Backward Navigation**: PF7/PF8 key consistency across all list displays
- **Page Position Tracking**: Current page indicator with total page count
- **Search Result Navigation**: Filter-aware pagination with result count display

### 7.6.5 Cross-Functional User Interaction Patterns

**Data Inquiry Workflows**
- **Search Initiation**: Flexible search criteria entry with real-time validation
- **Result Display**: Paginated result sets with selection capability
- **Detail Navigation**: Single-record focus with comprehensive detail display
- **Related Data Access**: Cross-reference navigation to related information

**Transaction Entry Workflows**
- **Pre-Transaction Validation**: Account and card relationship verification
- **Transaction Input**: Guided data entry with business rule enforcement
- **Confirmation Processing**: Two-stage confirmation with final commit
- **Post-Transaction Display**: Result confirmation with updated account information

**Administrative Workflows**
- **User Management**: Role-based access to administrative functions
- **Bulk Operations**: Multi-record selection and batch processing capability
- **Audit Trail Access**: Change history display with timestamp and user tracking
- **System Configuration**: Administrative parameter maintenance with validation

### 7.6.6 Accessibility and Usability Considerations

**Keyboard Accessibility**
- **Tab Order Management**: Logical tab sequence following screen layout
- **Skip Navigation**: Direct access to main content areas
- **Keyboard Shortcuts**: Function key alternatives for mouse-dependent actions
- **Focus Management**: Visual focus indicators with high contrast

**Visual Design Consistency**
- **Field Layout Standards**: Consistent label-field alignment across all screens
- **Error Message Placement**: Standardized error display locations
- **Status Indication**: Clear visual indicators for required fields and validation states
- **Color Coding**: Consistent use of color for success, warning, and error states

**Performance Optimization**
- **Progressive Loading**: Incremental data loading for large result sets
- **Client-Side Caching**: Temporary storage of frequently accessed reference data
- **Optimistic Updates**: Immediate UI feedback with background validation
- **Network Resilience**: Graceful handling of connectivity issues with retry mechanisms

## 7.7 VISUAL DESIGN CONSIDERATIONS

### 7.7.1 Screen Layout and Organization

**Consistent Layout Framework**
- **Header Area** (Lines 1-2): Transaction identification, title, timestamp
- **Separator Line** (Line 3): Visual separation using repeated dash characters
- **Content Area** (Lines 4-20): Primary business data display and input
- **Message Area** (Lines 21-23): System messages, errors, and informational text
- **Footer Area** (Line 24): Function key instructions and navigation help

**Information Hierarchy**
- **Primary Information**: Account numbers, customer names, critical status
- **Secondary Information**: Addresses, phone numbers, supplementary data
- **System Information**: Transaction codes, timestamps, program identification
- **Action Information**: Available functions, key assignments, navigation options

### 7.7.2 Color and Attribute Usage

**Color Coding Strategy**
- **GREEN (DFHGREEN)**: Normal data display, field labels, general text
- **RED (DFHRED)**: Error messages, validation failures, critical alerts
- **YELLOW (DFHYELLOW)**: Highlighted fields, important notices, warnings
- **BLUE (DFHBLUE)**: Informational messages, help text, system messages

**Field Attribute Standards**
- **Protected Fields**: ASKIP attribute for read-only information display
- **Input Fields**: UNPROT attribute with underscoring for user input areas
- **Highlighted Fields**: BRT attribute for emphasis and attention direction
- **Error Fields**: RED color with BRT attribute for validation error highlighting

### 7.7.3 User Experience Optimization

**Cognitive Load Reduction**
- **Logical Grouping**: Related fields positioned in proximity
- **Visual Separation**: Clear boundaries between functional areas
- **Consistent Positioning**: Standard locations for similar information types
- **Progressive Disclosure**: Complex information revealed through navigation

**Accessibility Considerations**
- **High Contrast**: Clear distinction between foreground and background
- **Consistent Navigation**: Standardized key functions across all screens
- **Clear Labeling**: Descriptive field labels and function descriptions
- **Error Clarity**: Specific, actionable error messages with correction guidance

**Performance Optimization**
- **Minimal Screen Redraws**: Efficient update of only changed information
- **Fast Response Times**: Sub-second response for interactive operations
- **Efficient Navigation**: Direct access paths to frequently used functions
- **Predictable Behavior**: Consistent system responses to user actions

#### References

**BMS Mapset Definitions**:
- `app/bms/COSGN00.bms` - Sign-on screen definition with security fields
- `app/bms/COMEN01.bms` - Main menu layout with standard navigation
- `app/bms/COADM01.bms` - Administrative menu with privileged functions
- `app/bms/COACTVW.bms` - Account view screen with comprehensive data display
- `app/bms/COACTUP.bms` - Account update screen with validation fields
- `app/bms/COCRDLI.bms` - Credit card list with pagination controls
- `app/bms/COCRDSL.bms` - Credit card detail display screen
- `app/bms/COCRDUP.bms` - Credit card update with status management
- `app/bms/COTRN00.bms` - Transaction list with filtering capabilities
- `app/bms/COTRN01.bms` - Transaction detail display screen
- `app/bms/COTRN02.bms` - Transaction entry with validation controls
- `app/bms/COBIL00.bms` - Bill payment screen with balance updates
- `app/bms/COUSR00.bms` - User list with administrative controls
- `app/bms/COUSR01.bms` - User creation with role assignment
- `app/bms/COUSR02.bms` - User update with security management
- `app/bms/COUSR03.bms` - User deletion with confirmation controls
- `app/bms/CORPT00.bms` - Report menu with analytics access
- `app/bms/CSDAT01.bms` - Date utility screen for system operations

**BMS Copybook Structures**:
- `app/cpy-bms/` - 18 copybook files defining screen field structures and attributes

**Interactive COBOL Programs**:
- `app/cbl/COSGN00C.cbl` - Authentication logic with USRSEC integration
- `app/cbl/COMEN01C.cbl` - Main menu navigation with role-based options
- `app/cbl/COADM01C.cbl` - Administrative menu with privileged access
- `app/cbl/COACTVWC.cbl` - Account viewing with ACCTDAT/CUSTDAT integration
- `app/cbl/COACTUPC.cbl` - Account update with comprehensive validation
- `app/cbl/COCRDLIC.cbl` - Credit card listing with pagination logic
- `app/cbl/COCRDSLC.cbl` - Credit card detail display with cross-references
- `app/cbl/COCRDUPC.cbl` - Credit card update with business rule enforcement
- `app/cbl/COTRN00C.cbl` - Transaction browsing with date filtering
- `app/cbl/COTRN01C.cbl` - Transaction detail display with validation
- `app/cbl/COTRN02C.cbl` - Transaction entry with ID generation
- `app/cbl/COBIL00C.cbl` - Bill payment processing with balance updates
- `app/cbl/COUSR00C.cbl` - User listing with administrative access control
- `app/cbl/COUSR01C.cbl` - User creation with role assignment logic
- `app/cbl/COUSR02C.cbl` - User update with security integration
- `app/cbl/COUSR03C.cbl` - User deletion with confirmation procedures
- `app/cbl/CORPT00C.cbl` - Report menu with analytics integration

**Technology Architecture References**:
- Technical Specification sections: 1.2, 2.1, 3.6, 4.1 - System context and workflow integration
- `app/` - Application structure demonstrating UI component organization
- Repository metadata: CardDemo_v1.0-15-g27d6c6f-68 - Version information for UI implementation

# 8. INFRASTRUCTURE

## 8.1 DEPLOYMENT ENVIRONMENT

### 8.1.1 Target Environment Assessment (updated)

**Environment Type: <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-native Kubernetes Cluster running Linux hosts</span>**

CardDemo is designed for deployment in <span style="background-color: rgba(91, 57, 243, 0.2)">modern Kubernetes container orchestration environments</span>, representing a cloud-native infrastructure model optimized for horizontal scaling and high availability. This infrastructure choice reflects the system's transformation from legacy mainframe architecture to contemporary <span style="background-color: rgba(91, 57, 243, 0.2)">containerized deployment patterns supporting Java 21 Spring Boot applications</span>.

**Environment Classification**:
- **Primary Platform**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes cluster (managed or self-hosted) with minimum 3 worker nodes</span>
- **Deployment Model**: <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-native containerized microservice architecture</span>
- **Geographic Distribution**: <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-region deployment with distinct availability zones</span>
- **Network Architecture**: <span style="background-color: rgba(91, 57, 243, 0.2)">HTTPS traffic via Spring Cloud Gateway with CDN-served Web UI</span>
- **Service Model**: <span style="background-color: rgba(91, 57, 243, 0.2)">Container orchestration with dynamic resource allocation and auto-scaling</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Cluster Requirements</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Architecture**: x86-64 Linux nodes with Java 21 compatibility</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Minimum Configuration**: 3 worker nodes for high availability</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Orchestration**: Kubernetes 1.28+ with cluster-autoscaler integration</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Container Runtime**: Docker Engine 27.x or containerd for production deployments</span>

### 8.1.2 Geographic Distribution Requirements (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Multi-Region Cloud Deployment</span>**:
The system operates within a distributed cloud-native environment designed for high-availability financial processing:

| Distribution Aspect | Implementation | Justification | Compliance Considerations |
|---------------------|----------------|---------------|-------------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Region</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud region (e.g., us-east-1) with multi-AZ deployment</span> | Distributed container orchestration | SOX financial data integrity |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Secondary Region</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Distinct availability zone/region for disaster recovery</span> | 4-hour RTO requirement | Regulatory backup mandates |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Access</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">HTTPS via Spring Cloud Gateway with ingress load balancer</span> | Secure cloud-native access patterns | PCI DSS network isolation |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Residency</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL managed service with encrypted storage</span> | Financial data sovereignty | Regional compliance requirements |

### 8.1.3 Resource Requirements (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Node Pool Configuration</span>**:

```mermaid
graph TD
    subgraph "Kubernetes Cluster Resource Architecture"
        A[Node Pool: 4 vCPU, 16 GiB RAM each] --> B[Pod Resource Limits]
        B --> C[PostgreSQL: Managed service or StatefulSet]
        C --> D[Redis: Session store with persistence]
        
        E[Cluster Autoscaler] --> F[Horizontal Pod Autoscaler]
        F --> G[Vertical Pod Autoscaler]
        G --> H[Resource Monitoring & Alerts]
    end
    
    subgraph "Storage Architecture"
        I[Persistent Volumes: PostgreSQL] --> J[Persistent Volume Claims: 100GB SSD]
        J --> K[Redis RDB/AOF Snapshots: 10GB]
        K --> L[Application Logs: 50GB rotating]
    end
    
    subgraph "Performance Targets"
        M[REST API Response: < 200ms] --> N[Batch Window: < 4 hours]
        N --> O[Availability: 99.9% SLA]
        O --> P[Throughput: 1000+ req/sec]
    end
    
    style A fill:#e3f2fd
    style C fill:#fff3e0
    style D fill:#fce4ec
    style M fill:#c8e6c9
```

**Detailed Resource Specifications**:

| Resource Category | Minimum Requirement | Recommended Configuration | Scaling Considerations |
|------------------|---------------------|-------------------------|----------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Nodes</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">3 nodes, 2 vCPU, 8 GiB RAM each</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">4 vCPU, 16 GiB RAM each, scalable via cluster-autoscaler</span> | Add nodes based on resource utilization |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Pod Resources</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot: 512Mi memory, 250m CPU</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">1Gi memory limits, 500m CPU limits</span> | HPA based on CPU/memory metrics |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Footprint</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Managed service: 2 vCPU, 4 GiB, 100GB storage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">4 vCPU, 8 GiB, 500GB SSD with backup</span> | Auto-scaling storage and compute |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Store</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">1 vCPU, 2 GiB RAM, 10GB storage</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">2 vCPU, 4 GiB RAM, Redis Cluster mode</span> | Memory-based scaling with persistence |
| **Network Bandwidth** | <span style="background-color: rgba(91, 57, 243, 0.2)">1 Gbps ingress/egress</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">10 Gbps with CDN integration</span> | Load balancer and CDN optimization |
| **Storage Volumes** | <span style="background-color: rgba(91, 57, 243, 0.2)">100GB persistent volumes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">500GB SSD with automated backups</span> | Dynamic provisioning and expansion |

### 8.1.4 Compliance and Regulatory Requirements (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Financial Services Compliance Framework</span>**:

CardDemo infrastructure supports comprehensive regulatory compliance requirements using modern cloud security controls:

**Regulatory Compliance Matrix**:

| Regulation | Infrastructure Requirement | Implementation | Validation Method |
|------------|---------------------------|----------------|-------------------|
| **SOX Section 404** | Automated financial controls | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot transaction integrity, PostgreSQL audit trails, encryption at rest</span> | Annual compliance review |
| **PCI DSS** | Secure payment processing | <span style="background-color: rgba(91, 57, 243, 0.2)">IAM-based authentication, network isolation using security groups/network policies</span> | Quarterly security assessment |
| **Basel III** | Risk data aggregation | <span style="background-color: rgba(91, 57, 243, 0.2)">Cross-reference data integrity with encrypted PostgreSQL storage</span> | Monthly reconciliation reports |
| **GDPR** (if applicable) | Data protection and privacy | <span style="background-color: rgba(91, 57, 243, 0.2)">Field-level access control through Kubernetes RBAC and Pod Security Standards</span> | Privacy impact assessment |

### 8.1.5 Environment Management (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Infrastructure as Code Approach: Kubernetes Manifests</span>**

CardDemo utilizes modern Infrastructure-as-Code practices optimized for Kubernetes deployment:

**Configuration Management Strategy**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Manifests</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">deployment.yaml files for service definitions and resource management</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Helm Charts</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Templated deployment management with environment-specific values</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kustomize</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Configuration overlays for environment-specific customization</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Docker Compose</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Local development environment orchestration only</span>

**Environment Management Framework**:

```mermaid
flowchart LR
    subgraph "Configuration Sources"
        A[Kubernetes Manifests<br/>deployment.yaml] --> B[Service Configuration]
        C[Helm Charts<br/>values.yaml] --> D[Environment Templates]
        E[ConfigMaps & Secrets<br/>application.yml] --> F[Runtime Configuration]
        G[Kustomize Overlays<br/>patches/overlays] --> H[Environment Customization]
    end
    
    subgraph "GitOps Deployment Process"
        B --> I[ArgoCD Sync]
        D --> J[Helm Release]
        F --> K[Pod Deployment]
        H --> L[Environment Promotion]
    end
    
    subgraph "Environment Validation"
        I --> M[Health Checks]
        J --> N[Readiness Probes]
        K --> O[Liveness Probes]
        L --> P[Integration Testing]
    end
    
    style A fill:#e8f5e8
    style B fill:#e3f2fd
    style I fill:#fff3e0
    style M fill:#c8e6c9
```

### 8.1.6 Environment Promotion Strategy (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Namespace-Based Promotion with GitOps</span>**:

The system follows cloud-native development lifecycle patterns with GitOps-based promotion procedures:

| Environment | Purpose | Data Refresh | Access Control | Promotion Criteria |
|-------------|---------|--------------|----------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Development Namespace</span>** | Individual developer testing | Weekly synthetic data | Developer access via RBAC | Clean build and unit tests pass |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">QA Namespace</span>** | Component integration testing | Daily standardized data | QA team access | Successful integration testing |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Stage Namespace</span>** | Business validation | Daily production-like data | Business user access | User acceptance sign-off |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Production Namespace</span>** | Live transaction processing | Real-time operational data | Authorized users only | <span style="background-color: rgba(91, 57, 243, 0.2)">ArgoCD GitOps promotion approval</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">GitOps Promotion Flow</span>**:
<span style="background-color: rgba(91, 57, 243, 0.2)">Code changes trigger CI pipeline → Container images built and pushed → Git repository updated with new image tags → ArgoCD detects changes and syncs to target namespace → Automated health checks validate deployment → Manual approval gates for production promotion</span>

### 8.1.7 Backup and Disaster Recovery Plans (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Recovery Strategy</span>**:

**Recovery Objectives** (unchanged):
- **Recovery Point Objective (RPO)**: 24 hours - <span style="background-color: rgba(91, 57, 243, 0.2)">Daily encrypted snapshots with forward recovery capability</span>
- **Recovery Time Objective (RTO)**: 4 hours - <span style="background-color: rgba(91, 57, 243, 0.2)">Complete environment restoration via GitOps</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Recovery Architecture</span>**:

```mermaid
graph TD
    subgraph "Primary Cloud Region Operations"
        A[Kubernetes Cluster] --> B[PostgreSQL Managed Service]
        B --> C[Daily Automated Backups]
        C --> D[Cross-Region Replication]
        A --> E[Redis Session Store]
        E --> F[RDB/AOF Persistence]
    end
    
    subgraph "Disaster Recovery Region"
        G[Standby Kubernetes Cluster] --> H[PostgreSQL Replica]
        H --> I[Automated Multi-AZ Backups]
        G --> J[Redis Backup Restoration]
    end
    
    subgraph "GitOps Recovery Management"
        K[Git Repository<br/>Cluster State] --> L[ArgoCD DR Sync]
        L --> M[Infrastructure Restoration]
        M --> N[Application Deployment]
        N --> O[Data Recovery Validation]
        O --> P[Service Health Verification]
    end
    
    D --> I
    F --> J
    K --> G
    
    style A fill:#e3f2fd
    style G fill:#ffb74d
    style K fill:#ff5252
    style P fill:#c8e6c9
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud Recovery Procedure Matrix</span>**:

| Recovery Scenario | Detection Time | Response Time | Recovery Actions | Validation Steps |
|------------------|----------------|---------------|------------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Pod Failure</span>** | 5 minutes | 2 minutes | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes automatic pod restart with health checks</span> | Service endpoint validation |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Corruption</span>** | 30 minutes | 1 hour | <span style="background-color: rgba(91, 57, 243, 0.2)">Point-in-time recovery from automated PostgreSQL snapshots</span> | Data integrity validation |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Complete Region Loss</span>** | 1 hour | 4 hours | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-AZ failover to secondary cluster via ArgoCD</span> | End-to-end business process testing |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Failure</span>** | 15 minutes | 5 minutes | <span style="background-color: rgba(91, 57, 243, 0.2)">Load balancer failover to healthy availability zones</span> | API Gateway connectivity verification |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Backup Strategy Components</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**PostgreSQL**: Daily encrypted snapshots via managed service with automated multi-AZ backups</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Redis**: Session persistence via RDB snapshots and AOF (Append Only File) logging</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Cluster State**: All Kubernetes configurations stored in Git repository with version control</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Application Images**: Container registry replication across multiple regions</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Configuration**: ConfigMaps and Secrets backed up through GitOps workflow</span>

## 8.2 CLOUD SERVICES

CardDemo requires comprehensive cloud services to support its <span style="background-color: rgba(91, 57, 243, 0.2)">containerized cloud-native architecture running on Kubernetes orchestration platform</span>. The system leverages both essential and optional cloud services to provide enterprise-grade scalability, reliability, and operational excellence while maintaining stringent compliance requirements for financial services applications.

### 8.2.1 Cloud Provider Selection and Justification

**<span style="background-color: rgba(91, 57, 243, 0.2)">Multi-Cloud Compatible Architecture</span>**

The system is designed for deployment across major cloud providers including AWS, Microsoft Azure, Google Cloud Platform, and private cloud environments. This approach provides:

- **Vendor Independence**: Avoid vendor lock-in through Kubernetes-native services
- **Geographic Flexibility**: Deploy across regions for compliance and performance optimization  
- **Cost Optimization**: Leverage competitive pricing and reserved instance options
- **Risk Mitigation**: Reduce dependency on single cloud provider

**Cloud Provider Capability Matrix**:

| Service Category | AWS | Azure | GCP | Private Cloud |
|------------------|-----|-------|-----|---------------|
| **Kubernetes Service** | Amazon EKS | Azure Kubernetes Service | Google Kubernetes Engine | <span style="background-color: rgba(91, 57, 243, 0.2)">Self-managed K8s</span> |
| **Container Registry** | Amazon ECR | Azure Container Registry | Google Container Registry | <span style="background-color: rgba(91, 57, 243, 0.2)">Harbor/Registry</span> |
| **Managed PostgreSQL** | Amazon RDS PostgreSQL | Azure Database for PostgreSQL | Cloud SQL for PostgreSQL | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Operator</span> |
| **Managed Redis** | Amazon ElastiCache Redis | Azure Cache for Redis | Cloud Memorystore Redis | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis Operator</span> |

### 8.2.2 Essential Core Services

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Container Orchestration Platform</span>**

- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes 1.32.x (latest stable release)</span>
- **Service Options**:
  - **Managed Service**: Amazon EKS, Azure AKS, Google GKE with automatic updates and security patches
  - **Self-Hosted**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes deployment on VM instances for maximum control</span>
- **Core Capabilities**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Pod orchestration and lifecycle management for Spring Boot microservices</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Horizontal Pod Autoscaling (HPA) based on CPU and memory metrics</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Service discovery and load balancing for internal service communication</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Rolling deployments with zero-downtime updates</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">ConfigMaps and Secrets management for application configuration</span>
- **Cluster Configuration**:
  - **Node Pools**: 3+ worker nodes for high availability
  - **Resource Limits**: CPU requests/limits and memory constraints per service
  - **Network Policies**: Pod-to-pod communication restrictions for security
  - **RBAC Integration**: Role-based access control for service accounts

**<span style="background-color: rgba(91, 57, 243, 0.2)">Container Registry Service</span>**

- **Purpose**: <span style="background-color: rgba(91, 57, 243, 0.2)">Store and distribute Docker images for Spring Boot applications and Redis/PostgreSQL</span>
- **Service Options**:
  - **Managed Services**: Amazon ECR, Azure Container Registry, Google Container Registry
  - **Self-Hosted**: <span style="background-color: rgba(91, 57, 243, 0.2)">Harbor registry with integrated security scanning</span>
- **Security Features**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Vulnerability scanning for all container images before deployment</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Image signing and verification using Docker Content Trust</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Access control through IAM roles and registry policies</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Immutable image tags for production deployments</span>
- **Storage Strategy**:
  - **Base Images**: Java 21 runtime images with security updates
  - **Application Images**: Multi-stage builds for optimized image size
  - **Lifecycle Management**: Automated cleanup of unused images and tags

**<span style="background-color: rgba(91, 57, 243, 0.2)">Object Storage for Build Artifacts</span>**

- **Purpose**: <span style="background-color: rgba(91, 57, 243, 0.2)">Store build artifacts, deployment packages, and backup files</span>
- **Service Options**: Amazon S3, Azure Blob Storage, Google Cloud Storage, MinIO (self-hosted)
- **Storage Categories**:
  - **Build Artifacts**: JAR files, Docker images, and deployment manifests
  - **Configuration Backups**: Kubernetes YAML files and environment configurations
  - **Database Backups**: PostgreSQL dumps and Redis RDB snapshots
  - **Application Logs**: Long-term log storage and compliance archives
- **Security Requirements**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Encryption at rest using AES-256 encryption</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Encryption in transit using TLS 1.3</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Access control through IAM policies and signed URLs</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Versioning and immutable object storage for audit compliance</span>

### 8.2.3 Managed Database Services

**<span style="background-color: rgba(91, 57, 243, 0.2)">Managed PostgreSQL Database Service</span>**

- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL 17.5 (latest stable release with enterprise features)</span>
- **Service Options**:
  - **AWS**: Amazon RDS for PostgreSQL with Multi-AZ deployment
  - **Azure**: Azure Database for PostgreSQL - Flexible Server
  - **GCP**: Cloud SQL for PostgreSQL with high availability
  - **Self-Managed**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Operator (CloudNativePG) on Kubernetes</span>
- **Configuration Requirements**:
  - **Instance Class**: Minimum 4 vCPUs, 16 GiB RAM for production workloads
  - **Storage**: 500 GB SSD with IOPS optimization and automatic scaling
  - **High Availability**: Multi-AZ deployment with automatic failover (RTO < 60 seconds)
  - **Backup Strategy**: Daily automated backups with 30-day retention and point-in-time recovery
- **Security Configuration**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Encryption at rest using managed encryption keys or customer-managed keys</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">SSL/TLS encryption for all client connections</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">VPC isolation with private subnets and security group restrictions</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Database activity monitoring and audit logging for compliance</span>
- **Performance Optimization**:
  - **Connection Pooling**: PgBouncer integration for connection management
  - **Read Replicas**: Cross-region read replicas for disaster recovery and read scaling
  - **Monitoring**: CloudWatch/Azure Monitor metrics for performance tracking

**<span style="background-color: rgba(91, 57, 243, 0.2)">Managed Redis Session Store Service</span>**

- **Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Redis 7.4.x (latest stable enterprise release)</span>
- **Service Options**:
  - **AWS**: Amazon ElastiCache for Redis with cluster mode
  - **Azure**: Azure Cache for Redis Premium tier
  - **GCP**: Cloud Memorystore for Redis with high availability
  - **Self-Managed**: <span style="background-color: rgba(91, 57, 243, 0.2)">Redis Operator with persistence and clustering</span>
- **Cluster Configuration**:
  - **Node Type**: Minimum 2 vCPUs, 4 GiB RAM per node
  - **Cluster Mode**: Redis Cluster with 3 primary and 3 replica nodes for high availability
  - **Persistence**: RDB snapshots every 15 minutes and AOF (Append Only File) logging
  - **Backup Strategy**: Daily snapshots with cross-region replication
- **Session Management Features**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session integration for distributed session storage</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Session clustering across multiple application instances</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Configurable session timeout (default 30 minutes)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">JSON serialization for complex session objects</span>
- **Security Features**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Encryption at rest and in transit</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Redis AUTH password authentication</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">VPC-only access with security group restrictions</span>

### 8.2.4 Optional Cloud Services for Enhanced Functionality

**<span style="background-color: rgba(91, 57, 243, 0.2)">Git-Based Configuration Repository (Spring Cloud Config Integration)</span>**

- **Purpose**: <span style="background-color: rgba(91, 57, 243, 0.2)">Centralized configuration management for Spring Boot applications across environments</span>
- **Service Options**:
  - **Managed Git Services**: GitHub Enterprise, GitLab SaaS, Azure DevOps, AWS CodeCommit
  - **Self-Hosted**: <span style="background-color: rgba(91, 57, 243, 0.2)">GitLab CE, Gitea, or Bitbucket on-premises</span>
- **Configuration Management Features**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Environment-specific property files (dev, staging, prod)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Encrypted sensitive configuration values using symmetric keys</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Version control and audit trail for configuration changes</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic configuration refresh without application restart</span>
- **Integration with Spring Cloud Config Server**:
  - **Config Server**: Deployed as Kubernetes service with high availability
  - **Client Integration**: Spring Boot applications automatically fetch configuration at startup
  - **Webhook Support**: Automatic configuration refresh triggered by Git commits

**<span style="background-color: rgba(91, 57, 243, 0.2)">Service Mesh (Optional for Advanced Networking)</span>**

- **Options**: Istio, Linkerd, or AWS App Mesh for advanced traffic management
- **Features**: Mutual TLS, traffic routing, observability, and fault injection
- **Use Cases**: Complex microservice deployments requiring advanced networking policies

### 8.2.5 High Availability Design

**<span style="background-color: rgba(91, 57, 243, 0.2)">Multi-Zone Deployment Architecture</span>**

```mermaid
graph TB
    subgraph "Cloud Provider Region"
        subgraph "Availability Zone A"
            A1[Kubernetes Nodes<br/>Spring Boot Pods] 
            A2[PostgreSQL Primary<br/>Multi-AZ Deployment]
            A3[Redis Primary Nodes<br/>Cluster Mode]
        end
        
        subgraph "Availability Zone B" 
            B1[Kubernetes Nodes<br/>Spring Boot Pods]
            B2[PostgreSQL Standby<br/>Synchronous Replication] 
            B3[Redis Replica Nodes<br/>Automatic Failover]
        end
        
        subgraph "Availability Zone C"
            C1[Kubernetes Nodes<br/>Spring Boot Pods]
            C2[PostgreSQL Read Replica<br/>Cross-AZ Backup]
            C3[Redis Backup Nodes<br/>Snapshot Storage]
        end
    end
    
    subgraph "Load Balancer Layer"
        LB[Cloud Load Balancer<br/>Multi-AZ Distribution]
        CDN[Content Delivery Network<br/>React Static Assets]
    end
    
    subgraph "Monitoring and Management"
        MON[Monitoring Service<br/>Metrics Collection]
        LOG[Centralized Logging<br/>ELK Stack or Cloud Logs] 
        BACKUP[Cross-Region Backup<br/>Disaster Recovery]
    end
    
    LB --> A1
    LB --> B1 
    LB --> C1
    
    A2 --> B2
    B2 --> C2
    
    A3 <--> B3
    B3 <--> C3
    
    A1 --> MON
    B1 --> MON
    C1 --> MON
    
    style A1 fill:#e3f2fd
    style A2 fill:#fff3e0
    style A3 fill:#fce4ec
    style LB fill:#c8e6c9
    style MON fill:#f3e5f5
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Availability Targets and SLA Requirements</span>**:

| Service Component | Availability Target | RTO | RPO | Implementation |
|-------------------|-------------------|-----|-----|----------------|
| **Kubernetes Cluster** | 99.9% | < 5 minutes | N/A | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-node deployment with pod anti-affinity</span> |
| **PostgreSQL Database** | 99.95% | < 1 minute | < 5 minutes | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-AZ deployment with synchronous replication</span> |
| **Redis Session Store** | 99.9% | < 2 minutes | < 1 minute | <span style="background-color: rgba(91, 57, 243, 0.2)">Cluster mode with automatic failover</span> |
| **Container Registry** | 99.99% | < 30 seconds | N/A | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-region replication with local caching</span> |

### 8.2.6 Cost Optimization Strategy

**<span style="background-color: rgba(91, 57, 243, 0.2)">Resource Right-Sizing and Cost Management</span>**

- **Kubernetes Cluster Optimization**:
  - **Node Autoscaling**: Cluster Autoscaler for dynamic node provisioning based on demand
  - **Spot Instances**: Use spot/preemptible instances for non-critical workloads (dev/test environments)
  - **Resource Requests/Limits**: Proper CPU and memory allocation to prevent over-provisioning
  - **Vertical Pod Autoscaling**: Automatic resource recommendation and adjustment

- **Database Cost Optimization**:
  - **Reserved Instances**: 1-3 year reserved capacity for production databases
  - **Storage Optimization**: Automated storage scaling and GP2/GP3 volume optimization
  - **Read Replica Management**: On-demand read replicas for batch processing workloads

- **Container Registry Efficiency**:
  - **Image Layer Caching**: Optimize Docker layer structure for faster builds
  - **Lifecycle Policies**: Automatic cleanup of unused images and old versions
  - **Multi-Stage Builds**: Reduce final image size by up to 70%

**<span style="background-color: rgba(91, 57, 243, 0.2)">Monthly Cost Estimation (Production Environment)</span>**:

| Service Category | Small Deployment | Medium Deployment | Large Deployment |
|------------------|------------------|-------------------|------------------|
| **Kubernetes Cluster** | $300-500/month | $800-1,200/month | $2,000-3,000/month |
| **PostgreSQL (Managed)** | $200-400/month | $600-1,000/month | $1,500-2,500/month |
| **Redis (Managed)** | $150-250/month | $400-600/month | $800-1,200/month |
| **Container Registry** | $50-100/month | $100-200/month | $200-400/month |
| **Object Storage** | $50-150/month | $200-400/month | $500-800/month |
| **Networking/Load Balancer** | $100-200/month | $300-500/month | $600-1,000/month |
| **Total Estimated Cost** | **$850-1,600/month** | **$2,400-3,900/month** | **$5,600-8,900/month** |

### 8.2.7 Security and Compliance Considerations

**<span style="background-color: rgba(91, 57, 243, 0.2)">Financial Services Compliance Framework</span>**

- **Data Residency Requirements**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Deploy all services within specific geographic regions to meet regulatory requirements</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Ensure customer financial data remains within approved jurisdictions</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Cross-border data transfer restrictions and compliance validation</span>

- **Encryption Standards**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Encryption at rest using AES-256 for all data storage services</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Encryption in transit using TLS 1.3 for all inter-service communication</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Customer-managed encryption keys (CMK) for sensitive financial data</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Key rotation policies with automated 90-day rotation cycles</span>

- **VPC Isolation and Network Security**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Private VPC with isolated subnets for different service tiers</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Network Access Control Lists (NACLs) and Security Groups for traffic filtering</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">VPN or Direct Connect for secure on-premises connectivity</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Network segmentation between development, staging, and production environments</span>

- **Identity and Access Management**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Role-based access control (RBAC) for all cloud services</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-factor authentication (MFA) for administrative access</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Service accounts with minimal required permissions</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Regular access reviews and permission auditing</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Compliance Monitoring and Auditing</span>**:

- **Audit Logging**: Comprehensive logging of all API calls, data access, and configuration changes
- **Compliance Reporting**: Automated compliance reports for SOX, PCI DSS, and Basel III requirements  
- **Security Scanning**: Continuous vulnerability scanning of container images and infrastructure
- **Penetration Testing**: Regular security assessments and penetration testing of cloud infrastructure

### 8.2.8 Cloud Services Integration Architecture

**<span style="background-color: rgba(91, 57, 243, 0.2)">Service Interconnection and Communication Flow</span>**

```mermaid
graph TD
    subgraph "External Layer"
        CDN[Content Delivery Network<br/>React Static Assets]
        LB[Cloud Load Balancer<br/>HTTPS Termination]
    end
    
    subgraph "Kubernetes Cluster"
        GW[Spring Cloud Gateway<br/>API Gateway Service]
        AUTH[Spring Security<br/>Authentication Service]
        API[Spring Boot REST APIs<br/>Business Logic Layer]
        BATCH[Spring Batch Jobs<br/>Background Processing]
    end
    
    subgraph "Data Layer"
        PG[(Managed PostgreSQL<br/>Primary Database)]
        REDIS[(Managed Redis<br/>Session Store)]
        PG_REPLICA[(PostgreSQL Read Replica<br/>Cross-Region)]
    end
    
    subgraph "Supporting Services"
        CONFIG[Spring Cloud Config<br/>Configuration Server]
        GIT[Git Repository<br/>Config Storage]
        REGISTRY[Container Registry<br/>Docker Images]
        STORAGE[Object Storage<br/>Artifacts & Backups]
    end
    
    subgraph "Monitoring & Logging"
        METRICS[Metrics Collection<br/>Prometheus/CloudWatch]
        LOGS[Centralized Logging<br/>ELK Stack/Cloud Logs]
        ALERTS[Alerting System<br/>PagerDuty/Slack]
    end
    
    CDN --> LB
    LB --> GW
    GW --> AUTH
    GW --> API
    AUTH <--> REDIS
    API <--> PG
    API <--> REDIS
    BATCH --> PG
    BATCH --> PG_REPLICA
    
    CONFIG <--> GIT
    API --> CONFIG
    GW --> CONFIG
    
    API --> METRICS
    GW --> LOGS
    METRICS --> ALERTS
    
    REGISTRY --> API
    STORAGE --> BATCH
    
    style GW fill:#e3f2fd
    style PG fill:#fff3e0
    style REDIS fill:#fce4ec
    style CONFIG fill:#e8f5e8
    style METRICS fill:#f3e5f5
```

This comprehensive cloud services architecture ensures <span style="background-color: rgba(91, 57, 243, 0.2)">enterprise-grade scalability, security, and compliance</span> for the CardDemo application while maintaining cost efficiency and operational excellence. The combination of managed services and Kubernetes-native solutions provides flexibility for deployment across multiple cloud providers while meeting stringent financial services regulatory requirements.

## 8.3 CONTAINERIZATION

CardDemo implements a comprehensive containerization strategy supporting its transformation from legacy mainframe architecture to modern cloud-native deployment patterns. The containerization approach enables consistent deployment across development, staging, and production environments while maintaining enterprise-grade security and performance standards.

### 8.3.1 Container Platform Strategy

**<span style="background-color: rgba(91, 57, 243, 0.2)">Docker-First Containerization Approach</span>**

CardDemo utilizes Docker as the primary containerization platform, providing standardized packaging for all application components across the modernized technology stack. This approach supports the complete transformation from COBOL/CICS programs to <span style="background-color: rgba(91, 57, 243, 0.2)">Java 21 Spring Boot microservices and React Single Page Application architecture</span>.

**Strategic Benefits**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Environment Consistency</span>**: Identical runtime behavior across development, staging, and production environments
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Deployment Velocity</span>**: Rapid deployment cycles supporting CI/CD pipeline automation
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Resource Optimization</span>**: Efficient resource utilization through container density and orchestration
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Scalability Foundation</span>**: Horizontal scaling capabilities via Kubernetes container orchestration

**Platform Integration Requirements**:
- **Container Runtime**: Docker Engine 27.x or containerd for production Kubernetes deployments
- **Orchestration Platform**: Kubernetes 1.28+ for container lifecycle management and service discovery
- **Registry Integration**: Container registry with vulnerability scanning and image signing capabilities
- **Network Architecture**: Container networking supporting service mesh integration and secure inter-service communication

### 8.3.2 Container Images Portfolio

**<span style="background-color: rgba(91, 57, 243, 0.2)">Application Service Images</span>**

The CardDemo containerization strategy encompasses four primary container images supporting the complete application architecture:

#### Backend Service Container (updated)

**Image Name**: `<span style="background-color: rgba(91, 57, 243, 0.2)">carddemo/backend-service</span>`
- **Runtime Environment**: <span style="background-color: rgba(91, 57, 243, 0.2)">Java 21 LTS with Spring Boot 3.2.x framework</span>
- **Application Architecture**: <span style="background-color: rgba(91, 57, 243, 0.2)">RESTful microservices replacing 36 COBOL programs (24 CICS + 12 batch)</span>
- **Service Components**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot REST controllers mapping CICS transaction codes (CC00, CT00, CA00, etc.)</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch jobs replacing JCL batch processing workflows</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA repositories accessing PostgreSQL database</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security authentication and authorization services</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session integration with Redis for distributed session management</span>
- **Resource Requirements**: 1Gi memory limit, 500m CPU limit with horizontal pod autoscaling
- **Health Monitoring**: Spring Boot Actuator endpoints for readiness and liveness probes

#### Frontend Application Container (updated)

**Image Name**: `<span style="background-color: rgba(91, 57, 243, 0.2)">carddemo/frontend-spa</span>`
- **Runtime Environment**: <span style="background-color: rgba(91, 57, 243, 0.2)">Node.js 20.x LTS with React 18.x Single Page Application</span>
- **Build Artifacts**: <span style="background-color: rgba(91, 57, 243, 0.2)">Production-optimized React build served via NGINX 1.25.x</span>
- **UI Components**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">18 React components generated from BMS mapset definitions</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Material-UI component library for consistent design system</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">React Router for client-side navigation matching CICS program flow</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Formik/Yup validation replicating BMS field validation rules</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Axios HTTP client for REST API communication</span>
- **Web Server Configuration**: NGINX with gzip compression, static asset caching, and HTTPS termination
- **Resource Requirements**: 256Mi memory limit, 100m CPU request with CDN integration

#### Database Service Container (updated)

**Image Name**: `<span style="background-color: rgba(91, 57, 243, 0.2)">postgres:17.5</span>` (Official PostgreSQL Image)
- **Database Engine**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL 17.5 with enterprise features and performance optimizations</span>
- **Data Architecture**: <span style="background-color: rgba(91, 57, 243, 0.2)">Relational database replacing VSAM KSDS datasets with composite key structures</span>
- **Schema Components**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Account tables (ACCOUNT, CUSTOMER) with PostgreSQL constraints matching VSAM integrity</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction tables (TRANSACTION, CARD) supporting real-time processing</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Reference data tables maintaining COBOL packed decimal precision</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Audit and compliance tables for financial regulatory requirements</span>
- **Configuration**: Custom postgresql.conf for optimal performance with Spring Data JPA
- **Deployment Options**: Official PostgreSQL container for development, managed cloud service for production

#### Session Store Container (updated)

**Image Name**: `<span style="background-color: rgba(91, 57, 243, 0.2)">redis:7.4-alpine</span>` (Official Redis Image)
- **Cache Engine**: <span style="background-color: rgba(91, 57, 243, 0.2)">Redis 7.4.x with Alpine Linux base for minimal attack surface</span>
- **Session Management**: <span style="background-color: rgba(91, 57, 243, 0.2)">Distributed session storage replacing CICS COMMAREA structures</span>
- **Configuration Features**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session integration with JSON serialization for complex session objects</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Configurable session timeout (30 minutes default) matching CICS transaction timeout</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Redis persistence via RDB snapshots and AOF logging for session recovery</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Redis Cluster mode for high availability and horizontal scaling</span>
- **Security Configuration**: Redis AUTH password authentication and TLS encryption for production
- **Deployment Options**: Redis container for development, managed Redis service for production

### 8.3.3 Base Image Standards and Guidelines

**<span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise Base Image Strategy</span>**

CardDemo implements standardized base images ensuring security, performance, and maintainability across all containerized components.

#### Java Runtime Base Image (updated)

**Base Image**: `<span style="background-color: rgba(91, 57, 243, 0.2)">eclipse-temurin:21.0.8-jdk-alpine</span>`
- **Java Distribution**: <span style="background-color: rgba(91, 57, 243, 0.2)">Eclipse Temurin 21.0.8 LTS (July 2025 PSU) with long-term security support</span>
- **Operating System**: Alpine Linux 3.19+ for minimal image size and security attack surface
- **Security Features**:
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Regular security patches via Eclipse Adoptium working group</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">OpenJDK with comprehensive vulnerability scanning and patch management</span>
  - <span style="background-color: rgba(91, 57, 243, 0.2)">Minimal Linux distribution reducing potential security vulnerabilities</span>
- **Performance Optimizations**: JVM tuning for containerized environments with memory and CPU constraints
- **Compliance**: Java SE TCK-tested and AQAvit quality verified for enterprise deployment

## Node.js Runtime Base Image (updated)

**Base Image**: `<span style="background-color: rgba(91, 57, 243, 0.2)">node:20.18-alpine</span>`
- **Node.js Version**: <span style="background-color: rgba(91, 57, 243, 0.2)">Node.js 20.18 LTS with active long-term support through 2026</span>
- **Package Manager**: npm 10.x with dependency vulnerability scanning and audit capabilities
- **Alpine Integration**: Lightweight Alpine Linux base with security-focused package management
- **Development Tools**: Node.js runtime with npm for React application build processes

#### Web Server Base Image (updated)

**Base Image**: `<span style="background-color: rgba(91, 57, 243, 0.2)">nginx:1.25-alpine</span>`
- **Web Server**: <span style="background-color: rgba(91, 57, 243, 0.2)">NGINX 1.25.x with high-performance static content serving</span>
- **Configuration**: Optimized nginx.conf for React SPA with gzip compression and cache headers
- **Security Headers**: Content Security Policy (CSP) and security headers for web application protection
- **Performance Features**: HTTP/2 support, static asset caching, and CDN integration capabilities

### 8.3.4 Image Versioning and Tagging Strategy

**<span style="background-color: rgba(91, 57, 243, 0.2)">Semantic Versioning with Git Integration</span>**

CardDemo implements a comprehensive tagging strategy supporting automated CI/CD pipeline integration and environment promotion workflows.

#### Tagging Convention Matrix

| Tag Type | Pattern | Example | Usage Context |
|----------|---------|---------|---------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Semantic Release</span>** | `v{major}.{minor}.{patch}` | `v2.1.3` | <span style="background-color: rgba(91, 57, 243, 0.2)">Production releases with change management approval</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Git Commit SHA</span>** | `{sha}-{timestamp}` | `abc1234-20250806` | <span style="background-color: rgba(91, 57, 243, 0.2)">Development builds with full traceability</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Branch Builds</span>** | `{branch}-{sha}` | `feature-auth-def5678` | <span style="background-color: rgba(91, 57, 243, 0.2)">Feature branch testing and integration</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Environment Specific</span>** | `{env}-{version}` | `staging-v2.1.3` | <span style="background-color: rgba(91, 57, 243, 0.2)">Environment-specific deployments and validation</span> |

#### Tag Lifecycle Management

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Tag Promotion</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Development**: Git commit SHA tags for every successful build</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**QA Integration**: Branch-specific tags for integration testing</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Staging**: Release candidate tags (v2.1.3-rc1) for business validation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Production**: Semantic version tags with immutable image signatures</span>

**Registry Retention Policies**:
- **Production Tags**: Permanent retention with backup and disaster recovery
- **Development Tags**: 30-day retention with automated cleanup
- **Feature Branch Tags**: 7-day retention after branch merge or deletion

### 8.3.5 Multi-Stage Docker Build Architecture

**<span style="background-color: rgba(91, 57, 243, 0.2)">Optimized Build Pipeline for Performance and Security</span>**

CardDemo implements multi-stage Docker builds optimizing for image size, build performance, and security while supporting the complete transformation from mainframe architecture.

#### Backend Service Multi-Stage Build (updated)

```dockerfile
# Build Stage - Java Compilation and Dependency Resolution
FROM eclipse-temurin:21.0.8-jdk-alpine AS build-stage
WORKDIR /workspace/app

#### Dependency Layer - Cached Maven Dependencies
COPY pom.xml .
COPY .mvn .mvn
COPY mvnw .
RUN ./mvnw dependency:go-offline -B

#### Source Layer - Application Source Code
COPY src src
RUN ./mvnw clean package -DskipTests

#### Runtime Stage - Minimal Production Image
FROM eclipse-temurin:21.0.8-jre-alpine AS runtime-stage
RUN addgroup -S spring && adduser -S spring -G spring
USER spring:spring

#### Application Deployment
COPY --from=build-stage /workspace/app/target/*.jar app.jar
ENTRYPOINT ["java", "-jar", "/app.jar"]

#### Health Check Configuration
HEALTHCHECK --interval=30s --timeout=3s --start-period=60s \
  CMD wget --no-verbose --tries=1 --spider http://localhost:8080/actuator/health || exit 1
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Build Optimization Features</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Dependency Caching**: Maven dependencies cached in separate layer for faster rebuilds</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**JRE Runtime**: Production stage uses JRE instead of JDK reducing image size by 200MB+</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Security Hardening**: Non-root user execution and minimal Alpine base image</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Health Monitoring**: Built-in health checks for Kubernetes readiness and liveness probes</span>

#### Frontend SPA Multi-Stage Build (updated)

```dockerfile
# Build Stage - Node.js Build Environment
FROM node:20.18-alpine AS build-stage
WORKDIR /workspace/app

#### Dependency Layer - npm Package Installation
COPY package*.json ./
RUN npm ci --only=production

#### Source Layer - React Application Build
COPY public/ public/
COPY src/ src/
RUN npm run build

#### Runtime Stage - NGINX Web Server
FROM nginx:1.25-alpine AS runtime-stage
COPY --from=build-stage /workspace/app/build /usr/share/nginx/html
COPY nginx.conf /etc/nginx/nginx.conf

#### Security and Performance Configuration
RUN chown -R nginx:nginx /var/cache/nginx && \
    chown -R nginx:nginx /var/log/nginx && \
    chown -R nginx:nginx /etc/nginx/conf.d
USER nginx

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Frontend Optimization Benefits</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Build Artifact Separation**: Node.js build tools excluded from production image</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Static Asset Optimization**: React build process includes minification and tree-shaking</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Web Server Performance**: NGINX optimized for static content delivery with compression</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Security Configuration**: Non-root NGINX execution and minimal attack surface</span>

### 8.3.6 Container Security Standards

**<span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise Security Compliance Framework</span>**

CardDemo implements comprehensive container security standards meeting financial services regulatory requirements and industry best practices.

#### Image Security Scanning Requirements (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Vulnerability Assessment</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Base Image Scanning**: Daily scans of Eclipse Temurin, Alpine, and NGINX base images</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Dependency Scanning**: Maven and npm dependency vulnerability assessment during build</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Runtime Monitoring**: Continuous monitoring of deployed containers for emerging threats</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Compliance Validation**: CVE database integration with automated remediation workflows</span>

#### Container Hardening Standards (updated)

**Security Configuration Matrix**:

| Security Control | Implementation | Compliance Requirement |
|------------------|----------------|------------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Non-Root Execution</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Dedicated service users (spring, nginx) with minimal privileges</span> | PCI DSS, SOX compliance |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Image Signing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Docker Content Trust with GPG key verification</span> | Software supply chain security |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Isolation</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Network Policies restricting inter-pod communication</span> | Financial data protection |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Secrets Management</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Secrets with encryption at rest and in transit</span> | Credential protection standards |

### 8.3.7 Local Development Stack Integration

**<span style="background-color: rgba(91, 57, 243, 0.2)">Docker Compose Development Environment</span>**

CardDemo provides a comprehensive local development stack through Docker Compose, enabling developers to replicate the complete production environment locally. <span style="background-color: rgba(91, 57, 243, 0.2)">As referenced in the file path mapping (Section 0.2.3), the `docker-compose.yml` configuration orchestrates the full technology stack transformation from mainframe architecture</span>.

#### Local Stack Composition (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Complete Environment Replication</span>**:

```yaml
# docker-compose.yml - CardDemo Local Development Stack
version: '3.8'
services:
  backend-service:
    build: 
      context: ./backend
      target: runtime-stage
    image: carddemo/backend-service:local
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=docker
      - DATABASE_URL=jdbc:postgresql://postgres:5432/carddemo
      - REDIS_URL=redis://redis:6379
    depends_on:
      - postgres
      - redis
    healthcheck:
      test: ["CMD", "wget", "--spider", "http://localhost:8080/actuator/health"]
      interval: 30s
      timeout: 10s
      retries: 3

  frontend-spa:
    build:
      context: ./frontend  
      target: runtime-stage
    image: carddemo/frontend-spa:local
    ports:
      - "3000:80"
    depends_on:
      - backend-service

  postgres:
    image: postgres:17.5
    environment:
      - POSTGRES_DB=carddemo
      - POSTGRES_USER=carddemo
      - POSTGRES_PASSWORD=devpassword
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./database/init:/docker-entrypoint-initdb.d

  redis:
    image: redis:7.4-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --save 60 1 --loglevel warning

volumes:
  postgres_data:
  redis_data:
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Development Workflow Integration</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Hot Reload Support**: Volume mounts enabling live code changes without container rebuilds</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Database Initialization**: Automated schema creation and sample data loading</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Service Discovery**: Container networking replicating Kubernetes service communication</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Health Monitoring**: Health checks matching production Kubernetes probe configuration</span>

#### Development Environment Benefits (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Productivity and Consistency Advantages</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Environment Parity**: Identical runtime behavior between local development and production</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Rapid Onboarding**: Single-command environment setup reducing developer setup time</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Integration Testing**: Full stack testing capabilities including database and session state</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Resource Isolation**: Containerized services preventing conflicts with host system dependencies</span>

### 8.3.8 Container Orchestration Integration

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes-Native Deployment Architecture</span>**

CardDemo containers integrate seamlessly with Kubernetes orchestration platform, providing enterprise-grade container lifecycle management and service orchestration capabilities.

#### Kubernetes Resource Configuration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Production Deployment Specifications</span>**:

```yaml
# Kubernetes Deployment - Backend Service
apiVersion: apps/v1
kind: Deployment
metadata:
  name: carddemo-backend
  labels:
    app: carddemo-backend
    version: v2.1.3
spec:
  replicas: 3
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  selector:
    matchLabels:
      app: carddemo-backend
  template:
    metadata:
      labels:
        app: carddemo-backend
        version: v2.1.3
    spec:
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 2000
      containers:
      - name: backend-service
        image: carddemo/backend-service:v2.1.3
        imagePullPolicy: Always
        ports:
        - containerPort: 8080
          name: http
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "1Gi" 
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /actuator/health/liveness
            port: 8080
          initialDelaySeconds: 60
          periodSeconds: 30
        readinessProbe:
          httpGet:
            path: /actuator/health/readiness
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "kubernetes"
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: database-secret
              key: url
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              name: redis-secret
              key: url
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Orchestration Integration Features</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Horizontal Pod Autoscaling**: CPU and memory-based scaling for variable workloads</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Rolling Deployments**: Zero-downtime updates with automated rollback capabilities</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Service Discovery**: Kubernetes DNS-based service resolution and load balancing</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Resource Management**: CPU and memory constraints preventing resource contention</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Health Monitoring**: Integrated health checks for automated pod lifecycle management</span>

This comprehensive containerization architecture enables CardDemo's complete transformation from legacy mainframe systems to modern cloud-native deployment patterns while maintaining enterprise-grade security, performance, and operational excellence standards.

## 8.4 ORCHESTRATION

CardDemo implements comprehensive Kubernetes container orchestration supporting its transformation from legacy mainframe architecture to modern cloud-native deployment patterns. <span style="background-color: rgba(91, 57, 243, 0.2)">The orchestration platform replaces traditional z/OS job scheduling and CICS transaction management with enterprise-grade Kubernetes workload management, enabling horizontal scaling, automated recovery, and declarative infrastructure management.</span>

### 8.4.1 Kubernetes Orchestration Platform Strategy

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Container Orchestration Architecture</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">CardDemo utilizes Kubernetes 1.28+ as the primary container orchestration platform, providing comprehensive service lifecycle management for the modernized Spring Boot application ecosystem. This approach replaces traditional mainframe orchestration mechanisms (CICS Transaction Server, JES2/JES3 Job Scheduler, z/OS Workload Manager) with cloud-native equivalents while maintaining identical operational capabilities.</span>

**Strategic Orchestration Benefits**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Service Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Deployment controllers manage Spring Boot service lifecycles with automated restart and scaling capabilities</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Resource Optimization</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Intelligent pod scheduling and resource allocation matching z/OS Workload Manager efficiency</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Service Discovery Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Native service discovery and load balancing replacing CICS transaction routing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Declarative Configuration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">YAML-based infrastructure definitions enabling GitOps deployment workflows</span>

**Platform Integration Requirements**:
- **Cluster Architecture**: Minimum 3-node Kubernetes cluster with master/worker separation
- **Container Runtime**: Docker Engine 27.x or containerd for production deployments  
- **Network Integration**: Container networking supporting service mesh capabilities
- **Storage Orchestration**: Persistent volume management for PostgreSQL data persistence

### 8.4.2 Container Orchestration Strategy (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Microservices Deployment Architecture</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">The orchestration strategy encompasses comprehensive management of CardDemo's modernized application stack, including Spring Boot REST services, PostgreSQL database, Redis session store, and React frontend components. This architecture provides identical functionality to mainframe transaction processing while enabling cloud-native scaling and recovery patterns.</span>

```mermaid
graph TD
    subgraph "Kubernetes Orchestration Architecture"
        A[Kubernetes Control Plane] --> B[Pod Scheduler]
        B --> C[Spring Boot Service Pods]
        B --> D[PostgreSQL StatefulSet]
        B --> E[Redis Deployment]
        B --> F[React Frontend Pods]
        
        G[Service Discovery] --> H[Internal Load Balancing]
        I[ConfigMap Management] --> J[Environment Configuration]
        K[Secret Management] --> L[Database Credentials]
        
        M[HorizontalPodAutoscaler] --> N[Auto-Scaling Decisions]
        N --> O[Pod Replica Management]
        
        P[Ingress Controller] --> Q[Spring Cloud Gateway]
        Q --> R[API Gateway Routing]
        
        style C fill:#e3f2fd
        style D fill:#fff3e0
        style E fill:#f3e5f5
        style Q fill:#e8f5e8
        style M fill:#ffb74d
    end
```

**Service Deployment Approach**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Deployment Controllers</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Deployments manage Spring Boot service replicas with rolling update capabilities</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">StatefulSet Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL deployed as StatefulSet with persistent volume claims for data durability</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Service Load Balancing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Services provide internal load balancing and service discovery</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Configuration Management</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">ConfigMaps and Secrets externalize application configuration and sensitive data</span>

### 8.4.3 Core Kubernetes Objects Configuration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Service Deployments</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">Each Spring Boot service component requires dedicated Kubernetes objects supporting the complete application architecture transformation:</span>

#### Backend Service Deployment (updated)

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: carddemo-backend
  labels:
    app: carddemo-backend
    tier: application
spec:
  replicas: 3
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
  selector:
    matchLabels:
      app: carddemo-backend
  template:
    metadata:
      labels:
        app: carddemo-backend
        version: v2.1.0
    spec:
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
        fsGroup: 2000
      containers:
      - name: backend-service
        image: carddemo/backend-service:v2.1.0
        imagePullPolicy: Always
        ports:
        - containerPort: 8080
          name: http
          protocol: TCP
        resources:
          requests:
            memory: "512Mi"
            cpu: "250m"
          limits:
            memory: "1Gi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /actuator/health/liveness
            port: 8080
          initialDelaySeconds: 60
          periodSeconds: 30
          timeoutSeconds: 5
          failureThreshold: 3
        readinessProbe:
          httpGet:
            path: /actuator/health/readiness
            port: 8080
          initialDelaySeconds: 30
          periodSeconds: 10
          timeoutSeconds: 3
          failureThreshold: 2
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "kubernetes"
        envFrom:
        - configMapRef:
            name: carddemo-backend-config
        - secretRef:
            name: carddemo-backend-secret
---
apiVersion: v1
kind: Service
metadata:
  name: carddemo-backend-service
  labels:
    app: carddemo-backend
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
    protocol: TCP
    name: http
  selector:
    app: carddemo-backend
```

#### ConfigMap and Secret Management (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Application Configuration Objects</span>**:

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: carddemo-backend-config
data:
  application.yml: |
    server:
      port: 8080
    spring:
      application:
        name: carddemo-backend
      datasource:
        hikari:
          maximum-pool-size: 20
          minimum-idle: 5
      session:
        store-type: redis
      actuator:
        endpoints:
          web:
            exposure:
              include: "health,metrics,info"
    management:
      health:
        readiness-state:
          enabled: true
        liveness-state:
          enabled: true
      metrics:
        export:
          prometheus:
            enabled: true
---
apiVersion: v1
kind: Secret
metadata:
  name: carddemo-backend-secret
type: Opaque
stringData:
  DATABASE_URL: "jdbc:postgresql://postgresql-service:5432/carddemo"
  DATABASE_USERNAME: "carddemo_user"
  DATABASE_PASSWORD: "secure_password_here"
  REDIS_URL: "redis://redis-service:6379"
  JWT_SECRET: "jwt_signing_key_here"
```

#### PostgreSQL StatefulSet Configuration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Database Persistence Management</span>**:

```yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: postgresql
  labels:
    app: postgresql
spec:
  serviceName: postgresql-service
  replicas: 1
  selector:
    matchLabels:
      app: postgresql
  template:
    metadata:
      labels:
        app: postgresql
    spec:
      containers:
      - name: postgresql
        image: postgres:17.5
        ports:
        - containerPort: 5432
          name: postgresql
        resources:
          requests:
            memory: "1Gi"
            cpu: "500m"
          limits:
            memory: "2Gi"
            cpu: "1000m"
        env:
        - name: POSTGRES_DB
          value: "carddemo"
        - name: POSTGRES_USER
          valueFrom:
            secretKeyRef:
              name: postgresql-secret
              key: username
        - name: POSTGRES_PASSWORD
          valueFrom:
            secretKeyRef:
              name: postgresql-secret
              key: password
        volumeMounts:
        - name: postgresql-storage
          mountPath: /var/lib/postgresql/data
        livenessProbe:
          exec:
            command:
            - pg_isready
            - -U
            - carddemo_user
          initialDelaySeconds: 30
          periodSeconds: 30
        readinessProbe:
          exec:
            command:
            - pg_isready
            - -U
            - carddemo_user
          initialDelaySeconds: 15
          periodSeconds: 10
  volumeClaimTemplates:
  - metadata:
      name: postgresql-storage
    spec:
      accessModes: ["ReadWriteOnce"]
      storageClassName: "fast-ssd"
      resources:
        requests:
          storage: 100Gi
---
apiVersion: v1
kind: Service
metadata:
  name: postgresql-service
  labels:
    app: postgresql
spec:
  type: ClusterIP
  ports:
  - port: 5432
    targetPort: 5432
  selector:
    app: postgresql
```

#### HorizontalPodAutoscaler Configuration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Auto-Scaling for Sub-200ms SLA Compliance</span>**:

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: carddemo-backend-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: carddemo-backend
  minReplicas: 3
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
  - type: Pods
    pods:
      metric:
        name: http_requests_per_second
      target:
        type: AverageValue
        averageValue: "1000"
  behavior:
    scaleUp:
      stabilizationWindowSeconds: 60
      policies:
      - type: Percent
        value: 100
        periodSeconds: 15
    scaleDown:
      stabilizationWindowSeconds: 300
      policies:
      - type: Percent
        value: 10
        periodSeconds: 60
```

### 8.4.4 API Gateway and Ingress Management (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway Integration with IngressController</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">The orchestration architecture integrates Spring Cloud Gateway as the primary API gateway component (referenced in Section 0.2.2 API Gateway), deployed through Kubernetes Ingress controllers for external traffic management and internal service routing.</span>

#### Spring Cloud Gateway Deployment (updated)

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: carddemo-gateway
  labels:
    app: carddemo-gateway
    component: api-gateway
spec:
  replicas: 2
  selector:
    matchLabels:
      app: carddemo-gateway
  template:
    metadata:
      labels:
        app: carddemo-gateway
    spec:
      containers:
      - name: gateway
        image: carddemo/api-gateway:v2.1.0
        ports:
        - containerPort: 8080
          name: http
        resources:
          requests:
            memory: "256Mi"
            cpu: "100m"
          limits:
            memory: "512Mi"
            cpu: "250m"
        env:
        - name: SPRING_PROFILES_ACTIVE
          value: "kubernetes"
        - name: BACKEND_SERVICE_URL
          value: "http://carddemo-backend-service:8080"
        livenessProbe:
          httpGet:
            path: /actuator/health/liveness
            port: 8080
          initialDelaySeconds: 45
          periodSeconds: 30
        readinessProbe:
          httpGet:
            path: /actuator/health/readiness
            port: 8080
          initialDelaySeconds: 20
          periodSeconds: 10
---
apiVersion: v1
kind: Service
metadata:
  name: carddemo-gateway-service
  labels:
    app: carddemo-gateway
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
    name: http
  selector:
    app: carddemo-gateway
```

#### Ingress Controller Configuration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">External Traffic Management</span>**:

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: carddemo-ingress
  annotations:
    kubernetes.io/ingress.class: "nginx"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "10m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "300"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "300"
spec:
  tls:
  - hosts:
    - carddemo.example.com
    secretName: carddemo-tls-secret
  rules:
  - host: carddemo.example.com
    http:
      paths:
      - path: /api
        pathType: Prefix
        backend:
          service:
            name: carddemo-gateway-service
            port:
              number: 8080
      - path: /
        pathType: Prefix
        backend:
          service:
            name: carddemo-frontend-service
            port:
              number: 80
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">API Gateway Integration Benefits</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Request Routing**: Spring Cloud Gateway routes external requests to appropriate Spring Boot service endpoints</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Load Balancing**: Integration with Kubernetes service discovery for backend service distribution</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Security Integration**: Authentication and authorization filtering before request forwarding</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Monitoring Integration**: Request metrics and health monitoring through Actuator endpoints</span>

### 8.4.5 Rolling Updates and Health Management (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction-Safe Deployment Strategies</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">The orchestration platform implements zero-downtime deployment procedures ensuring transaction safety during service updates while maintaining financial data integrity and system availability.</span>

#### Deployment Strategy Configuration (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Rolling Update Parameters</span>**:

| Configuration Parameter | Value | Purpose | Impact on SLA |
|------------------------|-------|---------|---------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">maxSurge</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">1</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Allow one additional pod during updates</span> | Maintains capacity during deployment |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">maxUnavailable</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">0</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Prevent service capacity reduction</span> | Ensures continuous availability |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">readinessProbe initialDelay</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">30 seconds</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot application startup time</span> | Prevents premature traffic routing |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">livenessProbe initialDelay</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">60 seconds</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Complete application initialization</span> | Avoids false positive restarts |

#### Health Probe Integration with Actuator Endpoints (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator Health Monitoring</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes health probes integrate directly with Spring Boot Actuator health endpoints, providing comprehensive application health assessment including database connectivity, session store availability, and business logic validation (as detailed in Section 6.5 Monitoring and Observability).</span>

**Readiness Probe Configuration**:
```yaml
readinessProbe:
  httpGet:
    path: /actuator/health/readiness
    port: 8080
    httpHeaders:
    - name: Accept
      value: application/json
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 3
  successThreshold: 1
  failureThreshold: 2
```

**Liveness Probe Configuration**:
```yaml
livenessProbe:
  httpGet:
    path: /actuator/health/liveness
    port: 8080
    httpHeaders:
    - name: Accept
      value: application/json
  initialDelaySeconds: 60
  periodSeconds: 30
  timeoutSeconds: 5
  successThreshold: 1
  failureThreshold: 3
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Health Check Components</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Database Health**: PostgreSQL connection pool status and query responsiveness</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Session Store Health**: Redis connectivity and cache operation validation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Application Health**: Spring Boot service availability and core business logic validation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Batch Job Health**: Spring Batch job execution status and completion monitoring</span>

#### Zero-Downtime Deployment Workflow (updated)

```mermaid
sequenceDiagram
    participant K8s as Kubernetes Controller
    participant LB as Load Balancer/Service
    participant OLD as Existing Pod v1.0
    participant NEW as New Pod v1.1
    participant ACT as Actuator Health Endpoints
    
    K8s->>NEW: Create new pod with updated image
    NEW->>ACT: Initialize Spring Boot application
    ACT->>NEW: Report readiness status
    NEW->>K8s: Readiness probe success
    K8s->>LB: Add new pod to service endpoints
    LB->>LB: Begin traffic distribution to new pod
    
    Note over K8s,ACT: Validate new pod handling traffic successfully
    
    K8s->>OLD: Send SIGTERM for graceful shutdown
    OLD->>OLD: Complete existing transactions (30s grace)
    K8s->>LB: Remove old pod from service endpoints
    LB->>LB: Route all traffic to new pods
    K8s->>OLD: Force termination if not shutdown
    
    Note over K8s,ACT: Deployment complete with zero downtime
```

### 8.4.6 Service Discovery and Load Balancing

**Native Kubernetes Service Discovery**:
- **DNS-Based Resolution**: Kubernetes DNS provides automatic service name resolution
- **Service Load Balancing**: Built-in round-robin load distribution across healthy pods
- **Health-Based Routing**: Integration with readiness probes for intelligent traffic routing
- **Session Affinity**: Optional sticky sessions for stateful application components

**Inter-Service Communication Patterns**:
- **REST API Communication**: HTTP-based communication between Spring Boot services
- **Database Connection Pooling**: HikariCP integration with PostgreSQL service
- **Session State Management**: Redis integration for distributed session storage
- **Batch Job Coordination**: Spring Batch integration with Kubernetes job scheduling

### 8.4.7 Resource Management and Performance Optimization (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Resource Allocation Policies for SLA Compliance</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">The orchestration platform implements comprehensive resource management ensuring sub-200ms response time SLA compliance through intelligent resource allocation and auto-scaling policies.</span>

#### Resource Allocation Matrix (updated)

| Component | CPU Request | CPU Limit | Memory Request | Memory Limit | Scaling Policy |
|-----------|-------------|-----------|----------------|---------------|----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Backend</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">250m</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">500m</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">512Mi</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">1Gi</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HPA 3-10 replicas</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">100m</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">250m</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">256Mi</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">512Mi</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HPA 2-6 replicas</span> |
| **PostgreSQL StatefulSet** | <span style="background-color: rgba(91, 57, 243, 0.2)">500m</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">1000m</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">1Gi</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">2Gi</span> | Vertical scaling only |
| **Redis Session Store** | <span style="background-color: rgba(91, 57, 243, 0.2)">100m</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">200m</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">256Mi</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">512Mi</span> | Redis Cluster scaling |
| **React Frontend Pods** | <span style="background-color: rgba(91, 57, 243, 0.2)">50m</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">100m</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">64Mi</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">128Mi</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HPA 2-5 replicas</span> |

#### Performance Optimization Strategies (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Auto-Scaling Configuration for Response Time SLA</span>**:

```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: carddemo-performance-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: carddemo-backend
  minReplicas: 3
  maxReplicas: 15
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 60
  - type: Pods
    pods:
      metric:
        name: http_request_duration_ms_p95
      target:
        type: AverageValue
        averageValue: "150"
  behavior:
    scaleUp:
      stabilizationWindowSeconds: 30
      policies:
      - type: Percent
        value: 200
        periodSeconds: 15
    scaleDown:
      stabilizationWindowSeconds: 180
      policies:
      - type: Percent
        value: 25
        periodSeconds: 60
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cluster Resource Optimization</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Node Auto-Scaling**: Cluster auto-scaler integration for dynamic node provisioning</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Pod Affinity Rules**: Strategic pod placement for optimal resource utilization</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Resource Quotas**: Namespace-level resource limits preventing resource starvation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Priority Classes**: Service prioritization ensuring critical components receive resources first</span>

### 8.4.8 Orchestration Monitoring and Observability

**Kubernetes-Native Monitoring Integration**:
- **Pod Health Monitoring**: Integration with Spring Boot Actuator endpoints for application health
- **Resource Utilization Tracking**: CPU, memory, and network monitoring per service
- **Service Performance Metrics**: Request duration, throughput, and error rate monitoring
- **Auto-Scaling Event Tracking**: HPA decision logging and scaling event correlation

**Integration with Section 6.5 Monitoring Framework**:
- Prometheus metrics collection from Kubernetes API and application endpoints
- Grafana dashboards for orchestration performance and capacity planning
- Alert management for orchestration failures and resource constraints
- SLA monitoring for response time and availability targets

This comprehensive Kubernetes orchestration architecture enables CardDemo's complete transformation from mainframe transaction processing to modern cloud-native deployment patterns while maintaining enterprise-grade reliability, performance, and operational excellence standards. <span style="background-color: rgba(91, 57, 243, 0.2)">The platform provides identical functionality to traditional z/OS orchestration mechanisms while enabling horizontal scaling, automated recovery, and declarative infrastructure management capabilities.</span>

## 8.5 CI/CD PIPELINE

### 8.5.1 Build Pipeline (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Modern Cloud-Native Build Process</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">CardDemo implements a comprehensive CI/CD pipeline supporting the complete transformation from mainframe COBOL/CICS architecture to modern Java 21/Spring Boot microservices with React frontend, replacing traditional JCL-based compilation workflows with cloud-native DevOps practices.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Build Pipeline Architecture</span>**:

```mermaid
flowchart TD
    subgraph "Source Management"
        A[Git Repository] --> B[Webhook Triggers]
        C[Feature Branches] --> D[Pull Request Validation]
        E[Main Branch] --> F[Release Pipeline]
    end
    
    subgraph "Build Process"
        B --> G[Source Checkout]
        G --> H[Maven Build & Unit Tests]
        G --> I[npm Build & React Tests]
        H --> J[Spring Boot JAR Generation]
        I --> K[React Production Build]
    end
    
    subgraph "Quality Gates"
        J --> L{Unit Tests Pass?}
        K --> M{Frontend Tests Pass?}
        L -->|Yes| N[Integration Tests]
        M -->|Yes| N
        L -->|No| O[Build Failure]
        M -->|No| O
        N --> P{Quality Gates Pass?}
        P -->|Yes| Q[Docker Image Build]
        P -->|No| O
    end
    
    subgraph "Artifact Generation"
        Q --> R[Container Registry Push]
        R --> S[Kubernetes Manifest Render]
        S --> T[GitOps Repository Update]
    end
    
    style G fill:#e3f2fd
    style J fill:#c8e6c9
    style K fill:#c8e6c9
    style Q fill:#4caf50
    style O fill:#ff5252
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Build Environment Requirements</span>**:

| Build Component | Tool/Process | Input Sources | Output Artifacts | Quality Validation |
|-----------------|--------------|---------------|------------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Backend Build</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Maven 3.9.x with Java 21</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot source + dependencies</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Executable JAR files</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5 unit tests, integration tests</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Frontend Build</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">npm 10.x with Node.js 20.x</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">React TypeScript source</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Optimized static assets</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Jest unit tests, ESLint validation</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Build</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Docker multi-stage builds</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Application artifacts + base images</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Container images</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Security scanning, vulnerability assessment</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Deployment Manifests</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Helm 3.x or Kustomize</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Template definitions + environment config</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes YAML manifests</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Manifest validation, dry-run deployment</span> |

### 8.5.2 Source Control Triggers (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Git-Based Workflow Integration</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">The build process integrates with Git version control through automated webhook triggers and branch-based development workflows, replacing traditional mainframe change management procedures:</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Source Control Framework</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Current Version</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">CardDemo_v2.1.0-spring-boot with semantic versioning</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Repository Structure</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Monorepo organization with `/backend/`, `/frontend/`, and `/infrastructure/` directories</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Branch Strategy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">GitFlow workflow with feature branches, development, staging, and production branches</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Trigger Configuration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Webhook automation for push events to protected branches</span>

### 8.5.3 Dependency Management (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Modern Dependency Resolution</span>**:

```mermaid
graph TD
    subgraph "Backend Dependencies"
        A[Maven Central Repository] --> B[Spring Boot Dependencies]
        A --> C[Database Drivers]
        A --> D[Testing Frameworks]
        B --> E[Spring Data JPA]
        B --> F[Spring Security]
        B --> G[Spring Batch]
    end
    
    subgraph "Frontend Dependencies"
        H[npm Registry] --> I[React Ecosystem]
        H --> J[Build Tools]
        H --> K[Testing Libraries]
        I --> L[Material-UI Components]
        I --> M[React Router]
        J --> N[Webpack/Babel]
    end
    
    subgraph "Container Dependencies"
        O[Container Registries] --> P[Base Images]
        P --> Q[Eclipse Temurin JDK 21]
        P --> R[Node.js 20 Alpine]
        P --> S[NGINX 1.25]
    end
    
    subgraph "Infrastructure Dependencies"
        T[Kubernetes Manifests] --> U[Helm Charts]
        T --> V[PostgreSQL Operator]
        T --> W[Redis Cluster Config]
    end
    
    style E fill:#e8f5e8
    style L fill:#e3f2fd
    style Q fill:#c8e6c9
    style U fill:#fff3e0
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Dependency Matrix</span>**:

| Component Type | Dependencies | Resolution Method | Validation Criteria |
|----------------|--------------|-------------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Services</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Framework 6.x, Jakarta EE 10</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Maven dependency resolution</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Dependency vulnerability scanning</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">React Components</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">React 18.x, TypeScript 5.x</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">npm package management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">npm audit security validation</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Integration</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL 17.x, HikariCP</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JDBC driver management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Connection pool validation</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Images</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Eclipse Temurin, Alpine Linux</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Docker multi-stage builds</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Image vulnerability scanning</span> |

### 8.5.4 Artifact Generation and Storage (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Container Registry and Artifact Management</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">The system generates and manages cloud-native artifacts through automated container image builds and registry storage:</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Artifact Repository Structure</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Images</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-architecture Docker images stored in private container registry</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Maven Artifacts</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot JAR files with dependency resolution through Nexus Repository</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Helm Packages</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Versioned Helm charts for Kubernetes deployment automation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Frontend Bundles</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Optimized React production builds with static asset optimization</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Migrations</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Flyway migration scripts for PostgreSQL schema management</span>

### 8.5.5 Quality Gates (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive Testing and Validation Framework</span>**:

| Quality Gate | Validation Criteria | Failure Actions | Success Criteria |
|--------------|-------------------|-----------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Unit Testing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">JUnit 5 tests with 80%+ coverage, Jest React tests</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Build rejection, test report generation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">All tests pass with coverage threshold</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Testing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot @SpringBootTest with testcontainers</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Pipeline halt, environment cleanup</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">End-to-end functionality validated</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Testing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Response time <200ms, throughput 1000 TPS</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Performance regression analysis</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SLA compliance validation</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Verification</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Automated batch job execution <4-hour window</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Batch processing failure notification</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">100% functional parity with mainframe batch</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Scanning</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Container vulnerability assessment, dependency audit</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Security remediation required</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Zero critical/high severity vulnerabilities</span> |

### 8.5.6 Deployment Pipeline (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">GitOps-Driven Container Deployment Strategy</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">CardDemo implements a modern GitOps deployment workflow with automated Docker image building, Kubernetes manifest rendering, and environment promotion through pull request workflows:</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Deployment Workflow</span>**:

```mermaid
sequenceDiagram
    participant Dev as Developer
    participant Git as Git Repository
    participant CI as CI/CD Pipeline
    participant Reg as Container Registry
    participant K8s as Kubernetes Cluster
    participant GitOps as GitOps Repository
    
    Dev->>Git: Push code changes
    Git->>CI: Webhook trigger
    CI->>CI: Maven build & unit tests
    CI->>CI: Docker image build
    CI->>Reg: Push container image
    CI->>CI: Render K8s manifests (Helm/Kustomize)
    CI->>CI: Run integration tests with testcontainers
    CI->>CI: Execute Spring Batch job verification
    CI->>GitOps: Create pull request with manifest updates
    GitOps->>K8s: ArgoCD sync deployment
    K8s->>K8s: Rolling update with health checks
    K8s-->>CI: Deployment status confirmation
    CI->>Dev: Pipeline completion notification
    
    Note over CI,K8s: Automated Spring Batch validation ensures <4-hour processing window
    Note over GitOps,K8s: GitOps ensures declarative infrastructure management
```

### 8.5.7 Environment Promotion Workflow (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">GitOps Branch-Based Promotion Strategy</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">The system implements automated environment promotion through GitOps pull request workflows, replacing traditional mainframe change control procedures:</span>

| Promotion Stage | Trigger | Validation Requirements | Approval Authority | GitOps Process |
|-----------------|---------|------------------------|-------------------|--------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Dev → Integration</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Feature branch merge</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Unit tests + code review</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Lead developer</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Automated PR to dev-manifests branch</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration → Staging</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Integration tests pass</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Performance testing + Spring Batch validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Development manager</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Automated PR to staging-manifests branch</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Staging → Production</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Business acceptance</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">User acceptance testing + security scan</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Change control board</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Manual PR approval to prod-manifests branch</span> |

### 8.5.8 Rollback Procedures (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes-Native Rollback Strategy</span>**:

```mermaid
flowchart TD
    A[Issue Detection] --> B{Issue Severity}
    B -->|Critical| C[Immediate K8s Rollback]
    B -->|High| D[Scheduled GitOps Revert]
    B -->|Medium| E[Forward Fix Deployment]
    
    C --> F[kubectl rollout undo]
    D --> G[GitOps Repository Revert]
    E --> H[New Container Image Build]
    
    F --> I[Pod Recreation]
    G --> J[ArgoCD Sync Revert]
    H --> K[Standard Deployment Pipeline]
    
    I --> L[Health Check Validation]
    J --> L
    K --> L
    L --> M[Service Availability Confirmation]
    
    style A fill:#ff5252
    style C fill:#ff9800
    style F fill:#ffb74d
    style L fill:#c8e6c9
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Rollback Procedure Matrix</span>**:

| Rollback Scenario | Detection Method | Rollback Time | Recovery Actions | Validation Steps |
|------------------|------------------|---------------|------------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Service Failure</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes health checks</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">5 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">kubectl rollout undo deployment</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator health endpoints</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Integrity Issues</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL monitoring alerts</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">15 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Database point-in-time recovery</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Data validation queries</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Degradation</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus SLA alerts</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">10 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GitOps configuration revert</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Response time SLA verification</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Failure</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Batch job monitoring</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">30 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Job restart with previous version</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Batch processing window compliance</span> |

### 8.5.9 Post-Deployment Validation (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Testing and Verification Framework</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">Post-deployment validation ensures system integrity and 100% functional parity with the original mainframe implementation:</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Validation Test Suite</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Smoke Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Critical REST API endpoints validation (authentication, account services, transaction processing)</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Integration Testing with Testcontainers</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Full-stack testing with containerized PostgreSQL and Redis dependencies</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Response time validation against <200ms SLA target using JMeter automation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Verification</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated validation of batch processing completing within 4-hour window requirement</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Integrity Testing</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL transaction validation and business rule compliance</span>

### 8.5.10 Release Management Process (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">GitOps-Driven Release Management</span>**:

<span style="background-color: rgba(91, 57, 243, 0.2)">The system follows cloud-native release management practices through GitOps workflows and automated deployment pipelines:</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Release Planning Matrix</span>**:

| Release Type | Planning Horizon | Testing Requirements | Approval Process | GitOps Workflow |
|--------------|------------------|---------------------|------------------|-----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Hotfix Release</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">4 hours</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Critical path testing + Spring Batch validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Emergency change approval</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Fast-track PR to production manifests</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Standard Release</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">2 weeks</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Full testing cycle with performance validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Standard change board</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Staged environment promotion</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Major Enhancement</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">6 weeks</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive testing with canary deployment</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Executive architecture review</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Feature flag enabled gradual rollout</span> |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Spring Batch Verification Process</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Pre-Deployment Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job dry-run execution with sample data to validate processing logic</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Compliance</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated verification that batch processing completes within 4-hour window requirement</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Functional Parity Validation</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated comparison of batch job outputs against expected results ensuring 100% functional parity</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring Integration</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator metrics collection for batch job execution tracking and alerting</span>

## 8.6 INFRASTRUCTURE MONITORING

### 8.6.1 Resource Monitoring Approach

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Infrastructure Monitoring Framework</span>**:

CardDemo implements comprehensive infrastructure monitoring using <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator with Micrometer metrics collection, providing enterprise-grade observability for containerized microservices architecture</span>. This modern monitoring stack replaces traditional mainframe monitoring while maintaining identical operational visibility and compliance requirements.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Multi-Tier Monitoring Architecture</span>**:

```mermaid
graph TD
    subgraph "Data Collection Layer"
        A[Spring Boot Actuator Endpoints] --> B[Micrometer Prometheus Registry]
        C[Kubernetes Pod Metrics] --> D[Container Resource Analysis]
        E[PostgreSQL Performance Metrics] --> F[Database Monitoring Data]
        G[Application Logs] --> H[Structured JSON Log Aggregation]
        I[Spring Security Audit Events] --> J[Security Event Analysis]
    end
    
    subgraph "Analysis Layer"
        B --> K[Prometheus Time-Series Database]
        D --> L[Infrastructure Utilization Analysis]
        F --> M[Database Performance Analysis]
        H --> N[Log Correlation and Analysis]
        J --> O[Security Compliance Analysis]
    end
    
    subgraph "Alerting Layer"
        K --> P[Grafana Dashboards]
        L --> Q[Alertmanager Rule Engine]
        M --> R[Database Health Alerts]
        N --> S[Log-Based Alerting]
        O --> T[Security Incident Alerts]
    end
    
    style A fill:#e3f2fd
    style K fill:#fff3e0
    style P fill:#c8e6c9
    style T fill:#ff5252
```

### 8.6.2 Performance Metrics Collection

**<span style="background-color: rgba(91, 57, 243, 0.2)">Modern Infrastructure Performance Monitoring Matrix</span>**:

| Metric Category | Collection Method | Target Threshold | Alert Threshold | Response Time | Escalation Path |
|-----------------|-------------------|------------------|-----------------|---------------|-----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">CPU Utilization</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus scraping `/actuator/prometheus` endpoint</span> | < 80% sustained | > 90% for 15 minutes | 15 minutes | Operations → Systems Programming |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Memory Usage</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">JVM heap metrics via Micrometer</span> | < 85% heap utilization | > 95% heap utilization | 5 minutes | Operations → Application Support |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Pod Restart Count</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes metrics via node exporter</span> | < 3 restarts per hour | > 5 restarts per hour | 30 minutes | Operations → Kubernetes Administration |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">HTTP Request Latency</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot request duration metrics</span> | < 200ms (95th percentile) | > 500ms sustained | Immediate | Operations → Application Support |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Job Duration</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch execution time tracking</span> | < 4 hours completion | > 6 hours runtime | 1 hour | Operations → Batch Processing Team |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Replication Lag</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL exporter metrics</span> | < 30 seconds lag | > 2 minutes lag | 15 minutes | Operations → Database Administration |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Metrics Collection Architecture</span>**:

The monitoring system leverages Prometheus to scrape metrics from Spring Boot Actuator's `/actuator/prometheus` endpoint, providing comprehensive visibility into application performance, infrastructure resource utilization, and business process execution.

### 8.6.3 Cost Monitoring and Optimization

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Resource Cost Framework</span>**:

Modern containerized environments require sophisticated cost monitoring due to dynamic resource allocation and elastic scaling patterns:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cost Monitoring Architecture</span>**:

```mermaid
flowchart TD
    subgraph "Resource Consumption Tracking"
        A[Container CPU Utilization] --> B[Kubernetes Resource Metrics]
        C[Memory Allocation] --> D[Pod Resource Usage Reports]
        E[Database Connection Pool Usage] --> F[PostgreSQL Performance Analysis]
        G[Network Traffic Volume] --> H[Ingress/Egress Monitoring]
    end
    
    subgraph "Cost Allocation"
        B --> I[CPU Cost per Pod]
        D --> J[Memory Cost Allocation]
        F --> K[Database Resource Costs]
        H --> L[Network Transfer Costs]
    end
    
    subgraph "Optimization Opportunities"
        I --> M[Pod Right-sizing Recommendations]
        J --> N[Memory Optimization]
        K --> O[Connection Pool Tuning]
        L --> P[Network Optimization]
    end
    
    style A fill:#fff3e0
    style I fill:#e3f2fd
    style M fill:#c8e6c9
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cost Optimization Strategies</span>**:

| Cost Component | Monitoring Method | Optimization Target | Optimization Techniques | Expected Savings |
|----------------|-------------------|-------------------|------------------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Container CPU Usage</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes resource requests/limits monitoring</span> | 20% reduction in CPU allocation | Right-sizing pods, HPA optimization | 15-25% compute cost reduction |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Memory Allocation</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">JVM heap usage analysis via Micrometer</span> | 30% memory efficiency | JVM tuning, heap optimization | 20-35% memory cost reduction |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Resources</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Connection pool and query performance metrics</span> | 50% throughput improvement | Query optimization, connection pooling | 25-40% database cost reduction |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Storage Utilization</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Persistent volume usage monitoring</span> | 25% storage efficiency | Volume optimization, data compression | 20-30% storage cost reduction |

### 8.6.4 Security Monitoring

**<span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive Security Monitoring Framework</span>**:

Security monitoring integrates with <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security and cloud IAM services to provide comprehensive threat detection and compliance monitoring meeting SOX and PCI DSS requirements</span>:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Security Event Monitoring Matrix</span>**:

| Security Event Type | Detection Method | Alert Priority | Response Time | Investigation Process |
|-------------------|------------------|----------------|---------------|----------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication Failures</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security audit events via Micrometer counters</span> | Medium | 30 minutes | Pattern analysis, account review |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Authorization Violations</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security access denied events</span> | High | 15 minutes | Immediate investigation, access review |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Suspicious Access Patterns</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">HTTP request pattern analysis via Prometheus</span> | High | 15 minutes | User behavior analysis |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Privileged Access</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud IAM audit logs integration</span> | Critical | 5 minutes | Immediate validation, management notification |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Access Anomalies</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL access pattern monitoring</span> | Medium | 1 hour | Data access review, integrity checking |

### 8.6.5 Compliance Auditing

**<span style="background-color: rgba(91, 57, 243, 0.2)">Regulatory Compliance Monitoring Framework</span>**:

```mermaid
graph TD
    subgraph "Compliance Data Sources"
        A[Spring Security Audit Events] --> B[Access Control Compliance]
        C[Application Transaction Logs] --> D[Financial Process Compliance]
        E[Cloud IAM Audit Trails] --> F[System Security Compliance]
        G[Database Access Logs] --> H[Privacy Compliance]
    end
    
    subgraph "Compliance Analysis"
        B --> I[SOX Section 404 Controls]
        D --> J[PCI DSS Requirements]
        F --> K[Security Framework Compliance]
        H --> L[Data Protection Compliance]
    end
    
    subgraph "Reporting Framework"
        I --> M[Financial Controls Report]
        J --> N[Payment Security Report]
        K --> O[Security Posture Report]
        L --> P[Privacy Compliance Report]
    end
    
    style A fill:#e3f2fd
    style I fill:#fff3e0
    style M fill:#c8e6c9
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Compliance Monitoring Requirements</span>**:

| Regulation | Monitoring Requirement | Data Sources | Reporting Frequency | Retention Period |
|------------|------------------------|--------------|-------------------|------------------|
| **SOX Section 404** | Financial control effectiveness | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot transaction logs, database audit trails</span> | Quarterly | 7 years |
| **PCI DSS** | Payment data protection | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security authentication logs, access control events</span> | Monthly | 3 years |
| **Basel III** | Risk data governance | <span style="background-color: rgba(91, 57, 243, 0.2)">Cross-reference validation logs via custom metrics</span> | Monthly | 5 years |
| **Internal Audit** | System access controls | <span style="background-color: rgba(91, 57, 243, 0.2)">Cloud IAM logs, privilege usage tracking</span> | Weekly | 1 year |

### 8.6.6 Log Aggregation and Analysis (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Log Aggregation Framework</span>**:

The system implements structured logging with centralized aggregation <span style="background-color: rgba(91, 57, 243, 0.2)">using cloud-native logging solutions such as ELK Stack (Elasticsearch, Logstash, Kibana) or managed cloud services (AWS CloudWatch, Google Cloud Stackdriver)</span> to provide comprehensive audit trail capabilities:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Log Aggregation Architecture</span>**:

```mermaid
flowchart TD
    subgraph "Application Layer Logging"
        A["Spring Boot Services"] --> B["Structured JSON Logging"]
        C["Spring Security Events"] --> D["Security Audit Logs"]
        E["Spring Batch Jobs"] --> F["Batch Processing Logs"]
    end
    
    subgraph "Infrastructure Layer Logging"
        G["Kubernetes Pod Logs"] --> H["Container Runtime Events"]
        I["PostgreSQL Database Logs"] --> J["Database Query Logs"]
        K["Network Access Logs"] --> L["API Gateway Request Logs"]
    end
    
    subgraph "Log Aggregation Services"
        B --> M["ELK Stack / CloudWatch"]
        D --> M
        F --> M
        H --> N["Kubernetes Log Aggregation"]
        J --> O["Database Log Collector"]
        L --> P["Network Log Analysis"]
    end
    
    subgraph "Analysis and Retention"
        M --> Q["30-Day Operational Retention"]
        N --> R["Compliance Retention (3-7 years)"]
        O --> S["Performance Analysis"]
        P --> T["Security Incident Investigation"]
    end
    
    style B fill:#e8f5e8
    style M fill:#e3f2fd
    style Q fill:#f3e5f5
    style T fill:#ffcdd2
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Structured Log Categories</span>**:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Application Logs</span>**: Spring Boot service execution logs with correlation IDs and business context
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Logs</span>**: Spring Security authentication and authorization events with user context
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Transaction Logs</span>**: Financial transaction processing with audit trail requirements
- **<span style="background-color: rgba(91, 57, 243, 0.2)">System Logs</span>**: Infrastructure events from Kubernetes, PostgreSQL, and network components

### 8.6.7 Monitoring Dashboard Architecture (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Grafana Dashboard Implementation</span>**:

The monitoring system utilizes Grafana dashboards for visualization of Prometheus metrics, providing real-time operational visibility across the infrastructure stack:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Dashboard Hierarchy</span>**:

```mermaid
graph TB
    subgraph "Executive Dashboard Layer"
        A[Infrastructure Health Overview<br/>System Availability, Performance SLAs]
        B[Cost Management Dashboard<br/>Resource Utilization, Cost Optimization]
        C[Compliance Status Dashboard<br/>Security Events, Audit Compliance]
    end
    
    subgraph "Operational Dashboard Layer"
        D[Application Performance<br/>Response Times, Error Rates]
        E[Infrastructure Monitoring<br/>CPU, Memory, Pod Health]
        F[Database Performance<br/>PostgreSQL Metrics, Query Analysis]
        G[Security Monitoring<br/>Authentication Events, Access Patterns]
    end
    
    subgraph "Technical Dashboard Layer"
        H[Container Monitoring<br/>Pod Metrics, Resource Usage]
        I[Network Performance<br/>API Gateway, Traffic Analysis]
        J[Batch Processing Status<br/>Spring Batch Jobs, Completion Times]
        K[Alert Management<br/>Alertmanager Status, Rule Configuration]
    end
    
    A --> D
    B --> E
    C --> G
    D --> H
    E --> I
    F --> J
    G --> K
    
    style A fill:#c8e6c9
    style B fill:#e3f2fd
    style C fill:#ffb74d
    style D fill:#e1f5fe
```

### 8.6.8 Alerting and Notification Framework (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Alertmanager Integration</span>**:

The system leverages Prometheus Alertmanager for intelligent alert routing, deduplication, and notification management:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Alert Rule Configuration</span>**:

```yaml
groups:
  - name: carddemo.infrastructure.rules
    rules:
    - alert: HighCPUUtilization
      expr: process_cpu_usage > 0.80
      for: 15m
      labels:
        severity: warning
        component: infrastructure
      annotations:
        summary: "High CPU utilization detected"
        description: "CPU usage has exceeded 80% for 15 minutes"

    - alert: HighMemoryUsage
      expr: jvm_memory_used_bytes{area="heap"} / jvm_memory_max_bytes{area="heap"} > 0.85
      for: 5m
      labels:
        severity: critical
        component: infrastructure
      annotations:
        summary: "High memory usage detected"
        description: "JVM heap usage has exceeded 85%"

    - alert: PodRestartThreshold
      expr: increase(kube_pod_container_status_restarts_total[1h]) > 3
      labels:
        severity: warning
        component: kubernetes
      annotations:
        summary: "Pod restart threshold exceeded"
        description: "Pod has restarted more than 3 times in the last hour"

    - alert: DatabaseReplicationLag
      expr: pg_replication_lag_seconds > 120
      labels:
        severity: critical
        component: database
      annotations:
        summary: "PostgreSQL replication lag critical"
        description: "Database replication lag exceeds 2 minutes"
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Notification Routing Matrix</span>**:

| Alert Severity | Response Time | Notification Channels | Escalation Path | Acknowledgment Required |
|----------------|---------------|----------------------|----------------|------------------------|
| **Critical** | Immediate | Email, Slack, PagerDuty | Operations → Management | Yes |
| **Warning** | 15 minutes | Email, Slack | Operations Team | No |
| **Info** | 1 hour | Email | Operations Team | No |

The comprehensive infrastructure monitoring framework ensures enterprise-grade observability while maintaining operational excellence equivalent to traditional mainframe monitoring capabilities, leveraging modern cloud-native tools and practices for enhanced reliability and compliance.

## 8.7 INFRASTRUCTURE DIAGRAMS

### 8.7.1 Infrastructure Architecture Diagram (updated)

```mermaid
graph TB
subgraph "Client Layer"
    A[Web Browsers] --> B[React Single Page Application]
    B --> C["Material-UI Components"]
    C --> D["Formik/Yup Validation"]
end

subgraph "Kubernetes Cluster"
    subgraph "Ingress Layer"
        E[NGINX Ingress Controller] --> F["SSL/TLS Termination"]
        F --> G[Load Balancing]
    end
    
    subgraph "API Gateway Layer"
        H[Spring Cloud Gateway] --> I[Request Routing]
        I --> J["Authentication/Authorization"]
        J --> K["Rate Limiting & Circuit Breaker"]
    end
    
    subgraph "Application Services"
        L[Spring Boot Backend Services] --> M[REST Controllers]
        M --> N[Spring Security Integration]
        N --> O[Spring Data JPA]
        P[Spring Batch Jobs] --> Q[Scheduled Processing]
        Q --> R["Batch Validation & Monitoring"]
    end
    
    subgraph "Data Layer"
        S[(PostgreSQL 17.x Database)] --> T[Relational Data Storage]
        U[(Redis 7.x Session Store)] --> V[Distributed Session Management]
        W[Persistent Volume Claims] --> X[Data Persistence]
    end
    
    subgraph "Service Mesh (Optional)"
        Y["Istio/Linkerd"] --> Z[Service Discovery]
        Z --> AA[Traffic Management]
        AA --> BB[Security Policies]
    end
    
    subgraph "Container Pods"
        CC[Backend Service Pods] --> DD["Auto-Scaling (HPA)"]
        EE[Frontend Service Pods] --> FF[Static Content Serving]
        GG[Database StatefulSet] --> HH[Persistent Storage]
        II[Redis Deployment] --> JJ[Session Clustering]
    end
end

subgraph "Monitoring & Observability"
    KK[Prometheus Metrics] --> LL[Application Performance]
    MM[Grafana Dashboards] --> NN[Operational Insights]
    OO[Spring Boot Actuator] --> PP["Health Checks & Metrics"]
end

B --> E
G --> H
K --> L
O --> S
L --> U
L --> P

style L fill:#e3f2fd
style S fill:#fff3e0
style U fill:#f3e5f5
style H fill:#e8f5e8
style DD fill:#ffb74d
```

### 8.7.2 Deployment Workflow Diagram (updated)

```mermaid
sequenceDiagram
    participant Dev as Developer
    participant Git as Git Repository
    participant CI as CI/CD Pipeline
    participant Reg as Container Registry
    participant GitOps as GitOps Repository
    participant ArgoCD as ArgoCD Controller
    participant K8s as Kubernetes Cluster
    
    Dev->>Git: Push Source Changes
    Git->>CI: Webhook Trigger
    
    CI->>CI: Maven Build (Spring Boot)
    CI->>CI: npm Build (React SPA)
    CI->>CI: Unit Tests & Integration Tests
    CI->>CI: Spring Batch Validation (<4hr window)
    CI->>CI: Docker Multi-Stage Build
    
    CI->>Reg: Push Container Images
    Note over CI,Reg: carddemo/backend-service:v2.1.0<br/>carddemo/frontend-spa:v2.1.0
    
    CI->>CI: Render Kubernetes Manifests (Helm/Kustomize)
    CI->>GitOps: Create Pull Request with Manifest Updates
    Note over CI,GitOps: Updated Deployment, ConfigMap, Secret YAML
    
    GitOps->>ArgoCD: Manifest Changes Detection
    ArgoCD->>K8s: Sync Application State
    
    K8s->>K8s: Rolling Update Deployment
    K8s->>K8s: Spring Boot Health Checks
    K8s->>K8s: Service Discovery Update
    K8s->>K8s: HPA Auto-Scaling Adjustment
    
    K8s-->>ArgoCD: Deployment Status
    ArgoCD-->>GitOps: Sync Status Update
    GitOps-->>CI: Deployment Confirmation
    CI->>Dev: Pipeline Success Notification
    
    alt Deployment Failure
        K8s-->>ArgoCD: Health Check Failure
        ArgoCD->>K8s: Automatic Rollback
        K8s->>K8s: Restore Previous Version
    end
    
    Note over Dev,K8s: GitOps ensures declarative infrastructure management
    Note over CI,ArgoCD: Automated Spring Boot & React deployment validation
```

### 8.7.3 Environment Promotion Flow (updated)

```mermaid
flowchart TD
subgraph "Development Environment"
    A[Local Docker Compose] --> B[Spring Boot Development]
    B --> C[React Development Server]
    C --> D["PostgreSQL Test Database"]
    D --> E["Unit & Integration Testing"]
end

subgraph "Integration Environment"
    F[Kubernetes Dev Cluster] --> G[Spring Boot Services]
    G --> H[React SPA Build]
    H --> I["PostgreSQL Integration DB"]
    I --> J[Spring Batch Job Validation]
end

subgraph "Staging Environment"
    K[Kubernetes Staging Cluster] --> L["Production-Like Services"]
    L --> M[Performance Testing]
    M --> N[User Acceptance Testing]
    N --> O["Spring Batch <4hr Validation"]
end

subgraph "Production Environment"
    P[Kubernetes Production Cluster] --> Q[High Availability Services]
    Q --> R["Auto-Scaling (HPA)"]
    R --> S["PostgreSQL HA with Replication"]
    S --> T[Redis Cluster Session Store]
end

E --> U{Development Quality Gate}
U -->|Pass| V[GitOps PR to Integration]
U -->|Fail| A

J --> W{Integration Quality Gate}
W -->|Pass| X[GitOps PR to Staging]
W -->|Fail| F

O --> Y{Staging Quality Gate}
Y -->|Pass| Z[Manual GitOps PR to Production]
Y -->|Fail| K

V --> AA[ArgoCD Sync to Integration]
X --> BB[ArgoCD Sync to Staging]
Z --> CC[ArgoCD Sync to Production]

AA --> F
BB --> K
CC --> P

style U fill:#fff3e0
style W fill:#fff3e0
style Y fill:#fff3e0
style T fill:#c8e6c9
style AA fill:#e3f2fd
style BB fill:#e3f2fd
style CC fill:#e3f2fd
```

### 8.7.4 Network Architecture (updated)

```mermaid
graph TD
subgraph "External Network"
    A["Internet Users"] --> B["DNS Load Balancing"]
    B --> C["CDN Distribution"]
    C --> D["Web Application Firewall"]
end

subgraph "Kubernetes Ingress"
    E["NGINX Ingress Controller"] --> F["SSL/TLS Termination"]
    F --> G["Request Routing"]
    G --> H["Rate Limiting"]
end

subgraph "Service Mesh Layer (Optional)"
    I["Istio Proxy/Envoy"] --> J["Mutual TLS"]
    J --> K["Traffic Policies"]
    K --> L["Circuit Breaker"]
end

subgraph "Application Network"
    M["Spring Cloud Gateway Service"] --> N["Backend Service Discovery"]
    N --> O["Spring Boot Service Mesh"]
    O --> P["Database Connection Pool"]
    Q["Frontend Service"] --> R["Static Content Delivery"]
end

subgraph "Data Network"
    S["PostgreSQL Service"] --> T["Database Replication"]
    U["Redis Service"] --> V["Session Clustering"]
    W["Persistent Volume Network"] --> X["Storage Access"]
end

subgraph "Security & Monitoring Network"
    Y["Network Policies"] --> Z["Pod-to-Pod Security"]
    AA["Prometheus Scraping"] --> BB["Metrics Collection"]
    CC["Spring Boot Actuator"] --> DD["Health & Performance Data"]
end

subgraph "Container Runtime Network"
    EE["Pod Network (CNI)"] --> FF["Service Discovery DNS"]
    FF --> GG["Load Balancing"]
    GG --> HH["Inter-Pod Communication"]
end

D --> E
H --> I
L --> M
M --> Q
O --> S
O --> U

style M fill:#e8f5e8
style O fill:#e3f2fd
style S fill:#fff3e0
style U fill:#f3e5f5
style Y fill:#ffcdd2
style AA fill:#c8e6c9
```

### 8.7.5 Container Pod Architecture Detail (updated)

```mermaid
graph TB
    subgraph "Kubernetes Node 1"
        subgraph "Spring Boot Backend Pods"
            A1[Backend Pod 1] --> A2[Java 21 Runtime]
            A2 --> A3[Spring Boot 3.2.x]
            A3 --> A4[Actuator Endpoints]
        end
        
        subgraph "API Gateway Pods"
            B1[Gateway Pod 1] --> B2[Spring Cloud Gateway]
            B2 --> B3[Request Routing Logic]
        end
    end
    
    subgraph "Kubernetes Node 2"
        subgraph "Frontend Pods"
            C1[Frontend Pod 1] --> C2[NGINX Web Server]
            C2 --> C3[React SPA Assets]
        end
        
        subgraph "Database StatefulSet"
            D1[PostgreSQL Pod] --> D2[PostgreSQL 17.x]
            D2 --> D3[Persistent Volume Mount]
        end
    end
    
    subgraph "Kubernetes Node 3"
        subgraph "Session Store Pods"
            E1[Redis Pod 1] --> E2[Redis 7.x Cluster]
            E2 --> E3[Session Data]
        end
        
        subgraph "Monitoring Pods"
            F1[Prometheus Pod] --> F2[Metrics Collection]
            F2 --> F3[Time-Series Database]
        end
    end
    
    subgraph "Service Discovery & Networking"
        G[Kubernetes DNS] --> H[Service LoadBalancing]
        H --> I[Network Policies]
        I --> J[Inter-Pod Communication]
    end
    
    A4 --> F2
    B3 --> A1
    C3 --> B1
    A3 --> D2
    A3 --> E2
    
    style A3 fill:#e3f2fd
    style D2 fill:#fff3e0
    style E2 fill:#f3e5f5
    style B2 fill:#e8f5e8
    style F2 fill:#c8e6c9
```

### 8.7.6 ArgoCD GitOps Deployment Flow (updated)

```mermaid
flowchart LR
    subgraph "Source Repositories"
        A[Application Source Repo] --> B[CI/CD Pipeline]
        C[GitOps Config Repo] --> D[Kubernetes Manifests]
        E[Helm Charts Repo] --> F[Deployment Templates]
    end
    
    subgraph "Container Registry"
        G[Docker Images] --> H[carddemo/backend-service]
        G --> I[carddemo/frontend-spa]
        G --> J[postgres:17.5]
        G --> K[redis:7.4-alpine]
    end
    
    subgraph "ArgoCD Controller"
        L[ArgoCD Application] --> M[Git Repository Sync]
        M --> N[Manifest Rendering]
        N --> O[Drift Detection]
        O --> P[Automatic Sync/Healing]
    end
    
    subgraph "Kubernetes Target Clusters"
        Q[Development Cluster] --> R[Spring Boot Deployments]
        S[Staging Cluster] --> T[UAT Environment]
        U[Production Cluster] --> V[HA Production Services]
        
        R --> W[PostgreSQL StatefulSet]
        R --> X[Redis Deployment]
        T --> Y[Performance Testing]
        V --> Z[Auto-Scaling Services]
    end
    
    B --> G
    B --> C
    D --> L
    F --> L
    H --> R
    H --> T
    H --> V
    P --> Q
    P --> S
    P --> U
    
    style L fill:#4caf50
    style P fill:#66bb6a
    style R fill:#e3f2fd
    style V fill:#c8e6c9
```

### 8.7.7 Infrastructure Monitoring Dashboard Architecture (updated)

```mermaid
graph TB
    subgraph "Metrics Collection Layer"
        A[Spring Boot Actuator] --> B[Micrometer Registry]
        B --> C[Prometheus Metrics]
        D[Kubernetes Metrics Server] --> E[Node & Pod Metrics]
        F[PostgreSQL Exporter] --> G[Database Performance]
        H[Redis Exporter] --> I[Session Store Metrics]
    end
    
    subgraph "Storage & Processing"
        C --> J[Prometheus Time-Series DB]
        E --> J
        G --> J
        I --> J
        J --> K[Data Retention Policies]
        K --> L[Alerting Rules Engine]
    end
    
    subgraph "Visualization & Alerting"
        J --> M[Grafana Dashboards]
        L --> N[Alert Manager]
        M --> O[Application Performance Dashboard]
        M --> P[Infrastructure Health Dashboard]
        M --> Q[Business Metrics Dashboard]
        N --> R[PagerDuty/Slack Integration]
    end
    
    subgraph "SLA Monitoring"
        S[Response Time <200ms] --> T[Performance Alerts]
        U[Spring Batch <4hr Window] --> V[Batch Processing Alerts]
        W[99.9% Availability SLA] --> X[Uptime Monitoring]
    end
    
    O --> S
    P --> W
    Q --> U
    T --> N
    V --> N
    X --> N
    
    style J fill:#ff9800
    style M fill:#2196f3
    style N fill:#f44336
    style S fill:#4caf50
```

## 8.8 INFRASTRUCTURE COST ESTIMATES

### 8.8.1 Cloud Infrastructure Cost Estimates (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">**Annual Cloud-Native Infrastructure Cost Breakdown**</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">The following cost estimates reflect a typical production deployment using managed cloud services across major providers (AWS, Azure, GCP). Actual costs may vary significantly based on specific cloud provider selection, regional pricing, reserved instance commitments, and usage patterns.</span>

| Resource Category | Unit Cost | Quantity | Annual Cost | Optimization Potential |
|------------------|-----------|----------|-------------|------------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Worker Nodes</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$0.192/hr (m5.xlarge)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">3 nodes × 8,760 hrs</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$5,044</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">40% through spot instances</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Managed PostgreSQL</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$0.348/hr (db.m6g.large)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">1 instance × 8,760 hrs</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$3,048</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">30% through reserved instances</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Session Cache</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$0.068/hr (cache.t3.medium)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">1 instance × 8,760 hrs</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$596</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">25% through reserved instances</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Application Load Balancer</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$0.0225/hr + data processing</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">1 ALB × 8,760 hrs</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$197</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">15% through traffic optimization</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Registry Storage</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$0.10/GB-month</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">50GB × 12 months</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$60</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">50% through lifecycle policies</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Transfer & Bandwidth</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$0.09/GB outbound</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">1TB × 12 months</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$1,080</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">35% through CDN optimization</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Object Storage (backups/logs)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$0.023/GB-month</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">500GB × 12 months</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$138</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">60% through intelligent tiering</span>** |
| **Operations/DevOps Staff** | $180,000 per FTE | 0.5 FTE dedicated | $90,000 | 20% through automation |
| **Monitoring & Observability** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$200/month average</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">12 months</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$2,400</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">25% through retention tuning</span>** |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Total Annual Cloud Infrastructure Cost</span>**: **<span style="background-color: rgba(91, 57, 243, 0.2)">$102,563</span>**

### 8.8.2 Cost Scaling Matrix (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Resource Scaling Based on User Load and Transaction Volume</span>**

| User Load | Kubernetes Nodes | PostgreSQL Instance | Redis Cache | Monthly Cost | Annual Cost |
|-----------|------------------|---------------------|-------------|--------------|-------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">100 Users</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">3× m5.xlarge</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">db.m6g.large</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">cache.t3.medium</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$1,038</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$12,456</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">500 Users</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">5× m5.xlarge</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">db.m6g.xlarge</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">cache.t3.large</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$2,164</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$25,968</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">1,000 Users</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">8× m5.xlarge</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">db.m6g.2xlarge</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">cache.r6g.large</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$4,087</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$49,044</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">2,500 Users</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">12× m5.xlarge</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">db.m6g.4xlarge</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">cache.r6g.xlarge</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$7,293</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$87,516</span>** |

### 8.8.3 Cost Optimization Strategies (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Reserved Instance and Savings Plans</span>**

| Resource Type | On-Demand Annual Cost | 1-Year Reserved Cost | 3-Year Reserved Cost | Maximum Savings |
|---------------|----------------------|---------------------|---------------------|-----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Nodes (3× m5.xlarge)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$5,044</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$3,279 (35% savings)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$2,522 (50% savings)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$2,522 annually</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL (db.m6g.large)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$3,048</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$2,134 (30% savings)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$1,676 (45% savings)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$1,372 annually</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Cache (cache.t3.medium)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$596</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$417 (30% savings)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$328 (45% savings)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$268 annually</span>** |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Optimized Annual Cost with Reserved Instances</span>**: **<span style="background-color: rgba(91, 57, 243, 0.2)">$98,401 (4% reduction from on-demand)</span>**

### 8.8.4 Multi-Cloud Cost Comparison (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Equivalent Service Costs Across Major Cloud Providers</span>**

| Service Component | AWS Annual Cost | Azure Annual Cost | GCP Annual Cost | Average Cost |
|-------------------|------------------|-------------------|-----------------|--------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Cluster (3 nodes)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$5,044 (EKS + EC2)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$4,732 (AKS + VMs)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$4,588 (GKE + Compute)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$4,788</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Managed PostgreSQL</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$3,048 (RDS)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$2,876 (Azure Database)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$2,744 (Cloud SQL)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$2,889</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Cache Service</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$596 (ElastiCache)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$548 (Azure Cache)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$512 (Memorystore)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$552</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Load Balancer</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$197 (ALB)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$219 (Load Balancer)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$183 (Cloud Load Balancing)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$200</span>** |

### 8.8.5 Cost Monitoring and Governance (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Cost Control Mechanisms</span>**

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Resource Tagging Strategy</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Comprehensive tagging for cost allocation by environment, team, and project components</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Horizontal Pod Autoscaler (HPA)</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic scaling based on CPU/memory utilization and custom metrics (95th percentile response time <150ms)</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cluster Autoscaler</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Dynamic node provisioning and de-provisioning based on workload demands</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Scheduled Scaling</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Predictive scaling for known traffic patterns (business hours vs off-hours)</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Budget Alerts</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Automated notifications at 50%, 80%, and 95% of monthly budget thresholds</span>

### 8.8.6 Total Cost of Ownership Analysis (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">5-Year Cost Projection and ROI Analysis</span>**

| Year | Infrastructure Cost | Operations Cost | Total Annual Cost | Cumulative Cost |
|------|---------------------|-----------------|-------------------|-----------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Year 1</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$12,563</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$90,000</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$102,563</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$102,563</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Year 2</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$15,075 (+20% growth)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$81,000 (-10% automation)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$96,075</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$198,638</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Year 3</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$18,090 (+20% growth)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$72,900 (-10% automation)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$90,990</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$289,628</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Year 4</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$21,708 (+20% growth)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$65,610 (-10% automation)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$87,318</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$376,946</span>** |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Year 5</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$26,050 (+20% growth)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$59,049 (-10% automation)</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$85,099</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">$462,045</span>** |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Platform Transformation Cost Savings Analysis</span>**:

- **Legacy Mainframe Annual Cost**: $1,261,000
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Modern Cloud-Native Annual Cost</span>**: **<span style="background-color: rgba(91, 57, 243, 0.2)">$102,563</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Annual Cost Reduction</span>**: **<span style="background-color: rgba(91, 57, 243, 0.2)">$1,158,437 (92% savings)</span>**
- **<span style="background-color: rgba(91, 57, 243, 0.2)">5-Year Cost Avoidance</span>**: **<span style="background-color: rgba(91, 57, 243, 0.2)">$5,842,955</span>**

### 8.8.7 Cost Estimation Disclaimer and Variables (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Important Cost Considerations</span>**

<span style="background-color: rgba(91, 57, 243, 0.2)">**Cost Variability Factors**: The provided estimates are illustrative and based on current market pricing as of 2024. Actual costs will vary significantly depending on:</span>

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud Provider Selection</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">AWS, Azure, GCP pricing differences can result in 10-25% cost variation</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Geographic Region</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Regional pricing variations can impact costs by 15-40%</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Usage Patterns</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Actual transaction volumes, user concurrency, and data growth rates</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Commitment Discounts</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Reserved instances, savings plans, and enterprise agreements</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Compliance Requirements</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Additional security, audit, and regulatory compliance costs</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Potential Additional Costs Not Included</span>**:

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Migration Services</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Professional services for mainframe data migration</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Advanced Security Services</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">WAF, DDoS protection, SIEM integration, penetration testing</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Disaster Recovery</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Cross-region replication and backup storage costs</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Development/Testing Environments</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Additional infrastructure for non-production workloads</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Support and Maintenance</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Enterprise support plans and vendor maintenance contracts</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">**Significant Cost Advantage**: Despite these variables, the cloud-native architecture demonstrates potential annual savings of **$1.16 million compared to the legacy $1.26 million mainframe infrastructure**, representing a 92% cost reduction while providing enhanced scalability, reliability, and modern development capabilities.</span>

## 8.9 EXTERNAL DEPENDENCIES

### 8.9.1 System Dependencies Matrix (updated)

| Dependency Type | Component | Version Requirement | Criticality | Failover Strategy |
|-----------------|-----------|-------------------|-------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Operating System</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Ubuntu 22.04 LTS / Amazon Linux 2023</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Latest patch level</span> | Critical | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-AZ node distribution</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Runtime</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Docker 24.x / containerd</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">24.0 or higher</span> | Critical | <span style="background-color: rgba(91, 57, 243, 0.2)">Cluster-autoscaler node recovery</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Orchestration Platform</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">1.28+ with auto-scaling</span> | Critical | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-master control plane</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Database</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">15.x with ACID compliance</span> | Critical | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-AZ replication with read replicas</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Store / Cache</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">7.x with clustering</span> | High | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis primary/replica configuration</span> |
| **Java Runtime** | OpenJDK/Oracle JDK | 21 LTS or higher | Critical | Container restart with health checks |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Build System - Java</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Apache Maven</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">3.9.x or higher</span> | Medium | CI/CD pipeline redundancy |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Build System - Frontend</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Node.js</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">20.x LTS with npm 10.x</span> | Medium | Multi-stage build caching |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring - Metrics</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">2.x with alerting</span> | High | <span style="background-color: rgba(91, 57, 243, 0.2)">Federated setup with backup storage</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring - Dashboards</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Grafana</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">10.x with PostgreSQL backend</span> | High | <span style="background-color: rgba(91, 57, 243, 0.2)">Configuration backup and restoration</span> |

### 8.9.2 Infrastructure Dependencies (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Infrastructure Requirements</span>**:

**<span style="background-color: rgba(91, 57, 243, 0.2)">Compute Infrastructure</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Cluster</span>**: Minimum 3-node cluster with master/worker separation supporting horizontal pod autoscaling
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Hosts</span>**: Ubuntu 22.04 LTS or Amazon Linux 2023 with Docker runtime and containerd support
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Auto-Scaling</span>**: Cluster-autoscaler for dynamic node provisioning based on workload demands
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Load Balancing</span>**: Application Load Balancer with health check integration for Spring Boot Actuator endpoints

**<span style="background-color: rgba(91, 57, 243, 0.2)">Storage Infrastructure</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Persistent Storage</span>**: High-IOPS SSD storage for PostgreSQL with automated backup and point-in-time recovery
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Registry</span>**: Secure container image registry with vulnerability scanning and image signing capabilities
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Configuration Storage</span>**: Git-based configuration management for Spring Cloud Config server
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Log Storage</span>**: Centralized logging infrastructure for container log aggregation and retention

**Network Infrastructure**:
- **Service Mesh**: Container networking with service discovery and inter-service communication
- **Ingress Management**: NGINX or cloud-native ingress controllers for external traffic routing
- **Security Groups**: Network segmentation and firewall rules for container workloads
- **DNS Integration**: Kubernetes CoreDNS for service discovery and external DNS resolution

**<span style="background-color: rgba(91, 57, 243, 0.2)">Security Infrastructure</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Secrets Management</span>**: Kubernetes Secrets or cloud-native secret management services for sensitive configuration
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Identity & Access</span>**: Role-based access control (RBAC) for Kubernetes resources and Spring Security integration
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Certificate Management</span>**: Automated TLS certificate provisioning and rotation for HTTPS endpoints
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Image Security</span>**: Container image vulnerability scanning and admission controllers for security compliance

**<span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring Infrastructure</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Metrics Collection</span>**: Prometheus server with federation capabilities for multi-cluster monitoring
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Visualization Platform</span>**: Grafana with PostgreSQL backend for dashboard persistence and user management
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Alerting Integration</span>**: Prometheus Alertmanager with notification routing for critical system events
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Application Performance</span>**: Spring Boot Actuator integration with Micrometer for custom business metrics

### 8.9.3 Runtime Environment Dependencies (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Java Runtime Environment</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JVM Platform</span>**: Eclipse Temurin OpenJDK 21 LTS or Oracle JDK 21 with long-term support through 2031
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Memory Management</span>**: JVM heap tuning for containerized environments with garbage collection optimization
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Security Framework</span>**: Java Cryptography Extension (JCE) for encryption and Spring Security for authentication
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Concurrency Support</span>**: Virtual threads (Project Loom) for high-concurrency REST API processing

**<span style="background-color: rgba(91, 57, 243, 0.2)">Frontend Runtime Environment</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JavaScript Engine</span>**: V8 engine via Node.js 20.x LTS for build tooling and development server
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Web Server</span>**: NGINX 1.25.x for production static asset serving with HTTP/2 and compression
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Browser Compatibility</span>**: Modern browser support for ES2023 features with polyfill fallbacks
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Build Environment</span>**: npm 10.x package manager with dependency caching and security auditing

### 8.9.4 Database and Persistence Dependencies (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Database System</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Server</span>**: Version 15.x with advanced indexing, ACID compliance, and composite key support
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Connection Pooling</span>**: HikariCP with Spring Boot auto-configuration for optimal connection management
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Replication Setup</span>**: Multi-AZ replication with read replicas for high availability and load distribution
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Backup Strategy</span>**: Point-in-time recovery with continuous WAL archiving and automated backup validation

**<span style="background-color: rgba(91, 57, 243, 0.2)">Session and Cache Management</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Cluster</span>**: Version 7.x with primary/replica configuration for session persistence and caching
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Storage</span>**: Spring Session integration replacing CICS COMMAREA structures with distributed sessions
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Cache Strategy</span>**: Application-level caching for frequently accessed reference data and query results
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Persistence Options</span>**: Redis persistence via RDB snapshots and AOF logging for session recovery

### 8.9.5 Build and Development Dependencies (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Java Build System</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Apache Maven</span>**: Version 3.9.x with dependency management and multi-module project support
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Maven Plugin</span>**: For executable JAR generation and containerization support
- **<span style="background-color: rgba(91, 57, 243, 0.2)">JaCoCo Plugin</span>**: Code coverage analysis and reporting for quality assurance
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Dependency Analysis</span>**: OWASP Dependency Check for security vulnerability scanning

**<span style="background-color: rgba(91, 57, 243, 0.2)">Frontend Build System</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Node.js Runtime</span>**: Version 20.x LTS with npm 10.x for package management and build automation
- **<span style="background-color: rgba(91, 57, 243, 0.2)">React Build Tools</span>**: Create React App or Vite for development server and production builds
- **<span style="background-color: rgba(91, 57, 243, 0.2)">TypeScript Support</span>**: Optional TypeScript integration for enhanced development experience
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Testing Framework</span>**: Jest and React Testing Library for component testing and coverage

### 8.9.6 Monitoring and Observability Dependencies (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Metrics and Monitoring Platform</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus Server</span>**: Version 2.x with time-series metrics collection and alerting rules
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Grafana Dashboard</span>**: Version 10.x with PostgreSQL backend for dashboard persistence and user management
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer Integration</span>**: Spring Boot metrics collection with Prometheus registry for custom business metrics
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Alert Management</span>**: Prometheus Alertmanager with notification routing for critical system events

**<span style="background-color: rgba(91, 57, 243, 0.2)">Application Monitoring</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator</span>**: Health checks, metrics endpoints, and operational monitoring capabilities
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Log Aggregation</span>**: Centralized logging infrastructure for container log collection and analysis
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Tracking</span>**: Response time monitoring, throughput analysis, and SLA compliance reporting
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Error Tracking</span>**: Exception monitoring and error rate analysis for proactive issue resolution

### 8.9.7 Security and Compliance Dependencies (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Authentication and Authorization</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Security Framework</span>**: Version 6.x with OAuth2 and JWT token support for secure authentication
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Password Security</span>**: BCrypt hashing with configurable strength for secure password storage
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Role-Based Access</span>**: Spring Security roles and authorities replacing RACF security controls
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Security</span>**: Spring Session with Redis backend for secure distributed session management

**<span style="background-color: rgba(91, 57, 243, 0.2)">Infrastructure Security</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Container Security</span>**: Base image vulnerability scanning and runtime security monitoring
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Network Security</span>**: Kubernetes Network Policies and service mesh security for inter-service communication
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Secrets Management</span>**: Kubernetes Secrets or cloud-native secret stores for sensitive configuration data
- **<span style="background-color: rgba(91, 57, 243, 0.2)">TLS Termination</span>**: Automated certificate management for HTTPS endpoints and secure communication

### 8.9.8 High Availability and Disaster Recovery Dependencies (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Database High Availability</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Replication</span>**: Multi-AZ replication with automated failover and read replica load balancing
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Backup Infrastructure</span>**: Continuous WAL archiving with point-in-time recovery capabilities
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Connection Failover</span>**: JDBC driver configuration for automatic connection failover to replica instances
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Data Validation</span>**: Automated consistency checks and integrity monitoring across replica sets

**<span style="background-color: rgba(91, 57, 243, 0.2)">Application High Availability</span>**:
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Auto-Scaling</span>**: Horizontal Pod Autoscaler and Cluster Autoscaler for dynamic resource allocation
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Clustering</span>**: Primary/replica configuration with automatic failover for session persistence
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Load Balancing</span>**: Application Load Balancer with health check integration and multi-AZ distribution
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Circuit Breakers</span>**: Spring Cloud Circuit Breaker for resilient inter-service communication

### 8.9.9 Dependency Version Management and Compatibility Matrix

| Framework Component | Current Version | Compatibility Range | Update Strategy | Critical Dependencies |
|-------------------|-----------------|-------------------|------------------|---------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">3.2.x</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">3.1.0 - 3.3.x</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Minor version updates quarterly</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Java 21, Spring Security 6.x</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">15.x</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">15.0 - 16.x</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Patch updates monthly</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA, HikariCP</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">7.x</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">7.0 - 7.4</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Minor updates semi-annually</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session, Spring Data Redis</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">1.28+</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">1.28 - 1.30</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Quarterly cluster upgrades</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Docker/containerd, NGINX Ingress</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus</span>** | **<span style="background-color: rgba(91, 57, 243, 0.2)">2.x</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">2.40 - 2.50</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Minor updates quarterly</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer, Grafana integration</span> |

## 8.10 MAINTENANCE PROCEDURES

### 8.10.1 Routine Maintenance Schedule (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes-Centric Maintenance Matrix</span>**:

| Maintenance Type | Frequency | Duration | Impact | <span style="background-color: rgba(91, 57, 243, 0.2)">Procedures</span> |
|------------------|-----------|----------|--------|------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes Version Upgrade</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Quarterly</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">2-3 hours</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Zero downtime (rolling)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Rolling cluster upgrade with node cordoning and draining</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Docker Image Base Patching</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Monthly</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">45 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Zero downtime (rolling)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Rebuild images with updated Eclipse Temurin/Alpine base, rolling deployment</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Minor Upgrade</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Quarterly</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">30 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Brief read-only mode</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">pg_upgrade with WAL replay verification and connection testing</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Redis Persistence Verification</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Weekly</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">15 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">No impact</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">RDB snapshot test, AOF integrity check, cluster health validation</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Patch Releases</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Monthly</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">30 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Zero downtime (rolling)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot 3.2.x security patches via automated CI/CD pipeline</span> |
| **Container Registry Cleanup** | Bi-weekly | 20 minutes | No impact | Remove unused image tags, prune dangling images |
| **Certificate Renewal** | Monthly | 10 minutes | Minimal impact | TLS certificate rotation for ingress and service mesh |

### 8.10.2 Detailed Maintenance Procedures (updated)

#### 8.10.2.1 Kubernetes Version Upgrade Process (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Rolling Cluster Upgrade Strategy</span>**:

```mermaid
flowchart TD
    A[Pre-upgrade Validation] --> B[Node Cordoning]
    B --> C[Pod Eviction]
    C --> D[Node Drain Complete]
    D --> E[Kubernetes Upgrade]
    E --> F[Node Uncordon]
    F --> G[Health Check Validation]
    G --> H{More Nodes?}
    H -->|Yes| I[Next Node]
    H -->|No| J[Cluster Upgrade Complete]
    I --> B
    
    K[Backup ETCD] --> A
    L[Test Environment Validation] --> A
    
    style A fill:#e3f2fd
    style E fill:#c8e6c9
    style G fill:#fff3e0
    style J fill:#c8e6c9
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Upgrade Procedure Steps</span>**:

1. **Pre-Upgrade Validation**:
   - <span style="background-color: rgba(91, 57, 243, 0.2)">ETCD backup verification and cluster health assessment</span>
   - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot application readiness probe validation</span>
   - <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL and Redis cluster connectivity testing</span>

2. **Rolling Node Upgrade**:
   - <span style="background-color: rgba(91, 57, 243, 0.2)">kubectl cordon/drain nodes with 30-second grace period</span>
   - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot pods automatically migrate to healthy nodes</span>
   - <span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes version upgrade with kubelet/kube-proxy updates</span>

3. **Post-Upgrade Validation**:
   - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator health endpoint validation</span>
   - <span style="background-color: rgba(91, 57, 243, 0.2)">End-to-end transaction processing test via REST APIs</span>
   - <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job execution verification</span>

#### 8.10.2.2 Container Image Patching Process (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Automated Base Image Update Pipeline</span>**:

| Image Component | <span style="background-color: rgba(91, 57, 243, 0.2)">Base Image</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Update Process</span> | Validation Steps |
|-----------------|-------------|----------------|------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Backend</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">eclipse-temurin:21.0.8-jre-alpine</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Multi-stage Docker build with dependency caching</span> | Actuator health checks, integration tests |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">React Frontend</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">node:20.18-alpine + nginx:1.25-alpine</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Production build optimization with NGINX serving</span> | UI smoke tests, accessibility validation |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Cloud Gateway</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">eclipse-temurin:21.0.8-jre-alpine</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Gateway-specific configuration and routing</span> | Route validation, authentication flow |

**<span style="background-color: rgba(91, 57, 243, 0.2)">Rolling Deployment Strategy</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">maxSurge: 1, maxUnavailable: 0 ensuring zero downtime</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot readiness probes prevent premature traffic routing</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Automatic rollback on health check failures</span>

#### 8.10.2.3 PostgreSQL Maintenance Procedures (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Minor Version Upgrade Process</span>**:

```yaml
# PostgreSQL Upgrade ConfigMap
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-upgrade-config
data:
  upgrade-script.sh: |
    #!/bin/bash
    # Pre-upgrade backup
    pg_basebackup -D /backup/$(date +%Y%m%d) -Ft
    
    # pg_upgrade execution
    pg_upgrade --old-datadir=/var/lib/postgresql/16/data \
               --new-datadir=/var/lib/postgresql/17/data \
               --old-bindir=/usr/lib/postgresql/16/bin \
               --new-bindir=/usr/lib/postgresql/17/bin \
               --check
    
    # Post-upgrade validation
    psql -c "SELECT version();"
    psql -c "SELECT count(*) FROM customer_data;"
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Database Health Validation</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA connection pool validation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP connection testing with SELECT 1 queries</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction integrity verification through sample operations</span>

#### 8.10.2.4 Redis Cluster Maintenance (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Weekly Persistence Verification</span>**:

```bash
# Redis persistence validation script
#!/bin/bash
echo "Starting Redis persistence verification..."

#### RDB snapshot test
redis-cli BGSAVE
while [ $(redis-cli BGNAME) != "done" ]; do
  sleep 5
done

#### AOF integrity check
redis-cli BGREWRITEAOF
redis-cli CONFIG GET save
redis-cli CONFIG GET appendfsync

#### Spring Session verification
redis-cli KEYS "spring:session:*" | head -5
echo "Redis persistence verification complete"
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Session Store Health Validation</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session integrity verification</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Session serialization/deserialization testing</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Cluster node failover validation</span>

### 8.10.3 Emergency Maintenance Procedures (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Cloud-Native Emergency Response Framework</span>**:

```mermaid
flowchart TD
    A[Emergency Detected] --> B{Severity Assessment}
    B -->|Critical| C[Immediate Rollback Response]
    B -->|High| D[Blue/Green Deployment Switch]
    B -->|Medium| E[Canary Deployment Rollback]
    
    C --> F[Previous Image Tag Rollback]
    D --> G[Traffic Switch to Blue Environment]
    E --> H[Canary Weight Reduction]
    
    F --> I[kubectl rollout undo deployment]
    G --> J[Ingress Traffic Routing Update]
    H --> K[Gradual Traffic Shift]
    
    I --> L[Spring Boot Health Validation]
    J --> M[Environment Health Check]
    K --> N[Performance Monitoring]
    
    L --> O[PostgreSQL Connection Test]
    M --> P[Redis Session State Verification]
    N --> Q[SLA Compliance Check]
    
    O --> R[Service Recovery Complete]
    P --> R
    Q --> R
    
    style A fill:#ff5252
    style C fill:#ff9800
    style F fill:#ffb74d
    style I fill:#c8e6c9
    style L fill:#e8f5e8
```

#### 8.10.3.1 Emergency Rollback Procedures (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Quick Rollback Strategy Matrix</span>**:

| Emergency Type | <span style="background-color: rgba(91, 57, 243, 0.2)">Detection Method</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Rollback Strategy</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Recovery Time</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Validation Steps</span> |
|-----------------|------------------|------------------|----------------|-------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Service Failure</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Actuator health endpoint alerts</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">kubectl rollout undo with previous image tag</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">< 5 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">REST API transaction test</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Connection Issues</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP pool exhaustion alerts</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Blue/Green environment switch</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">< 10 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL connectivity validation</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Performance Degradation</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Prometheus SLA breach alerts</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Canary deployment traffic reduction</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">< 3 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Response time SLA verification</span> |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Store Failure</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis cluster health monitoring</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis failover to backup cluster</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">< 2 minutes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session functionality test</span> |

#### 8.10.3.2 Blue/Green Deployment Emergency Switch (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Traffic Switching Configuration</span>**:

```yaml
# Emergency Blue/Green Switch
apiVersion: argoproj.io/v1alpha1
kind: Rollout
metadata:
  name: carddemo-backend-rollout
spec:
  strategy:
    blueGreen:
      activeService: carddemo-backend-active
      previewService: carddemo-backend-preview
      autoPromotionEnabled: false
      scaleDownDelaySeconds: 30
      abortScaleDownDelaySeconds: 30
      services:
        - service: carddemo-backend-active
          name: active
        - service: carddemo-backend-preview  
          name: preview
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Emergency Switch Procedure</span>**:
1. <span style="background-color: rgba(91, 57, 243, 0.2)">Automated detection via Prometheus alerts on response time breach</span>
2. <span style="background-color: rgba(91, 57, 243, 0.2)">ArgoCD Rollouts immediate traffic switch to blue environment</span>
3. <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot health validation on switched environment</span>
4. <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL and Redis connectivity verification</span>

#### 8.10.3.3 Canary Deployment Rollback (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Gradual Traffic Shift Strategy</span>**:

```yaml
# Canary rollback configuration
spec:
  strategy:
    canary:
      maxSurge: "25%"
      maxUnavailable: 0
      steps:
      - setWeight: 5
      - pause: {duration: 2m}
      - setWeight: 10
      - pause: {duration: 2m}
      - analysis:
          templates:
          - templateName: error-rate-analysis
          args:
          - name: service-name
            value: carddemo-backend
```

**<span style="background-color: rgba(91, 57, 243, 0.2)">Emergency Canary Rollback</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">Immediate traffic weight reduction to 0% for problematic version</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Automated scaling down of failing pods</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot graceful shutdown with 30-second grace period</span>

### 8.10.4 Maintenance Monitoring and Validation

#### 8.10.4.1 Automated Health Validation (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Post-Maintenance Validation Suite</span>**:

```bash
#!/bin/bash
# Comprehensive health validation script

echo "=== Spring Boot Health Validation ==="
for service in backend gateway; do
  health_status=$(curl -s http://carddemo-${service}:8080/actuator/health | jq -r '.status')
  if [ "$health_status" != "UP" ]; then
    echo "ERROR: $service health check failed"
    exit 1
  fi
done

echo "=== Database Connection Validation ==="
kubectl exec postgresql-0 -- psql -U carddemo -c "SELECT 1;" > /dev/null
if [ $? -ne 0 ]; then
  echo "ERROR: PostgreSQL connection failed"
  exit 1
fi

echo "=== Redis Session Store Validation ==="
kubectl exec redis-0 -- redis-cli ping | grep -q PONG
if [ $? -ne 0 ]; then
  echo "ERROR: Redis connection failed"
  exit 1
fi

echo "=== End-to-End Transaction Test ==="
response=$(curl -s -X POST http://carddemo-gateway:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","password":"testpass"}')
if [ $? -ne 0 ]; then
  echo "ERROR: End-to-end transaction test failed"
  exit 1
fi

echo "All validation checks passed successfully"
```

#### 8.10.4.2 Performance Impact Assessment (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">SLA Compliance Verification</span>**:

| Metric Category | <span style="background-color: rgba(91, 57, 243, 0.2)">Target SLA</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring Method</span> | Post-Maintenance Validation |
|-----------------|-----------|------------------|----------------------------|
| **<span style="background-color: rgba(91, 57, 243, 0.2)">REST API Response Time</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">< 200ms (95th percentile)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Micrometer metrics via Actuator</span> | Automated load test with 100 concurrent requests |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Database Query Performance</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">< 50ms average</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HikariCP pool metrics</span> | Sample transaction processing verification |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch Processing</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">< 4-hour window</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch JobRepository metrics</span> | Sample batch job execution test |
| **<span style="background-color: rgba(91, 57, 243, 0.2)">Session Management</span>** | <span style="background-color: rgba(91, 57, 243, 0.2)">< 10ms session retrieval</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Redis cluster performance monitoring</span> | Session creation and retrieval test |

### 8.10.5 Maintenance Documentation and Compliance

#### 8.10.5.1 Maintenance Audit Trail

**<span style="background-color: rgba(91, 57, 243, 0.2)">GitOps-Based Change Management</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">All maintenance activities tracked through Git commits and pull requests</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">ArgoCD deployment history providing complete audit trail</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Actuator audit events for application-level changes</span>

#### 8.10.5.2 Compliance and Regulatory Requirements

**Financial Services Compliance Framework**:
- **Change Control**: All maintenance activities follow GitOps approval workflows
- **Data Integrity**: PostgreSQL ACID compliance maintains financial transaction integrity
- **Audit Logging**: Comprehensive logging through Spring Security audit events
- **Recovery Testing**: Quarterly disaster recovery validation exercises
- **Performance SLA**: Continuous monitoring ensures sub-200ms response time compliance

This modernized maintenance framework ensures enterprise-grade operational excellence while leveraging cloud-native technologies for enhanced reliability, performance, and scalability compared to traditional mainframe maintenance procedures.

## 8.11 REFERENCES

### 8.11.1 Technical Specification Sources

- **Section 5.1 HIGH-LEVEL ARCHITECTURE** - System architecture overview, component interactions, and <span style="background-color: rgba(91, 57, 243, 0.2)">cloud-native infrastructure patterns</span>
- **Section 3.4 DEVELOPMENT & DEPLOYMENT** - Build environment requirements, deployment procedures, and configuration management
- **Section 6.5 MONITORING AND OBSERVABILITY** - Infrastructure monitoring framework, performance metrics, and alerting procedures
- **Section 5.4 CROSS-CUTTING CONCERNS** - Disaster recovery procedures, monitoring strategy, and performance requirements
- **Section 3.3 DATABASES & STORAGE** - <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL storage infrastructure, database schema organization, and capacity requirements</span>
- **Section 6.6 TESTING STRATEGY** - Testing infrastructure requirements, environment management, and validation procedures

### 8.11.2 Repository Infrastructure Evidence

<span style="background-color: rgba(91, 57, 243, 0.2)">**Generated Infrastructure Configuration Files**</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`docker-compose.yml` - Complete local development stack orchestration for Spring Boot backend, React frontend, PostgreSQL database, and Redis session store</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`kubernetes/deployment.yaml` - Production Kubernetes deployment configuration with service definitions, ingress controllers, and resource management</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Backend Service Infrastructure</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/service/` - Spring Boot service classes converted from COBOL programs with comprehensive error handling</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/controller/` - REST controller infrastructure replacing CICS transaction processing</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/repository/` - Spring Data JPA repository infrastructure with PostgreSQL integration</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/batch/` - Spring Batch job infrastructure for automated processing workflows</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/resources/application.yml` - Centralized configuration supporting multiple deployment environments</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Frontend Application Infrastructure</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">`frontend/src/components/screens/` - React component infrastructure generated from BMS mapset definitions</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`frontend/src/services/api.js` - HTTP client infrastructure for REST API communication with backend services</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`frontend/src/utils/validation.js` - Client-side validation infrastructure replicating COBOL validation logic</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Database Schema Infrastructure</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/resources/schema.sql` - PostgreSQL database schema defining relational table structure replacing VSAM datasets</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">`backend/src/main/java/com/carddemo/entity/` - JPA entity classes with composite key structures maintaining VSAM key compatibility</span>

### 8.11.3 <span style="background-color: rgba(91, 57, 243, 0.2)">Modern Infrastructure Standards (updated)

**<span style="background-color: rgba(91, 57, 243, 0.2)">Container Orchestration Documentation</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Kubernetes Documentation v1.28** - Container orchestration platform configuration and cluster management standards</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Docker Documentation 24.x** - Container platform standards for image building, security scanning, and multi-stage deployment strategies</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Kubernetes Deployment Guide** - Service mesh configuration, ingress controllers, and horizontal pod autoscaling implementation</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Application Framework References</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Boot 3.2 Reference Guide** - Enterprise application framework configuration, auto-configuration patterns, and production-ready features</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Security 6.x Documentation** - Authentication and authorization framework replacing RACF security controls</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Cloud Gateway Reference** - API gateway configuration for microservices routing and load balancing</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Cloud Config Documentation** - Centralized configuration management with Git repository integration</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Batch 5.x Guide** - Enterprise batch processing framework replacing JCL job execution</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Database and Storage Standards</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**PostgreSQL 17 Administration Guide** - Enterprise database management, high availability configuration, and performance tuning methodologies</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Data JPA Reference** - Object-relational mapping patterns and repository design standards</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Redis 7.4 Documentation** - In-memory data structure configuration for session management and caching strategies</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Monitoring and Observability Standards</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Micrometer Registry Documentation** - Application metrics collection and dimensional monitoring framework integration</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Prometheus Integration Guide** - Time-series metrics collection, query language (PromQL), and alerting configuration</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Spring Boot Actuator Reference** - Production-ready endpoint configuration for health checks, metrics exposure, and operational monitoring</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">Frontend Technology References</span>**
- <span style="background-color: rgba(91, 57, 243, 0.2)">**React 18.x Documentation** - Component-based architecture and modern JavaScript framework patterns</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Material-UI (MUI) 5.x Guide** - Design system components and responsive UI framework implementation</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**React Router 6.x Reference** - Client-side routing and navigation patterns for single-page applications</span>

### 8.11.4 <span style="background-color: rgba(91, 57, 243, 0.2)">External Web Resources

**<span style="background-color: rgba(91, 57, 243, 0.2)">Technical Implementation Guides</span>**
- **Spring Boot Actuator and Prometheus Integration** - Production-ready metrics endpoints with Prometheus registry auto-configuration
- **Micrometer Metrics Framework** - Application metrics facade supporting multiple monitoring systems with Spring Boot 2.0+ integration
- **Prometheus Metrics Collection** - HTTP endpoint configuration for metrics scraping in Prometheus-readable format

**<span style="background-color: rgba(91, 57, 243, 0.2)">Best Practice Resources</span>**
- **Spring Boot Monitoring Integration** - Seamless metrics integration with Micrometer for application-specific monitoring behaviors
- **Prometheus Metrics Implementation** - Adding monitoring capabilities to Spring Boot applications using Micrometer library integration
- **Prometheus Polling Configuration** - Endpoint configuration for metrics scraping at configured intervals with Spring Boot Actuator

# APPENDICES

## 9.1 ADDITIONAL TECHNICAL INFORMATION

### 9.1.1 COBOL Program Naming Conventions (updated)

The CardDemo system follows standardized naming conventions that reflect both IBM mainframe development best practices and <span style="background-color: rgba(91, 57, 243, 0.2)">modern Spring Boot Java 21 service architecture patterns</span>.

#### Legacy COBOL Program Mapping

| Program Type | Prefix | Example | Purpose |
|-------------|--------|---------|---------|
| Interactive CICS | CO | COSGN00C | Online transaction processing |
| Batch Processing | CB | CBACT01C | Batch job execution |
| Utility Subroutines | CS | CSUTLDTC | Shared utility functions |

#### Spring Boot Service Class Naming Convention

<span style="background-color: rgba(91, 57, 243, 0.2)">The modernized system implements 36 Spring Boot service classes that directly correspond to original COBOL program functionality, maintaining identical business logic while leveraging Java 21 object-oriented capabilities and Spring dependency injection.</span>

| <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot Service Class</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Legacy COBOL Program</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Business Function</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Package Location</span> |
|---------------------|-------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">SignOnService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COSGN00C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">User authentication and session management</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">MenuService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COMEN01C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Main menu navigation for regular users</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">AdminService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COADM01C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Administrative menu and operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">TransactionListService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COTRN00C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction list display and pagination</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">TransactionDetailService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COTRN01C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction detail inquiry and analysis</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">TransactionAddService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COTRN02C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">New transaction creation and validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">AccountViewService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COACTVWC</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Account view and inquiry operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">AccountUpdateService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COACTUPC</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Account update processing and validation</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">BillPaymentService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COBIL00C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Bill payment processing and authorization</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CardListService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COCRDLIC</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Credit card list display and filtering</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CardDetailService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COCRDSLC</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Credit card detail view and information</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CardUpdateService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COCRDUPC</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Credit card update and maintenance</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">UserListService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COUSR00C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">User list management and administration</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">UserAddService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COUSR01C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">New user creation and setup</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">UserUpdateService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COUSR02C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">User profile update and modification</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">UserDeleteService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">COUSR03C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">User account deletion and cleanup</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">ReportService</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CORPT00C</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction reporting and analytics</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> |

#### Spring Boot Package Structure and Organization

<span style="background-color: rgba(91, 57, 243, 0.2)">The modernized CardDemo application follows Spring Boot best practices with a standardized package structure that promotes separation of concerns and maintainability:</span>

| <span style="background-color: rgba(91, 57, 243, 0.2)">Package Name</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Purpose</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Component Count</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Architecture Layer</span> |
|--------------|---------|------------------|-------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.controller</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">REST API endpoints with @RestController annotations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">24 controllers</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Presentation Layer</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.service</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Business logic implementation with @Service annotations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">36 service classes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Business Logic Layer</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.repository</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Data access interfaces extending JpaRepository</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">11 repository interfaces</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Data Access Layer</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.entity</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JPA entity classes with @Entity annotations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">11 entity classes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Data Model Layer</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.batch</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch job configurations and processors</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">12 batch components</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Batch Processing Layer</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.config</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot configuration classes and beans</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">8 configuration classes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Configuration Layer</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.dto</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Data Transfer Objects for REST API communication</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">24 DTO classes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Data Transfer Layer</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">com.carddemo.util</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Utility classes including CobolDataConverter</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">6 utility classes</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Utility Layer</span> |

### 9.1.2 Dataset Naming Standards (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The modernized system maintains compatibility with legacy VSAM dataset naming conventions while introducing standardized PostgreSQL schema and table naming guidelines that preserve data structure relationships and access patterns.</span>

#### Legacy VSAM Dataset Naming

| Dataset Type | Format | Example | Usage |
|-------------|--------|---------|-------|
| COBOL Source | HLQ.CBL | AWS.M2.CARDDEMO.CBL | Program source code |
| Copybooks | HLQ.CPY | AWS.M2.CARDDEMO.CPY | Shared definitions |
| BMS Maps | HLQ.BMS | AWS.M2.CARDDEMO.BMS | Screen definitions |
| VSAM Files | HLQ.dataset.PS | AWS.M2.CARDDEMO.ACCTDATA.PS | Application data |

#### PostgreSQL Schema and Table Naming Guidelines

<span style="background-color: rgba(91, 57, 243, 0.2)">The PostgreSQL database schema follows modern relational database naming conventions while preserving the logical organization and access patterns from the original VSAM implementation:</span>

| <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Schema</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Purpose</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Naming Convention</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Access Pattern</span> |
|------------------|---------|-------------------|-----------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_main</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Primary application tables for live transaction processing</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">lowercase_underscore format</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">High-frequency CRUD operations</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_ref</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Reference and lookup data with low update frequency</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">lowercase_underscore format</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Read-heavy validation operations</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_archive</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Historical data and archived transaction records</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">lowercase_underscore format</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Read-only reporting and compliance</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_batch</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Temporary tables for Spring Batch processing operations</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">lowercase_underscore format</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Bulk insert/update operations</span> |

#### VSAM Dataset to PostgreSQL Table Mapping

<span style="background-color: rgba(91, 57, 243, 0.2)">The following mapping preserves data structure integrity while enabling modern relational database capabilities including foreign key constraints, indexes, and ACID compliance:</span>

| <span style="background-color: rgba(91, 57, 243, 0.2)">Legacy VSAM Dataset</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL Table Name</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Schema</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Primary Key Mapping</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">JPA Entity Class</span> |
|-------------------|---------------------|--------|---------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">USRSEC</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">user_security</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_main</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">SEC-USR-ID → user_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">UserSecurity.java</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CUSTDAT</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">customer_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_main</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CUST-ID → customer_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Customer.java</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">ACCTDAT</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">account_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_main</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">ACCT-ID → account_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Account.java</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">CARDDAT</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">card_data</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_main</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CARD-NUM → card_number (VARCHAR(16))</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CreditCard.java</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">TRANSACT</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transactions</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_main</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">TRAN-ID → transaction_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Transaction.java</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">XREFFILE</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">card_cross_reference</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_main</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">XREF-CARD-NUM → card_number (VARCHAR(16))</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">CardCrossReference.java</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">TRANSCAT</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_categories</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_ref</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Composite: (category_code, subcategory_code)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">TransactionCategory.java</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">TRANTYPE</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_types</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_ref</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">TRAN-TYPE-CD → transaction_type_code (VARCHAR(2))</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">TransactionType.java</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">DISCGRP</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">disclosure_groups</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_ref</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">DISCGRP-ID → disclosure_group_id (BIGINT)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">DisclosureGroup.java</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">TCATBAL</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">transaction_category_balance</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">carddemo_main</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Composite: (account_id, category_code, balance_date)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">TransactionCategoryBalance.java</span> |

#### PostgreSQL Table Naming Best Practices

<span style="background-color: rgba(91, 57, 243, 0.2)">The modernized naming convention follows industry-standard PostgreSQL practices while maintaining traceability to original VSAM structures:</span>

- **<span style="background-color: rgba(91, 57, 243, 0.2)">Table Names</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">lowercase with underscore separators (snake_case), descriptive business terms</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Column Names</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">lowercase with underscore separators, avoiding PostgreSQL reserved words</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Primary Key Naming</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">table_name_id pattern for single-column keys, composite naming for multi-column keys</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Foreign Key Naming</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">referenced_table_id pattern maintaining clear relationship identification</span>
- **<span style="background-color: rgba(91, 57, 243, 0.2)">Index Naming</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">idx_table_column pattern for B-tree indexes, enabling query optimization tracking</span>

### 9.1.3 CICS Transaction Reference (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">Complete transaction mapping for the CardDemo system showing the correspondence between legacy CICS transaction codes and modern REST API endpoints. Each REST endpoint maintains identical functionality and business logic while providing JSON-based request/response patterns.</span>

| Transaction | Program | Description | User Access | <span style="background-color: rgba(91, 57, 243, 0.2)">REST Endpoint Path</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HTTP Method</span> |
|-------------|---------|-------------|-------------|----------------------|---------------------|
| CC00 | COSGN00C | User authentication and sign-on | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/cc00/sign-on</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">POST</span> |
| CM00 | COMEN01C | Main menu for regular users | Regular users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/cm00/menu</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |
| CA00 | COADM01C | Administrative menu | Admin users only | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/ca00/admin-menu</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |
| CT00 | COTRN00C | Transaction list display | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/ct00/transactions</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |
| CT01 | COTRN01C | Transaction detail inquiry | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/ct01/transaction/{id}</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |
| CT02 | COTRN02C | Add new transaction | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/ct02/transaction</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">POST</span> |
| CAVW | COACTVWC | Account view and inquiry | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/cavw/account/{id}</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |
| CAUP | COACTUPC | Account update processing | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/caup/account/{id}</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PUT</span> |
| CB00 | COBIL00C | Bill payment processing | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/cb00/bill-payment</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">POST</span> |
| CCLI | COCRDLIC | Credit card list display | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/ccli/cards</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |
| CCDL | COCRDSLC | Credit card detail view | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/ccdl/card/{cardNumber}</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |
| CCUP | COCRDUPC | Credit card update | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/ccup/card/{cardNumber}</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PUT</span> |
| CU00 | COUSR00C | User list management | Admin users only | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/cu00/users</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |
| CU01 | COUSR01C | Add new user | Admin users only | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/cu01/user</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">POST</span> |
| CU02 | COUSR02C | Update existing user | Admin users only | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/cu02/user/{userId}</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PUT</span> |
| CU03 | COUSR03C | Delete user account | Admin users only | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/cu03/user/{userId}</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">DELETE</span> |
| CR00 | CORPT00C | Transaction reporting | All users | <span style="background-color: rgba(91, 57, 243, 0.2)">/api/cr00/reports</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">GET</span> |

<span style="background-color: rgba(91, 57, 243, 0.2)">**REST API Design Patterns**: All endpoints follow RESTful conventions with resource-based URLs, appropriate HTTP methods, and standardized JSON request/response formats. Path parameters replace CICS COMMAREA key fields, and query parameters support filtering and pagination similar to CICS browse operations.</span>

<span style="background-color: rgba(91, 57, 243, 0.2)">**Security Integration**: All REST endpoints integrate with Spring Security for authentication and authorization, with role-based access control mirroring the original RACF security model through @PreAuthorize annotations.</span>

### 9.1.4 File Status Codes and Error Handling (updated)

<span style="background-color: rgba(91, 57, 243, 0.2)">The modernized system provides comprehensive error handling that maps legacy VSAM file status codes to equivalent Spring Data JPA exceptions and SQLState conditions, ensuring consistent error handling patterns while leveraging modern exception management capabilities.</span>

#### Legacy VSAM File Status Codes

| Status Code | Meaning | Program Response | Recovery Action |
|-------------|---------|------------------|-----------------|
| 00 | Successful operation | Continue processing | None required |
| 23 | Record not found | Display error message | User retry with valid key |
| 24 | Record in use by another task | Display busy message | Automatic retry with delay |
| 90 | File not available | System error message | Contact system administrator |
| 92 | Logic error in program | Abnormal termination | Program debug required |

#### Spring Data JPA Exception Mapping

<span style="background-color: rgba(91, 57, 243, 0.2)">The following mapping ensures consistent error handling between legacy VSAM operations and modern PostgreSQL/JPA data access patterns:</span>

| <span style="background-color: rgba(91, 57, 243, 0.2)">VSAM File Status</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data Exception</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL SQLState</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">HTTP Status Code</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Recovery Strategy</span> |
|-------------------|---------------------|----------------------|------------------|------------------|
| <span style="background-color: rgba(91, 57, 243, 0.2)">00 (Success)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">No exception</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">00000 (Success)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">200 OK</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Continue processing normally</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">23 (Record not found)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">EmptyResultDataAccessException</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">02000 (No data found)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">404 Not Found</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Return empty result or prompt user</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">24 (Record in use)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">PessimisticLockingFailureException</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">40001 (Serialization failure)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">409 Conflict</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Retry with exponential backoff</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">90 (File not available)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">DataAccessResourceFailureException</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">08000 (Connection exception)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">503 Service Unavailable</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Database connection recovery</span> |
| <span style="background-color: rgba(91, 57, 243, 0.2)">92 (Logic error)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">DataIntegrityViolationException</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">23000 (Integrity constraint)</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">400 Bad Request</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">Input validation and correction</span> |

#### CobolDataConverter Utility and BigDecimal Precision

<span style="background-color: rgba(91, 57, 243, 0.2)">The system includes a specialized CobolDataConverter utility class that ensures exact precision preservation when converting between COBOL COMP-3 packed decimal formats and Java BigDecimal objects, maintaining identical calculation accuracy for financial operations.</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">CobolDataConverter Key Features</span>**:
- <span style="background-color: rgba(91, 57, 243, 0.2)">**COMP-3 to BigDecimal Conversion**: Maintains exact scale and precision from COBOL PIC S9(13)V9(2) COMP-3 fields to BigDecimal with scale=2 and appropriate rounding modes</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Scale Configuration**: Configurable BigDecimal scale settings ensuring identical decimal precision to original COBOL packed decimal calculations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Rounding Mode Consistency**: RoundingMode.HALF_UP matches COBOL computational behavior for financial rounding operations</span>
- <span style="background-color: rgba(91, 57, 243, 0.2)">**Sign Preservation**: Accurate handling of positive, negative, and unsigned numeric values matching COBOL sign conventions</span>

**<span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal Configuration Example</span>**:
```java
// CobolDataConverter utility ensuring COMP-3 precision
public static final int MONETARY_SCALE = 2;
public static final RoundingMode COBOL_ROUNDING = RoundingMode.HALF_UP;

BigDecimal amount = new BigDecimal("12345.67").setScale(MONETARY_SCALE, COBOL_ROUNDING);
```

<span style="background-color: rgba(91, 57, 243, 0.2)">**Reference**: The CobolDataConverter utility is documented in `backend/src/main/java/com/carddemo/util/CobolDataConverter.java` and provides comprehensive packed decimal conversion methods that maintain bit-level compatibility with original COBOL calculations.</span>

### 9.1.5 BMS Screen Attributes and Constants

| Attribute | DFHBMSCA Constant | Purpose | Usage |
|-----------|------------------|---------|-------|
| ASKIP | DFHBMSCA | Auto-skip field | Display-only fields |
| FSET | DFHBMSCA | Field set to modified | Force field transmission |
| NORM | DFHBMSCA | Normal intensity | Standard display |
| IC | DFHBMSCA | Initial cursor | Cursor positioning |
| UNPROT | DFHBMSCA | Unprotected field | User input fields |
| BRT | DFHBMSCA | Bright intensity | Highlighted fields |

### 9.1.6 VSAM Dataset Configuration

| Dataset | Organization | Key Field | Record Length | Usage |
|---------|-------------|-----------|---------------|-------|
| USRSEC | KSDS | SEC-USR-ID (8 bytes) | 80 bytes | User authentication |
| ACCTDAT | KSDS | ACCT-ID (11 bytes) | Variable | Account master data |
| CUSTDAT | KSDS | CUST-ID (9 bytes) | 312 bytes | Customer information |
| CARDDAT | KSDS | CARD-NUM (16 bytes) | Fixed | Credit card records |
| TRANSACT | KSDS | TRAN-ID (16 bytes) | Fixed | Transaction history |
| XREFFILE | KSDS | XREF-CARD-NUM (16 bytes) | Fixed | Cross-reference mapping |

### 9.1.7 Program Structure Standards

All COBOL programs follow the standardized paragraph structure:

```
0000-MAIN
1000-INITIALIZE
2000-PROCESS-INPUT
3000-PROCESS-LOGIC
4000-PROCESS-OUTPUT
9000-CLEANUP
9999-ABEND-PROGRAM
```

### 9.1.8 Date Conversion Utilities

Language Environment date functions used throughout the system:

| Function | Purpose | Input Format | Output Format |
|----------|---------|--------------|---------------|
| CEEDAYS | Convert to Lilian date | YYYY-MM-DD | Days since 1582-10-15 |
| CEEDATE | Convert from Lilian date | Lilian days | YYYY-MM-DD |
| CEE3ABD | Abnormal termination | Condition code | System dump |

## 9.2 GLOSSARY

**88-level condition names**: COBOL language feature that defines condition names (boolean flags) associated with specific values of a data item, enabling readable conditional logic in program control structures.

**Alternate Index (AIX)**: A VSAM structure that provides an alternate access path to records in a KSDS based on a secondary key field, enabling multiple ways to access the same data.

**Basic Mapping Support (BMS)**: CICS facility for defining and managing 3270 terminal screen layouts using macros that generate both physical and symbolic maps for program interaction.

**Batch Window**: Scheduled time period when online systems are unavailable or restricted to allow batch processing jobs to execute without interference from interactive transactions.

**<span style="background-color: rgba(91, 57, 243, 0.2)">BigDecimal</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Java class that provides precise decimal arithmetic operations with arbitrary precision, essential for financial calculations where floating-point rounding errors must be avoided</span>.

**Change Control Board**: Formal governance body responsible for reviewing and approving changes to production systems, ensuring proper testing and documentation.

**COMMAREA**: Communication Area - CICS facility for passing data between programs during terminal sessions or program-to-program transfers using EXEC CICS XCTL commands.

**Copybook**: Reusable COBOL code segments containing data definitions or procedures that are included in programs at compile time using the COPY statement.

**Cross-reference**: Data structure or file that maps relationships between different entities, such as the relationship between card numbers and account numbers in XREFFILE.

**Date Conversion Subprogram**: Utility program that converts dates between different formats, particularly for Language Environment date calculations and Lilian date processing.

**Disclosure Group**: Configuration that defines interest rates and terms for specific account categories, stored in the DISCGRP dataset.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Docker</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Containerization platform that packages applications and their dependencies into lightweight, portable containers for consistent deployment across different environments</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">DTO (Data Transfer Object)</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Design pattern that defines objects used to transfer data between different layers or components of an application, typically containing only data fields and accessor methods without business logic</span>.

**EBCDIC**: Extended Binary Coded Decimal Interchange Code - character encoding used on IBM mainframe systems, different from ASCII encoding.

**Fixed-width format**: Data format where each field occupies a specific number of characters in predetermined positions within a record, enabling predictable parsing.

**Forward Recovery**: Database recovery technique that restores data by applying transaction logs to a backup copy to bring it forward to a specific point in time.

**High Level Qualifier (HLQ)**: First segment of a z/OS dataset name that typically identifies the owner or application system.

**Image Copy**: Complete backup of a VSAM dataset at a specific point in time, used for disaster recovery and forward recovery operations.

**Key Sequenced Data Set (KSDS)**: VSAM file organization where records are stored in ascending key sequence, providing both sequential and direct access methods.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Kubernetes</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Open-source container orchestration platform that automates deployment, scaling, and management of containerized applications across clusters of machines</span>.

**Language Environment (LE)**: IBM runtime environment providing common services for programs written in different languages, including COBOL error handling and date services.

**Lilian Date**: Date representation as the number of days since October 14, 1582 (Gregorian calendar adoption), used by Language Environment date functions.

**Link Edit**: Process of combining compiled object modules and resolving external references to create an executable load module for execution.

**Load Library**: z/OS partitioned dataset containing executable programs (load modules) that can be loaded and executed by the operating system.

**Load Module**: Executable program stored in a load library after compilation and link editing, ready for execution by the system.

**LPAR**: Logical Partition - virtualized mainframe environment that acts as a separate computer system within a physical mainframe.

**Mapset**: Collection of related BMS maps compiled together for use by CICS applications, defining multiple screens for a transaction set.

**NEWCOPY**: CICS command to refresh a program in memory with the latest version from the load library, used during development and deployment.

**Paragraph**: Named section of COBOL procedure division code that can be performed (called) from other parts of the program using PERFORM statements.

**<span style="background-color: rgba(91, 57, 243, 0.2)">PostgreSQL</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Open-source relational database management system known for its reliability, feature robustness, and standards compliance, supporting advanced data types and performance optimization features</span>.

**Program Control Table (PCT)**: CICS table that maps transaction codes to programs, defining which program executes when a transaction is initiated.

**RACF Profile**: Security definition in Resource Access Control Facility that controls access to resources, including datasets, programs, and transactions.

**<span style="background-color: rgba(91, 57, 243, 0.2)">React (Single Page Application)</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">JavaScript library for building user interfaces with component-based architecture, enabling the creation of dynamic single-page applications that update content without full page reloads</span>.

**Record Key**: Field that uniquely identifies a record in a VSAM KSDS file, used for direct access and maintaining sorted order.

**Reentrant**: Program characteristic allowing multiple users to execute the same copy simultaneously without interference, required for CICS programs.

**<span style="background-color: rgba(91, 57, 243, 0.2)">REST (Representational State Transfer)</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Architectural style for distributed systems that uses standard HTTP methods and stateless communication to create web services with predictable, resource-oriented URLs</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Batch</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Framework for building robust batch applications with features for transaction management, job processing statistics, job restart, skip, and resource management for high-volume data processing</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Boot</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Java framework that simplifies the creation of stand-alone, production-grade Spring applications with embedded servers, auto-configuration, and opinionated defaults for rapid development</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Data JPA</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Framework that simplifies data access layer implementation by providing repository abstractions and reducing boilerplate code for JPA-based data access operations</span>.

**<span style="background-color: rgba(91, 57, 243, 0.2)">Spring Session</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Framework that provides transparent session management capabilities, enabling session data to be stored in external data stores and shared across multiple application instances</span>.

**STEPLIB**: JCL DD statement specifying libraries to search for programs during job execution, defining the program load path.

**Terminal Concentrator**: Hardware/software that multiplexes multiple terminal connections over fewer network links, optimizing communication resources.

**Transient Data Queue**: CICS facility for temporary sequential data storage, often used for print output and temporary message passing.

**Working Storage**: COBOL data division section containing variables that persist throughout program execution and are reinitialized for each program invocation.

**<span style="background-color: rgba(91, 57, 243, 0.2)">YAML (YAML Ain't Markup Language)</span>**: <span style="background-color: rgba(91, 57, 243, 0.2)">Human-readable data serialization format commonly used for configuration files and data exchange, featuring a clean syntax with meaningful indentation</span>.

## 9.3 ACRONYMS

| Acronym | Expanded Form | Context |
|---------|---------------|---------|
| AIX | Alternate Index | VSAM file access method |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**API**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**Application Programming Interface**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**System integration and service communication**</span> |
| ASCII | American Standard Code for Information Interchange | Data encoding standard |
| BMS | Basic Mapping Support | CICS screen management facility |
| CCDA | Credit Card Demo Application | Project identifier and system name |
| CEDA | CICS Execute Define Alter | Resource definition utility |
| CEE3ABD | Language Environment Abnormal End | Error handling routine |
| CEEDAYS | Language Environment Date Conversion | Date processing function |
| CEMT | CICS Execute Master Terminal | System administration commands |
| CI | Continuous Integration | Development methodology |
| CICS | Customer Information Control System | Transaction processing monitor |
| COBOL | Common Business-Oriented Language | Programming language |
| CSD | CICS System Definition | Resource configuration file |
| CVV | Card Verification Value | Credit card security code |
| DB2 | Database 2 | IBM relational database system |
| DD | Data Definition | JCL dataset specification |
| DFHAID | Default Handler Attention Identifier | CICS constants copybook |
| DFHBMSCA | Default Handler BMS Control Area | Screen attribute constants |
| DFHCOMMAREA | Default Handler Communication Area | Data passing mechanism |
| DFHCSDUP | Default Handler CSD Update | CSD management utility |
| DFHMDF | Define Map Data Field | BMS field definition macro |
| DFHMDI | Define Map Data Initialize | BMS map definition macro |
| DFHMSD | Define Map Set Definition | BMS mapset definition macro |
| DFHRESP | Default Handler Response | CICS response code constants |
| EBCDIC | Extended Binary Coded Decimal Interchange Code | Mainframe character encoding |
| EFT | Electronic Funds Transfer | Payment processing method |
| EIB | Execute Interface Block | CICS control block |
| EIBAID | EIB Attention Identifier | User input identification |
| EIBCALEN | EIB Communication Area Length | COMMAREA size indicator |
| ETL | Extract, Transform, Load | Data processing methodology |
| FD | File Description | COBOL file definition section |
| FICO | Fair Isaac Corporation | Credit scoring methodology |
| GDPR | General Data Protection Regulation | European privacy regulation |
| HLQ | High Level Qualifier | Dataset naming convention |
| HTML | HyperText Markup Language | Report output format |
| IBM | International Business Machines | Technology vendor |
| IC | Initial Cursor | Screen cursor positioning |
| IDCAMS | Integrated Data Catalog Access Method Services | VSAM utility program |
| IEBGENER | Input/Execute Basic Generation | Data copying utility |
| IEFBR14 | Input/Execute Fabricate BR14 | Null program for JCL |
| ISO | International Organization for Standardization | Standards organization |
| JCL | Job Control Language | Batch processing scripting |
| JES | Job Entry Subsystem | Mainframe job scheduling |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**JPA**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**Java Persistence API**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**Object-relational mapping framework**</span> |
| KSDS | Key Sequenced Data Set | VSAM file organization |
| KPI | Key Performance Indicator | Performance measurement |
| LE | Language Environment | Runtime services framework |
| LISTCAT | List Catalog | IDCAMS catalog display command |
| LPAR | Logical Partition | Mainframe virtualization |
| NANPA | North American Numbering Plan Administration | Phone number standards |
| ORM | Object-Relational Mapping | Data access pattern |
| PCI DSS | Payment Card Industry Data Security Standard | Security compliance framework |
| PCT | Program Control Table | CICS transaction-to-program mapping |
| PF | Program Function | Function key designation |
| PIC | Picture | COBOL data type specification |
| POS | Point of Sale | Transaction origination type |
| PROC | Procedure | JCL reusable procedure |
| PS | Physical Sequential | Dataset organization type |
| QA | Quality Assurance | Testing and validation phase |
| RACF | Resource Access Control Facility | Mainframe security system |
| RECLN | Record Length | Data record size specification |
| RESP | Response | CICS error handling code |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**REST**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**Representational State Transfer**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**Web service architectural style**</span> |
| RPO | Recovery Point Objective | Backup frequency metric |
| RTO | Recovery Time Objective | Recovery speed metric |
| SLA | Service Level Agreement | Performance commitment |
| SNA | Systems Network Architecture | IBM networking protocol |
| SOX | Sarbanes-Oxley Act | Financial compliance regulation |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**SPA**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**Single Page Application**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**Web application architecture pattern**</span> |
| SQL | Structured Query Language | Database query language |
| SSN | Social Security Number | Personal identification number |
| STEPLIB | Step Library | JCL library search order |
| SYSPARM | System Parameter | Build configuration variable |
| TD | Transient Data | CICS queue mechanism |
| TN3270 | Telnet 3270 | Terminal emulation protocol |
| TPS | Transactions Per Second | Performance measurement |
| TS | Transaction Server / Timestamp | Context-dependent meaning |
| UAT | User Acceptance Testing | Final testing phase |
| UNPROT | Unprotected | BMS field attribute |
| USPS | United States Postal Service | Address validation service |
| VSAM | Virtual Storage Access Method | Mainframe file system |
| WS | Working Storage | COBOL data storage section |
| XCTL | Transfer Control | CICS program transfer command |
| XREF | Cross Reference | Data relationship mapping |
| <span style="background-color: rgba(91, 57, 243, 0.2)">**YAML**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**YAML Ain't Markup Language**</span> | <span style="background-color: rgba(91, 57, 243, 0.2)">**Configuration file format**</span> |
| z/OS | z/Operating System | IBM mainframe operating system |

#### References

#### Technical Specification Sources
- **Section 1.2 SYSTEM OVERVIEW** - Business context, system capabilities, and architectural approach
- **Section 3.1 PROGRAMMING LANGUAGES** - COBOL, JCL, and BMS implementation details
- **Section 3.2 FRAMEWORKS & LIBRARIES** - CICS Transaction Server and Language Environment usage
- **Section 3.3 DATABASES & STORAGE** - VSAM dataset organization and fixed-width file formats
- **Section 4.3 TECHNICAL IMPLEMENTATION** - Performance requirements and data validation patterns
- **Section 5.4 CROSS-CUTTING CONCERNS** - Error handling, authentication, and monitoring strategies
- **Section 6.4 SECURITY ARCHITECTURE** - RACF integration, authentication framework, and security controls
- **Section 8.1 DEPLOYMENT ENVIRONMENT** - Mainframe infrastructure and operational procedures

#### Repository Implementation Files
- `app/cbl/` directory (36 COBOL programs) - Complete program implementations with naming conventions
- `app/bms/` directory (18 BMS mapsets) - Screen definitions and user interface structures
- `app/cpy/` directory (28 copybooks) - Data structures and shared definitions
- `app/catlg/LISTCAT.txt` - VSAM dataset catalog information and file organization
- `app/data/ASCII/` directory (9 data files) - Sample data formats and ETL structures
- `README.md` - System overview and setup procedures documentation