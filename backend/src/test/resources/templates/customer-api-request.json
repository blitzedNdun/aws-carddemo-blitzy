{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Customer Management API Request Templates",
  "description": "JSON templates for customer management REST API requests including customer creation, update, and search operations matching BMS maps COUSR00/COUSR01/COUSR02/COUSR03 and customer data structure CVCUS01Y",
  
  "definitions": {
    "customerBase": {
      "type": "object",
      "properties": {
        "customerId": {
          "type": "string",
          "pattern": "^[0-9]{9}$",
          "description": "Customer ID must be exactly 9 digits",
          "example": "123456789"
        },
        "firstName": {
          "type": "string",
          "maxLength": 25,
          "minLength": 1,
          "description": "Customer first name - maximum 25 characters",
          "example": "John"
        },
        "middleName": {
          "type": "string",
          "maxLength": 25,
          "description": "Customer middle name - maximum 25 characters",
          "example": "Michael"
        },
        "lastName": {
          "type": "string",
          "maxLength": 25,
          "minLength": 1,
          "description": "Customer last name - maximum 25 characters",
          "example": "Smith"
        },
        "fullName": {
          "type": "string",
          "maxLength": 50,
          "description": "Combined name field for 50-character name requirement",
          "example": "John Michael Smith"
        },
        "address": {
          "type": "object",
          "properties": {
            "line1": {
              "type": "string",
              "maxLength": 50,
              "description": "Address line 1 - maximum 50 characters",
              "example": "123 Main Street"
            },
            "line2": {
              "type": "string",
              "maxLength": 50,
              "description": "Address line 2 - maximum 50 characters",
              "example": "Apartment 4B"
            },
            "line3": {
              "type": "string",
              "maxLength": 50,
              "description": "Address line 3 - maximum 50 characters",
              "example": ""
            },
            "line4": {
              "type": "string",
              "maxLength": 50,
              "description": "Address line 4 - supports 4 lines of 50 characters requirement",
              "example": ""
            },
            "state": {
              "type": "string",
              "maxLength": 2,
              "minLength": 2,
              "pattern": "^[A-Z]{2}$",
              "description": "State code - 2 uppercase characters",
              "example": "NY"
            },
            "country": {
              "type": "string",
              "maxLength": 3,
              "minLength": 2,
              "pattern": "^[A-Z]{2,3}$",
              "description": "Country code - 2 or 3 uppercase characters",
              "example": "USA"
            },
            "zipCode": {
              "type": "string",
              "maxLength": 10,
              "pattern": "^[0-9]{5}(-[0-9]{4})?$|^[A-Z0-9]{1,10}$",
              "description": "ZIP code - supports US format (12345 or 12345-6789) and international formats",
              "example": "10001-1234"
            }
          },
          "required": ["line1", "state", "zipCode"]
        },
        "phoneNumbers": {
          "type": "object",
          "properties": {
            "primary": {
              "type": "string",
              "maxLength": 15,
              "pattern": "^\\+?[1-9]\\d{1,14}$|^\\([0-9]{3}\\)\\s?[0-9]{3}-[0-9]{4}$|^[0-9]{3}-[0-9]{3}-[0-9]{4}$",
              "description": "Primary phone number - supports international formats (E.164) and US formats",
              "example": "+1-555-123-4567"
            },
            "secondary": {
              "type": "string",
              "maxLength": 15,
              "pattern": "^\\+?[1-9]\\d{1,14}$|^\\([0-9]{3}\\)\\s?[0-9]{3}-[0-9]{4}$|^[0-9]{3}-[0-9]{3}-[0-9]{4}$",
              "description": "Secondary phone number - supports international formats (E.164) and US formats",
              "example": "(555) 987-6543"
            }
          }
        },
        "ssn": {
          "type": "string",
          "pattern": "^[0-9]{3}-[0-9]{2}-[0-9]{4}$",
          "description": "SSN must match format XXX-XX-XXXX",
          "example": "123-45-6789"
        },
        "governmentIssuedId": {
          "type": "string",
          "maxLength": 20,
          "description": "Government issued ID - maximum 20 characters",
          "example": "DL123456789"
        },
        "dateOfBirth": {
          "type": "string",
          "pattern": "^[0-9]{4}-[0-9]{2}-[0-9]{2}$",
          "description": "Date of birth in YYYY-MM-DD format",
          "example": "1985-03-15"
        },
        "eftAccountId": {
          "type": "string",
          "maxLength": 10,
          "description": "EFT account ID - maximum 10 characters",
          "example": "EFT1234567"
        },
        "primaryCardHolderInd": {
          "type": "string",
          "enum": ["Y", "N"],
          "description": "Primary card holder indicator - Y or N",
          "example": "Y"
        },
        "ficoScore": {
          "type": "integer",
          "minimum": 300,
          "maximum": 850,
          "description": "FICO credit score ranging from 300-850",
          "example": 750
        }
      }
    }
  },

  "templates": {
    "createCustomerRequest": {
      "allOf": [
        {"$ref": "#/definitions/customerBase"},
        {
          "required": [
            "customerId",
            "firstName", 
            "lastName",
            "address",
            "ssn",
            "dateOfBirth"
          ],
          "properties": {
            "operation": {
              "type": "string",
              "enum": ["CREATE"],
              "description": "Operation type for customer creation"
            }
          }
        }
      ],
      "example": {
        "operation": "CREATE",
        "customerId": "123456789",
        "firstName": "John",
        "middleName": "Michael",
        "lastName": "Smith",
        "fullName": "John Michael Smith",
        "address": {
          "line1": "123 Main Street",
          "line2": "Apartment 4B",
          "line3": "",
          "line4": "",
          "state": "NY",
          "country": "USA",
          "zipCode": "10001-1234"
        },
        "phoneNumbers": {
          "primary": "+1-555-123-4567",
          "secondary": "(555) 987-6543"
        },
        "ssn": "123-45-6789",
        "governmentIssuedId": "DL123456789",
        "dateOfBirth": "1985-03-15",
        "eftAccountId": "EFT1234567",
        "primaryCardHolderInd": "Y",
        "ficoScore": 750
      }
    },

    "updateCustomerRequest": {
      "allOf": [
        {"$ref": "#/definitions/customerBase"},
        {
          "required": ["customerId"],
          "properties": {
            "operation": {
              "type": "string",
              "enum": ["UPDATE"],
              "description": "Operation type for customer update"
            }
          }
        }
      ],
      "example": {
        "operation": "UPDATE",
        "customerId": "123456789",
        "firstName": "Jonathan",
        "lastName": "Smith",
        "address": {
          "line1": "456 Oak Avenue",
          "line2": "Suite 100",
          "line3": "",
          "line4": "",
          "state": "CA",
          "country": "USA",
          "zipCode": "90210"
        },
        "phoneNumbers": {
          "primary": "+1-555-987-6543"
        },
        "ficoScore": 780
      }
    },

    "searchCustomerRequest": {
      "type": "object",
      "properties": {
        "operation": {
          "type": "string",
          "enum": ["SEARCH"],
          "description": "Operation type for customer search"
        },
        "searchCriteria": {
          "type": "object",
          "properties": {
            "customerId": {
              "type": "string",
              "pattern": "^[0-9]{9}$",
              "description": "Search by exact customer ID - 9 digits"
            },
            "customerIdPattern": {
              "type": "string",
              "pattern": "^[0-9*]{1,9}$",
              "description": "Search by customer ID pattern (supports wildcards with *)"
            },
            "firstName": {
              "type": "string",
              "maxLength": 25,
              "description": "Search by first name - partial match supported"
            },
            "lastName": {
              "type": "string",
              "maxLength": 25,
              "description": "Search by last name - partial match supported"
            },
            "ssn": {
              "type": "string",
              "pattern": "^[0-9]{3}-[0-9]{2}-[0-9]{4}$",
              "description": "Search by exact SSN in XXX-XX-XXXX format"
            },
            "phoneNumber": {
              "type": "string",
              "maxLength": 15,
              "description": "Search by phone number - supports various formats"
            },
            "state": {
              "type": "string",
              "pattern": "^[A-Z]{2}$",
              "description": "Search by state code"
            },
            "zipCode": {
              "type": "string",
              "maxLength": 10,
              "description": "Search by ZIP code"
            },
            "ficoScoreRange": {
              "type": "object",
              "properties": {
                "min": {
                  "type": "integer",
                  "minimum": 300,
                  "maximum": 850
                },
                "max": {
                  "type": "integer",
                  "minimum": 300,
                  "maximum": 850
                }
              },
              "description": "Search by FICO score range"
            }
          },
          "anyOf": [
            {"required": ["customerId"]},
            {"required": ["customerIdPattern"]},
            {"required": ["firstName"]},
            {"required": ["lastName"]},
            {"required": ["ssn"]},
            {"required": ["phoneNumber"]},
            {"required": ["state"]},
            {"required": ["zipCode"]},
            {"required": ["ficoScoreRange"]}
          ]
        },
        "pagination": {
          "type": "object",
          "properties": {
            "page": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "description": "Page number (0-based)"
            },
            "size": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 10,
              "description": "Number of records per page (1-100)"
            },
            "sort": {
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^(customerId|firstName|lastName|ficoScore|dateOfBirth)(,(asc|desc))?$"
              },
              "description": "Sort criteria - fieldName,direction (asc/desc)"
            }
          }
        }
      },
      "required": ["operation", "searchCriteria"],
      "examples": [
        {
          "operation": "SEARCH",
          "searchCriteria": {
            "customerId": "123456789"
          }
        },
        {
          "operation": "SEARCH",
          "searchCriteria": {
            "customerIdPattern": "12345*"
          },
          "pagination": {
            "page": 0,
            "size": 10,
            "sort": ["customerId,asc"]
          }
        },
        {
          "operation": "SEARCH",
          "searchCriteria": {
            "lastName": "Smith",
            "state": "NY"
          },
          "pagination": {
            "page": 0,
            "size": 20,
            "sort": ["lastName,asc", "firstName,asc"]
          }
        },
        {
          "operation": "SEARCH",
          "searchCriteria": {
            "ficoScoreRange": {
              "min": 700,
              "max": 850
            }
          }
        }
      ]
    },

    "deleteCustomerRequest": {
      "type": "object",
      "required": ["operation", "customerId"],
      "properties": {
        "operation": {
          "type": "string",
          "enum": ["DELETE"],
          "description": "Operation type for customer deletion"
        },
        "customerId": {
          "type": "string",
          "pattern": "^[0-9]{9}$",
          "description": "Customer ID must be exactly 9 digits"
        },
        "confirmDeletion": {
          "type": "boolean",
          "description": "Confirmation flag for deletion operation",
          "default": false
        }
      },
      "example": {
        "operation": "DELETE",
        "customerId": "123456789",
        "confirmDeletion": true
      }
    }
  },

  "validationRules": {
    "customerIdValidation": {
      "description": "Customer IDs must be exactly 9 digits",
      "pattern": "^[0-9]{9}$"
    },
    "ssnValidation": {
      "description": "SSN must match format XXX-XX-XXXX",
      "pattern": "^[0-9]{3}-[0-9]{2}-[0-9]{4}$"
    },
    "phoneValidation": {
      "description": "Phone numbers must support international formats including E.164 (+1234567890) and US formats",
      "patterns": [
        "^\\+?[1-9]\\d{1,14}$",
        "^\\([0-9]{3}\\)\\s?[0-9]{3}-[0-9]{4}$",
        "^[0-9]{3}-[0-9]{3}-[0-9]{4}$"
      ]
    },
    "addressValidation": {
      "description": "Address must support 4 lines of 50 characters each",
      "maxLineLength": 50,
      "maxLines": 4
    },
    "nameValidation": {
      "description": "Name fields support both individual components (25 chars each) and combined field (50 chars)",
      "maxIndividualLength": 25,
      "maxCombinedLength": 50
    },
    "ficoScoreValidation": {
      "description": "FICO score must range from 300-850",
      "minimum": 300,
      "maximum": 850
    }
  }
}